"use strict";!function(a){var b=a.$,c=b.each,d=a.dataSource,e=d.utils,f=e.safeEach,g=a.constants,h=g.DISPLAY_TYPES,i=g.MIME_TYPES,j=g.HTTP_VERBS,k=g.DATASOURCE,l=a.utils,m=l.getObjectProperty,n=l.setObjectProperty,o=i.JSON,p="https://www.googleapis.com/auth/calendar",q=k.SEARCH_CONDITION,r=h.BOOLEAN,s=h.DATE,t=h.DATETIME,u=h.PICKLIST,v=h.STRING,w=j.GET,x=j.PATCH,y=j.POST,z=j.DELETE,A=["timeZone","dateTime","date"],B=["self","displayName","email"],C=[{parent:"start",subfields:A},{parent:"end",subfields:A},{parent:"originalStartTime",subfields:A},{parent:"organizer",subfields:B},{parent:"creator",subfields:B}],D=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},E=function(a){c(C,function(b,d){c(d.subfields,function(b,c){var e=d.parent+"."+c;a[d.parent+D(c)]=m(a,e)})})},F=function(a){c(C,function(b,d){c(d.subfields,function(b,c){var e=d.parent+"."+c;n(a,e,a[d.parent+D(c)])})})},G=function(a){function b(a){return a.charAt(0).toUpperCase()+a.slice(1)}var d={},e={};return c(C,function(f,g){c(g.subfields,function(c,f){var h=g.parent+"."+f;e[g.parent+b(f)]=!0,d[h]=a[g.parent+b(f)]})}),c(a,function(a,b){e[a]||(d[a]=b)}),d},H=function(a,b){if(!a)return"";"Event"===b&&(a=G(a));var d={};c(a,function(a,b){if(!b||!b.uiOnly)return!!m(d,a)||void n(d,a,0)});return function e(a){var b=[];return c(a,function(a,c){c?b.push(a+"("+e(c)+")"):b.push(a)}),b.join(",")}(d)};d.getDataSourceType("GoogleCalendar")||new d.core.RESTDataSourceTypeBase({name:"GoogleCalendar",coerceRequest:function(d){var f,g,h=d.type,i=d.model,j=d.row,k=this.getEntityMetadataCacheKey(i),l=this.prop("x-metadata")[k],o=l.methods[h],p=o.pathToContent?o.pathToContent+"({0})":"{0}",r=d.request.data,s=d.parameters||(d.parameters={}),t="insert"===h,u="update"===h,v="query"===h,w=e.getModelMergeConditions(i,d,{urlEncode:!1});v?(s.fields=p.replace("{0}",H(i.fieldsMap,k)),"Event"===k&&(f=a.time.resolveDateKeyword(w.timeMin),f=b.isArray(f)&&f.length?f[0].toISOString():w.timeMin,g=a.time.resolveDateKeyword(w.timeMax),g=b.isArray(g)&&g.length>1?g[1].toISOString():w.timeMax,s.timeMin=f,s.timeMax=g,s.singleEvents="true",s.orderBy="startTime",w[q]&&(s.q=w[q]))):(t||u)&&(F(r),c(l.fields.filter(function(a){return a["x-alwaysinclude"]}),function(a,b){n(r,b.id,m(j,b.id))}))},parseSuccessfulLoadResponse:function(a,b,c){var d=l.isString(a.body)?JSON.parse(a.body):a.body,e=b.pathToContent,g=e?l.getObjectProperty(d,e):d;c.data=g,f(g,function(a,b){E(b)})},queryEntityMetadata:e.queryEntityMetadataStatic,getEntityList:e.getEntityListStatic,extendedProperties:{composer:{unomittableFields:!0,hasEntityOptions:!0},hasDefaultSearch:!0,canServerSearch:!0,hasGlobalSearchEntities:!0,"x-metadata":{__skuid_fieldDefaults:{"*":{displaytype:v,editable:!0,createable:!0,filterable:!1,accessible:!0}},Calendar:{idFields:["id"],nameField:"summary",label:"Calendar",labelPlural:"Calendars",fields:[{id:"id",inlineHelpText:"Identifier of the calendar.",writable:!1,omittable:!1},{id:"summary",label:"Title",inlineHelpText:"Title of the calendar.",required:!0,omittable:!1,"x-alwaysinclude":!0},{id:"description",inlineHelpText:"Description of the calendar."},{id:"etag",inlineHelpText:"ETag of the resource.",writable:!1},{id:"location",inlineHelpText:"Geographic location of the calendar as free-form text."},{id:"timeZone",inlineHelpText:'The time zone of the calendar. (Formatted as an IANA Time Zone Database name, e.g. "Europe/Zurich".)'}],methods:{query:{url:"/users/me/calendarList",verb:w,scopes:[p],contentType:o,pathToContent:"items"},insert:{url:"/calendars",verb:y,scopes:[p],contentType:o,receiveDataAs:"recordinbody",successIf:"responsefieldispresent",successField:"id"},update:{url:"/calendars/{{id}}",verb:x,scopes:[p],contentType:o,receiveDataAs:"recordinbody",successIf:"responsefieldispresent",successField:"id"},"delete":{url:"/calendars/{{id}}",verb:z,scopes:[p],successIf:"requestsucceeds"}}},Event:{idFields:["id"],nameField:"summary",label:"Event",labelPlural:"Events",fields:[{id:"id",inlineHelpText:"Opaque identifier of the event. When creating new single or recurring events, you can specify their IDs. Provided IDs must follow these rules:  characters allowed in the ID are those used in base32hex encoding, i.e. lowercase letters a-v and digits 0-9, see section 3.1.2 in RFC2938 the length of the ID must be between 5 and 1024 characters the ID must be unique per calendar  Due to the globally distributed nature of the system, we cannot guarantee that ID collisions will be detected at event creation time. To minimize the risk of collisions we recommend using an established UUID algorithm such as one described in RFC4122.  If you do not specify an ID, it will be automatically generated by the server.  Note that the icalUID and the id are not identical and only one of them should be supplied at event creation time. One difference in their semantics is that in recurring events, all occurrences of one event have different ids while they all share the same icalUIDs.",omittable:!1},{id:"summary",inlineHelpText:"Title of the event.",omittable:!1},{id:"colorId",inlineHelpText:"The color of the event. This is an ID referring to an entry in the event section of the colors definition (see the  colors endpoint). Optional."},{id:"created",displaytype:t,inlineHelpText:"Creation time of the event (as a RFC3339 timestamp). Read-only.",writable:!1},{id:"creatorDisplayName",inlineHelpText:"The creator's name, if available.",writable:!1},{id:"creatorEmail",inlineHelpText:"The creator's email address, if available.",writable:!1},{id:"creatorSelf",displaytype:r,inlineHelpText:"Whether the creator corresponds to the calendar on which this copy of the event appears. Read-only. The default is False.",writable:!1},{id:"description",inlineHelpText:"Description of the event. Optional."},{id:"endDate",displaytype:s,inlineHelpText:'The date, in the format "yyyy-mm-dd", if this is an all-day event.'},{id:"endDateTime","x-alwaysinclude":!0,displaytype:t,inlineHelpText:"The time, as a combined date-time value (formatted according to RFC3339). A time zone offset is required unless a time zone is explicitly specified in timeZone."},{id:"endTimeZone",inlineHelpText:'The time zone in which the time is specified. (Formatted as an IANA Time Zone Database name, e.g. "Europe/Zurich".) For recurring events this field is required and specifies the time zone in which the recurrence is expanded. For single events this field is optional and indicates a custom time zone for the event start/end.'},{id:"endTimeUnspecified",displaytype:r,inlineHelpText:"Whether the end time is actually unspecified. An end time is still provided for compatibility reasons, even if this attribute is set to True. The default is False.",writable:!1},{id:"etag",inlineHelpText:"ETag of the resource.",writable:!1},{id:"hangoutLink",inlineHelpText:"An absolute link to the Google+ hangout associated with this event. Read-only.",writable:!1},{id:"htmlLink",inlineHelpText:"An absolute link to this event in the Google Calendar Web UI. Read-only.",writable:!1},{id:"iCalUID",label:"iCal UID",inlineHelpText:"Event unique identifier as defined in RFC5545. It is used to uniquely identify events accross calendaring systems and must be supplied when importing events via the import method.  Note that the icalUID and the id are not identical and only one of them should be supplied at event creation time. One difference in their semantics is that in recurring events, all occurrences of one event have different ids while they all share the same icalUIDs.",writable:!1},{id:"location",inlineHelpText:"Geographic location of the event as free-form text. Optional."},{id:"locked",displaytype:r,inlineHelpText:'Whether this is a locked event copy where no changes can be made to the main event fields "summary", "description", "location", "start", "end" or "recurrence". The default is False. Read-Only.',writable:!1},{id:"organizerDisplayName",inlineHelpText:"The organizer's name, if available."},{id:"organizerEmail",inlineHelpText:"The organizer's email address, if available. It must be a valid email address as per RFC5322."},{id:"organizerSelf",displaytype:r,inlineHelpText:"Whether the organizer corresponds to the calendar on which this copy of the event appears. Read-only. The default is False.",writable:!1},{id:"originalStartTimeDate",displaytype:s,inlineHelpText:'The date, in the format "yyyy-mm-dd", if this is an all-day event.'},{id:"originalStartTimeDateTime",displaytype:t,inlineHelpText:"The time, as a combined date-time value (formatted according to RFC3339). A time zone offset is required unless a time zone is explicitly specified in timeZone."},{id:"originalStartTimeTimeZone",inlineHelpText:'The time zone in which the time is specified. (Formatted as an IANA Time Zone Database name, e.g. "Europe/Zurich".) For recurring events this field is required and specifies the time zone in which the recurrence is expanded. For single events this field is optional and indicates a custom time zone for the event start/end.'},{id:"startDate",displaytype:s,inlineHelpText:'The date, in the format "yyyy-mm-dd", if this is an all-day event.'},{id:"startDateTime","x-alwaysinclude":!0,displaytype:t,inlineHelpText:"The time, as a combined date-time value (formatted according to RFC3339). A time zone offset is required unless a time zone is explicitly specified in timeZone."},{id:"startTimeZone",inlineHelpText:'The time zone in which the time is specified. (Formatted as an IANA Time Zone Database name, e.g. "Europe/Zurich".) For recurring events this field is required and specifies the time zone in which the recurrence is expanded. For single events this field is optional and indicates a custom time zone for the event start/end.'},{id:"status",inlineHelpText:'Status of the event. Optional. Possible values are:  "confirmed" - The event is confirmed. This is the default status. "tentative" - The event is tentatively confirmed. "cancelled" - The event is cancelled. '},{id:"transparency",displaytype:u,inlineHelpText:'Whether the event blocks time on the calendar. Optional. Possible values are:  "opaque" - The event blocks time on the calendar. This is the default value. "transparent" - The event does not block time on the calendar. ',options:[{label:"Opaque",value:"opaque"},{label:"Transparent",value:"transparent"}]},{id:"updated",displaytype:t,inlineHelpText:"Last modification time of the event (as a RFC3339 timestamp). Read-only.",writable:!1},{id:"visibility",displaytype:u,inlineHelpText:'Visibility of the event. Optional. Possible values are:  "default" - Uses the default visibility for events on the calendar. This is the default value. "public" - The event is public and event details are visible to all readers of the calendar. "private" - The event is private and only event attendees may view event details. "confidential" - The event is private. This value is provided for compatibility reasons. ',options:[{label:"Default",value:"default"},{label:"Public",value:"public"},{label:"Private",value:"private"},{label:"Confidential",value:"confidential"}]}],methods:{query:{url:"/calendars/{{calendarId}}/events",verb:w,scopes:[p],contentType:o,pathToContent:"items"},insert:{url:"/calendars/{{calendarId}}/events",verb:y,scopes:[p],contentType:o,receiveDataAs:"recordinbody",successIf:"responsefieldispresent",successField:"id"},update:{url:"/calendars/{{calendarId}}/events/{{id}}",verb:x,scopes:[p],contentType:o,receiveDataAs:"recordinbody",successIf:"responsefieldispresent",successField:"id"},"delete":{url:"/calendars/{{calendarId}}/events/{{id}}",verb:z,scopes:[p],successIf:"requestsucceeds"},search:{url:"/calendars/primary/events?q={{search}}",verb:w,scopes:[p],contentType:o,pathToContent:"items"}},defaultConditions:[{sourcetype:"param",sourceparam:"calendarId",name:"calendarId",label:"Calendar ID",state:"filterablerequired",type:"fieldvalue",required:!0,value:"primary"},{sourcetype:"param",sourceparam:"timeMin",name:"timeMin",label:"Date Range Start (timeMin)",state:"filterableon",type:"fieldvalue",required:!0,value:"LAST_N_WEEKS:5"},{sourcetype:"param",sourceparam:"timeMax",name:"timeMax",label:"Date Range End (timeMax)",state:"filterableon",type:"fieldvalue",required:!0,value:"NEXT_N_WEEKS:5"}]}}}})}(skuid);