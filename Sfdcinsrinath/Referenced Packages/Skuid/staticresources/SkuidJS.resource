"use strict";if(Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on non-object");var f=[];for(var g in e)a.call(e,g)&&f.push(g);if(b)for(var h=0;h<d;h++)a.call(e,c[h])&&f.push(c[h]);return f}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&d!=Infinity&&d!=-Infinity&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);e<c;e++)if(e in b&&b[e]===a)return e;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=c;arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!=d&&d!=1/0&&d!=-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d))));for(var e=d>=0?Math.min(d,c-1):c-Math.abs(d);e>=0;e--)if(e in b&&b[e]===a)return e;return-1}),Array.prototype.filter||(Array.prototype.filter=function(a){if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments[1],f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null==this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=0;f>d;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}}),Array.prototype.reduce||(Array.prototype.reduce=function(a){if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var b,c=Object(this),d=c.length>>>0,e=0;if(2==arguments.length)b=arguments[1];else{for(;d>e&&!(e in c);)e++;if(e>=d)throw new TypeError("Reduce of empty array with no initial value");b=c[e++]}for(;d>e;e++)e in c&&(b=a(b,c[e],e,c));return b}),Array.prototype.map||(Array.prototype.map=function(a,b){var c,d,e;if(null==this)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=new Array(g),e=0;e<g;){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d}),Date.now||(Date.now=function(){return(new Date).getTime()}),String.prototype.startsWith||(String.prototype.startsWith=function(a,b){return b=b||0,this.substr(b,a.length)===a}),function(a){a&&a.prototype&&null==a.prototype.firstElementChild&&Object.defineProperty(a.prototype,"firstElementChild",{get:function(){for(var a,b=this.childNodes,c=0;a=b[c++];)if(1===a.nodeType)return a;return null}})}(window.Node||window.Element),window.skuid||(window.skuid={}),function(a){if(!a.console){var b=a.console={};b.warn=b.info=b.error=b.trace=b.log=b.time=b.timeEnd=function(){}}if("object"!=typeof JSON)throw a.alert("Skuid cannot run in this Web Browser. Please make sure you are using Internet Explorer 8 or higher and are not in Compatibility Mode."),"Unsupported browser."}(window),!skuid.$){!function(a,b){var c;c=c||function(a){var b,c=String.prototype.split,d=/()??/.exec("")[1]===a;return b=function(b,e,f){if("[object RegExp]"!==Object.prototype.toString.call(e))return c.call(b,e,f);var g,h,i,j,k=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),m=0,e=new RegExp(e.source,l+"g");for(b+="",d||(g=new RegExp("^"+e.source+"$(?!\\s)",l)),f=f===a?-1>>>0:f>>>0;(h=e.exec(b))&&!((i=h.index+h[0].length)>m&&(k.push(b.slice(m,h.index)),!d&&h.length>1&&h[0].replace(g,function(){for(var b=1;b<arguments.length-2;b++)arguments[b]===a&&(h[b]=a)}),h.length>1&&h.index<b.length&&Array.prototype.push.apply(k,h.slice(1)),j=h[0].length,m=i,k.length>=f));)e.lastIndex===h.index&&e.lastIndex++;return m===b.length?(j||!e.test(""))&&k.push(""):k.push(b.slice(m)),k.length>f?k.slice(0,f):k},String.prototype.split=function(a,c){return b(this,a,c)},b}(),function(a,b){if("object"==typeof d&&d)b(d);else{var c={};b(c),"function"==typeof define&&define.amd?define(c):a.Mustache=c}}(window,function(a){function b(a,b){return t.call(a,b)}function c(a){return!b(p,a)}function d(a){return"function"==typeof a}function e(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function f(a){return String(a).replace(/[&<>"'\/]/g,function(a){return w[a]})}function g(a){if(!v(a)||2!==a.length)throw new Error("Invalid tags: "+a);return[new RegExp(e(a[0])+"\\s*"),new RegExp("\\s*"+e(a[1]))]}function h(b,d){d=d||a.tags,b=b||"","string"==typeof d&&(d=d.split(o));for(var f,h,l,m,p,t,u=g(d),v=new k(b),w=[],x=[],y=[],z=!1,A=!1;!v.eos();){if(f=v.pos,l=v.scanUntil(u[0]))for(var B=0,C=l.length;C>B;++B)m=l.charAt(B),c(m)?y.push(x.length):A=!0,x.push(["text",m,f,f+1]),f+=1,"\n"===m&&function(){if(z&&!A)for(;y.length;)delete x[y.pop()];else y=[];z=!1,A=!1}();if(!v.scan(u[0]))break;if(z=!0,h=v.scan(s)||"name",v.scan(n),"="===h?(l=v.scanUntil(q),v.scan(q),v.scanUntil(u[1])):"{"===h?(l=v.scanUntil(new RegExp("\\s*"+e("}"+d[1]))),v.scan(r),v.scanUntil(u[1]),h="&"):l=v.scanUntil(u[1]),!v.scan(u[1]))throw new Error("Unclosed tag at "+v.pos);if(p=[h,l,f,v.pos],x.push(p),"#"===h||"^"===h)w.push(p);else if("/"===h){if(!(t=w.pop()))throw new Error('Unopened section "'+l+'" at '+f);if(t[1]!==l)throw new Error('Unclosed section "'+t[1]+'" at '+f)}else"name"===h||"{"===h||"&"===h?A=!0:"="===h&&(u=g(d=l.split(o)))}if(t=w.pop())throw new Error('Unclosed section "'+t[1]+'" at '+v.pos);return j(i(x))}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)(b=a[e])&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function j(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function k(a){this.string=a,this.tail=a,this.pos=0}function l(a,b){this.view=null==a?{}:a,this.cache={".":this.view},this.parent=b}function m(){this.cache={}}var n=/\s*/,o=/\s+/,p=/\S/,q=/\s*=/,r=/\s*\}/,s=/#|\^|\/|>|\{|&|=|!/,t=RegExp.prototype.test,u=Object.prototype.toString,v=Array.isArray||function(a){return"[object Array]"===u.call(a)},w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};k.prototype.eos=function(){return""===this.tail},k.prototype.scan=function(a){var b=this.tail.match(a);if(b&&0===b.index){var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c}return""},k.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},l.prototype.push=function(a){return new l(a,this)},l.prototype.lookup=function(a){var b;if(a in this.cache)b=this.cache[a];else{for(var c=this;c;){if(a.indexOf(".")>0){b=c.view;for(var e=a.split("."),f=0;null!=b&&f<e.length;)b=b[e[f++]]}else b=c.view[a];if(null!=b)break;c=c.parent}this.cache[a]=b}return d(b)&&(b=b.call(this.view)),b},m.prototype.clearCache=function(){this.cache={}},m.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=h(a,b)),d},m.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof l?b:new l(b);return this.renderTokens(d,e,c,a)},m.prototype.renderTokens=function(b,c,e,f){function g(a){return k.render(a,c,e)}for(var h,i,j="",k=this,l=0,m=b.length;m>l;++l)switch(h=b[l],h[0]){case"#":if(!(i=c.lookup(h[1])))continue;if(v(i))for(var n=0,o=i.length;o>n;++n)j+=this.renderTokens(h[4],c.push(i[n]),e,f);else if("object"==typeof i||"string"==typeof i)j+=this.renderTokens(h[4],c.push(i),e,f);else if(d(i)){if("string"!=typeof f)throw new Error("Cannot use higher-order sections without the original template");null!=(i=i.call(c.view,f.slice(h[3],h[5]),g))&&(j+=i)}else j+=this.renderTokens(h[4],c,e,f);break;case"^":(!(i=c.lookup(h[1]))||v(i)&&0===i.length)&&(j+=this.renderTokens(h[4],c,e,f));break;case">":if(!e)continue;null!=(i=this.parse(d(e)?e(h[1]):e[h[1]]))&&(j+=this.renderTokens(i,c,e,f));break;case"&":null!=(i=c.lookup(h[1]))&&(j+=i);break;case"name":null!=(i=c.lookup(h[1]))&&(j+=a.escape(i));break;case"text":j+=h[1]}return j},a.name="mustache.js",a.version="0.8.0",a.tags=["{{","}}"];var x=new m;a.clearCache=function(){return x.clearCache()},a.parse=function(a,b){return x.parse(a,b)},a.render=function(a,b,c){return x.render(a,b,c)},a.to_html=function(b,c,e,f){var g=a.render(b,c,e);return d(f)?void f(g):g},a.escape=f,a.Scanner=k,a.Context=l,a.Writer=m});!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof d?module.exports=b():a.NProgress=b()}(window,function(){function a(a,b,c){return b>a?b:a>c?c:a}function b(a){return 100*(-1+a)}function c(a,c,d){var e;return e="translate3d"===j.positionUsing?{transform:"translate3d("+b(a)+"%,0,0)"}:"translate"===j.positionUsing?{transform:"translate("+b(a)+"%,0)"}:{"margin-left":b(a)+"%"},e.transition="all "+c+"ms "+d,e}function d(a,b){return("string"==typeof a?a:g(a)).indexOf(" "+b+" ")>=0}function e(a,b){var c=g(a),e=c+b;d(c,b)||(a.className=e.substring(1))}function f(a,b){var c,e=g(a);d(a,b)&&(c=e.replace(" "+b+" "," "),a.className=c.substring(1,c.length-1))}function g(a){return(" "+(a&&a.className||"")+" ").replace(/\s+/gi," ")}function h(a){a&&a.parentNode&&a.parentNode.removeChild(a)}var i={};i.version="0.2.0";var j=i.settings={minimum:.08,easing:"linear",positionUsing:"",speed:200,trickle:!0,trickleSpeed:200,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};i.configure=function(a){var b,c;for(b in a)void 0!==(c=a[b])&&a.hasOwnProperty(b)&&(j[b]=c);return this},i.status=null,i.set=function(b){var d=i.isStarted();b=a(b,j.minimum,1),i.status=1===b?null:b;var e=i.render(!d),f=e.querySelector(j.barSelector),g=j.speed,h=j.easing;return e.offsetWidth,k(function(a){""===j.positionUsing&&(j.positionUsing=i.getPositioningCSS()),l(f,c(b,g,h)),1===b?(l(e,{transition:"none",opacity:1}),e.offsetWidth,setTimeout(function(){l(e,{transition:"all "+g+"ms linear",opacity:0}),setTimeout(function(){i.remove(),a()},g)},g)):setTimeout(a,g)}),this},i.isStarted=function(){return"number"==typeof i.status},i.start=function(){i.status||i.set(0);var a=function(){setTimeout(function(){i.status&&(i.trickle(),a())},j.trickleSpeed)};return j.trickle&&a(),this},i.done=function(a){return a||i.status?i.inc(.3+.5*Math.random()).set(1):this},i.inc=function(b){var c=i.status;return c?c>1?void 0:("number"!=typeof b&&(b=c>=0&&.2>c?.1:c>=.2&&.5>c?.04:c>=.5&&.8>c?.02:c>=.8&&.99>c?.005:0),c=a(c+b,0,.994),i.set(c)):i.start()},i.trickle=function(){return i.inc()},function(){var a=0,b=0;i.promise=function(c){return c&&"resolved"!==c.state()?(0===b&&i.start(),a++,b++,c.always(function(){b--,0===b?(a=0,i.done()):i.set((a-b)/a)}),this):this}}(),i.render=function(a){if(i.isRendered())return document.getElementById("sk-nprogress");e(document.documentElement,"sk-nprogress-busy");var c=document.createElement("div");c.id="sk-nprogress",c.innerHTML=j.template;var d,f=c.querySelector(j.barSelector),g=a?"-100":b(i.status||0),k=document.querySelector(j.parent);return l(f,{transition:"all 0 linear",transform:"translate3d("+g+"%,0,0)"}),j.showSpinner||(d=c.querySelector(j.spinnerSelector))&&h(d),k!=document.body&&e(k,"sk-nprogress-custom-parent"),k.appendChild(c),c},i.remove=function(){f(document.documentElement,"sk-nprogress-busy"),f(document.querySelector(j.parent),"sk-nprogress-custom-parent");var a=document.getElementById("sk-nprogress");a&&h(a)},i.isRendered=function(){return!!document.getElementById("sk-nprogress")},i.getPositioningCSS=function(){var a=document.body.style,b="WebkitTransform"in a?"Webkit":"MozTransform"in a?"Moz":"msTransform"in a?"ms":"OTransform"in a?"O":"";return b+"Perspective"in a?"translate3d":b+"Transform"in a?"translate":"margin"};var k=function(){function a(){var c=b.shift();c&&c(a)}var b=[];return function(c){b.push(c),1==b.length&&a()}}(),l=function(){function a(a){return a.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()})}function b(a){var b=document.body.style;if(a in b)return a;for(var c,d=e.length,f=a.charAt(0).toUpperCase()+a.slice(1);d--;)if((c=e[d]+f)in b)return c;return a}function c(c){return c=a(c),f[c]||(f[c]=b(c))}function d(a,b,d){b=c(b),a.style[b]=d}var e=["Webkit","O","Moz","ms"],f={};return function(a,b){var c,e,f=arguments;if(2==f.length)for(c in b)void 0!==(e=b[c])&&b.hasOwnProperty(c)&&d(a,c,e);else d(a,f[1],f[2])}}();return i});var d=a,e=window.Mustache;window.$j=d.$=d.jQuery=b.noConflict(),d.Mustache=window.Mustache,d.NProgress=window.NProgress,e?(window.Mustache=e,e=null):(delete window.Mustache,delete window.NProgress),function(a){function b(b){if("string"==typeof b.data&&(b.data={keys:b.data}),b.data&&b.data.keys&&"string"==typeof b.data.keys){var c=b.handler,d=b.data.keys.toLowerCase().split(" ");b.handler=function(e){if(this===e.target||!b.data.filterTextInputs||!(a.inArray(e.target.type,a.hotkeys.textAcceptingInputTypes)>-1||/textarea|select/i.test(e.target.nodeName))){var f=a.hotkeys.specialKeys[e.keyCode],g=String.fromCharCode(e.which).toLowerCase(),h="",i={};a.each(["alt","ctrl","meta","shift"],function(a,b){e[b+"Key"]&&f!==b&&(h+=b+"+")}),h=h.replace("alt+ctrl+meta+shift","hyper"),f&&(i[h+f]=!0),g&&(i[h+g]=!0,i[h+a.hotkeys.shiftNums[g]]=!0,"shift+"===h&&(i[a.hotkeys.shiftNums[g]]=!0));for(var j=0,k=d.length;j<k;j++)if(i[d[j]])return c.apply(this,arguments)}}}}a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"]},a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:b}})}(b),function(a){a.datepicker.parseDate=function(b,c,d){if(null==b||null==c)throw"Invalid arguments";if(""===(c="object"==typeof c?c.toString():c+""))return null;var e,f,g,h,i=0,j=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,k="string"!=typeof j?j:(new Date).getFullYear()%100+parseInt(j,10),l=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,m=(d?d.dayNames:null)||this._defaults.dayNames,n=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,o=(d?d.monthNames:null)||this._defaults.monthNames,p=-1,q=-1,r=-1,s=-1,t=!1,u=function(a){var c=e+1<b.length&&b.charAt(e+1)===a;return c&&e++,c},v=function(a){var b=u(a),d="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=c.substring(i).match(e);if(!f)throw"Missing number at position "+i;return i+=f[0].length,parseInt(f[0],10)},w=function(b,d,e){var f=-1,g=a.map(u(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});if(a.each(g,function(a,b){var d=b[1];if(c.substr(i,d.length).toLowerCase()===d.toLowerCase())return f=b[0],i+=d.length,!1}),-1!==f)return f+1;throw"Unknown name at position "+i},x=function(){if(c.charAt(i)!==b.charAt(e))throw"Unexpected literal at position "+i;i++};for(e=0;e<b.length;e++)if(t)"'"!==b.charAt(e)||u("'")?x():t=!1;else switch(b.charAt(e)){case"d":r=v("d");break;case"D":w("D",l,m);break;case"o":s=v("o");break;case"m":q=v("m");break;case"M":q=w("M",n,o);break;case"y":p=v("y");break;case"@":h=new Date(v("@")),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"!":h=new Date((v("!")-this._ticksTo1970)/1e4),p=h.getFullYear(),q=h.getMonth()+1,r=h.getDate();break;case"'":u("'")?x():t=!0;break;default:x()}if(i<c.length&&(g=c.substr(i),!/^\s+/.test(g)))throw"Extra/unparsed characters found in date: "+g;if(-1===p?p=(new Date).getFullYear():p<100&&(p+=(new Date).getFullYear()-(new Date).getFullYear()%100+(p<=k?0:-100)),s>-1)for(q=1,r=s;;){if(f=this._getDaysInMonth(p,q-1),r<=f)break;q++,r-=f}if(h=this._daylightSavingAdjust(new Date(p,q-1,r)),h.getFullYear()!==p||h.getMonth()+1!==q||h.getDate()!==r)throw"Invalid date";return h}}(b),function(a){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],a):a(b)}(function(a){function b(a){return a}function c(a){return decodeURIComponent(a.replace(e," "))}function d(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return f.json?JSON.parse(a):a}catch(e){}}var e=/\+/g,f=a.cookie=function(e,g,h){if(void 0!==g){if(h=a.extend({},f.defaults,h),"number"==typeof h.expires){var i=h.expires,j=h.expires=new Date;j.setDate(j.getDate()+i)}return g=f.json?JSON.stringify(g):g+"",document.cookie=[encodeURIComponent(e),"=",f.raw?g:encodeURIComponent(g),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}for(var k=f.raw?b:c,l=document.cookie.split("; "),m=e?void 0:{},n=0,o=l.length;o>n;n++){var p=l[n].split("="),q=k(p.shift()),r=k(p.join("="));if(e&&e===q){m=d(r);break}e||(m[q]=d(r))}return m};f.defaults={},a.removeCookie=function(b,c){return void 0!==a.cookie(b)&&(a.cookie(b,"",a.extend(c,{expires:-1})),!0)}}),function(){function a(a){function b(b,d){var f,p,q=b==window,r=d&&void 0!==d.message?d.message:void 0;if(d=a.extend({},a.blockUI.defaults,d||{}),!d.ignoreIfBlocked||!a(b).data("blockUI.isBlocked")){if(d.overlayCSS=a.extend({},a.blockUI.defaults.overlayCSS,d.overlayCSS||{}),f=a.extend({},a.blockUI.defaults.css,d.css||{}),d.onOverlayClick&&(d.overlayCSS.cursor="pointer"),p=a.extend({},a.blockUI.defaults.themedCSS,d.themedCSS||{}),r=void 0===r?d.message:r,q&&n&&c(window,{fadeOut:0}),r&&"string"!=typeof r&&(r.parentNode||r.jquery)){var s=r.jquery?r[0]:r,t={};a(b).data("blockUI.history",t),t.el=s,t.parent=s.parentNode,t.display=s.style.display,t.position=s.style.position,t.parent&&t.parent.removeChild(s)}a(b).data("blockUI.onUnblock",d.onUnblock);var u,v,w,x,y=d.baseZ;u=a(k||d.forceIframe?'<iframe class="blockUI" style="z-index:'+y+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+d.iframeSrc+'"></iframe>':'<div class="blockUI" style="display:none"></div>'),v=a(d.theme?'<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+y+++';display:none"></div>':'<div class="blockUI blockOverlay" style="z-index:'+y+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),d.theme&&q?(x='<div class="blockUI '+d.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(y+10)+';display:none;position:fixed">',d.title&&(x+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(d.title||"&nbsp;")+"</div>"),x+='<div class="ui-widget-content ui-dialog-content"></div>',x+="</div>"):d.theme?(x='<div class="blockUI '+d.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(y+10)+';display:none;position:absolute">',d.title&&(x+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(d.title||"&nbsp;")+"</div>"),x+='<div class="ui-widget-content ui-dialog-content"></div>',x+="</div>"):x=q?'<div class="blockUI '+d.blockMsgClass+' blockPage" style="z-index:'+(y+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+d.blockMsgClass+' blockElement" style="z-index:'+(y+10)+';display:none;position:absolute"></div>',w=a(x),r&&(d.theme?(w.css(p),w.addClass("ui-widget-content")):w.css(f)),d.theme||v.css(d.overlayCSS),v.css("position",q?"fixed":"absolute"),(k||d.forceIframe)&&u.css("opacity",0);var z=[u,v,w],A=a(q?"body":b);a.each(z,function(){this.appendTo(A)}),d.theme&&d.draggable&&a.fn.draggable&&w.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var B=m&&(!a.support.boxModel||a("object,embed",q?null:b).length>0);if(l||B){if(q&&d.allowBodyStretch&&a.support.boxModel&&a("html,body").css("height","100%"),(l||!a.support.boxModel)&&!q)var C=i(b,"borderTopWidth"),D=i(b,"borderLeftWidth"),E=C?"(0 - "+C+")":0,F=D?"(0 - "+D+")":0;a.each(z,function(a,b){var c=b[0].style;if(c.position="absolute",2>a)q?c.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+d.quirksmodeOffsetHack+') + "px"'):c.setExpression("height",'this.parentNode.offsetHeight + "px"'),q?c.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):c.setExpression("width",'this.parentNode.offsetWidth + "px"'),F&&c.setExpression("left",F),E&&c.setExpression("top",E);else if(d.centerY)q&&c.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),c.marginTop=0;else if(!d.centerY&&q){var e=d.css&&d.css.top?parseInt(d.css.top,10):0,f="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+e+') + "px"';c.setExpression("top",f)}})}if(r&&(d.theme?w.find(".ui-widget-content").append(r):w.append(r),(r.jquery||r.nodeType)&&a(r).show()),(k||d.forceIframe)&&d.showOverlay&&u.show(),d.fadeIn){var G=d.onBlock?d.onBlock:j,H=d.showOverlay&&!r?G:j,I=r?G:j;d.showOverlay&&v._fadeIn(d.fadeIn,H),r&&w._fadeIn(d.fadeIn,I)}else d.showOverlay&&v.show(),r&&w.show(),d.onBlock&&d.onBlock();if(e(1,b,d),q?(n=w[0],o=a(d.focusableElements,n),d.focusInput&&setTimeout(g,20)):h(w[0],d.centerX,d.centerY),d.timeout){var J=setTimeout(function(){q?a.unblockUI(d):a(b).unblock(d)},d.timeout);a(b).data("blockUI.timeout",J)}}}function c(b,c){var f,g=b==window,h=a(b),i=h.data("blockUI.history"),j=h.data("blockUI.timeout");j&&(clearTimeout(j),h.removeData("blockUI.timeout")),c=a.extend({},a.blockUI.defaults,c||{}),e(0,b,c),null===c.onUnblock&&(c.onUnblock=h.data("blockUI.onUnblock"),h.removeData("blockUI.onUnblock"));var k;k=g?a("body").children().filter(".blockUI").add("body > .blockUI"):h.find(">.blockUI"),c.cursorReset&&(k.length>1&&(k[1].style.cursor=c.cursorReset),k.length>2&&(k[2].style.cursor=c.cursorReset)),g&&(n=o=null),c.fadeOut?(f=k.length,k.stop().fadeOut(c.fadeOut,function(){0==--f&&d(k,i,c,b)})):d(k,i,c,b)}function d(b,c,d,e){var f=a(e);if(!f.data("blockUI.isBlocked")){b.each(function(){this.parentNode&&this.parentNode.removeChild(this)}),c&&c.el&&(c.el.style.display=c.display,c.el.style.position=c.position,c.parent&&c.parent.appendChild(c.el),f.removeData("blockUI.history")),f.data("blockUI.static")&&f.css("position","static"),"function"==typeof d.onUnblock&&d.onUnblock(e,d);var g=a(document.body),h=g.width(),i=g[0].style.width;g.width(h-1).width(h),g[0].style.width=i}}function e(b,c,d){var e=c==window,g=a(c);if((b||(!e||n)&&(e||g.data("blockUI.isBlocked")))&&(g.data("blockUI.isBlocked",b),e&&d.bindEvents&&(!b||d.showOverlay))){var h="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";b?a(document).bind(h,d,f):a(document).unbind(h,f)}}function f(b){if("keydown"===b.type&&b.keyCode&&9==b.keyCode&&n&&b.data.constrainTabKey){var c=o,d=!b.shiftKey&&b.target===c[c.length-1],e=b.shiftKey&&b.target===c[0];if(d||e)return setTimeout(function(){g(e)},10),!1}var f=b.data,h=a(b.target);return h.hasClass("blockOverlay")&&f.onOverlayClick&&f.onOverlayClick(),h.parents("div."+f.blockMsgClass).length>0||0===h.parents().children().filter("div.blockUI").length}function g(a){if(o){var b=o[!0===a?o.length-1:0];b&&b.focus()}}function h(a,b,c){var d=a.parentNode,e=a.style,f=(d.offsetWidth-a.offsetWidth)/2-i(d,"borderLeftWidth"),g=(d.offsetHeight-a.offsetHeight)/2-i(d,"borderTopWidth");b&&(e.left=f>0?f+"px":"0"),c&&(e.top=g>0?g+"px":"0")}function i(b,c){return parseInt(a.css(b,c),10)||0}a.fn._fadeIn=a.fn.fadeIn;var j=a.noop||function(){},k=/MSIE/.test(navigator.userAgent),l=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);document.documentMode;var m=a.isFunction(document.createElement("div").style.setExpression);a.blockUI=function(a){b(window,a)},a.unblockUI=function(a){c(window,a)},a.growlUI=function(b,c,d,e){var f=a('<div class="growlUI"></div>');b&&f.append("<h1>"+b+"</h1>"),c&&f.append("<h2>"+c+"</h2>"),void 0===d&&(d=3e3);var g=function(b){b=b||{},a.blockUI({message:f,fadeIn:"undefined"!=typeof b.fadeIn?b.fadeIn:700,fadeOut:"undefined"!=typeof b.fadeOut?b.fadeOut:1e3,timeout:"undefined"!=typeof b.timeout?b.timeout:d,centerY:!1,showOverlay:!1,onUnblock:e,css:a.blockUI.defaults.growlCSS})};g(),f.css("opacity"),f.mouseover(function(){g({fadeIn:0,timeout:3e4});var b=a(".blockMsg");b.stop(),b.fadeTo(300,1)}).mouseout(function(){a(".blockMsg").fadeOut(1e3)})},a.fn.block=function(c){if(this[0]===window)return a.blockUI(c),this;var d=a.extend({},a.blockUI.defaults,c||{});return this.each(function(){var b=a(this);d.ignoreIfBlocked&&b.data("blockUI.isBlocked")||b.unblock({fadeOut:0})}),this.each(function(){"static"==a.css(this,"position")&&(this.style.position="relative",a(this).data("blockUI.static",!0)),this.style.zoom=1,b(this,c)})},a.fn.unblock=function(b){return this[0]===window?(a.unblockUI(b),this):this.each(function(){c(this,b)})},a.blockUI.version=2.65,a.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var n=null,o=[]}"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],a):a(b)}(),function(a){var b=a.blockUI.defaults;a.extend(b.css,{border:"none",padding:"15px",backgroundColor:"#888","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.75,color:"#EEE","font-weight":"bold",top:"200px"}),b.centerY=!1,a.extend(b.overlayCSS,{backgroundColor:"#FFF",opacity:.7}),a.extend(b.growlCSS,{opacity:1,backgroundColor:"#000"})}(b),function(a){var b=0;a.widget("ech.multiselect",{options:{header:!0,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:null,hide:null,autoOpen:!1,multiple:!0,position:{}},_create:function(){var b=this.element.hide(),c=this.options;this.speed=a.fx.speeds._default,this._isOpen=!1,b=(this.button=a('<div type="button"><span class="ui-icon ui-icon-triangle-2-n-s"></span></div>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(c.classes).attr({title:b.attr("title"),"aria-haspopup":!0,tabIndex:b.attr("tabIndex")}).insertAfter(b),(this.buttonlabel=a("<span />")).html(c.noneSelectedText).appendTo(b);var b=(this.menu=a("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(c.classes).appendTo(document.body),d=(this.header=a("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(b);(this.headerLinkContainer=a("<ul />")).addClass("ui-helper-reset").html(function(){return!0===c.header?'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+c.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+c.uncheckAllText+"</span></a></li>":"string"==typeof c.header?"<li>"+c.header+"</li>":""}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(d),(this.checkboxContainer=a("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(b),this._bindEvents(),this.refresh(!0),c.multiple||b.addClass("ui-multiselect-single")},_init:function(){!1===this.options.header&&this.header.hide(),this.options.multiple||this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide(),this.options.autoOpen&&this.open(),this.element.is(":disabled")&&this.disable()},refresh:function(c){var d=this.element,e=this.options,f=this.menu,g=this.checkboxContainer,h=[],i="",j=d.attr("id")||b++;d.find("option").each(function(b){a(this);var c,d=this.parentNode,f=this.innerHTML,g=this.title,k=this.value,b="ui-multiselect-"+(this.id||j+"-option-"+b),l=this.disabled,m=this.selected,n=["ui-corner-all"],o=(l?"ui-multiselect-disabled ":" ")+this.className;"OPTGROUP"===d.tagName&&(c=d.getAttribute("label"),-1===a.inArray(c,h)&&(i+='<li class="ui-multiselect-optgroup-label '+d.className+'"><a href="#">'+c+"</a></li>",h.push(c))),l&&n.push("ui-state-disabled"),m&&!e.multiple&&n.push("ui-state-active"),i+='<li class="'+o+'">',i+='<label for="'+b+'" title="'+g+'" class="'+n.join(" ")+'">',i+='<input id="'+b+'" name="multiselect_'+j+'" type="'+(e.multiple?"checkbox":"radio")+'" value="'+k+'" title="'+f+'"',m&&(i+=' checked="checked"',i+=' aria-selected="true"'),l&&(i+=' disabled="disabled"',i+=' aria-disabled="true"'),i+=" /><span>"+f+"</span></label></li>"}),g.html(i),this.labels=f.find("label"),this.inputs=this.labels.children("input"),this._setButtonWidth(),this._setMenuWidth(),this.button[0].defaultValue=this.update(),c||this._trigger("refresh")},update:function(){var b=this.options,c=this.inputs,d=c.filter(":checked"),e=d.length,b=0===e?b.noneSelectedText:a.isFunction(b.selectedText)?b.selectedText.call(this,e,c.length,d.get()):/\d/.test(b.selectedList)&&0<b.selectedList&&e<=b.selectedList?d.map(function(){return a(this).next().html()}).get().join(", "):b.selectedText.replace("#",e).replace("#",c.length);return this.buttonlabel.html(b),b},_bindEvents:function(){function b(){return c[c._isOpen?"close":"open"](),!1}var c=this,d=this.button;d.find("span").bind("click.multiselect",b),d.bind({click:b,keypress:function(a){switch(a.which){case 27:case 38:case 37:c.close();break;case 39:case 40:c.open()}},mouseenter:function(){d.hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover-")},mouseleave:function(){a(this).removeClass("ui-state-hover-")},focus:function(){d.hasClass("ui-state-disabled")||a(this).addClass("ui-state-focus")},blur:function(){a(this).removeClass("ui-state-focus")}}),this.header.delegate("a","click.multiselect",function(b){
a(this).hasClass("ui-multiselect-close")?c.close():c[a(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"](),b.preventDefault()}),this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(b){b.preventDefault();var d=a(this),e=d.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),f=e.get(),d=d.parent().text();!1!==c._trigger("beforeoptgrouptoggle",b,{inputs:f,label:d})&&(c._toggleChecked(e.filter(":checked").length!==e.length,e),c._trigger("optgrouptoggle",b,{inputs:f,label:d,checked:f[0].checked}))}).delegate("label","mouseenter.multiselect",function(){a(this).hasClass("ui-state-disabled")||(c.labels.removeClass("ui-state-hover-"),a(this).addClass("ui-state-hover-").find("input").focus())}).delegate("label","keydown.multiselect",function(b){switch(b.preventDefault(),b.which){case 9:case 27:c.close();break;case 38:case 40:case 37:case 39:c._traverse(b.which,this);break;case 13:a(this).find("input")[0].click()}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(b){var d=a(this),e=this.value,f=this.checked,g=c.element.find("option");this.disabled||!1===c._trigger("click",b,{value:e,text:this.title,checked:f})?b.preventDefault():(d.focus(),d.attr("aria-selected",f),g.each(function(){this.value===e?this.selected=f:c.options.multiple||(this.selected=!1)}),c.options.multiple||(c.labels.removeClass("ui-state-active"),d.closest("label").toggleClass("ui-state-active",f),c.close()),c.element.trigger("change"),setTimeout(a.proxy(c.update,c),10))}),a(document).bind("mousedown.multiselect",function(b){c._isOpen&&!a.contains(c.menu[0],b.target)&&!a.contains(c.button[0],b.target)&&b.target!==c.button[0]&&c.close()}),a(this.element[0].form).bind("reset.multiselect",function(){setTimeout(a.proxy(c.refresh,c),10)})},_setButtonWidth:function(){var a=this.element.outerWidth(),b=this.options;/\d/.test(b.minWidth)&&a<b.minWidth&&(a=b.minWidth),this.button.css("width","100%")},_setMenuWidth:function(){var a=this.menu;this.button.outerWidth(),parseInt(a.css("padding-left"),10),parseInt(a.css("padding-right"),10),parseInt(a.css("border-right-width"),10),parseInt(a.css("border-left-width"),10)},_traverse:function(b,c){var d=a(c),e=38===b||37===b,d=d.parent()[e?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[e?"last":"first"]();d.length?d.find("label").trigger("mouseover"):(d=this.menu.find("ul").last(),this.menu.find("label")[e?"last":"first"]().trigger("mouseover"),d.scrollTop(e?d.height():0))},_toggleState:function(a,b){return function(){this.disabled||(this[a]=b),b?this.setAttribute("aria-selected",!0):this.removeAttribute("aria-selected")}},_toggleChecked:function(b,c){var d=c&&c.length?c:this.inputs,e=this;d.each(this._toggleState("checked",b)),d.eq(0).focus(),this.update();var f=d.map(function(){return this.value}).get();this.element.find("option").each(function(){!this.disabled&&-1<a.inArray(this.value,f)&&e._toggleState("selected",b).call(this)}),d.length&&this.element.trigger("change")},_toggleDisabled:function(b){this.button.attr({disabled:b,"aria-disabled":b})[b?"addClass":"removeClass"]("ui-state-disabled");var c=this.menu.find("input"),c=b?c.filter(":enabled").data("ech-multiselect-disabled",!0):c.filter(function(){return!0===a.data(this,"ech-multiselect-disabled")}).removeData("ech-multiselect-disabled");c.attr({disabled:b,"arial-disabled":b}).parent()[b?"addClass":"removeClass"]("ui-state-disabled"),this.element.attr({disabled:b,"aria-disabled":b})},open:function(){var b=this.button,c=this.menu,d=this.speed,e=this.options,f=[];if(!1!==this._trigger("beforeopen")&&!b.hasClass("ui-state-disabled")&&!this._isOpen){var g=c.find("ul").last(),h=e.show,i=b.offset();a.isArray(e.show)&&(h=e.show[0],d=e.show[1]||this.speed),h&&(f=[h,d]),g.scrollTop(0).height(e.height),a.ui.position&&!a.isEmptyObject(e.position)?(e.position.of=e.position.of||b,c.show().position(e.position).hide()):c.css({top:i.top+b.outerHeight(),left:i.left}),a.fn.show.apply(c,f),this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus"),b.addClass("ui-state-active"),this._isOpen=!0,this._trigger("open")}},close:function(){if(!1!==this._trigger("beforeclose")){var b=this.options,c=b.hide,d=this.speed,e=[];a.isArray(b.hide)&&(c=b.hide[0],d=b.hide[1]||this.speed),c&&(e=[c,d]),a.fn.hide.apply(this.menu,e),this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave"),this._isOpen=!1,this._trigger("close")}},enable:function(){this._toggleDisabled(!1)},disable:function(){this._toggleDisabled(!0)},checkAll:function(){this._toggleChecked(!0),this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(!1),this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){return a.Widget.prototype.destroy.call(this),this.button.remove(),this.menu.remove(),this.element.show(),this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},getButton:function(){return this.button},_setOption:function(b,c){var d=this.menu;switch(b){case"header":d.find("div.ui-multiselect-header")[c?"show":"hide"]();break;case"checkAllText":d.find("a.ui-multiselect-all span").eq(-1).text(c);break;case"uncheckAllText":d.find("a.ui-multiselect-none span").eq(-1).text(c);break;case"height":d.find("ul").last().height(parseInt(c,10));break;case"minWidth":this.options[b]=parseInt(c,10),this._setButtonWidth(),this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[b]=c,this.update();break;case"classes":d.add(this.button).removeClass(this.options.classes).addClass(c);break;case"multiple":d.toggleClass("ui-multiselect-single",!c),this.options.multiple=c,this.element[0].multiple=c,this.refresh()}a.Widget.prototype._setOption.apply(this,arguments)}})}(b),function(a){var b=/[\-\[\]{}()*+?.,\\\^$|#\s]/g;a.widget("ech.multiselectfilter",{options:{label:"Filter:",width:null,placeholder:"Enter keywords",autoReset:!1},_create:function(){var b=this.options,c=a(this.element),d=this.instance=c.data("echMultiselect")||c.data("multiselect")||c.data("ech-multiselect");this.header=d.menu.find(".ui-multiselect-header").addClass("ui-multiselect-hasfilter");var e=this.wrapper=a('<div class="ui-multiselect-filter">'+(b.label.length?b.label:"")+'<input placeholder="'+b.placeholder+'" type="search"'+(/\d/.test(b.width)?'style="width:'+b.width+'px"':"")+" /></div>").prependTo(this.header);this.inputs=d.menu.find('input[type="checkbox"], input[type="radio"]'),this.input=e.find("input").bind({keydown:function(a){13===a.which&&a.preventDefault()},keyup:a.proxy(this._handler,this),click:a.proxy(this._handler,this)}),this.updateCache(),d._toggleChecked=function(b,c){var e=c&&c.length?c:this.labels.find("input"),f=this,g=d._isOpen?":disabled, :hidden":":disabled";e=e.not(g).each(this._toggleState("checked",b)),this.update();var h=e.map(function(){return this.value}).get();this.element.find("option").filter(function(){!this.disabled&&a.inArray(this.value,h)>-1&&f._toggleState("selected",b).call(this)}),e.length&&this.element.trigger("change")};var f=a(document).bind("multiselectrefresh",a.proxy(function(){this.updateCache(),this._handler()},this));this.options.autoReset&&f.bind("multiselectclose",a.proxy(this._reset,this))},_handler:function(c){var d=a.trim(this.input[0].value.toLowerCase()),e=this.rows,f=this.inputs,g=this.cache;if(d){e.hide();var h=RegExp(d.replace(b,"\\$&"),"gi");this._trigger("filter",c,a.map(g,function(a,b){return-1!==a.search(h)?(e.eq(b).show(),f.get(b)):null}))}else e.show();this.instance.menu.find(".ui-multiselect-optgroup-label").each(function(){var b=a(this);b[b.nextUntil(".ui-multiselect-optgroup-label").filter(function(){return"none"!==a.css(this,"display")}).length?"show":"hide"]()})},_reset:function(){this.input.val("").trigger("keyup")},updateCache:function(){this.rows=this.instance.menu.find(".ui-multiselect-checkboxes li:not(.ui-multiselect-optgroup-label)"),this.cache=this.element.children().map(function(){var b=a(this);return"optgroup"===this.tagName.toLowerCase()&&(b=b.children()),b.map(function(){return this.innerHTML.toLowerCase()}).get()}).get()},widget:function(){return this.wrapper},destroy:function(){a.Widget.prototype.destroy.call(this),this.input.val("").trigger("keyup"),this.wrapper.remove()}})}(b),b.when.all===undefined&&(b.when.all=function(a){var c=new b.Deferred;return b.when.apply(b,a).then(function(){c.resolve(Array.prototype.slice.call(arguments))},function(){c.reject(Array.prototype.slice.call(arguments))}),c}),b.settle||(b.settle=function(a){arguments.length>1&&(a=Array.prototype.slice.call(arguments)),b.isArray(a)||(a=[a]);var c=new b.Deferred,d=a.map(function(a){var c=new b.Deferred;return a.then(function(){var a=Array.prototype.slice.call(arguments);c.resolve({success:!0,results:a.length>1?a:a[0]})},function(){var a=Array.prototype.slice.call(arguments);c.resolve({success:!1,results:a.length>1?a:a[0]})}),c});return b.when.apply(b,d).always(function(){c.resolve(Array.prototype.slice.call(arguments))}),c}),function(a){a.number=function(a,b,c,d){d=void 0===d?",":d,c=void 0===c?".":c,b=isFinite(+b)?Math.abs(b):0;var e="\\u"+("0000"+c.charCodeAt(0).toString(16)).substr(-4);a=(a+"").replace(RegExp(e,"g"),".").replace(RegExp("[^0-9+-Ee.]","g"),"");var f=isFinite(+a)?+a:0,g="";return g=(b?function(a,b){var c=Math.pow(10,b);return""+Math.round(a*c)/c}(f,b):""+Math.round(f)).split("."),g[0].length>3&&(g[0]=g[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,d)),b>(g[1]||"").length&&(g[1]=g[1]||"",g[1]+=Array(b-g[1].length+1).join("0")),g.join(c)}}(b),function(a){a.fn.setCursorPosition=function(a){return this.each(function(b,c){if(c.setSelectionRange)c.setSelectionRange(a,a);else if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveEnd("character",a),d.moveStart("character",a),d.select()}}),this},a.fn.getCursorPosition=function(){var b=a(this).get(0),c=0;if("selectionStart"in b)c=b.selectionStart;else if("selection"in document){b.focus();var d=document.selection.createRange(),e=document.selection.createRange().text.length;d.moveStart("character",-b.value.length),c=d.text.length-e}return c}}(b),function(a){var b=a.fn.attr;a.fn.attr=function(){if(0===arguments.length){if(0===this.length)return null;var c={};return a.each(this[0].attributes,function(){this.specified&&(c[this.name]=this.value)}),c}return b.apply(this,arguments)}}(b),d.load=function(b,c,d){function e(){}function f(a){return Object(a)===a}function g(a){return"string"==typeof a}function h(){n&&n.parentNode||(n=c.body.getElementsByTagName("script")[0])||(n=c.body.getElementsByTagName("div")[0])}function i(){if(!o||!o.parentNode){var a=c.body.getElementsByTagName("script");o=a[a.length-1],o||(a=c.body.getElementsByTagName("div"),o=a[a.length-1])}}function j(a){var b=a.readyState;if(!b)return!0;if(!/loaded|complete/.test(b))return"uninitialized"===b;var c=b;if(a.children,"loaded"!==c||"loading"!==a.readyState)return!0;onError()}function k(a,c,d){d&&(d.onload=d.onreadystatechange=d.onerror=null),c.call(b)}function l(b,h){function l(){!w&&j(v)&&(w=1,q(y),k(n,h,v),z.resolve())}function m(){if(!w){w=1,q(y);var a=new Error("Timeout: "+n);h(a),z.reject(a),v.parentNode&&v.parentNode.removeChild(v)}}var n,s,u,v,w,x,y,z=d.Deferred(),A=z.promise();if(g(b)?n=b:f(b)&&(n=b._url||b.src,s=b.attrs,u=b.timeout),h=h||e,s=s||{},!n){var B=new Error("You must provide a valid script to load.");return h(B),z.reject(B),A}if(n in r)return r[n];if(!n.startsWith("data:")&&d("script[src='"+n+"']").length)return z.resolve(),k(n,h,v),A;r[n]=A,v=c.createElement("script"),u=u||t.errorTimeout,v.async=!1,v.src=n;for(x in s)v.setAttribute(x,s[x]);return y=p(m,u),a.platform&&a.utils.inPlatform&&a.utils.inPlatform(a.constants.LIGHTNING)?(v.addEventListener("load",l),v.addEventListener("error",m)):(v.onreadystatechange=v.onload=l,v.onerror=function(){m()}),i(),o.parentNode.appendChild(v),A}function m(a,i){var j,k,l,m={},o=d.Deferred(),q=o.promise();if(f(a)?(j=a._url||a.href,m=a.attrs||{}):g(a)&&(j=a),i=i||e,d("link[href='"+j+"']").length)return o.resolve(),i.call(b),q;l=c.createElement("link"),l.href=j,l.rel="stylesheet",l.media="only x",l.type=m.type||"text/css",p(function(){l.media=m.media||"all"});for(k in m)l.setAttribute(k,m[k]);return a&&a.insertBefore?a.insertBefore.parentNode.insertBefore(l,a.insertBefore):a&&a.insertAfter?a.insertAfter.parentNode.insertBefore(l,a.insertAfter.nextSibling):(h(),n.parentNode.appendChild(l)),s()?(l.onload=function(){o.resolve(),i.call(b)},l.onerror=function(){o.resolve(),i.call(b)}):p(function(){o.resolve(),i.call(b)}),q}var n,o,p=b.setTimeout,q=b.clearTimeout,r={},s=function(){var a=c.createElement("link"),b="onload"in a;return b||(a.setAttribute("onload","return;"),b="function"==typeof a.onload),a=null,b},t={errorTimeout:4e4,js:l,css:m};return t}(window,document,b),function(a){a.widget("custom.combobox",{options:{parentElem:a("<div>"),source:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(b.term),"i");c(this.element.children("option").map(function(){var c=a(this).text();if(this.value&&(!b.term||d.test(c)))return{label:c,value:c,option:this}}))},delay:0,searchicon:a("<div>"),menuClass:"ui-combobox"},_create:function(){this.wrapper=this.options.parentElem.addClass("custom-combobox").insertAfter(this.options.parentElem),this.element.hide(),this._createAutocomplete(),this._createShowAllButton()},_createAutocomplete:function(){var b,c=this,d=c.element.children(":selected"),e=c.options.value||d.val()&&d.text()||"",f=a('<div class="ui-combobox-container"></div>'),g={delay:c.options.delay,minLength:0,source:c.options.source,select:c.options.onChange};c.options.appendDropdown&&a.extend(g,{appendTo:f}),c.input=a("<input>").appendTo(c.wrapper).autocomplete(g).val(e),c.input.appendTo(c.wrapper),c.input.focus(function(a){c.options.onFocus&&c.options.onFocus(a)}),c.input.blur(function(a){c.options.onBlur&&c.options.onBlur(a)}),c.options.appendDropdown?(f.insertAfter(c.wrapper.children().last()),b=f.find("ul.ui-autocomplete")):b=a("body").find("ul.ui-autocomplete"),b.addClass(c.options.menuClass).removeClass("ui-front"),c.options.parentElem&&(c.options.parentElem.append(c.options.searchicon),c.options.parentElem.is(c.input)&&c.input.css("padding-right","22px"))},_createShowAllButton:function(){var b=this,c=b.input,d=!1;a("<a>").attr("tabIndex",-1).tooltip().appendTo(b.wrapper).button({icons:{primary:"fa fa-chevron-down"},text:!1}).removeClass("ui-corner-all ui-button ui-widget ui-state-default ui-button-icon-only").addClass("nx-combobox-renderer-button").on("mousedown",function(){d=c.autocomplete("widget").is(":visible")}).on("click",function(){c.trigger("focus"),d||c.autocomplete("search","")})}})}(b),function(a){function b(b){this.$textarea=a(b),this._init()}b.prototype={_init:function(){var b=this;this.$textarea.wrap('<div class="flex-text-wrap" />').before("<pre><span /><br /></pre>"),this.$span=this.$textarea.prev().find("span"),this.$textarea.on("input propertychange keyup change",function(){b._mirror()}),a.valHooks.textarea={get:function(a){return a.value.replace(/\r?\n/g,"\r\n")}},this._mirror()},_mirror:function(){this.$span.text(this.$textarea.val())}},a.fn.flexText=function(){return this.each(function(){a.data(this,"flexText")||a.data(this,"flexText",new b(this))})}}(b),Array.prototype.reduce||(Array.prototype.reduce=function(a){if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var b,c=Object(this),d=c.length>>>0,e=0;if(2==arguments.length)b=arguments[1];else{for(;e<d&&!(e in c);)e++;if(e>=d)throw new TypeError("Reduce of empty array with no initial value");b=c[e++]}for(;e<d;e++)e in c&&(b=a(b,c[e],e,c));return b}),b.fn.extend({insertAtCaret:function(a){return this.each(function(){if(document.selection){this.focus();document.selection.createRange().text=a,this.focus()}else if(this.selectionStart||"0"==this.selectionStart){var b=this.selectionStart,c=this.selectionEnd,d=this.scrollTop;this.value=this.value.substring(0,b)+a+this.value.substring(c,this.value.length),this.focus(),this.selectionStart=b+a.length,this.selectionEnd=b+a.length,this.scrollTop=d}else this.value+=a,this.focus()})}})}(window.skuid,window.jQuery),function(){var a=function(){for(var a=3,b=document.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",c[0];);return a<=4&&!window.ActiveXObject&&"ActiveXObject"in window?11:a>4?a:void 0}(),b=function(){function a(a){for(var b,c=getComputedStyle(a).fontFamily,d={};null!==(b=f.exec(c));)d[b[1]]=b[2];return d}function b(b,d){if(!b[e].parsingSrcset){var f=a(b);if(f["object-fit"]=f["object-fit"]||"fill",!b[e].s){if("fill"===f["object-fit"])return;if(!b[e].skipTest&&h&&!f["object-position"])return}var g=b[e].ios7src||b.currentSrc||b.src;if(d)g=d;else if(b.srcset&&!j&&window.picturefill){var i=window.picturefill._;b[e].parsingSrcset=!0,b[i.ns]&&b[i.ns].evaled||i.fillImg(b,{reselect:!0}),b[i.ns].curSrc||(b[i.ns].supported=!1,i.fillImg(b,{reselect:!0})),delete b[e].parsingSrcset,g=b[i.ns].curSrc||g}if(b[e].s)b[e].s=g,d&&(b[e].srcAttr=d);else{b[e]={s:g,srcAttr:d||k.call(b,"src"),srcsetAttr:b.srcset},b.src=e;try{b.srcset&&(b.srcset="",Object.defineProperty(b,"srcset",{value:b[e].srcsetAttr})),c(b)}catch(l){b[e].ios7src=g}}b.style.backgroundImage='url("'+g+'")',b.style.backgroundPosition=f["object-position"]||"center",b.style.backgroundRepeat="no-repeat",/scale-down/.test(f["object-fit"])?(b[e].i||(b[e].i=new Image,b[e].i.src=g),function m(){if(b[e].i.naturalWidth)return void(b[e].i.naturalWidth>b.width||b[e].i.naturalHeight>b.height?b.style.backgroundSize="contain":b.style.backgroundSize="auto");setTimeout(m,100)}()):b.style.backgroundSize=f["object-fit"].replace("none","auto").replace("fill","100% 100%")}}function c(a){var c={get:function(){return a[e].s},set:function(c){return delete a[e].i,b(a,c),c}};Object.defineProperty(a,"src",c),Object.defineProperty(a,"currentSrc",{get:c.get})}function d(a,c){var f=!m&&!a;if(c=c||{},a=a||"img",i&&!c.skipTest)return!1;"string"==typeof a?a=document.querySelectorAll("img"):"length"in a||(a=[a]);for(var g=0;g<a.length;g++)a[g][e]=a[g][e]||c,b(a[g]);f&&(document.body.addEventListener("load",function(a){"IMG"===a.target.tagName&&d(a.target,{skipTest:c.skipTest})},!0),m=!0,a="img"),c.watchMQ&&window.addEventListener("resize",d.bind(null,a,{skipTest:c.skipTest}))}var e="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",f=/(object-fit|object-position)\s*:\s*([-\w\s%]+)/g,g=new Image,h="object-fit"in g.style,i="object-position"in g.style,j="string"==typeof g.currentSrc,k=g.getAttribute,l=g.setAttribute,m=!1;return d.supportsObjectFit=h,d.supportsObjectPosition=i,function(){i||(HTMLImageElement.prototype.getAttribute=function(a){return!this[e]||"src"!==a&&"srcset"!==a?k.call(this,a):this[e][a+"Attr"]},HTMLImageElement.prototype.setAttribute=function(a,b){!this[e]||"src"!==a&&"srcset"!==a?l.call(this,a,b):this["src"===a?"src":a+"Attr"]=String(b)})}(),d}();(a>8||a===undefined)&&skuid.$(function(){b()})}(),window.sforce=window.sforce||{},sforce.internal={},sforce.StringBuffer=function(){this.buffer=[],this.append=function(a){return this.buffer.push(a),this},this.toString=function(){return this.buffer.join("")}},sforce.Base64Binary=function(a){this.input=a},sforce.Base64Binary.prototype.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",sforce.Base64Binary.prototype.toString=function(){var a,b,c,d,e,f=[],g="",h="",i=0;do{a=this.input.charCodeAt(i++),b=this.input.charCodeAt(i++),g=this.input.charCodeAt(i++),c=a>>2,d=(3&a)<<4|b>>4,e=(15&b)<<2|g>>6,h=63&g,isNaN(b)?e=h=64:isNaN(g)&&(h=64),f.push(this.keyStr.charAt(c)+this.keyStr.charAt(d)+this.keyStr.charAt(e)+this.keyStr.charAt(h)),a=b=g="",c=d=e=h=""}while(i<this.input.length);return f.join("")},sforce.Base64Binary.prototype.decode=function(a){var b,c,d,e,f,g=[],h="",i="",j=0;/[^A-Za-z0-9\+\/\=]/g.exec(a)&&alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/', and '='\nExpect errors in decoding."),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{d=this.keyStr.indexOf(a.charAt(j++)),e=this.keyStr.indexOf(a.charAt(j++)),f=this.keyStr.indexOf(a.charAt(j++)),i=this.keyStr.indexOf(a.charAt(j++)),b=d<<2|e>>4,c=(15&e)<<4|f>>2,h=(3&f)<<6|i,g.push(String.fromCharCode(b)),64!=f&&g.push(String.fromCharCode(c)),64!=i&&g.push(String.fromCharCode(h)),b=c=h="",d=e=f=i=""}while(j<a.length);return g.join("")},sforce.internal.dateToString=function(a){var b=a;return b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate()},sforce.internal.dateTimeToString=function(a){var b=a,c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate(),f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getTimezoneOffset(),j=0>i?"+":"-";i=Math.abs(i);var k=i/60,l=i%60;9>=h&&(h="0"+h);var m=b.getMilliseconds();0!==m&&(m="."+m,m.length>4&&(m=m.substring(0,4)),h+=m);var n;return 0===i?n="Z":(10>l&&(l="0"+l),10>k&&(k="0"+k),n=j+k+":"+l),9>=d&&(d="0"+d),9>=e&&(e="0"+e),9>=f&&(f="0"+f),9>=g&&(g="0"+g),c+"-"+d+"-"+e+"T"+f+":"+g+":"+h+n},sforce.internal.stringToDate=function(a){if(null===a||0===a.length)throw"Unable to parse dateTime";if("+"==a.charAt(0)&&(a=a.substring(1)),"-"==a.charAt(0)&&(a=a.substring(1),!0),10!=a.length)throw"Unable to parse date, "+a+" length != 10";if("-"!=a.charAt(4)||"-"!=a.charAt(7))throw"Unable to parse date";var b=a.substring(0,4),c=a.substring(5,7),d=a.substring(8,10),e=new Date(b,c-1,d,0,0,0);return e.setMilliseconds(0),e},sforce.internal.stringToDateTime=function(a){if(null===a||0===a.length)throw"Unable to parse dateTime";if("+"==a.charAt(0)&&(a=a.substring(1)),"-"==a.charAt(0)&&(a=a.substring(1),!0),a.length<19)throw"Unable to parse dateTime";if("-"!=a.charAt(4)||"-"!=a.charAt(7)||"T"!=a.charAt(10))throw"Unable to parse dateTime";if(":"!=a.charAt(13)||":"!=a.charAt(16))throw"Unable to parse dateTime";var b=a.substring(0,4),c=a.substring(5,7),d=a.substring(8,10),e=a.substring(11,13),f=a.substring(14,16),g=a.substring(17,19),h=new Date(b,c-1,d,e,f,g),i=19;if(i<a.length&&"."==a.charAt(i)){for(var j=0,k=++i;i<a.length&&sforce.internal.isDigit(a.charAt(i));)i++;var l=a.substring(k,i);3==l.length?j=l:l.length<3?j=(l+"000").substring(0,3):(j=l.substring(0,3),l.charAt(3)>="5"&&++j),h.setMilliseconds(j)}var m=6e4*h.getTimezoneOffset();if(i+5<a.length&&("+"==a.charAt(i)||"-"==a.charAt(i))){if(!(sforce.internal.isDigit(a.charAt(i+1))&&sforce.internal.isDigit(a.charAt(i+2))&&":"==a.charAt(i+3)&&sforce.internal.isDigit(a.charAt(i+4))&&sforce.internal.isDigit(a.charAt(i+5))))throw"Unable to parse dateTime";var n=10*(a.charAt(i+1)-"0")+a.charAt(i+2)-"0",o=10*(a.charAt(i+4)-"0")+a.charAt(i+5)-"0",p=60*(60*n+o)*1e3;"+"==a.charAt(i)&&(p=-p),h=new Date(h.getTime()-m+p),i+=6}if(i<a.length&&"Z"==a.charAt(i)&&(i++,h=new Date(h.getTime()-m)),i<a.length)throw"Unable to parse dateTime";return h},sforce.internal.isDigit=function(a){return"0"==a||"1"==a||"2"==a||"3"==a||"4"==a||"5"==a||"6"==a||"7"==a||"8"==a||"9"==a},sforce.Xml=function(a){},sforce.Xml.prototype.toXml=function(a,b,c){c.writeStartElement(b,a),this._xsiType&&c.writeXsiType(this._xsiType);for(var d in this)if("_name"==d||"_xsiType"==d);else{var e=this[d];if("function"!=typeof e)if(Array.isArray(e))for(var f=0;f<e.length;f++)this.writeValue(a,c,d,e[f]);else this.writeValue(a,c,d,e)}c.writeEndElement(b,a)},sforce.Xml.prototype.writeValue=function(a,b,c,d){return null===d?void b.writeNameValueNode("fieldsToNull",c):void(void 0!==d&&(d.toXml?d.toXml(a,c,b):b.writeNameValueNode(c,d)))},sforce.Xml.prototype.get=function(a){return this[a]?this[a]:null},sforce.Xml.prototype.set=function(a,b){this[a]=b},sforce.Xml.prototype.getArray=function(a){var b=this[a];return b?b.join?b:[b]:[]},sforce.Xml.prototype.getBoolean=function(a){return"true"==this[a]},sforce.Xml.prototype.getDate=function(a){return this[a]?this[a].getFullYear?this[a]:sforce.internal.stringToDate(this[a]):null},sforce.Xml.prototype.getDateTime=function(a){return this[a]?this[a].getFullYear?this[a]:sforce.internal.stringToDateTime(this[a]):null},sforce.Xml.prototype.getInt=function(a){if(this[a])return"number"==typeof this[a]?this[a]:parseInt(this[a],10);throw"Unable to parse int field: "+a},sforce.Xml.prototype.getFloat=function(a){if(this[a])return"number"==typeof this[a]?this[a]:parseFloat(this[a]);throw"Unable to parse float field: "+a},sforce.Xml.prototype.getBase64Binary=function(a){if(this[a])return sforce.Base64Binary.prototype.decode(this[a]);throw"Unable to parse base64Binary field: "+a},sforce.Xml.prototype.toString=function(){var a=new sforce.StringBuffer;a.append("{");for(var b in this){var c=this[b];if(c)if("object"==typeof c)a.append(b).append(":").append(c.toString());else if(c.join){a.append(b).append(":").append("[");for(var d=0;d<c.length;d++)a.append(c[d]),d<c.length-1&&a.append(", ");a.append("]")}else{if("function"==typeof c)continue;a.append(b).append(":").append("'"+c+"'")}else a.append(b).append(":").append(""+c);a.append(", ")}return a.append("}"),a.toString()},sforce.internal.Debug=function(){this.output=null,this.trace=!1,this.apexTrace=!1,this.win=null,this.traceQueue=[],this.quiet=!1,this.open=function(){this.println("","print")},this.println=function(a,b){if(!this.quiet){if("function"==typeof println)return void println(a,b);null!==this.win&&this.win.document||(this.output=null,this.win=window.open("undefined"!=typeof window.UserContext?UserContext.getUrl("/soap/ajax/35.0/debugshell.html"):"/soap/ajax/35.0/debugshell.html","","width=800,height=400,toolbar=no,location=no,directories=no,alwaysRaised=yes,status=no,menubar=no,scrollbars=yes,copyhistory=yes,resizable=yes")),null===this.output&&this.findOutput(),null!==this.output?(sforce.debug.traceQueue.length>0&&this.traceCallback(),this.win.println(a,b)):(sforce.debug.traceQueue.push({message:a,type:b}),setTimeout(sforce.debug.traceCallback,1e3))}},this.traceCallback=function(){if(sforce.debug.findOutput(),null===sforce.debug.output)return void setTimeout(sforce.debug.traceCallback,1e3);for(var a=0;a<sforce.debug.traceQueue.length;a++){var b=sforce.debug.traceQueue[a];sforce.debug.win.println(b.message,b.type)}sforce.debug.traceQueue=[]},this.findOutput=function(){return null===this.output&&(this.output=this.win.document.getElementById("output")),this.output},this.logXml=function(a){a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a="<textarea cols=80 rows=5 wrap=hard>"+a+"</textarea>",this.println(a,"printxml")},this.log=function(a){this.println(a,"print")},this.logApex=function(a){var b=a.indexOf("<debugLog>"),c=a.indexOf("</debugLog>");-1===b?b=0:b+="<debugLog>".length,-1===c&&(c=a.length);var d=a.substring(b,c);this.println(d,"printxml")}},sforce.debug=new sforce.internal.Debug,sforce.internal._connections=[],sforce.internal.ConnectionHolder=function(a,b){this.connection=a,this.callback=b,this.timedout=!1},sforce.Transport=function(a){this.url=a,this.connection=null,this.newConnection=function(){try{this.connection=new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{this.connection=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){this.connection=new XMLHttpRequest}}return this.connection},this.send=function(a,b,c,d){this.newConnection(),c&&(this.connection.onreadystatechange=this.httpConnectionCallback);var e=new sforce.internal.ConnectionHolder(this.connection,b);sforce.internal._connections.push(e),this.connection.open("POST",this.url,c),this.connection.setRequestHeader("Content-Type","text/xml; charset=UTF-8"),this.connection.setRequestHeader("SOAPAction",'""'),this.connection.setRequestHeader("Accept","text/xml"),this.connection.setRequestHeader("User-Agent","SFAJAX 1.0"),this.connection.send(a),c&&void 0!==d&&this.setTimeoutOn(e,d),c||this.httpConnectionCallback()},this.setTimeoutOn=function(a,b){function c(){4!==a.connection.readyState&&(a.timedout=!0,a.connection.abort())}setTimeout(c,b)},this.httpConnectionCallback=function(){for(var a=0;a<sforce.internal._connections.length;a++){var b=sforce.internal._connections[a];if(null!==b)if(b.timedout)sforce.internal._connections[a]=null,sforce.internal._connections.slice(a,1),b.callback.httpCallback("Remote invocation timed out",!1);else if(4==b.connection.readyState){sforce.internal._connections[a]=null,sforce.internal._connections.slice(a,1);var c=200==b.connection.status;sforce.debug.trace&&(sforce.debug.log("Response : status - "+b.connection.status),sforce.debug.logXml(b.connection.responseText)),sforce.debug.apexTrace&&sforce.debug.logApex(b.connection.responseText),b.connection.responseXML&&b.connection.responseXML.documentElement?b.callback.httpCallback(b.connection.responseXML.documentElement,c):b.callback.httpCallback("Remote invocation failed, due to: "+b.connection.responseText+" status code: ",b.connection.status)}}}},sforce.XmlWriter=function(){this.buffer=new sforce.StringBuffer,this.namespaces={},this.prefixCount=0,this.writingStartElement=!1},sforce.XmlWriter.prototype.writeStartElement=function(a,b,c){this.writingStartElement&&this.buffer.append(">"),this.buffer.append("<");var d=!1;b&&(this.namespaces[b]||""===this.namespaces[b]||(d=!0),c||(c=this.getPrefix(b)),null!==c&&""!==c&&(this.buffer.append(c),this.buffer.append(":"))),this.buffer.append(a),!0===d&&this.writeNamespace(b,c),this.writingStartElement=!0},sforce.XmlWriter.prototype.writeEndElement=function(a,b){if(this.writingStartElement)this.buffer.append("/>");else{if(this.buffer.append("</"),b){var c=this.getPrefix(b);c&&""!==c&&(this.buffer.append(c),this.buffer.append(":"))}this.buffer.append(a),this.buffer.append(">")}this.writingStartElement=!1},sforce.XmlWriter.prototype.writeNamespace=function(a,b){b&&""!==b?(this.namespaces[a]=b,this.buffer.append(" "),this.buffer.append("xmlns:"),this.buffer.append(b)):(this.namespaces[a]="",this.buffer.append(" "),this.buffer.append("xmlns")),this.buffer.append('="'),this.buffer.append(a),this.buffer.append('"')},sforce.XmlWriter.prototype.writeText=function(a){if(!this.writingStartElement)throw"Can only write text after a start element";this.buffer.append(">"),this.writingStartElement=!1,"string"==typeof a&&(a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;")),this.buffer.append(a)},sforce.XmlWriter.prototype.writeXsiType=function(a){this.writeNamespace("http://www.w3.org/2001/XMLSchema-instance","xsi"),this.writeAttribute("xsi:type",a)},sforce.XmlWriter.prototype.writeAttribute=function(a,b){this.buffer.append(" "+a+'="'+b+'"')},sforce.XmlWriter.prototype.getPrefix=function(a){var b=this.namespaces[a];return b||""===b?b:(b="ns"+this.prefixCount,this.prefixCount++,this.namespaces[a]=b,b)},sforce.XmlWriter.prototype.toString=function(){return this.buffer.toString()},sforce.XmlWriter.prototype.soapNS="http://schemas.xmlsoap.org/soap/envelope/",sforce.XmlWriter.prototype.startEnvelope=function(){this.writeStartElement("Envelope",this.soapNS,"se")},sforce.XmlWriter.prototype.endEnvelope=function(){this.writeEndElement("Envelope",this.soapNS)},sforce.XmlWriter.prototype.startHeader=function(){this.writeStartElement("Header",this.soapNS,"se")},sforce.XmlWriter.prototype.endHeader=function(){this.writeEndElement("Header",this.soapNS)},sforce.XmlWriter.prototype.startBody=function(){this.writeStartElement("Body",this.soapNS,"se")},sforce.XmlWriter.prototype.endBody=function(){this.writeEndElement("Body",this.soapNS)},sforce.XmlWriter.prototype.writeNameValueNode=function(a,b){if(null===b)return this.writeStartElement(a),this.writeNamespace("http://www.w3.org/2001/XMLSchema-instance","xsi"),this.writeAttribute("xsi:nill","true"),void this.writeEndElement(a);if(b.toUTCString&&(b=sforce.internal.dateTimeToString(b)),"boolean"==typeof b&&(b=b?"true":"false"),b&&b.join)for(var c=0;c<b.length;c++)this.writeStartElement(a),this.writeText(b[c]),
this.writeEndElement(a);else this.writeStartElement(a),this.writeText(b),this.writeEndElement(a)},sforce.XmlReader=function(a){this.envelope=a},sforce.XmlReader.prototype.getEnvelope=function(){if(this.isTag("Envelope",this.envelope))return this.envelope;throw"Unable to find soap envelope, but found "+this.envelope.nodeName},sforce.XmlReader.prototype.getBody=function(){return this.getChild("Body",this.envelope)},sforce.XmlReader.prototype.getHeader=function(){return this.getChild("Header",this.envelope)},sforce.XmlReader.prototype.getChild=function(a,b){for(var c=b.childNodes,d=0;d<c.length;d++)if(1==c[d].nodeType&&this.isTag(a,c[d]))return c[d];return null},sforce.XmlReader.prototype.getFirstElement=function(a){for(var b=a.childNodes,c=0;c<b.length;c++)if(1==b[c].nodeType)return b[c];return null},sforce.XmlReader.prototype.isTag=function(a,b){var c=b.nodeName.split(":");return 2==c.length&&c[1]==a||1==c.length&&c[0]==a},sforce.XmlReader.prototype.isNameValueNode=function(a){for(var b=a.childNodes,c=0;c<b.length;c++)if(3!=b[c].nodeType)return!1;return!0},sforce.XmlReader.prototype.getTextValue=function(a){if(3==a.nodeType)return a.nodeValue;if("true"==a.getAttribute("xsi:nil"))return null;for(var b="",c=a.childNodes,d=0;d<c.length;d++){if(3!=c[d].nodeType)throw"Not a simple name value node";b+=c[d].nodeValue}return b},sforce.XmlReader.prototype.toXmlObject=function(a){if("true"==a.getAttribute("xsi:nil"))return null;var b=new sforce.Xml,c=[];for(c.push({node:a,obj:b});c.length>0;)for(var d=c.shift(),e=d.node.firstChild;null!==e;e=e.nextSibling)if(1==e.nodeType){var f=e.nodeName,g=f.indexOf(":");f=-1==g?f:f.substring(g+1);for(var h,i=!0,j="",k=e.firstChild;null!==k;k=k.nextSibling){if(3!=k.nodeType){i=!1;break}j+=k.nodeValue}if(i?h="true"==e.getAttribute("xsi:nil")?null:j:(h=new sforce.Xml,c.push({node:e,obj:h})),d.obj[f])if(d.obj[f].push)d.obj[f].push(h);else{var l=d.obj[f];"Id"===f&&l===h||(d.obj[f]=[],d.obj[f].push(l),d.obj[f].push(h))}else d.obj[f]=h}return b},sforce.SoapTransport=function(){this.connectionCallback=null,this.result=null,this.fault=null,this.isAsync=!0,this.isArray=!1},sforce.SoapTransport.prototype.onFailure=function(a,b){alert("ERROR: ........... "+a),this.result=null},sforce.SoapTransport.prototype.send=function(a,b,c,d){this.isArray=c;var e=new sforce.Transport(a);if(this.isAsync=!!d,!this.isAsync){if(e.send(b.toString(),this,this.isAsync),null!==this.fault)throw this.fault;return this.result}this.connectionCallback=d,e.send(b.toString(),this,this.isAsync,d.timeout)},sforce.SoapTransport.prototype.httpCallback=function(a,b){try{if(!0===b){var c=new sforce.XmlReader(a),d=(c.getEnvelope(),c.getBody()),e=c.getFirstElement(d);if(null===e)throw"Unable to find operation response element";for(var f=[],g=e.childNodes,h=0;h<g.length;h++)1==g[h].nodeType&&(c.isNameValueNode(g[h])?f.push(c.getTextValue(g[h])):f.push(c.toXmlObject(g[h])));if(this.isArray)this.result=f;else{if(f.length>1)throw"Found more than one response: "+f;this.result=f[0]}if(this.isAsync)try{if(this.beforeCallback(),"function"==typeof this.connectionCallback)this.connectionCallback(this.result);else{if(!this.connectionCallback.onSuccess)throw"Unable to find onSuccess method in the callback object";this.connectionCallback.onSuccess(this.result,this.connectionCallback.source)}}finally{this.afterCallback()}}else if("undefined"!=typeof a.nodeName){var i=new sforce.XmlReader(a),j=(i.getEnvelope(),i.getBody()),k=i.getFirstElement(j),l=i.toXmlObject(k);this.sendFault(l)}else this.sendFault(a)}catch(m){this.sendFault(m)}},sforce.SoapTransport.prototype.sendFault=function(a){if(this.isAsync)if(this.connectionCallback.onFailure)try{this.beforeCallback(),this.connectionCallback.onFailure(a,this.connectionCallback.source)}finally{this.afterCallback()}else this.onFailure(a);else this.fault=a},sforce.SoapTransport.prototype.beforeCallback=function(){},sforce.SoapTransport.prototype.afterCallback=function(){},sforce.SObject=function(a){this.type=a},sforce.SObject.prototype=new sforce.Xml("sObjects"),sforce.LeadConvert=function(){},sforce.LeadConvert.prototype=new sforce.Xml("leadConverts"),sforce.MergeRequest=function(){},sforce.MergeRequest.prototype=new sforce.Xml("request"),sforce.DescribeSoqlListViewsRequest=function(){},sforce.DescribeSoqlListViewsRequest.prototype=new sforce.Xml("request"),sforce.DescribeSoqlListViewParams=function(){},sforce.DescribeSoqlListViewParams.prototype=new sforce.Xml("listViewParams"),sforce.QuickAction=function(){},sforce.QuickAction.prototype=new sforce.Xml("quickActions"),sforce.MatchOptions=function(){},sforce.MatchOptions.prototype=new sforce.Xml("matchOptions"),sforce.Connection=function(){this.sessionId=null,this.updateMru=null,this.allowFieldTruncation=null,this.disableFeedTracking=null,this.streamingEnabled=null,this.allOrNone=null,this.client=null,this.defaultNamespace=null,this.batchSize=null,this.loginScopeHeader=null,this.emailHeader=null,this.assignmentRuleHeader=null,this.duplicateRuleHeader=null,this.transferToUserId=null,this.debuggingHeader=null,this.serverUrl="undefined"!=typeof window.UserContext?UserContext.getUrl("/services/Soap/u/35.0"):"/services/Soap/u/35.0"},sforce.internal.Parameter=function(a,b,c){this.name=a,this.value=b,this.isArray=c},sforce.Connection.prototype.sforceNs="urn:partner.soap.sforce.com",sforce.Connection.prototype.sobjectNs="sobject.partner.soap.sforce.com",sforce.Connection.prototype.writeOne=function(a,b,c,d){null===c?a.writeNameValueNode(b,null):c.toXml?c.toXml(d,b,a):a.writeNameValueNode(b,c)},sforce.Connection.prototype.init=function(a,b){this.sessionId=a,this.serverUrl=b},sforce.Connection.prototype.login=function(a,b){var c=new sforce.internal.Parameter("username",a,!1),d=new sforce.internal.Parameter("password",b,!1),e=this.invoke("login",[c,d],!1,null);return this.sessionId=e.sessionId,e},sforce.Connection.prototype.describeSObject=function(a,b){var c=new sforce.internal.Parameter("sObjectType",a,!1);return this.invoke("describeSObject",[c],!1,b)},sforce.Connection.prototype.describeSObjects=function(a,b){var c=new sforce.internal.Parameter("sObjectType",a,!0);return this.invoke("describeSObjects",[c],!0,b)},sforce.Connection.prototype.describeSearchLayouts=function(a,b){var c=new sforce.internal.Parameter("sObjectType",a,!0);return this.invoke("describeSearchLayouts",[c],!0,b)},sforce.Connection.prototype.describeListViews=function(a,b){var c=new sforce.internal.Parameter("sObjectType",a,!0);return this.invoke("describeListViews",[c],!0,b)},sforce.Connection.prototype.describeSoqlListViews=function(a,b,c){var d=new sforce.DescribeSoqlListViewParams;d.developerNameOrId=a,d.sobjectType=b;var e=new sforce.DescribeSoqlListViewsRequest;e.listViewParams=[d];var f=new sforce.internal.Parameter("request",e,!1);return this.invoke("describeSoqlListViews",[f],!1,c)},sforce.Connection.prototype.describeGlobal=function(a){return this.invoke("describeGlobal",[],!1,a)},sforce.Connection.prototype.describeLayout=function(a,b,c,d){var e=new sforce.internal.Parameter("sObjectType",a,!1);b||(b=null);var f=new sforce.internal.Parameter("layoutName",b,!1);c||(c=[]);var g=new sforce.internal.Parameter("recordTypeIds",c,!0);return this.invoke("describeLayout",[e,f,g],!1,d)},sforce.Connection.prototype.describeAvailableQuickActions=function(a,b){var c=new sforce.internal.Parameter("parentType",a,!1);return this.invoke("describeAvailableQuickActions",[c],!0,b)},sforce.Connection.prototype.describeQuickActions=function(a,b){var c=new sforce.internal.Parameter("quickActionNames",a,!0);return this.invoke("describeQuickActions",[c],!0,b)},sforce.Connection.prototype.performQuickActions=function(a,b){var c=new sforce.internal.Parameter("quickActions",a,!0);return this.invoke("performQuickActions",[c],!0,b)},sforce.Connection.prototype.describeCompactLayouts=function(a,b,c){var d=new sforce.internal.Parameter("sObjectType",a,!1);b||(b=[]);var e=new sforce.internal.Parameter("recordTypeIds",b,!0);return this.invoke("describeCompactLayouts",[d,e],!1,c)},sforce.Connection.prototype.describePathAssistants=function(a,b,c,d){var e=new sforce.internal.Parameter("sObjectType",a,!1);b||(b=null);var f=new sforce.internal.Parameter("picklistValue",b,!1);c||(c=[]);var g=new sforce.internal.Parameter("recordTypeIds",c,!0);return this.invoke("describePathAssistants",[e,f,g],!1,d)},sforce.Connection.prototype.describePrimaryCompactLayouts=function(a,b){var c=new sforce.internal.Parameter("sObjectTypes",a,!0);return this.invoke("describePrimaryCompactLayouts",[c],!0,b)},sforce.Connection.prototype.describeApprovalLayout=function(a,b,c){var d=new sforce.internal.Parameter("sObjectType",a,!1);b||(b=[]);var e=new sforce.internal.Parameter("approvalProcessNames",b,!0);return this.invoke("describeApprovalLayout",[d,e],!1,c)},sforce.Connection.prototype.describeSObjectListViews=function(a,b,c){var d=new sforce.internal.Parameter("sObjectType",a,!1),e=new sforce.internal.Parameter("recentlyViewed",b,!1),f=new sforce.internal.Parameter("isSoqlCompatible",isSoqlCompatible,!1),g=new sforce.internal.Parameter("limit",limit,!1),h=new sforce.internal.Parameter("offset",offset,!1);return this.invoke("describeSObjectListViews",[d,e,f,g,h],!0,c)},sforce.Connection.prototype.describeTabs=function(a){return this.invoke("describeTabs",[],!0,a)},sforce.Connection.prototype.describeAllTabs=function(a){return this.invoke("describeAllTabs",[],!0,a)},sforce.Connection.prototype.describeFlexiPages=function(a,b){var c=new sforce.internal.Parameter("FlexiPage",a,!1);return this.invoke("describeFlexiPages",[c],!0,b)},sforce.Connection.prototype.describeTheme=function(a){return this.invoke("describeTheme",[],!0,a)},sforce.Connection.prototype.describeGlobalTheme=function(a){return this.invoke("describeGlobalTheme",[],!0,a)},sforce.Connection.prototype.describeSoftphoneLayout=function(a){return this.invoke("describeSoftphoneLayout",[],!1,a)},sforce.Connection.prototype.describeMiniLayout=function(a,b,c){var d=new sforce.internal.Parameter("sObjectType",a,!1),e=new sforce.internal.Parameter("recordTypeIds",b,!0);return this.invoke("describeMiniLayout",[d,e],!1,c)},sforce.Connection.prototype.describeSearchScopeOrder=function(a){return this.invoke("describeSearchScopeOrder",[],!0,a)},sforce.Connection.prototype.create=function(a,b){var c=new sforce.internal.Parameter("sObjects",a,!0);return this.invoke("create",[c],!0,b)},sforce.Connection.prototype.update=function(a,b){var c=new sforce.internal.Parameter("sObjects",a,!0);return this.invoke("update",[c],!0,b)},sforce.Connection.prototype.upsert=function(a,b,c){var d=new sforce.internal.Parameter("externalIDFieldName",a,!1),e=new sforce.internal.Parameter("sObjects",b,!0);return this.invoke("upsert",[d,e],!0,c)},sforce.Connection.prototype.deleteIds=function(a,b){var c=new sforce.internal.Parameter("ids",a,!0);return this.invoke("delete",[c],!0,b)},sforce.Connection.prototype.impersonateUser=function(a,b){var c=new sforce.internal.Parameter("ids",a,!0);return this.invoke("impersonateUser",[c],!0,b)},sforce.Connection.prototype.query=function(a,b){var c=new sforce.internal.Parameter("queryString",a,!1);return this.invoke("query",[c],!1,b)},sforce.Connection.prototype.queryAll=function(a,b){var c=new sforce.internal.Parameter("queryString",a,!1);return this.invoke("queryAll",[c],!1,b)},sforce.Connection.prototype.queryMore=function(a,b){var c=new sforce.internal.Parameter("queryLocator",a,!1);return this.invoke("queryMore",[c],!1,b)},sforce.Connection.prototype.retrieve=function(a,b,c,d){var e=new sforce.internal.Parameter("fieldList",a,!1),f=new sforce.internal.Parameter("sObjectType",b,!1),g=new sforce.internal.Parameter("ids",c,!0);return this.invoke("retrieve",[e,f,g],!0,d)},sforce.Connection.prototype.match=function(a,b,c){var d=new sforce.internal.Parameter("sObjects",a,!0),e=new sforce.internal.Parameter("matchOptions",b,!1);return this.invoke("match",[d,e],!1,c)},sforce.Connection.prototype.getAccessInfo=function(a){return this.invoke("getAccessInfo",[],!1,a)},sforce.Connection.prototype.getUserInfo=function(a){return this.invoke("getUserInfo",[],!1,a)},sforce.Connection.prototype.resetPassword=function(a,b){var c=new sforce.internal.Parameter("userId",a,!1);return this.invoke("resetPassword",[c],!1,b)},sforce.Connection.prototype.setPassword=function(a,b,c){var d=new sforce.internal.Parameter("userId",a,!1),e=new sforce.internal.Parameter("password",b,!1);return this.invoke("setPassword",[d,e],!1,c)},sforce.Connection.prototype.search=function(a,b){var c=new sforce.internal.Parameter("searchString",a,!1);return this.invoke("search",[c],!1,b)},sforce.Connection.prototype.getDeleted=function(a,b,c,d){var e=new sforce.internal.Parameter("sObjectType",a,!1),f=new sforce.internal.Parameter("startDate",b,!1),g=new sforce.internal.Parameter("endDate",c,!1);return this.invoke("getDeleted",[e,f,g],!1,d)},sforce.Connection.prototype.getUpdated=function(a,b,c,d){var e=new sforce.internal.Parameter("sObjectType",a,!1),f=new sforce.internal.Parameter("startDate",b,!1),g=new sforce.internal.Parameter("endDate",c,!1);return this.invoke("getUpdated",[e,f,g],!1,d)},sforce.Connection.prototype.getServerTimestamp=function(a){return this.invoke("getServerTimestamp",[],!1,a)},sforce.Connection.prototype.convertLead=function(a,b){var c=new sforce.internal.Parameter("leadConverts",a,!0);return this.invoke("convertLead",[c],!0,b)},sforce.Connection.prototype.merge=function(a,b){var c=new sforce.internal.Parameter("request",a,!0);return this.invoke("merge",[c],!0,b)},sforce.Connection.prototype.undelete=function(a,b){var c=new sforce.internal.Parameter("ids",a,!0);return this.invoke("undelete",[c],!0,b)},sforce.Connection.prototype.process=function(a,b){var c=new sforce.internal.Parameter("actions",a,!0);return this.invoke("process",[c],!0,b)},sforce.Connection.prototype.sendEmail=function(a,b){var c=new sforce.internal.Parameter("messages",a,!0);return this.invoke("sendEmail",[c],!0,b)},sforce.Connection.prototype.emptyRecycleBin=function(a,b){var c=new sforce.internal.Parameter("ids",a,!0);return this.invoke("emptyRecycleBin",[c],!0,b)},sforce.Connection.prototype.invalidateSessions=function(a,b){var c=new sforce.internal.Parameter("sessionIds",a,!0);return this.invoke("invalidateSessions",[c],!0,b)},sforce.Connection.prototype.logout=function(a){return this.invoke("logout",[],!0,a)},sforce.Connection.prototype.remoteFunction=function(a){function b(){if(sforce.debug.trace&&sforce.debug.log("callback called ..."),4==c.readyState)if(200==c.status)if("text/plain"==a.mimeType)a.onSuccess(c.responseText,c);else{if("text/xml"!=a.mimeType)throw"unsupported mime type: "+a.mimeType;if(!c.responseXML||!c.responseXML.documentElement)throw"Response not text/xml mime type: "+c.responseText;a.onSuccess(c.responseXML.documentElement,c)}else a.onFailure?a.onFailure(c.responseText,c):sforce.debug.log(c.responseText)}if(!a.url)throw"url not defined";if(!a.onSuccess)throw"onSuccess method not defined";if(a.method||(a.method="GET"),a.mimeType||(a.mimeType="text/plain"),"undefined"==typeof a.async&&(a.async=!0),"undefined"==typeof a.cache&&(a.cache=!1),"text/plain"!=a.mimeType&&"text/xml"!=a.mimeType)throw"Unknown mime type "+a.mimeType;sforce.debug.trace&&sforce.debug.log("Open connection to ... "+a.url);var c=(new sforce.Transport).newConnection(),d="undefined"!=typeof window.UserContext?UserContext.getUrl("/services/proxy"):"/services/proxy";if(d=a.cache?d+"?end-point-url="+a.url:d+"?no-cache="+(new Date).getTime(),c.open(a.method,d,a.async),a.requestHeaders)for(var e in a.requestHeaders)"function"!=typeof a.requestHeaders[e]&&c.setRequestHeader(e,a.requestHeaders[e]);c.setRequestHeader("SalesforceProxy-Endpoint",a.url),c.setRequestHeader("SalesforceProxy-SID",this.sessionId),a.async&&(c.onreadystatechange=b),sforce.debug.trace&&sforce.debug.log("Sending ..."),a.requestData?c.send(a.requestData):c.send(null),sforce.debug.trace&&sforce.debug.log("Done Sending ..."),a.async||b()},sforce.Connection.prototype.writeHeader=function(a,b){if(a.startHeader(),a.writeNamespace(b,"sfns"),null!==this.sessionId&&(a.writeStartElement("SessionHeader",b),a.writeNameValueNode("sessionId",this.sessionId),a.writeEndElement("SessionHeader",b)),"undefined"!=typeof this.organizationId)throw"Use sforce.connection.loginScopeHeader.organizationId instead of sforce.connection.organizationId";if(null!==this.loginScopeHeader&&(a.writeStartElement("LoginScopeHeader",b),null!==this.loginScopeHeader.organizationId&&a.writeNameValueNode("organizationId",this.loginScopeHeader.organizationId),null!==this.loginScopeHeader.portalId&&a.writeNameValueNode("portalId",this.loginScopeHeader.portalId),a.writeEndElement("LoginScopeHeader",b)),(null!==this.client||null!==this.defaultNamespace)&&(a.writeStartElement("CallOptions",b),null!==this.client&&a.writeNameValueNode("client",this.client),null!==this.defaultNamespace&&a.writeNameValueNode("defaultNamespace",this.defaultNamespace),a.writeEndElement("CallOptions",b)),null!==this.batchSize&&(a.writeStartElement("QueryOptions",b),a.writeNameValueNode("batchSize",this.batchSize),a.writeEndElement("QueryOptions",b)),null!==this.allowFieldTruncation&&(a.writeStartElement("AllowFieldTruncationHeader",b),a.writeNameValueNode("allowFieldTruncation",this.allowFieldTruncation),a.writeEndElement("AllowFieldTruncationHeader",b)),null!==this.disableFeedTracking&&(a.writeStartElement("DisableFeedTrackingHeader",b),a.writeNameValueNode("disableFeedTracking",this.disableFeedTracking),a.writeEndElement("DisableFeedTrackingHeader",b)),null!==this.streamingEnabled&&(a.writeStartElement("StreamingEnabledHeader",b),a.writeNameValueNode("StreamingEnabled",this.streamingEnabled),a.writeEndElement("StreamingEnabledHeader",b)),null!==this.allOrNone&&(a.writeStartElement("AllOrNoneHeader",b),a.writeNameValueNode("allOrNone",this.allOrNone),a.writeEndElement("AllOrNoneHeader",b)),null!==this.updateMru&&(a.writeStartElement("MruHeader",b),a.writeNameValueNode("updateMru",this.updateMru),a.writeEndElement("MruHeader",b)),null!==this.emailHeader&&(a.writeStartElement("EmailHeader",b),this.emailHeader.triggerAutoResponseEmail&&a.writeNameValueNode("triggerAutoResponseEmail",this.emailHeader.triggerAutoResponseEmail),this.emailHeader.triggerOtherEmail&&a.writeNameValueNode("triggerOtherEmail",this.emailHeader.triggerOtherEmail),this.emailHeader.triggerUserEmail&&a.writeNameValueNode("triggerUserEmail",this.emailHeader.triggerUserEmail),a.writeEndElement("EmailHeader",b)),null!==this.assignmentRuleHeader&&(a.writeStartElement("AssignmentRuleHeader",b),this.assignmentRuleHeader.assignmentRuleId&&a.writeNameValueNode("assignmentRuleId",this.assignmentRuleHeader.assignmentRuleId),this.assignmentRuleHeader.useDefaultRule&&a.writeNameValueNode("useDefaultRule",this.assignmentRuleHeader.useDefaultRule),a.writeEndElement("AssignmentRuleHeader",b)),null!==this.transferToUserId&&(a.writeStartElement("UserTerritoryDeleteHeader",b),a.writeNameValueNode("transferToUserId",this.transferToUserId),a.writeEndElement("UserTerritoryDeleteHeader",b)),null!==this.duplicateRuleHeader&&(a.writeStartElement("DuplicateRuleHeader",b),this.duplicateRuleHeader.allowSave&&a.writeNameValueNode("allowSave",this.duplicateRuleHeader.allowSave),this.duplicateRuleHeader.includeRecordDetails&&a.writeNameValueNode("includeRecordDetails",this.duplicateRuleHeader.includeRecordDetails),this.duplicateRuleHeader.runAsCurrentUser&&a.writeNameValueNode("runAsCurrentUser",this.duplicateRuleHeader.runAsCurrentUser),a.writeEndElement("DuplicateRuleHeader",b)),null!==this.debuggingHeader){if(a.writeStartElement("DebuggingHeader",b),this.debuggingHeader.debugLevel&&a.writeNameValueNode("debugLevel",this.debuggingHeader.debugLevel),this.debuggingHeader.debugCategories)for(var c=this.debuggingHeader.debugCategories,d=0;d<c.length;d++){var e=c[d].split(",");2==e.length&&(a.writeStartElement("categories"),a.writeNameValueNode("category",e[0]),a.writeNameValueNode("level",e[1]),a.writeEndElement("categories"))}a.writeEndElement("DebuggingHeader",b)}a.endHeader()},sforce.Connection.prototype.namespaceMap=[{ns:sforce.Connection.prototype.sforceNs,prefix:null},{ns:sforce.Connection.prototype.sobjectNs,prefix:"ns1"}],sforce.Connection.prototype.invoke=function(a,b,c,d){return this._invoke(a,b,c,d,this.namespaceMap,this.serverUrl,this.sforceNs,this.sobjectNs)},sforce.Connection.prototype._invoke=function(a,b,c,d,e,f,g,h){if(d)if("function"==typeof d);else{if(!d.onSuccess)throw"onSuccess not defined in the callback";if(!d.onFailure)throw"onFailure not defined in the callback"}var i=new sforce.XmlWriter;i.startEnvelope(),this.writeHeader(i,g),i.startBody(),i.writeStartElement(a);for(var j=0;j<e.length;j++)i.writeNamespace(e[j].ns,e[j].prefix);for(var j=0;j<b.length;j++){var k=b[j];if("undefined"==typeof k.value)throw"arg "+j+" '"+k.name+"' not specified";if(null!==k.value){if(k.isArray&&!k.value.push)throw"arg "+j+" '"+k.name+"' is an array. But passed in value is not an array";if(!k.isArray&&k.value.push)throw"arg "+j+" '"+k.name+"' is not an array. But passed in value is an array"}if(null===k.value)this.writeOne(i,k.name,null,h);else if(k.value.push)for(var l=0;l<k.value.length;l++){var m=k.value[l];if(!m)throw"Array element at "+l+" is null.";this.writeOne(i,k.name,m,h)}else this.writeOne(i,k.name,k.value,h)}return i.writeEndElement(a),i.endBody(),i.endEnvelope(),sforce.debug.trace&&(sforce.debug.log("Request: server- "+f),sforce.debug.logXml(i.toString())),(new sforce.SoapTransport).send(f,i,c,d)},sforce.QueryResultIterator=function(a){this.queryResult=a,this.index=0,this.records=this.queryResult.getArray("records")},sforce.QueryResultIterator.prototype.hasNext=function(){return this.records.length>this.index||(null!==this.queryResult.queryLocator&&(this.queryResult=sforce.connection.queryMore(this.queryResult.queryLocator),this.records=this.queryResult.getArray("records"),this.index=0),this.records.length>this.index)},sforce.QueryResultIterator.prototype.next=function(){if(this.records.length>this.index){var a=this.records[this.index];return this.index++,a}throw"Index out of bound : "+this.index},sforce.Email=function(){},sforce.Email.prototype=new sforce.Xml("messages"),sforce.MassEmailMessage=function(){},sforce.MassEmailMessage.prototype=new sforce.Xml("messages"),sforce.MassEmailMessage.prototype._xsiType="MassEmailMessage",sforce.SingleEmailMessage=function(){},sforce.SingleEmailMessage.prototype=new sforce.Xml("messages"),sforce.SingleEmailMessage.prototype._xsiType="SingleEmailMessage",sforce.ProcessRequest=function(){},sforce.ProcessRequest.prototype=new sforce.Xml("actions"),sforce.ProcessSubmitRequest=function(){},sforce.ProcessSubmitRequest.prototype=new sforce.Xml("actions"),sforce.ProcessSubmitRequest.prototype._xsiType="ProcessSubmitRequest",sforce.ProcessWorkitemRequest=function(){},sforce.ProcessWorkitemRequest.prototype=new sforce.Xml("actions"),sforce.ProcessWorkitemRequest.prototype._xsiType="ProcessWorkitemRequest",sforce.connection=new sforce.Connection;var UserContext="undefined"!=typeof window.UserContext?window.UserContext:{siteUrlPrefix:"",getUrl:function(a){return void 0!==a&&"undefined"!=typeof UserContext.siteUrlPrefix&&UserContext.siteUrlPrefix?0!=a.indexOf("/")?a:0==a.indexOf(UserContext.siteUrlPrefix)?a:UserContext.siteUrlPrefix+a:a}};"undefined"!=typeof __sfdcSiteUrlPrefix&&(UserContext.siteUrlPrefix=__sfdcSiteUrlPrefix),sforce.connection.serverUrl="undefined"!=typeof window.UserContext?UserContext.getUrl("/services/Soap/u/35.0"):"/services/Soap/u/35.0","undefined"!=typeof __sfdcSessionId&&(sforce.connection.sessionId=__sfdcSessionId),window.Sfdc&&Sfdc.xdomain&&window.location.hostname.indexOf(".visual.force.")>-1&&(sforce._consoleApiUrl="/support/console/35.0/integration.js",setTimeout(function(){skuid.load.js(sforce._consoleApiUrl)},0)),function(){var a;try{a=!!new Blob}catch(b){}a?(skuid.utils||(skuid.utils={}),skuid.utils.saveAs=skuid.utils.saveAs||function(a){if(!(void 0===a||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in d,f=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},g=/constructor/i.test(a.HTMLElement)||a.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),i=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},j=function(a){var b=function(){"string"==typeof a?c().revokeObjectURL(a):a.remove()};setTimeout(b,4e4)},k=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){i(f)}}},l=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},m=function(b,i,m){m||(b=l(b));var n,o=this,p=b.type,q="application/octet-stream"===p,r=function(){k(o,"writestart progress write writeend".split(" "))};if(o.readyState=o.INIT,e)return n=c().createObjectURL(b),void setTimeout(function(){d.href=n,d.download=i,f(d),r(),j(n),o.readyState=o.DONE});!function(){if((h||q&&g)&&a.FileReader){var d=new FileReader;return d.onloadend=function(){var b=h?d.result:d.result.replace(/^data:[^;]*;/,"data:attachment/file;");a.open(b,"_blank")||(a.location.href=b),b=undefined,o.readyState=o.DONE,r()},d.readAsDataURL(b),void(o.readyState=o.INIT)}if(n||(n=c().createObjectURL(b)),q)a.location.href=n;else{a.open(n,"_blank")||(a.location.href=n)}o.readyState=o.DONE,r(),j(n)}()},n=m.prototype,o=function(a,b,c){return new m(a,b||a.name||"download",c)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,b,c){return b=b||a.name||"download",c||(a=l(a)),navigator.msSaveOrOpenBlob(a,b)}:(n.abort=function(){},n.readyState=n.INIT=0,n.WRITING=1,n.DONE=2,n.error=n.onwritestart=n.onprogress=n.onwrite=n.onabort=n.onerror=n.onwriteend=null,o)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content),"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs})):(skuid.utils||(skuid.utils={}),skuid.utils.saveAs=function(){})}()}!function(a){var b={ADDRESS:"ADDRESS",ANYTYPE:"ANYTYPE",ARRAY:"ARRAY",BASE64:"BASE64",BOOLEAN:"BOOLEAN",COMBOBOX:"COMBOBOX",CURRENCY:"CURRENCY",CUSTOM:"CUSTOM",DATE:"DATE",DATETIME:"DATETIME",DOUBLE:"DOUBLE",EMAIL:"EMAIL",ENCRYPTEDSTRING:"ENCRYPTEDSTRING",FORMULA:"FORMULA",ID:"ID",IMAGE:"IMAGE",INTEGER:"INTEGER",LOCATION:"LOCATION",MULTIPICKLIST:"MULTIPICKLIST",NUMBER:"NUMBER",OBJECT:"OBJECT",PHONE:"PHONE",PICKLIST:"PICKLIST",PERCENT:"PERCENT",REFERENCE:"REFERENCE",STRING:"STRING",TEXT:"TEXT",TEXTAREA:"TEXTAREA",RICHTEXT:"RICHTEXT",TIME:"TIME",URL:"URL",UUID:"UUID"},c={CHILDREL:"CHILDREL",COMBO:"COMBO",FILE:"FILE",IMAGE:"IMAGE"},d={BOOLEAN:"boolean",NUMBER:"number",STRING:"string",OBJECT:"object",FUNCTION:"function",UNDEFINED:"undefined"},e={JSON:"application/json",ZIP:"application/zip"},f={GET:"GET",PATCH:"PATCH",POST:"POST",PUT:"PUT",DELETE:"DELETE",MERGE:"MERGE"},g={GLOBAL:"global",MODEL:"model",ROW:"row"},h=["font-awesome","foundation-icons","icons8-win10","ionicons","material-icons"],i={"font-awesome":"Font Awesome 4","foundation-icons":"Foundation","glyphicons-halflings":"Glyphicons","icomoon-free":"Icomoon Free","icons8-win10":"Icons8 Windows 10",ionicons:"Ion","lightning-design":"Lightning Design","material-icons":"Material",stroke7:"Stroke 7"},j={SEARCH_CONDITION:"__default_searchbox",GLOBAL_SEARCH_CONDITION:"search"},k={medium:1024,small:480},l={NOW:"NOW",YESTERDAY:"YESTERDAY",TODAY:"TODAY",TOMORROW:"TOMORROW",LAST_90_DAYS:"LAST_90_DAYS",NEXT_90_DAYS:"NEXT_90_DAYS",LAST_N_DAYS:"LAST_N_DAYS",NEXT_N_DAYS:"NEXT_N_DAYS",N_DAYS_AGO:"N_DAYS_AGO",LAST_WEEK:"LAST_WEEK",THIS_WEEK:"THIS_WEEK",NEXT_WEEK:"NEXT_WEEK",LAST_N_WEEKS:"LAST_N_WEEKS",NEXT_N_WEEKS:"NEXT_N_WEEKS",N_WEEKS_AGO:"N_WEEKS_AGO",LAST_MONTH:"LAST_MONTH",THIS_MONTH:"THIS_MONTH",NEXT_MONTH:"NEXT_MONTH",LAST_N_MONTHS:"LAST_N_MONTHS",NEXT_N_MONTHS:"NEXT_N_MONTHS",N_MONTHS_AGO:"N_MONTHS_AGO",LAST_QUARTER:"LAST_QUARTER",THIS_QUARTER:"THIS_QUARTER",NEXT_QUARTER:"NEXT_QUARTER",LAST_N_QUARTERS:"LAST_N_QUARTERS",NEXT_N_QUARTERS:"NEXT_N_QUARTERS",N_QUARTERS_AGO:"N_QUARTERS_AGO",LAST_YEAR:"LAST_YEAR",THIS_YEAR:"THIS_YEAR",NEXT_YEAR:"NEXT_YEAR",LAST_N_YEARS:"LAST_N_YEARS",NEXT_N_YEARS:"NEXT_N_YEARS",N_YEARS_AGO:"N_YEARS_AGO"};a.constants={DISPLAY_TYPES:b,FIELD_TYPES:c,HTTP_VERBS:f,MERGE_CONTEXTS:g,MEDIA_QUERY_BREAKPOINTS:k,JS_TYPES:d,MIME_TYPES:e,DATASOURCE:j,WEB_ICON_SET_PREFIXES:h,WEB_ICON_SET_LABELS:i,DATE_KEYWORDS:l,LOCAL:"local",SALESFORCE:"salesforce",NATIVE:"pliny",VISUALFORCE:"visualforce",LIGHTNING:"lightning"}}(skuid),function(a,b){var c,d=a.themeSettings={};d.load=function(d){"string"==typeof d&&(d=JSON.parse(d)),c=b.extend({},d),a.events.publish("ui.themeSettings.loaded")},d.getAll=function(){return c}}(skuid,skuid.$),function(a,b,c){function d(){return a.utils}function e(){return h.fontsloaded}function f(e){e===c&&(e={});var f=d().size,g=d().getSafeRelativeUrl,h=b.extend({},e),i=h.custom;return i!==c&&(a.utils.inPlatform(a.constants.LIGHTNING)&&i.localurls&&i.localurls.length&&(i.localurls.forEach(function(a,b){i.urls[b]=a}),delete i.localurls),i.urls&&i.urls.length&&i.urls.forEach(function(a,b){i.urls[b]=g(a)}),f(i)&&i.families!==c&&i.families.length||delete h.custom),i=h.google,i!==c&&(f(i)&&i.families!==c&&i.families.length||delete h.google),i=h.typekit,i!==c&&(f(i)&&i.id!==c&&"string"==typeof i.id||delete h.typekit),h}function g(c){function e(){var b=window.sforce,c=b&&b._consoleApiUrl,d=function(){a.events.publish("ui.fontsloaded")};h.fontsloaded=!0,c?a.load.js(c).always(function(){d()}):d()}"string"==typeof c&&(c=JSON.parse(c));var f,g,i,j=h.processFontConfig(c&&c.fontConfig),k=c?c.cssResources:null,l=d().getSafeRelativeUrl;if(j.custom||j.google||j.typekit?(j.active=e,j.inactive=e,h.attemptedToLoadFonts=!0,WebFont.load(j)):e(),k)for(g=0;g<k.length;g++)f=k[g],i=null,(i=d().isString(f)?f:"static"===f.type?a.platform.themeBuilder.getThemeResourceUrl(f):f.url)&&d().loadCSS(l(i),{insertAfter:b("link#themeLink")[0]})}var h=a.webfonts={attemptedToLoadFonts:!1,fontsloaded:!1};b.extend(h,{haveFontsLoaded:e,processFontConfig:f,load:g})}(skuid,skuid.$),function(a,b){b.fn.skootip=function(c,d){var e,f=this,g={position:{my:"center bottom",at:"center top-10",collision:"fit",using:function(a,c){b(this).css({top:a.top,left:a.left});var d=a.left+c.element.width/2,f=c.target.left+c.target.width/2;e=Math.floor(f-d-4)}},show:{delay:700},open:function(a,c){var d=b("<div>").addClass("sk-hastooltip").css("left",e+"px");c.tooltip.append(d)}};return c&&f.attr("title",c),d&&b.extend(!0,g,d),a.utils._oniOS()?f:f.tooltip(g)}}(skuid,skuid.$),function(a,b){function c(a,b){return h[a]||(h[a]=[]),h[a].push(b),[a,b]}function d(a,c,d){if(d||(d={}),d.buffer&&!i[a]?i[a]={interval:d.buffer}:!1===d.buffer&&i[a]&&delete i[a],h[a]){var e=i[a],f=function(){b.each(h[a].slice(0),function(a,d){d&&d.apply(b,c||[])})};e?(!e.initialCallTime||(new Date).getTime()-e.initialCallTime>e.interval)&&(setTimeout(f,e.interval),e.initialCallTime=(new Date).getTime()):f()}}function e(a,d){return a instanceof Array?b.map(a,function(a){return c(a,d)}):c(a,d)}function f(a,c){var d=c?null:b.Deferred(),f=e(a,function(){g(f),c?c.apply(b,arguments):d.resolve(arguments)});return c?f:d.promise()}function g(a){var b,c=a[0],d=a[1],e=h[c];if(e&&e.length)for(b=e.length-1;b>=0;b--)e[b]==d&&e.splice(b,1)}var h={},i={};a.events={_cache:h,publish:d,subscribe:e,subscribeOnce:f,unsubscribe:g}}(skuid,skuid.$),function(a,b){function c(a){var c=a.Id,d=f[c];d||(d=f[c]={}),b.extend(d,a)}function d(d){var e={},i={data:e},j={},k=!1;if(b.each(d,function(c,d){var g,h=d.objectType,i=d.fields,k=d.records,l=e[c]={};b.each(k,function(c,d){var e,k={},m={},n=0,o={};b.each(i,function(a,b){m[b]=1,n++}),n&&(e=f[d],e&&b.each(m,function(b){
var c=a.utils.getObjectProperty(e,b);void 0!==c&&(o[b]=c,delete m[b],n--)}),n&&(b.each(a.model.list(),function(c,f){if(f.data&&f.data.length&&(f.objectName===h&&(e=f.getRowById(d))&&b.each(m,function(a){a in e&&(o[a]=f.getFieldValue(e,a,!0),delete m[a],n--)}),n)){var g={},i=f.fields;i&&i.length&&b.each(i,function(a,c){var d=c.referenceTo;"REFERENCE"===c.displaytype&&d&&d.length&&b.each(d,function(a,b){if(b.objectName===h)return g[c.id]=c.rel,!1})}),a.utils.size(g)&&b.each(g,function(c,e){if(b.each(f.data,function(f,g){if(a.utils.getObjectProperty(g,c)===d&&(b.each(m,function(b){var c=a.utils.getObjectProperty(g,e+"."+b);void 0!==c&&(o[b]=c,delete m[b],n--)}),!n))return!1}),!n)return!1})}}),n&&(g=j[h],g||(g=j[h]={objectType:h,fields:{},records:[]}),g.records.push(d),b.each(m,function(a){g.fields[a]=1})))),b.extend(k,o),l[d]={record:k,isDone:0===n}})}),a.utils.size(j)){k=!0;var l=[],m=b.Deferred(),n=g++;b.each(j,function(c,d){var e=new a.model.Model({objectName:c,id:a.utils.generateGUID(),fields:b.map(d.fields,function(a,b){return{id:b}}),conditions:[{field:"Id",operator:"IN",type:"multiple",values:d.records}],doQuery:!0,recordsLimit:d.records.length,doClone:!1});e.calloutIterator=n,e.lastSuccessfulCallout=function(){return h},l.push(e)}),j={},b.when(a.model.load(l)).done(function(){b.each(l,function(a,d){var f=e[d.keyPrefix];b.each(d.data,function(a,e){"attributes"in e&&delete e.attributes;var g=e.Id,h=f[g];h||(h=f[g]={}),b.extend(h,d.getRowById(g)),h.isDone=!0,c(e)})}),i.isSuccess=!0}).fail(function(){i.isSuccess=!1}).always(function(){h=l[0].lastSuccessfulCallout,i.isComplete=!0,m.resolve(i)}),i.promise=m.promise()}return i.isComplete=i.isSuccess=!k,i}var e=a.data={},f={},g=0,h=0;e.get=d,e.add=c}(skuid,skuid.$),function(a,b){function c(a){f[e]=a}function d(){return f[e]}var e="_cls",f=a.remote=function(){var c,d=a.utils.getObjectProperty,g=f[e],h=d(window,g),i=d(window,"skuid.RemotingStubs");return"skuid.RemotingStubs"!==g?(c=i||{},h&&b.extend(c,h)):c=h||i,c};c("skuid.RemotingStubs"),f.set=c,f.get=d}(skuid,skuid.$),function(a,b){function c(a){return"[object Date]"===Object.prototype.toString.call(a)}function d(a){N=a}function e(){var b=window.Intl&&window.Intl.DateTimeFormat&&window.Intl.DateTimeFormat();return b&&(b=b.resolved?b.resolved.timeZone:b.resolvedOptions?b.resolvedOptions().timeZone:null),!b&&a[P]&&(b=a[P].tz.guess()),b}function f(c,d){if(Q(c))throw"A valid TimeZone Id is required.";var f,g=K,h=N,i=e(),j=b.Deferred(),k=!1,l=!Q(d)&&h!==d||g!==c,m=function(){var b=a[P];O=!Q(b),K=c,N=b?b.tz.zone(K).offset(new Date):Q(d)?N:d},n=a.utils;return l?(k=Q(i)?M!==d:i!==c,f=k&&!a[P]?n.loadJS(n.getStaticResourceUrl("MomentJS","skuid",null,n.getCacheTimestamp())):b.Deferred().resolve(),f.done(function(){m(),a.events.publish("ui.timeZoneChanged",[{oldTimeZone:g,newTimeZone:c}]),j.resolve({changed:!0})}).fail(function(){j.reject("Unable to load information for timezone.")}),j.promise()):j.resolve()}function g(){return K}function h(a){if(!a)return!1;if(c(a))return a;var b=a.split&&a.split("T"),d=b&&b.length&&b[0].split("-");return!(!d||3!==d.length)&&new Date(d[0],d[1]-1,d[2])}function i(b){if(b){if(c(b)){var d=b.getMonth()-0+1+"",e=b.getDate()+"";return 1===d.length&&(d="0"+d),1===e.length&&(e="0"+e),b.getFullYear()+"-"+d+"-"+e}return a.utils.isString(b)&&3===b.split("-").length?b:null}return null}function j(b){if(!b)return"";var c;return c=a.utils.isDate(b)?i(b):b,1===c.split(" ").length?l(h(c)):k(h(c))}function k(a){return l(s(a))}function l(c){return c?b.datepicker.formatDate(a.utils.userLocale.dateFormat,c):""}function m(a){return o(a)}function n(b){var c=a.utils;if(!b&&0!==b)return!1;var d,e=Date.parse,f=[1,4,5,6,7,10,11],g=0;if(d=R.exec(b)){for(var h,i=0;h=f[i];++i)d[h]=+d[h]||0;return d[2]=(+d[2]||1)-1,d[3]=+d[3]||1,"Z"===d[8]||c.isUndefined(d[9])||(g=60*d[10]+d[11],"+"===d[9]&&(g=0-g)),Date.UTC(d[1],d[2],d[3],d[4],d[5]+g,d[6],d[7])}return c.isString(b)&&-1!==b.split(":")[0].indexOf("N_")?NaN:e?e(b):NaN}function o(a){if(c(a))return a;var b=n(a);return!isNaN(b)&&!1!==b&&new Date(b)}function p(b){return b&&"function"==typeof b.toISOString?b.toISOString():b&&a.utils.isString(b)?b:null}function q(b){return O?a[P].tz.zone(K).offset(b):N}function r(b){return O?a[P].tz.zone(e()).offset(b):M}function s(a){if(!a)return!1;var b=a.getTime(),c=new Date(b);return c.setMinutes(c.getMinutes()-(q(b)-r(b))),c}function t(a){if(!a)return!1;var b=a.getTime(),c=new Date(b);return c.setMinutes(a.getMinutes()+(q(b)-r(b))),c}function u(b){if(b){var d=c(b)?b:o(b),e=s(d),f=a.utils.userLocale;if(e)return f.showTimeBeforeDate?w(f.timeFormat,e)+" "+l(e):l(e)+" "+w(f.timeFormat,e)}return""}function v(d,e){if(void 0!==e&&void 0!==d){var f,g,h=a.utils.isString;return h(e)&&!h(d)&&c(d)?(f=d,g=e):(h(e)&&(e=o(e)),f=e,g=d),b.datepicker.formatDate(g,f)}return""}function w(b,c){if(!c&&0!==c)return"";a.utils.isString(c)&&(c=o(c));var d,e=function(a){var c=d+1<b.length&&b.charAt(d+1)===a;return c&&d++,c},f=function(a){return a.getHours()%12},g=function(a,b,c){var d=""+b;if(e(a))for(;d.length<c;)d="0"+d;return d},h="",i=!1;if(c)for(d=0;d<b.length;d++)if(i)"'"!==b.charAt(d)||e("'")?h+=b.charAt(d):i=!1;else switch(b.charAt(d)){case"a":h+=y(c);break;case"h":var j=f(c);0===j&&(j=12),h+=g("h",j,2);break;case"K":h+=g("h",f(c),2);break;case"k":h+=g("k",c.getHours()+1,2);break;case"H":h+=g("H",c.getHours(),2);break;case"m":h+=g("m",c.getMinutes(),2);break;case"s":h+=g("s",c.getSeconds(),2);break;case"S":h+=g("S",c.getMilliseconds(),3);break;case"Z":var k=r(c),l=Math.floor(Math.abs(k)/60),m=Math.abs(k)-60*l;l<10&&(l="0"+l),m<10&&(m="0"+m),h+=(k<0?"+":"-")+l+m;break;case"'":e("'")?h+="'":i=!0;break;default:h+=b.charAt(d)}return h}function x(b,c){var d,e,f=a.utils,g=f.isUndefined;return b||0===b?(f.isString(b)?(e=(d=R.exec(b))&&!g(d[3])&&g(d[4]),(b=e?h(b):o(b))&&!e&&(b=s(b))):f.isNumber(b)&&(b=new Date(b)),b&&f.isDate(b)?(c&&(b=Date.prototype[c].call(b)),b):null):null}function y(b){var c=a.time.amPm,d=x(b,"getHours");return null!==d?d>11?c[1]:c[0]:null}function z(a){var b=x(a,"getMonth");return null!==b?1+b:null}function A(a){var b=x(a,"getUTCMonth");return null!==b?1+b:null}function B(b){var c=x(b,"getMonth");return null!==c?a.time.monthNames[c]:null}function C(b){var c=x(b,"getMonth");return null!==c?a.time.monthNamesShort[c]:null}function D(a){var b=x(a,"getDay");return null!==b?1+b:null}function E(a){var b=x(a,"getUTCDay");return null!==b?1+b:null}function F(b){var c=x(b,"getDay");return null!==c?a.time.dayNames[c]:null}function G(b){var c=x(b,"getDay");return null!==c?a.time.dayNamesShort[c]:null}function H(a,b,c){b=b||{},c=c||{};var d,e,f=b.years||0,g=b.quarters||0,h=(b.months||0)+3*g,i=b.weeks||0,j=b.days||0,k=(b.hours||0)+24*j+168*i,l=b.minutes||0,m=b.seconds||0,n=b.milliseconds||0,o=c.baseDate,p=c.useDeviceTimezone;switch(e=o?new Date(o.getTime()):p?new Date:s(new Date),a){case S:e.setMonth(0);case T:e.setMonth(e.getMonth()-e.getMonth()%3);case U:e.setDate(1);case W:e.setHours(0);case X:e.setMinutes(0);case Y:e.setSeconds(0);case Z:e.setMilliseconds(0);break;case V:e.setHours(-24*e.getDay()),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}return f&&e.setFullYear(e.getFullYear()+f),h&&(d=(e.getMonth()+h)%12,e.setMonth(e.getMonth()+h),e.getMonth()>d&&e.setDate(-e.getDate())),k&&e.setHours(e.getHours()+k),l&&e.setMinutes(e.getMinutes()+l),m&&e.setSeconds(e.getSeconds()+m),n&&e.setMilliseconds(e.getMilliseconds()+n),o||p||(e=t(e)),e}function I(a){if("string"!=typeof a||0===a.length)return a;var c,d,e,f=H,g=function(a){return f(W,a)},h=function(a){return f(V,a)},i=function(a){return f(U,a)},j=function(a){return f(T,a)},k=function(a){return f(S,a)};switch(a=a.split(":"),b.isNumeric(a[1])&&(e=parseInt(a[1])),a[0]){case _:c=d=new Date;break;case aa:c=g({days:-1}),d=g();break;case ba:c=g(),d=g({days:1});break;case ca:c=g({days:1}),d=g({days:2});break;case da:c=g({days:-90}),d=g();break;case ea:c=g({days:1}),d=g({days:91});break;case fa:if(!e)return a;c=g({days:-e}),d=g();break;case ga:if(!e)return a;c=g({days:1}),d=g({days:e+1});break;case ha:if(!e)return a;c=g({days:-e}),d=g({days:1-e});break;case ia:c=h({weeks:-1}),d=h();break;case ja:c=h(),d=h({weeks:1});break;case ka:c=h({weeks:1}),d=h({weeks:2});break;case la:if(!e)return a;c=h({weeks:-e}),d=h();break;case ma:if(!e)return a;c=h({weeks:1}),d=h({weeks:1+e});break;case na:if(!e)return a;c=h({weeks:-e}),d=h({weeks:1-e});break;case oa:c=i({months:-1}),d=i();break;case pa:c=i(),d=i({months:1});break;case qa:c=i({months:1}),d=i({months:2});break;case ra:if(!e)return a;c=i({months:-e}),d=i();break;case sa:if(!e)return a;c=i({months:1}),d=i({months:1+e});break;case ta:if(!e)return a;c=i({months:-e}),d=i({months:1-e});break;case ua:c=j({quarters:-1}),d=j();break;case va:c=j(),d=j({quarters:1});break;case wa:c=j({quarters:1}),d=j({quarters:2});break;case xa:if(!e)return a;c=j({quarters:-e}),d=j();break;case ya:if(!e)return a;c=j({quarters:1}),d=j({quarters:1+e});break;case za:if(!e)return a;c=j({quarters:-e}),d=j({quarters:1-e});break;case Aa:c=k({years:-1}),d=k();break;case Ba:c=k(),d=k({years:1});break;case Ca:c=k({years:1}),d=k({years:2});break;case Da:if(!e)return a;c=k({years:-e}),d=k();break;case Ea:if(!e)return a;c=k({years:1}),d=k({years:1+e});break;case Fa:if(!e)return a;c=k({years:-e}),d=k({years:1-e});break;default:return a[0]}return[c,d]}function J(){var a=new Date;return a.setMilliseconds(0),a}var K,L=a.time={},M=(new Date).getTimezoneOffset(),N=(new Date).getTimezoneOffset(),O=!1,P="moment",Q=function(a){return a===undefined},R=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;Date.prototype.toISOString||function(){function a(a){return a<10?"0"+a:a}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),b.each({getYear:"getFullYear",getDay:"getDate",getHour:"getHours",getMinute:"getMinutes",getSecond:"getSeconds",getMillisecond:"getMilliseconds",getUTCYear:"getUTCFullYear",getUTCDay:"getUTCDate",getUTCHour:"getUTCHours",getUTCMinute:"getUTCMinutes",getUTCSecond:"getUTCSeconds"},function(a,b){L[a]=function(a){return x(a,b)}});var S="YEAR",T="QUARTER",U="MONTH",V="WEEK",W="DAY",X="HOUR",Y="MINUTE",Z="SECOND",$=a.constants.DATE_KEYWORDS,_=$.NOW,aa=$.YESTERDAY,ba=$.TODAY,ca=$.TOMORROW,da=$.LAST_90_DAYS,ea=$.NEXT_90_DAYS,fa=$.LAST_N_DAYS,ga=$.NEXT_N_DAYS,ha=$.N_DAYS_AGO,ia=$.LAST_WEEK,ja=$.THIS_WEEK,ka=$.NEXT_WEEK,la=$.LAST_N_WEEKS,ma=$.NEXT_N_WEEKS,na=$.N_WEEKS_AGO,oa=$.LAST_MONTH,pa=$.THIS_MONTH,qa=$.NEXT_MONTH,ra=$.LAST_N_MONTHS,sa=$.NEXT_N_MONTHS,ta=$.N_MONTHS_AGO,ua=$.LAST_QUARTER,va=$.THIS_QUARTER,wa=$.NEXT_QUARTER,xa=$.LAST_N_QUARTERS,ya=$.NEXT_N_QUARTERS,za=$.N_QUARTERS_AGO,Aa=$.LAST_YEAR,Ba=$.THIS_YEAR,Ca=$.NEXT_YEAR,Da=$.LAST_N_YEARS,Ea=$.NEXT_N_YEARS,Fa=$.N_YEARS_AGO;b.extend(L,{formatDate:v,formatTime:w,getAnchoredDate:H,getDayName:F,getDayNameShort:G,getDayOfWeek:D,getLocalDateTime:s,getMonth:z,getMonthName:B,getMonthNameShort:C,getParseDateTimeResult:n,getPeriod:y,getRealJSDateTimeFromLocal:t,getSFDate:i,getSFDateTime:p,getUTCDayOfWeek:E,getUTCMonth:A,makeFormattedDate:j,makeFormattedDateFromJS:k,makeFormattedDateFromLocal:l,makeFormattedLongDateTime:u,parseDateString:o,parseDateTimeString:o,parseSFDate:h,parseSFDateTime:m,resolveDateKeyword:I,roundedNow:J,setUserTimeZone:f,getUserTimeZone:g,getDeviceTimeZone:e,setUserTimeZoneOffset:d})}(skuid,skuid.$),function(a,b){function c(a){b.extend(j,a)}function d(a,b){return j[a]||b||""}function e(c,d,e){var f=a.label.parse(c,d,e),g=f[0],h=f[1],i="";return b(h).each(function(b){i+=this;var c=g[b];c&&(i+=a.label.read(c.substring(c.indexOf(".")+1,c.length-1)))}),i}function f(c){var d="string"==typeof c,e=d?c:c.template,f=(d?Array.prototype.slice.call(arguments,1):c.data)||[],g=c&&c.leftMerge,h=c&&c.rightMerge,i=a.label.parse(e,g,h),j=i[0],k=i[1],l="";return b(k).each(function(a){l+=this;var b=j[a];b&&(l+=f[b.substring(1,b.length-1)])}),l}function g(a,b,c){b||(b="{"),c||(c="}");var d=b+"__"+c,e=d in k?k[d]:k[d]=new RegExp("\\"+b+"[^"+b+"\\"+c+"]+\\"+c,"g");return[a.match(e)||[],a.split(e)]}function h(){return j}var i=a.label={},j={},k={};if(window.SkuidLabels){c(window.SkuidLabels);try{delete window.SkuidLabels}catch(l){window.SkuidLabels=undefined}}b.extend(i,{add:c,read:d,labelize:e,merge:f,parse:g,getAll:h,map:j}),a.$L=d}(skuid,skuid.$),function(a){function b(){return f.conversionRates||[]}function c(a){var b=g[a];return b||"$"}var d=a.currency={},e=a.$,f=a.utils,g={ALL:"Lek",ARS:"$",AWG:"f",AUD:"$",BSD:"$",BBD:"$",BYR:"p.",BZD:"BZ$",BMD:"$",BOB:"$b",BAM:"KM",BWP:"P",BRL:"R$",BND:"$",CAD:"$",KYD:"$",CLP:"$",CNY:"&yen;",COP:"$",CRC:"c",HRK:"kn",CZK:"Kc",DKK:"kr",DOP:"RD$",XCD:"$",EGP:"&pound;",SVC:"$",EEK:"kr",EUR:"&euro;",FKP:"&pound;",FJD:"$",GBP:"&pound;",GHC:"c",GIP:"&pound;",GTQ:"Q",GGP:"&pound;",GYD:"$",HNL:"L",HKD:"$",HUF:"Ft",ISK:"kr",IDR:"Rp",IMP:"&pound;",JMD:"J$",JPY:"&yen;",JEP:"&pound;",LVL:"Ls",LBP:"&pound;",LRD:"$",LTL:"Lt",MYR:"RM",MXN:"$",MZN:"MT",NAD:"$",ANG:"f",NZD:"$",NIO:"C$",NOK:"kr",PAB:"B/.",PYG:"Gs",PEN:"S/.",PLN:"zl",RON:"lei",SHP:"&pound;",SGD:"$",SBD:"$",SOS:"S",ZAR:"R",SEK:"kr",CHF:"CHF",SRD:"$",SYP:"&pound;",TWD:"NT$",TTD:"TT$",TRY:"TL",TRL:"&pound;",TVD:"$",USD:"$",UYU:"$U",VEF:"Bs",ZWD:"Z$"};e.extend(d,{getConversionRates:b,getSymbol:c})}(skuid),function(a){function b(a,b){e[a]=b}function c(a){delete e[a]}function d(a){return e[a]}var e={};a.snippet={registerSnippet:b,register:b,getSnippet:d,get:d,unregister:c}}(skuid),function(a,b){function c(b,c){c.type=b,c&&c.styleSettings&&c.getStyles&&a.themes.registerComponentTypeStyles(c,{}),j[b]=c}function d(c){c&&(a.utils.isString(c)&&c in j?(a.themes.unregisterComponentTypeStyles(c),delete j[c]):c instanceof Array&&b.each(c,function(b,d){d&&d in j&&(a.themes.unregisterComponentTypeStyles(c),delete j[d])}))}function e(a){if(a)return j[a]}function f(){return b.map(j,function(a){return a})}function g(){return j}function h(){return Object.keys(j)}var i=a.componentType={},j={};b.extend(i,{get:e,register:c,unregister:d,list:f,map:g,getAll:h})}(skuid,skuid.$),function(a,b){function c(c,d){var e=[],f=c.is("conditions")?c.children():c.children("conditions").first().children(),g=c.attr("rowid");if(f){var h,i,j;d&&(j=d.model,i=d.rows,h=d.row||i&&i.length&&i[0]||null),f.each(function(){var c=new a.model.Condition(b(this)),d=c.mergeField;if("contextrow"==c.type){var f=g;!f&&h&&j&&(f=j.getFieldValue(h,d,!0)),f&&(c.value=f)}else"contextrows"==c.type&&j&&i&&i.length&&(c.values=i.map(function(a){return j.getFieldValue(a,d,!0)}));e.push(c)})}return e}function d(a){var b=a.type();!b||b in p||(p[b]=[]),p[b].push(a),o[a.id()]=a}function e(a){if(a){var b=p[a];return b||{}}return p}function f(){return b.map(o,function(a){return a})}function g(a){return o[a]}function h(c,d,e,f){var g,h,i;if(1==arguments.length){var j=arguments[0];c=j.element,d=j.xmlDefinition||j.definition,e=j.type||d.componentType,g=j.context,f=j.options,h=j.state}if(f||(f={}),!e&&!d)throw"Either a Component Type or XML Definition must be provided.";if(c?c.jquery||(c=b(c)):c=b("<div>"),d&&(d instanceof a.$||"string"==typeof d||d instanceof Element?(n.isString(d)&&(d=n.makeXMLDoc(d)),d.jquery||(d=b(d)),d.length&&(d=d.first()),e||(e=d.prop("tagName")),d.attr("uniqueid")&&(f.uniqueId=d.attr("uniqueid")),d.attr("cssclass")&&c.addClass(d.attr("cssclass"))):d.uniqueId=f.uniqueId=d.uniqueId||n.generateUniqueId()),i=a.componentType.get(e)){var m,o,p,r,s=new k(c,e,b.extend(f,{state:h}));return d&&d instanceof b&&(s.xmlDefinition=s.definition=d,m=d.attr(s.modelAttributeName()),o=m&&a.model.getModel(m),p=o&&o.loadAsync,i.schema&&(s.definition=d=l.parseXML(d[0],i.schema),s.set(d))),s.conditionallyRender({context:g,xmlDefinition:d}),p&&!s.onlyRenderOnce&&s.needsModelMetadata()&&(r=a.events.subscribe("models.loaded.async",function(b){m===b.id&&(a.events.unsubscribe(r),s.rerender())})),s}return q(e)}function i(a,c,d,e){var f=[],g=[];return b.each(a,function(){var a=l.factory({definition:this,context:d,state:e});a&&a instanceof k&&(a.element&&g.push(a.element),f.push(a))}),c&&(c.append(g),b.each(g,function(){b(this).trigger("attach")})),f}function j(a,b){return"component."+a.id()+"."+b}function k(c,e,f){f||(f={});var g=this;f.state&&b.extend(g,f.state),g.element=c,g._componentType=e,g._GUID=f.uniqueId||c.prop("id")||n.generateUniqueId(),g[r]={},g[s]={},g[t]=[],g.isRendered=!1,c.prop("id")!==g._GUID&&c.prop("id",g._GUID),c.attr("data-rendered","false").data({rendered:!1,component:g}),g._classMap=a.themes.getThemedClassMapForComponent(g,f.theme||{}),d(g)}var l=a.component={},m=a.events,n=a.utils,o={},p={},q=function(a){return"There is no Skuid Component Type called '"+a+"'"},r="_skuidProperties",s="_skuidComponentEventProperties",t="_skuidComponentEventSubscriptions";k.prototype={id:function(){return this._GUID},getId:function(){return this.id()},type:function(){return this._componentType},getType:function(){return this.type()},setType:function(a){return this._componentType=a,this},getElement:function(){return this.element},getPersonalizationService:function(){var b="_personalizationService",c=this[b];return c||(c=this[b]=a.personalization.createComponentService(this)),c},setParentPageId:function(a){var b=this;return b._parentPageId=a,b},getParentPage:function(){return o[this.getParentPageId()]},getParentPageId:function(){var a,b,c,d=this,e=d._parentPageId||this[r].parentPageId;return e||(this[r].parentPageId=function(){if((c=p.skuidpage)&&1===c.length)return c[0].id();if(a=d.getParentComponentId(),a&&o[a]&&(b=d.getParentComponent())&&(e=b.getParentPageId()),e)return e;var f=d.element.parent().closest(".nx-page");return f.length&&f.data("component")?f.data("component").id():c[0].id()}())},setParentComponentId:function(a){var b=this;return b._parentComponentId=a,b},getParentComponent:function(){return o[this.getParentComponentId()]},getParentComponentId:function(){return this._parentComponentId},getStyledClasses:function(b){return a.themes.getClasses(b,this._classMap)},render:function(b){function c(){g.isBeingRendered=!1,g.set("rendered",!0),g.isRendered=!0,g.element.attr("data-rendered","true").data("rendered",!0),g.publish("rendered",!0)}function d(){g.isBeingRendered=!1,g.set("rendered",!1),g.isRendered=!1,g.element.attr("data-rendered","false").data("rendered",!1),g.publish("rendered",!1)}var e,f,g=this,h=g.getType(),i=a.componentType.get(h);if(b||(b={}),!i)return q(h);if(b.context&&(g.context=b.context),b.xmlDefinition?g.xmlDefinition=g.definition=e=b.xmlDefinition:e=g.xmlDefinition,g.element.empty&&i&&!i.onlyRenderOnce&&!1!==i.emptyBeforeRender&&g.element.empty(),!g.isBeingRendered&&(!g.isRendered||g.isRendered&&!i.onlyRenderOnce)){g.isBeingRendered=!0;var j;switch(typeof i){case"function":j=i;break;case"object":if("render"in i){j=i.render;break}default:throw"Invalid Component Type definition. Component Type must be a JavaScript Object with a render() method."}try{f=j.call(i,g.element,e,g)}catch(l){var k=l&&l.message?l.message:l;a.utils.isString(k)&&(k="There was a problem rendering a component of type "+g.getType()+": "+k),a.component.getByType("skuidpage")[0].addProblem(k)}f&&a.utils.isPromise(f)?f.then(c,d):c()}return g},unrender:function(){var c=this,d=c.getType(),e=a.componentType.get(d);return"function"==typeof c.beforeUnrender&&c.beforeUnrender(),c.element.data&&b.each(c.element.data(),function(a,b){"component"!==a&&"object"!==a&&b&&"object"==typeof b&&b.widget&&b.widget._destroy&&b.widget._destroy()}),c.unregisterChildComponents(),c.element.empty&&e&&!e.onlyRenderOnce?c.element.removeAttr("style").empty():e&&e.onlyRenderOnce&&c.xmlDefinition.attr("domid")&&b("body").append(c.element.children().hide().detach()),c.isRendered=!1,c.element.attr("data-rendered","false").data("rendered",!1),"function"==typeof c.afterUnrender&&c.afterUnrender(),c},rerender:function(){return this.unrender().render()},unregisterChildComponents:function(){var a=this,c=this.childComponents;return c&&c.length&&(b.each(c,function(a,b){n.removeEventSubscriptions(b.element),b.unregister&&b.unregister()}),c.length=0),a},conditionallyRender:function(a){var b=this;return n.conditionallyRender(function(c,d,e,f){b.render(a),f&&f.eventSubscriptions&&(b._eventSubscriptions=f.eventSubscriptions),m.publish("ui.reflow",[{component:b}])},function(){m.publish("ui.reflow",[{component:b}]),b.unrender()},b.xmlDefinition,b.element,b._GUID,a),b},createConditionsFromXml:function(b,d){var e=this,f=b||e.xmlDefinition,g=e.element,h=d&&d.context||e&&e.context,i=[];if(i=c(f,h),g){var j=f.attr("controllingcomponent");j&&(g.controllingComponent=a.component.getById(j)),g.conditions=i}return i},addProblem:function(a){var c=this;b(function(){var b=c.getParentPage(),d=c._GUID;!b||b.id()===d&&d||b.addProblem(a)})},addProblems:function(a){var c=this;b(function(){var b=c.getParentPage(),d=c._GUID;!b||b.id()===d&&d||b.addProblems(a)})},unregister:function(c){c=b.extend({removeElement:!0},c);var d,e=this,f=e.getType(),g=a.componentType.get(f),h=p[f],i=e._eventSubscriptions;e.id()in o&&delete o[e.id()],d=b.inArray(e,h),-1!==d&&h.splice(d,1),e.unregisterChildComponents({removeElement:!1}),i&&(b.each(i,function(){m.unsubscribe(this)}),delete e._eventSubscriptions),e[t].forEach(function(a){m.unsubscribe(a)}),g&&g.onlyRenderOnce&&e.xmlDefinition.attr("domid")&&b("body").append(e.element.children().hide().detach()),c.removeElement&&this.element.remove()},createChildComponent:function(){return arguments[0]=[arguments[0]],this.createChildComponents.apply(this,arguments)[0]},createChildComponents:function(){var a=this,c=a.id(),d=i.apply(a,arguments,a.context);return b.each(d,function(a,b){b.setParentComponentId(c)}),a.childComponents?Array.prototype.push.apply(a.childComponents,d):a.childComponents=d,d},modelAttributeName:function(){return"model"},needsModelMetadata:function(){return!1},get:function(a){return n.getObjectProperty(this[r],a)},set:function(a,c){var d,e=this[r],f=this,g=n.setObjectProperty;return b.isPlainObject(a)?b.each(a,function(a,b){g(e,a,b)}):(d=f.get(a),g(e,a,c),d!==c&&(f.publish("stateChange:"+a,c,d),f.projector&&f.projector.scheduleRender())),this},unset:function(){var a=this[r];return Array.prototype.forEach.call(arguments,function(c){c&&b.isArray(c)?c.forEach(function(b){n.unsetObjectProperty(a,b)}):n.unsetObjectProperty(a,c)}),this},subscribeChange:function(a,b){return this.subscribe("stateChange:"+a,b)},publish:function(a,b){return n.setObjectProperty(this[s],a,b),m.publish(j(this,a),[b]),m.publish(this.getType()+"."+a,[b]),this},subscribe:function(a,b){var c=m.subscribe(j(this,a),b);return this[t].push(c),c},unsubscribe:function(a){for(var b=this[t],c=b.length-1;c>=0;c--)if(b[c]===a){b.splice(c,1);break}return this},once:function(a,c,d){var e,f=b.Deferred(),g=this[s],h=!(d&&!1===d.cache),i=n.getObjectProperty(g,a),k=this,l=function(a){c&&c(k,a),f.resolve(k,a)};return h&&i?l(i):(e=m.subscribeOnce(j(this,a),function(b){n.setObjectProperty(g,a,b),l(b)}),this[t].push(e)),f.promise()},subscribeOnce:function(a,b){return this.once(a,b,{cache:!1})},createGet:function(){var a=this;return function(){return a.get.apply(a,arguments)}},createSet:function(){var a=this;return function(){return a.set.apply(a,arguments)}},createGetStyledClasses:function(){var a=this;return function(){return a.getStyledClasses.apply(a,arguments)}}},b.extend(l,{Component:k,createChildComponents:i,createConditionsFromXml:c,getByType:e,getAll:f,getById:g,factory:h,register:d}),a.$C=g}(skuid,skuid.$),function(a,b){function c(){return a.utils}function d(a){return{xhr:function(){var c=b.ajaxSettings.xhr();return c.upload&&c.upload.addEventListener("progress",function(b){a.notify(b)},!1),c}}}function e(d){var e,f,g=d.modelDataSource,h=a.dataSource.get(g),i={_foundCache:!1};return h&&h.isAuthenticated&&"GET"===d.method&&!d.body?(e=g+" - "+d.url+" - "+(c().size(d.headers)?JSON.stringify(d.headers):""),f=k[e],f?i._foundCache=!0:(f=k[e]=b.Deferred(),i.deferred=function(){return f}),i.promise=function(){return f.promise()}):(f=b.Deferred(),i.deferred=function(){return f}),i.markComplete=function(){e&&delete k[e]},i.wasFound=function(){return i._foundCache},i.promise=function(){return f.promise()},i}function f(d,f){function g(){a.remote().proxy(o?JSON.stringify(d):d,function(c,d){if(h.markComplete(),c&&m(c))try{c=JSON.parse(c),j=c.setCookies}catch(e){j=null}j&&j.length&&(b.cookie.raw=!0,b.each(j,function(c,d){var e,f={};b.each(["path","secure","domain"],function(a,b){b in d&&(f[b]=d[b])}),"expires"in d&&(e=d.expires,f.expires=!1===a.utils.isNumber(e)?a.time.parseDateTimeString(e):parseInt(e,10)),b.cookie(d.name,d.value,f)}),b.cookie.raw=!1),c&&!c.error&&0!==c.statusCode&&(!c.statusCode||c.statusCode<400)?i.resolve(c):(!c&&d&&d.message&&(c={statusCode:0,status:"",error:d.message}),i.reject(c))},f)}var h,i,j,k=d.body,l=b.extend({},d.headers),m=c().isString,n=a.platform,o="function"!=typeof n.requiresSerializedProxyRequests||n.requiresSerializedProxyRequests();return delete d.originalRequest,d.contentType&&(l["Content-Type"]=d.contentType),d.headers=l,h=e(d),h.wasFound()?h.promise():(i=h.deferred(),f||(f={}),f.escape=!1,!k||m(k)||k instanceof FormData||k instanceof Blob||(d.body=JSON.stringify(k)),o&&k instanceof Blob?c().readFileAsBase64(k).then(function(a){d.body=a,g()},function(a){i.reject(a)}):g(),i.promise())}function g(a){for(var b,c=/^(.*?):[ \t]*([^\r\n]*)$/gm,d={};b=c.exec(a);)d[b[1]]=b[2];return d}function h(c){var f,h=c.body,i=e(c);return i.wasFound()?i.promise():(f=i.deferred(),!h||a.utils.isString(h)||h instanceof FormData||h instanceof Blob?c.data=h:c.data=JSON.stringify(h),delete c.originalRequest,b.extend(c,d(f)),b.ajax(c).always(function(){i.markComplete()}).done(function(a,b,c){var d={statusCode:c.status,body:a,status:c.statusText,headers:g(c.getAllResponseHeaders())};f.resolve(d)}).fail(function(a){var b={statusCode:a.status,body:a.responseText,status:a.statusText,headers:g(a.getAllResponseHeaders())};f.reject(b)}),f.promise())}function i(b,c){var d,e,f=c?c+": ":"",g=a.utils.isString,h=b&&!g(b)?b.response||b.body:b;if(h)try{d=g(h)?JSON.parse(h):h,d&&(d.message&&g(d.message)?e=d.message:d[0]&&d[0].message&&(e=d[0].message),e&&(f+=e))}catch(i){g(h)&&(f+=h)}return f}var j=a.ajax={},k={};b.extend(j,{proxy:f,direct:h,getResponseHeaderObject:g,getErrorMessage:i})}(skuid,skuid.$),function(a,b){function c(){return a.utils.getCSSSizeObj.apply(this,arguments)}function d(d,e){var g,h,i,j;if(e.columnGutter&&(g=c(e.columnGutter))&&(h=g.number/2*-1+g.unit),e.rowGutter&&(i=c(e.rowGutter))&&(j=-1*i.number+i.unit),h||j?d.css({margin:(j||"0")+" "+(h||"0")+" 0 "+(h||"0")}):d.css({margin:""}),"rigid"===e.layoutMode&&e.precision&&d.children().length>e.precision&&!d.children(".sm-grid-division-filler").length)for(var k=0;k<e.precision;k++){var l=a.mobile?"sm-card sm-grid-division sm-grid-division-filler":"sk-card sk-grid-division sk-grid-division-filler",m=b("<article>").addClass(l);f(m,{parentMinWidth:e.minWidth,columnGutter:e.columnGutter,rowGutter:e.rowGutter}),d.append(m)}}function e(a){a.css({margin:""}),b.each(a.children(),function(){g(this)})}function f(a,b){b=b||{};var d,e,f,g,h,i,j,k,l,m,n;b.columnGutter&&(h=c(b.columnGutter))&&(i=h.number/2+h.unit),b.rowGutter&&(j=c(b.rowGutter))&&(k=j.number+j.unit),(k||i)&&a.css({margin:(k||"0")+" "+(i||"0")+" 0 "+(i||"0")}),"top"===b.verticalAlign?a.css({"-webkit-justify-content":"flex-start","justify-content":"flex-start"}):"center"===b.verticalAlign?a.css({"-webkit-justify-content":"flex-start","justify-content":"center"}):"bottom"===b.verticalAlign&&a.css({"-webkit-justify-content":"flex-start","justify-content":"flex-end"}),"specified"===b.behavior?a.css({width:b.width,"-webkit-flex":"none",flex:"none"}):"fit"===b.behavior?a.css({width:"","-webkit-flex":"none",flex:"none"}):(m=c(b.minWidth),n=c(b.maxWidth),l=c(b.parentMinWidth),d=b.relativeSize||1,e=b.relativeSize||1,m?f=m.number+m.unit:l&&(f=l.number*(b.relativeSize||1)+l.unit),g=d+" "+e+" "+f,a.css({"-webkit-flex":g,flex:g,width:"","max-width":n.unit?n.number+n.unit:undefined}))}function g(a){a.css({margin:"",width:"","-webkit-flex":"none",flex:"none","-webkit-justify-content":"","justify-content":""})}function h(a){var c,d=parseInt(a.data("voffset"),10),e=parseInt(a.data("vpercent"),10),f=parseInt(a.data("precision"),10);if((d||0===d)&&e||0===e?(c=(a.offsetParent().outerHeight()-d)*(e/100),a.addClass("sm-grid-fixed-vertical").css("height",c+"px")):a.removeClass("sm-grid-fixed-vertical").css("height",""),f){var g,h=0;a.children(".sm-grid-division-forcewrap").remove(),b.each(a.children(".sm-grid-division"),function(){var a,c=b(this),d=c.data("size"),e=c.data("component"),i=e&&e.xmlDefinition&&e.xmlDefinition.attr("type"),j=c[0].offsetTop;a=!i||"specified"!==i&&"fit"!==i?parseInt(d,10)||1:1,j!==g&&(h=0),h+=a,h>f&&(c.before(b("<div>").addClass("sm-grid-division-forcewrap")),j=c[0].offsetTop,h=a),g=j})}}function i(){a.events.publish("ui.reflow")}var j=a.responsive={config:{resizeWaitTime:100}},k=!1;b(window).on("resize orientationchange",function(){!1!==k&&clearTimeout(k),k=setTimeout(a.responsive.handleResize,a.responsive.config.resizeWaitTime)}),b.extend(j,{handleResize:i,prepareDivision:f,prepareGrid:d,processGrid:h,unMakeDivision:g,unMakeGrid:e})}(skuid,skuid.$),function(a,b){function c(c,d){if(!c)return!1;c&&a.utils.isString(c)&&(c=a.utils.makeXMLDoc(c)),c.jquery||(c=b(c));var e=c.attr("uniqueid");d&&("__header"!==e&&"__footer"!==e||(e+=d)),k[e]={xmlDefinition:c}}function d(){k={}}function e(a){return k[a]}function f(){var a=[];return b.each(k,function(b,c){a.push(c)}),a}function g(){return k}function h(a,b){a.unregisterChildComponents().createChildComponents(b.children(),a.element,a.context)}function i(b,c){var d,f=a.$C(b),g=e(c);g&&(d=g.xmlDefinition.children("components").first(),h(f,d))}var j=a.region={},k={};b.extend(j,{get:e,list:f,map:g,register:c,unregisterAll:d,setContent:h,setContentByIds:i})}(skuid,skuid.$),function(a){function b(b){var c=a.platform.getName();return ic.isArray(b)?-1!==b.indexOf(c):c===b}function c(){return a.utils.userInfo}function d(a){ed=a}function e(){return ed}function f(a){var b,c,d,f,g=!a;return hc&&g?hc:(a||(a=e()),c=a.split("."),d=c[0],"c"===d||na(d,"--c")?b=a:(pa(d,"--")?(f=d.split("--"),f.pop(),f.push("c"),c[0]=f.join("--")):c[0]="c",b=c.join(".")),g&&(hc=b),b)}function g(){return na(e().split(".")[0],"--skuid")}function h(b,c,d,e){return a.platform.getResourceUrl({name:b,namespace:c,nestedPath:d,modstamp:e})}function i(b){var c=b&&oa(b,"/"),d=a.page.sitePrefix;return d&&"null"!==d&&c&&!oa(b,d)?(na(d,"/s")&&(d=d.substring(0,d.length-2)),d+b):b}function j(b){return h(t(a.platform.getDefaultImagePath?a.platform.getDefaultImagePath():"","DefaultPhotos"),"skuid",("org"===b?"Org":"Profile")+".jpg",a.version.date)}function k(b,c,d){var e={},f=d&&d.mode||"row";return b&&b.context&&ic.extend(e,b.context),c&&ic.extend(e,c),e.model||(b&&b.model?e.model=b.model:b&&b.list&&b.list.model&&(e.model=b.list.model)),e.row||(e.item&&e.item.row?e.row=e.item.row:!b||!b.row||b instanceof a.model.Model?b&&b.item&&b.item.row&&(e.row=b.item.row):e.row=b.row),e.list||b&&b.list&&(e.list=b.list),e.editor||b&&b.editor&&(e.editor=b.editor),"model"===f&&(e.row=undefined,e.list=undefined,e.rows=undefined),e}function l(){return c().isApiEnabled}function m(){if("nodata"===Tc)try{Tc="sessionStorage"in window&&null!==window.sessionStorage}catch(a){Tc=!1}return Tc}function n(a){var b,c,d,e=0;if(0===a.length)return e;for(b=0,c=a.length;b<c;b++)d=a.charCodeAt(b),e=(e<<5)-e+d,e|=0;return e}function o(){return ec||(ec=n(c().sessionId)),ec}function p(){return c().language}function q(a){return a.__uid!==o()||a.__userLanguage!==p()}function r(a){if(!a)return!1;a.modstamp=(new Date).getTime(),a.__uid=o(),a.__userLanguage=p()}function s(a){if(a&&a.length)return a.charAt(0).toUpperCase()+a.slice(1)}function t(){
return v.apply(this,["/"].concat(Array.prototype.slice.apply(arguments)))}function u(a,b,c){a||(a=""),b||(b=""),c||(c="");var d=a.length,e=b.length,f=c.length;return(d&&na(a,c)?a.substring(0,d-f):a)+(d&&e?c:"")+(e&&oa(b,c)?b.substring(f,e):b)}function v(a,b){var c=ic.isArray(b)?b:Array.prototype.slice.call(arguments,1);return a||(a=""),c.reduce(function(b,c){if(!c)return b;if(!b)return c;var d=na(b,a),e=oa(c,a);return d||e?d&&e?b+c.substring(a.length):b+c:b+a+c},"")}function w(a,b,c){if(void 0===a)return null;var d=jc["canUse"+s(c)]();return void 0===b?d?window[c][a]:ic.cookie(a):d?window[c][a]=b:ic.cookie(a,b)}function x(a,b){return w(a,b,"sessionStorage")}function y(a,b,c,d){d||(d=Vc);var e=c&&c.model?c.row?tc:sc:rc,f=ic("<div>"),g=a.attr(b);if(void 0!==g)return e===tc?f.append(fb(tc,g,d,c.model,c.row)):e===sc?f.append(fb(sc,g,d,c.model)):f.append(fb(rc,g,d)),f.text()}function z(b){if(b){var c=b.model,d=b.row,e=b.url,f=b.title||"",g=b.window,h=c?d?tc:sc:rc,j=ic.extend(Vc,b.mergeSettings||{}),k=!(!window.sforce||!sforce.one)&&sforce.one,l=!!(window.sforce&&sforce.console&&sforce.console.isInConsole())&&sforce.console,m=e&&oa(e,"/"),n=c&&d?c.getRowId(d):null;e&&(e=eb(h,e,j,c,d),k?k.navigateToURL(e,"blank"===g):l?m?(c&&d&&(oa(e,"/"+n)||oa(e,"/"+n.substring(0,15)))&&c.getRowById(n)&&(f=c.getNameFieldValueForRow(d)),a.ui.openConsoleTabForUrl(e,f)):window.open(e):(m&&(e=i(e)),"blank"===g?window.open(e):"parent"===g?parent.location=e:window.location=e))}}function A(b,c,d){if(!b)return null;c||(c={}),d||(d={});var e=ic("<div>").attr("title",y(b,"title",c,{createFields:!0,registerFields:!1})),f=[],g=[],h=!0,i=!0;return c.popup=e,"false"!==b.attr("modal")&&!1!==d.modal||(h=!1),"false"!==b.attr("resizable")&&!1!==d.resizable||(i=!1),b.children("components").first().children().each(function(){var b=a.component.factory({definition:this,context:c});f.push(b.element),g.push(b)}),e.append(f).dialog({close:function(){g&&ic.each(g,function(){this.unregister&&this.unregister()}),e.dialog("destroy").remove(),d.close&&d.close.apply(this);var f=b.children("afterclose");f.length&&a.actions.runActionsNode(f,null,c)},open:function(){function a(a){var b=window.innerHeight,c=e.parent(),d=parseInt(.8*b,10),f=function(){e.css({"overflow-y":"scroll",height:d-c.find(".ui-dialog-titlebar").outerHeight()+"px"}),e.find(".popup-content-padding").length||e.append(ic('<div class="popup-content-padding">').css({height:"15px"})),c.css({height:d+"px",top:parseInt(.1*b,10)+"px",position:"fixed"})};c.innerHeight()>d?f():a&&f()}a(!1),ic(window).resize(function(){a(!0)}),d.open&&d.open.apply(this)},beforeClose:function(){d.beforeClose&&d.beforeClose.apply(this)},modal:h,resizable:i,width:b.attr("width")||"600px",buttons:d.buttons||[]}),e}function B(a,b,c){return A(a.children("popup").first(),b,c)}function C(a){a||(a={});var b,c,d,e,f={registerFields:!1,nl2br:!1},g=a.fieldMetadata;if(g&&(d=g.rel,e=g.id),!("template"in a||"fieldMetadata"in a))throw"skuid.utils.calculateReferenceText: Either fieldMetadata or a template must be provided.";if(a.template){var h=e.indexOf(".");c=e&&-1!=h?e.substring(0,h+1):"",b=a.template,f.fieldPrefix=c+d+"."}else{var i,j;if(g.ref&&-1!=g.ref.indexOf(",")||g.referenceTo&&g.referenceTo.length>=2){if(a.targetObject){var k=a.targetObject.split(".");i=k[k.length-1]}else i=g.referenceTo[0].objectName;j="Name"}else i=g.ref,j=a.model.getDataSource().getNameField(i||a.model);d?(-1!=e.indexOf(".")&&(d=e.substring(0,e.lastIndexOf(".")+1)+d),b="{{"+d+"."+j+"}}"):b="{{"+j+"}}"}return a.model.getRowMergeResult(a.row,b,f)}function D(a){return C(a).merges.text()}function E(a,b){var c=a.split(".");c.pop();var d=c.join(".");return b.displaytype===Sc?(d?d+".":"")+b.rel:d}function F(a){return a.referenceTo[0]}function G(a,b,c){var d=Ba(F(b).objectName,c);if(d)return E(a,b)+"."+d}function H(a){var b=a.split(".")[0];return na(b,"__r")||na(b,"__pr")?b.substring(0,b.length-1)+"c":b+"Id"}function I(a){return na(a,"__c")||na(a,"__pc")?a.substring(0,a.length-1)+"r":a.substring(0,a.length-2)}function J(b){var d=Zc[b]||b,e=c();return"ismulticurrencyorganization"===b?a.utils.isMultiCurrencyOrganization:d in e?e[d]:void 0}function K(a,b,c){var d,e=!0,f=b.length;if(c||(c={}),a?(d=a.toLowerCase().replace(/\s+/g,""),zc.test(d)||(e=!1)):e=!1,!e)throw"Invalid Condition Logic: "+a;for(c.customAndString&&(d=d.replace(/and/g,c.customAndString)),c.customOrString&&(d=d.replace(/or/g,c.customOrString));f>0;f--)d=d.replace(f,b[f-1]);return d}function L(b,c){return a.formula.evaluate(K(b,c,{customAndString:"&&",customOrString:"||"}))}function M(a){var b=a.left,c=a.right,d=a.op,e=a.displaytype,f=fd[d]||fd["="],g=e===Pc,h=e===Qc,i=kc.resolveDateKeyword,j=g?function(a){return kc.getRealJSDateTimeFromLocal(kc.parseSFDate(a))}:kc.parseSFDateTime;if(g||h){if(typeof b===Ec&&(b=j(b)),!b)return!1;b=b.getTime(),typeof c===Ec&&(c=j(c)||c),typeof c===Ec?(c=i(c),ic.isArray(c)?(c[0]=c[0].getTime(),c[1]=c[1].getTime(),f=gd[d]||gd["="]):(b=a.left,c=a.right)):c=c.getTime()}return f(b,c)}function N(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,K,N,O=!0,P=!1,Q=!1;for(c||(c={}),k=c.context,x=c.logicType||"and","custom"===x?(w=c.logic,d=[]):"or"===x?Q=!0:P=!0,b instanceof Array||(b=[b]),t=0;t<b.length;t++){if(D=!0,g=b[t],I=g.sourceType||uc,K=I===uc,H=g.sourceProperty,C=g.operator,j=g.type||uc,A=null,E=null,r=null,h=g.value,i=g.values,K||na(I,"property")){if(g.fieldModel){if((A=a.$M(g.fieldModel))&&A.data)if(c.row&&(c.model&&c.model.id===A.id||A.getRowById(A.getRowId(c.row))))E=c.row;else if(A.data.length)E=A.data[0],g.fieldRow=A.getRowId(E);else if(K){if("deactivate"===(B=g.noSourceRowBehavior||"deactivate"))continue;return"skipandrender"===B}}else c.row&&(E=c.row,c.model&&(A=c.model));"function"==typeof E&&(E=E()),A&&(r=A.getField(g.field))}if(K?p=A?A.getFieldValue(E,g.field,!0):X(E,g.field):"userinfo"===I?p=J(g.sourceUserInfoType):"param"===I?p=a.page.params[g.sourceParam]:"snippet"===I?(G=a.snippet.get(g.sourceSnippet),p=!G||G(),C="=",h=!0):"feature"===I?(p=a.platform.hasFeature&&a.platform.hasFeature(h),C="=",h=!0):na(I,"property")&&H&&A&&(mc(H,["hasRows","hasNoRows"])>-1?(p=!(!A.data||!A.data.length),h="hasRows"===H,C="=",j=uc):"rowproperty"===I?E?(j||(j=uc),h||!1===h||0===h||(h=!0),C||(C="="),"isCloned"===H?p=A.isRowUnsavedClone(E):"isNew"===H?p=A.isNewRow(E):"isSaved"===H?p=!A.isNewRow(E):"hasChanged"===H?p=A.isRowChanged(E):"isMarkedForDeletion"===H?p=A.isRowMarkedForDeletion(E):"rowid"===H&&(p=A.getRowId(E))):D=!1:("data.length"===H&&(h=parseInt(h,10)),p=X(A,H))),u=null===p||""===p||void 0===p,u&&(p=""),"userinfo"===j?h=J(g.userInfoType):"param"===j&&(h=a.page.params[h]),k)if(l=k.model,m=k.row,n=k.rows,y=g.mergeField,"contextrow"===j&&m)z=y?l.getFieldValue(m,y,!0):l.getRowId(m),ga(z)||(h=z);else if("contextrows"===j&&n){for(N={},F=0;F<n.length;F++)o=n[F],z=y?l.getFieldValue(o,y,!0):l.getRowId(o),ga(z)||z in N||(N[z]=1);i=Object.keys(N)}if("blank"===j)"!="===C?u&&(D=!1):u||(D=!1);else if(-1!==ic.inArray(j,["multiple","contextrows"])){if(i&&i instanceof Array)if(v="includes"===C,s=i.length,"in"===C&&-1===mc(p,i))D=!1;else if("not in"===C&&-1!==mc(p,i))D=!1;else if("includes"===C||"excludes"===C)if(q=p.split(";"),q.length){for(e=0;e<i.length;e++)if(f=i[e],-1!==mc(f,q)){if(!v){D=!1;break}}else if(v){D=!1;break}}else v&&s&&(D=!1)}else M({left:p,op:C,right:h,displaytype:r&&r.displaytype})||(D=!1);if(P&&!D){O=!1;break}if(Q){if(O=D,D)break}else w&&d.push(D)}return w&&d&&d.length&&(O=L(w,d)),O}function O(a,b,c,d){return N(b,{row:a,model:d,context:c})}function P(b,c){var d=a.utils._ie;if(!(d&&d<10)){for(var e=atob(b),f=new Array(e.length),g=0;g<e.length;g++)f[g]=e.charCodeAt(g);var h=new Uint8Array(f),i=new Blob([h],{type:"octet/stream"});a.utils.saveAs(i,c)}}function Q(b,c,d){var e=a.utils._ie;if(e&&e<10)throw"File download is not supported for this browser.";if(da(b)){var f=new Blob([b],{type:d||"text/csv"}),g=a.utils.saveAs(f,c);return a.events.publish("filedownload",[{data:f,filename:c}]),g}}function R(a,b,c,d){if(a&&a.length){return b&&b.length?a.filter(function(a){return O(a,b,c,d)}):a}return[]}function S(a,b){return function(c){return c.attr("datasource")===a&&c.attr("x-entityname")===b}}function T(a){return a&&a.toLowerCase()in $c}function U(a){return!isNaN(a-0)}function V(a){return a!==a}function W(a,b){var c=a;return a!==undefined&&(b?c=a.toString():"false"===a?c=!1:"true"===a?c=!0:U(a)&&!1!==a&&!0!==a&&(c=-1!==a.toString().indexOf(".")?parseFloat(a):parseInt(a,10))),c}function X(a,b){if(a&&b){for(var c,d,e,f=vb(b),g=0;g<f.length;){if(c=f[g],a){if(a instanceof Array&&"length"!==c){e=null;try{d=parseInt(c,10)}catch(h){e=h}if((e||isNaN(c))&&a.length){a=a[0];continue}if(d>=0){a=a[d],g++;continue}}if(c in a){a=a[c],g++;continue}}return}return a}}function Y(a,b){if(a&&b){for(var c=vb(b),d=0,e=!1;d<c.length;){if(!(a&&c[d]in a))return!1;a=a[c[d++]],e=!0}return e}return!1}function Z(a,b,c){if(a&&b){for(var d,e,f,g=vb(b),h=0,i=g.length-1;h<i;){d=g[h];{if(!a)break;if(a instanceof Array){f=null;try{e=parseInt(d,10)}catch(j){f=j}!f&&!isNaN(d)&&e>=0&&(a=a[e])}else a=d in a?a[d]:a[d]={};h++}}a&&(a instanceof Array&&isNaN(g[i])?a.push(c):a[g[i]]=c)}}function $(a,b){if(a&&b){for(var c,d,e,f=vb(b),g=0,h=f.length-1;g<h;){c=f[g];{if(!a)break;if(a instanceof Array){e=null;try{d=parseInt(c,10)}catch(i){e=i}!e&&!isNaN(c)&&d>=0&&(a=a[d])}else{if(!(c in a))throw"No property at this location.";a=a[c]}g++}}a&&(ic.isArray(a)&&!isNaN(f[h])?a.splice(f[h],1):delete a[f[h]])}}function _(a){return a&&da(a)?a.replace(yc,""):a}function aa(a){return a.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}function ba(a){return da(a)?a&&ic("<div/>").html(a).text():a}function ca(a){return da(a)?a&&String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):a}function da(a){return typeof a===Ec||a instanceof String}function ea(a){return typeof a===Gc}function fa(a){return"[object Date]"===Object.prototype.toString.call(a)}function ga(a){return typeof a===Hc}function ha(a){return 0!==a&&"boolean"!=typeof a&&!a}function ia(a){return null!==a&&typeof a===Fc}function ja(a){return a&&a.replace(/(\r\n|\n|\r)/gm,"<br>")}function ka(a){return a&&da(a)?a.toLocaleLowerCase?a.toLocaleLowerCase():a.toLowerCase():a}function la(a){return a&&da(a)?a.toLocaleUpperCase?a.toLocaleUpperCase():a.toUpperCase():a}function ma(a,b,c,d){return!!(a&&b&&c)&&(d&&(b=ka(b),c=ka(c)),a(b,c))}function na(a,b,c){return ma(function(a,b){return-1!==a.indexOf(b,a.length-b.length)},a,b,c)}function oa(a,b,c){return ma(function(a,b){return 0===a.lastIndexOf(b,0)},a,b,c)}function pa(a,b,c){return ma(function(a,b){return-1!==a.indexOf(b)},a,b,c)}function qa(a,b){return a&&b&&typeof a===Ec&&a.length>b?a.substring(0,b):a}function ra(a,b){return a&&b&&typeof a===Ec&&a.length>b?a.substring(a.length-b,a.length):a}function sa(a,b){for(var c=0;c<a.length;c++)if(mc(a[c],b)>-1)return!0}function ta(a){return void 0!==a?(a.indexOf(vc)>-1&&(a=a.replace(/"/g,wc)),ic.each(xc,function(b,c){if(a.indexOf(c)>-1)return a=vc+a+vc,!1})):a="",a}function ua(a){return a&&a.replace(/\./g,"\\.")}function va(a){return a&&a.replace(/'/g,"\\'")}function wa(a){var b={},c={buffer:!1};return b[a]=[""],xa(b,c)}function xa(b,c){c||(c={});var d,e=ic.Deferred(),f=!c||!1!==c.cache,g=function(a){var b={},d=c&&!0===c.json;ic.each(a,function(a,c){var e=b[a]={};ic.each(c,function(a,b){if(d)try{e[a]=JSON.parse(b)}catch(c){e[a]=b}else e[a]=b})}),e.resolve(b)};return f&&(fc||(fc={}),d={},ic.each(b,function(a,b){var c,e=fc[a];return e?(c=d[a]={},ic.each(b,function(a,b){if(!e[b])return d=!1,!1;c[b]=e[b]}),!!d):(d=!1,!1)})),d?g(d):a.remote().getBodiesOfZIPResourceFiles(JSON.stringify(b),function(a){if(a&&da(a))try{a=JSON.parse(a)}catch(b){a=null}a&&!a.error?(f&&ic.each(a,function(a,b){var c=fc[a];c||(c=fc[a]={}),ic.each(b,function(a,b){c[a]=b})}),g(a)):e.reject(a&&a.error?a.error:a)},{escape:!1,buffer:!1!==c.buffer}),e.promise()}function ya(a,b){return xa(a,ic.extend({json:!0},b))}function za(a,b,c,d){var e={},f=ic.Deferred(),g=(b?b+"__":"")+a;return e[g]=[c],xa(e,d).done(function(a){if((a=a[g])&&a[c]){if(a=a[c],d&&!0===d.json&&da(a))try{a=JSON.parse(a)}catch(b){f.reject("Unable to parse body of file at path: "+c)}f.resolve(a)}else f.reject()}).fail(function(a){f.reject(a)}),f.promise()}function Aa(a,b,c,d){return za(a,b,c,ic.extend({json:!0},d))}function Ba(b,c){var d=c&&c.dataSourceType||a.dataSource.getType("salesforce");return d&&d.getNameField({objectName:b,dataSource:c})}function Ca(a){var b=_c[a];return b||(b=x(a),b?(b=JSON.parse(b),_c[a]=b,b):null)}function Da(a,b){_c[a]=b,b&&!b.__isFailure&&x(a,JSON.stringify(b))}function Ea(b,c){if(l()){var d,e,f,g=!!c&&!!c.length,h=function(b){var c=Ca(b),d=!1,e=!1;return c?c.__isFailure?e=!0:(q(c)&&(d=!0),(!c.modstamp||c.modstamp<a.page.modstamp)&&(d=!0)):d=!0,{result:c,getNew:d,failed:e}},i=function(a){return"skuid_recordTypeMetadata_"+b+(a?"_"+a:"_all")},j=function(){o={__isFailure:!0},r(o),d.length>1?ic.each(d,function(a,b){Da(i(b),o)}):Da(i(),o)},k=!1;if(g){if(e=[],f={recordTypeMappings:e},ic.each(c,function(a,b){var c=i(b),f=h(c);if(f.failed)return k=!0,!1;f.result&&!f.getNew?e.push(f.result):f.getNew&&(d||(d=[]),d.push(b))}),k)return!1}else{var m=i(),n=h(m);if(n.failed)return!1;n.result&&!n.getNew?f=n.result:n.getNew&&(d=[])}if(d){var o,p;try{o=sforce.connection.describeLayout(b,"b",d)}catch(s){return j(),!1}if(!(p=!(!o||!o.recordTypeMappings)&&Kb(o.recordTypeMappings)))return j(),!1;g?ic.each(p,function(a,b){r(b),Da(i(b.recordTypeId),b),e.push(b)}):(r(o),Da(i(),o),f=o)}return f}return!1}function Fa(b){if(l()){var c="skuid_describeLayout_"+b,d=Ca(c),e=!1;if(d?(q(d)&&(e=!0),(!d.modstamp||d.modstamp<a.page.modstamp)&&(e=!0)):e=!0,e)try{d=sforce.connection.describeLayout(b),r(d),Da(c,d)}catch(f){d=null}return d}return!1}function Ga(b){if(l()){var c="skuid_describeSObject_"+b,d=Ca(c),e=!1;if(d?(q(d)&&(e=!0),(!d.modstamp||d.modstamp<a.page.modstamp)&&(e=!0)):e=!0,e)try{d=sforce.connection.describeSObject(b),r(d),Da(c,d)}catch(f){d=null}return d}return!1}function Ha(a,b,c){var d,e,f=function(a){!a||a.value in d||(d[a.value]=1,e.push(a))},g=!1,h=Ea(a,c);if(h){var i=h.recordTypeMappings;if(i){var j=[];ic.each(Kb(i),function(){mc(this.recordTypeId,c)>-1&&j.push(this)}),j.length&&(e=[],d={},ic.each(j,function(a,c){var d=c.picklistsForRecordType;d&&ic.each(Kb(d),function(){if(this.picklistName===b)return g||(g=!0),this.picklistValues instanceof Array?ic.each(this.picklistValues,function(){f(this)}):f(this.picklistValues),!1})}))}}return g?e:null}function Ia(a,b){return ic.each(b,function(b,c){-1!==a.indexOf("?")?a+="&"+b+"="+c:a+="?"+b+"="+c}),a}function Ja(b){var c,d=ic(".bodyDiv"),e=ic("ul#tabBar"),f=e.children("li.zen-active, li.active"),g=f.find("span.zen-assistiveText, span.assistiveText").detach(),h=a.utils.sfTabs[b];f.removeClass("zen-active primaryPalette primaryPalette active").find("a").attr("title",function(a,b){return b.replace(" - Selected","")}),b&&h&&(c=e.children("li").has('a[href="'+b+'"]')),c.length&&(c.first().addClass("zen-active active primaryPalette").find("a").attr("title",function(a,b){return b+" - Selected"}).after(g),h.color&&(c.css({"background-color":"#"+h.color,"border-color":"#"+h.color}),d.css("border-top-color","#"+h.color)))}function Ka(a,b,c){return a?b:c}function La(a,b,c){0===c?a.prepend(b):a.children().eq(c-1).after(b)}function Ma(b,c){return a.load.js(b,c)}function Na(b){if(a.CKEDITOR)return void b(a.CKEDITOR);if(Na.loading)return void Na.loading.done(function(){b(a.CKEDITOR)});Na.loading=ic.Deferred();var c,d=h("CKEditor","skuid","ckeditor.js",Wb());Ma(d,function(){c=a.CKEDITOR=window.CKEDITOR,Na.configured||(Na.configured=!0,c.disableAutoInline=!0),b(c),Na.loading.resolve()})}function Oa(b,c){return c.href=b,a.load.css(c,c.callback)}function Pa(a,b,c){return"MULTIPICKLIST"===b?"="===a||"exact"===a?"=":"includes":b===Rc||"Id"===c||na(c,".Id")?"=":"exact"===a?"=":a}function Qa(a,b,c,d,e){e||(e={});var f,g=e.delimiter||" ",h=e.searchOperator||"contains",i=1;return b.subConditions=[],b.subConditionLogic="",f=e.tokenize?c.split(g):[c],ic.each(f,function(c){var e=this+"",g=[];if(!e)return!0;ic.each(d,function(c,d){var f=d.searchOperator||h,j=a.getField?a.getField(d.id):d;j||(j=d);var k=!(!j||!j.displaytype)&&j.displaytype,l=k===Sc?G(d.id,d):d.id,m={name:"__default_searchbox_subcondition",type:"fieldvalue",field:l,inactive:!1};if(m.operator=Pa(f,k,l),"MULTIPICKLIST"===k)"="===m.operator||"exact"===m.operator?m.value=e:m.values=[e];else if(k===Rc||"Id"===l||na(l,".Id")){if(!e||18!==e.length&&15!==e.length)return!0;m.value=e}else m.value=e;if(k===Sc){var n=a.getField(l);n&&n.targetObjects&&(m.fieldTargetObjects=n.targetObjects)}else d.targetObjects&&(m.fieldTargetObjects=d.targetObjects);b.subConditions.push(m),g.push(i),i++}),b.subConditionLogic+="("+g.join(" OR ")+")",c<f.length-1&&(b.subConditionLogic+=" AND ")}),b}function Ra(b,c){c||(c={});var d={},e=gb(),f=function(a){if(a instanceof Array)for(var b=0;b<a.length;b++){var g=a[b];if("name"===g[0]||"&"===g[0]||"#"===g[0]||"^"===g[0]){var h,i=g[1];""!==i&&(h=e[i],c.ignoreGlobals&&(h||-1!==i.indexOf("$")||-1!==i.indexOf("Model."))||c.ignoreFunctions&&"function"==typeof h||(d[i]=1))}g.length>=5&&g[4]instanceof Array&&f(g[4])}};return f(a.Mustache.parse(b,["{{","}}"])),f(a.Mustache.parse(b,["{{{","}}}"])),Object.keys(d)}function Sa(b,c,d,e){var f,g,h,i,j=a.$M(b),k=Ta(e);return d||(d=null,e=null),j&&(f=d&&j.getField(d),f&&(g=f.displaytype),g&&k&&g!==k&&(g===Kc?e=parseInt(e,10):g===Oc&&(e=parseFloat(e))),h=j.getRows(),d&&(h=h.filter(function(a){return j.getFieldValue(a,d,!0)===e}))),h&&h.length&&(i=j.getFieldValue(h[0],c,!0)),i}function Ta(a){if(null!==a)switch(typeof a){case Cc:return Jc;case Dc:return a%1==0?Kc:Oc;case Fc:if(a){if(a instanceof Array)return"ARRAY";if(a instanceof Date)return Qc}return"OBJECT";case Ec:if(Date.parse(a)){if(-1!==a.indexOf("T"))return Qc;if(3===a.split("-").length)return Pc}else if(pa(a,"://"))return"URL";try{if(!isNaN(+a))return-1!==a.indexOf(".")?Oc:Kc}catch(b){return"STRING"}}return"STRING"}function Ua(a){return[a.match(Ac)||[],a.split(Ac)]}function Va(){var b=this;return function(c,d){return(b.Model?a.$M(b.Model.id).getRowId(b):b.Id||"")+'">'+d(c)}}function Wa(){return function(a,b){return encodeURIComponent(ic("<div>").html(b(a)).text())}}function Xa(){return function(a,b){return decodeURIComponent(ic("<div>").html(b(a)).text())}}function Ya(){return function(a,b){return b(a).replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/"/g,'\\"').replace(/'/g,"\\'")}}function Za(a){if(!a)return{};"?"===a.substring(0,1)&&(a=a.substr(1));for(var b,c=a.split("&"),d={},e=0;e<c.length;++e)b=c[e].split("="),2==b.length&&(d[b[0]]=decodeURIComponent(b[1].replace(/\+/g," ")));return d}function $a(a,b,c,d){c||(c={});var e=c.model,f=c.row,g=d||Wc;return c&&(g.apiExtensions=c),f&&e?a(tc,b,g,e,f):e?a(sc,b,g,e):a(rc,b,g)}function _a(a,b,c){return $a(fb,a,b,c)}function ab(a,b,c,d,e){return c||(c={}),c.asData=!0,b?hb(a,b,c,d,e):null}function bb(a,b){return $a(ab,a,b)}function cb(a,b,c){return $a(eb,a,b,c)}function db(a,b){return ea(b)?function(){return b.apply(a,arguments)}:function(){return a[b].apply(a,arguments)}}function eb(a,b,c,d,e){return c||(c={}),"undefined"==typeof c.nl2br&&(c.nl2br=!1),c.asText=!0,b?hb(a,b,c,d,e):""}function fb(a,b,c,d,e){var f=hb(a,b,c,d,e);return"object"==typeof f&&f.merges?f.merges:f}function gb(b){b||(b={});var d=b.mode||rc,e=b.model,f=b.row,g=b.apiExtensions,h=c(),i=a.page,j=window.sforce?sforce.connection:{},k=ic.extend({},g,{$Label:a.label.map,$Model:a.model.map(),$Param:i.params,$Api:{Session_Id:j.sessionId,Organization_Id:h.organizationId,User_Id:h.userId,Partner_Server_Url:j.partnerServerUrl,Enterprise_Server_Url:j.enterpriseServerUrl,Partner_Server_Urls:j.partnerServerUrls,Enterprise_Server_Urls:j.enterpriseServerUrls},$User:h,$Site:{CurrentSiteUrl:i.currentSiteUrl,Prefix:i.sitePrefix},SkuidField:Va,urlEncode:Wa,encodeUrl:Wa,urlDecode:Xa,decodeUrl:Xa,escapeJS:Ya,escapeLiterals:Ya});if(d!==sc&&d!==tc||ic.extend(k,{Model:{conditions:e.conditions,Data:e.data,data:e.data,Label:e.label,label:e.label,LabelPlural:e.labelPlural,labelPlural:e.labelPlural,fields:e.fields,Fields:e.fieldsMap,fieldsMap:e.fieldsMap,KeyPrefix:e.keyPrefix,keyPrefix:e.keyPrefix,ObjectName:e.objectName,objectName:e.objectName,id:e.id,updateable:e.updateable,createable:e.createable,deleteable:e.deleteable}}),d===tc){var l=e.data.indexOf(f)+1,m=e.getRecordForRow(f),n=1===l,o=l===e.data.length,p={first:n,last:o,index:l};m&&(p.Record={id:m.getId(),index:l,isFirst:n,isLast:o,isNew:m.isNew(),isClone:m.isClone(),isMarkedForDeletion:m.isMoribund(),data:m&&m.get()}),ic.extend(k,p,f)}return k}function hb(b,c,d,e,f){var g=arguments[0];if(null!==g&&typeof g===Fc&&(b=g.mode,c=g.template,d=g.options,e=g.model,f=g.row),f&&"function"==typeof f&&(f=f()),f||"row"!==b||(e&&e.data&&e.data.length?f=e.data[0]:b="model"),e||"model"!==b||(b="global"),!c&&""!==c)throw"Required argument 'template' was not provided.";if(!(b&&b.toLowerCase()in Xc))throw"Invalid merge mode. Valid modes are: global,model,row.";b=b.toLowerCase(),d||(d={});var h,i,j,k,l,m,n,o=e,p=o?o.fieldsMap:null,q=!0===d.asText,r=!0===d.asData,s=d.outputType,t=d.evaluateFormulas,u={fields:[]},v=Ua(c),w=v[0],x=v[1],y="",z=!1,A=!1,B=-1,C=x.length,D=d.apiExtensions;if(w.length)l=gb({mode:b,apiExtensions:D,model:o,row:f});else if(q||r)return c;if(r){if(1===w.length&&""===x.join("")){var E=Ra(w[0]);if(1===E.length)return X(l,E[0])}q=!0}for(;C>0;){k=x[++B],C--,y+=k;var F=w[B];if(F){var G,H="{{{"===F.substring(0,3),I=F.substring(H?3:2,F.lastIndexOf(H?"}}}":"}}")),J=I.charAt(0),K=-1!==["#","/","^"].indexOf(J),L=K||-1!==["&","!"].indexOf(J),M="/"===J,N=K&&!M,O=oa(I,"$System")||oa(I,"$Date")||oa(I,"$Time"),P=oa(I,"$Model.");if(d.fieldPrefix&&(I=L?J+d.fieldPrefix+I.substr(1):d.fieldPrefix+I,F="{{"+I+"}}"),-1!==I.indexOf(".records")&&(N?(z=I.substring(1,I.indexOf(".records")),A=z.startsWith("$Model.")):M&&(z=!1,A=!1)),O){if(m=kc.getLocalDateTime(new Date),"$System.Now"===I)I=H?kc.getSFDateTime(m):kc.makeFormattedLongDateTime(m);else if(G=I.split("."),1===G.length)I="$Date"===I?kc.makeFormattedDateFromLocal(m):kc.formatTime(Pb().timeFormat,m);else switch(G[1]){case"Year":I=m.getFullYear();break;case"Month":I=m.getMonth()+1;break;case"Day":I=m.getDate();break;case"DayOfWeek":I=m.getDay();break;case"Hour":I=m.getHours();break;case"Minute":I=m.getMinutes()+1;break;case"Second":I=m.getSeconds();break;case"Millisecond":I=m.getMilliseconds();break;case"Period":I=kc.getPeriod(m)}y+=I;continue}if(H||t||"&"===J||K&&-1===I.indexOf(".records")){if(t){var Q,R,S,T=x.length>=B?ic.trim(x[B]):null,U=x.length>=B?ic.trim(x[B+1]):null;T&&(T=T.substring(T.length-1,T.length)),U&&(U=U.substring(0,1)),I.match(/\.data\.\d+\./)?(R=I.split("."),S=R.splice(0,P?4:3),S=P?a.$M(S[1]):o,Q=!!S&&S.getField(R.join("."))):Q=I.match(/\.data\.length/)?{displaytype:Lc}:o.getField(I);var V=Q.displaytype,W=mc(V,Yc)>-1,Y=V===Jc,Z=!Y&&!W,$=Z,_=!1;Q&&"childRelationship"!==Q.type&&(_=oa(V,Pc))&&($=!1),y+="{{#"+I+"}}"+($?'"{{#escapeJS}}':""),y+=_?"date {{{"+I+"}}}":"{{{"+I+"}}}",y+=($?'{{/escapeJS}}"':"")+"{{/"+I+"}}{{^"+I+"}}",y+=_?"null":W?"0":Y?"false":'""',y+="{{/"+I+"}}"}else y+="{{"+I+"}}";continue}if("$System.Now"===I){y+=kc.makeFormattedLongDateTime(new Date);continue}var aa,ba=I.match(/^[#\/]?\$Model\.([^.]+)\.data\.(\d+)\.(.+)/);if(null!==ba||A){ba?(h=a.$M(ba[1]),i=ba[2],j=ba[3]):j=I;var ca=h&&h.fieldsMap,da=h&&h.getRows()[i];if(ba&&z&&(z=j.substring(0,j.indexOf(".records"))),aa=ib({isSectionChar:K,childRelName:z,fieldsMap:ca,fieldName:j,mode:tc,model:h,row:da,token:F})){y+=aa;continue}}else if(b!==rc&&(aa=ib({isSectionChar:K,childRelName:z,fieldsMap:p,fieldName:I,mode:b,model:e,row:f,token:F}))){y+=aa;continue}y+=F}}var ea=!0===d.asText&&!0!==d.nl2br||!0===d.allowHTML||!1===d.nl2br||t,fa=a.Mustache.render(y,l),ga=ea?fa:ja(fa),ha=!0,ia=!0;if(t){try{n=a.formula.evaluate(ga)}catch(la){return ic(document.body).one("pageload",function(){a.component.getByType("skuidpage")[0].addProblem("Invalid syntax for field formula: "+c+". "+la)}),null}return s===Kc?parseInt(n,10):s===Nc||s===Lc?parseFloat(n):s===Jc?!!n:s===Pc?(jc.isDate(n)&&(n=kc.getLocalDateTime(n)),kc.getSFDate(n)):s===Qc?kc.getSFDateTime(n):n}d&&!1===d.createFields&&(ia=!1,ha=!1),d&&!1===d.registerFields&&(ha=!1);var ka=ic('<div class="nx-template">'+ga+"</div>");return ia&&ic.each(ka.find(".nx-merge"),function(){var b,c=ic(this),g=c.data("model"),h=c.data("field"),i=c.data("parentfield"),j=c.data("parentrowid"),k=g&&a.$M(g)||e,l=c.data("rowid");if(!l&&f&&(l=k.getRowId(f)),i&&j&&l){var m=k.dataMap[j][i].records;m&&ic.each(m,function(a,c){if(c.Id===l)return b=c,!1})}else k&&(b=k.dataMap[l]);if(h&&b){var n={fieldId:h,editable:!1,register:ha};i&&(n.fieldContext=i),d.noLink&&(n.noLink=!0);var o=new a.ui.Field(b,k,null,n);o.render(),u.fields.push(o),c.after(o.element),c.remove()}}),q?(fa=ka.text(),u.fields.length&&u.fields.forEach(function(a){a.unregister()}),fa):(u.merges=ka,u)}function ib(a){var b,c,d,e=a.isSectionChar,f=a.childRelName,g=a.fieldsMap,h=a.fieldName,i=e&&f&&g&&f in g&&"childRelationship"===g[f].type,j=a.mode,k=a.model,l=a.row,m=a.token,n=null,o=k&&l?k.getRowId(l):null;return i?b=!1:f&&!e?(c=g[f],d=c.subFieldsMap,b=d&&h in d||"Id"===h):b=g&&h in g||"Id"===h,b&&(n='<span class="nx-merge'+(k?'" data-model="'+k.id:"")+'" data-field="'+h,n+=j===tc?f?'" data-parentfield="'+f+'" data-parentrowid="'+o+'" data-rowid="{{#SkuidField}}'+m+"{{/SkuidField}}</span>":(l&&o?'" data-rowid="'+o:"")+'">'+m+"</span>":(f?'" data-parentfield="'+f:"")+'" data-rowid="{{#SkuidField}}'+m+"{{/SkuidField}}</span>"),n}function jb(a,b){var c={},d=0;if(a){for(;d<a.length;d++)c[a[d][b]]=a[d];return c}}function kb(a,b,c){var d={};ic.each(b,function(a,b){d[b]=!0});var e=ic.map(a[0].attributes,function(a){return a.name});ic.each(e,function(b,c){d[c]||a.removeAttr(c)}),c||a.empty()}function lb(a){return a.outerHTML||function(a){var b,c=document.createElement("div");return c.appendChild(a.cloneNode(!0)),b=c.innerHTML,c=null,b}(a)}function mb(a){return a&&"function"==typeof a.then}function nb(a,b,c){var d,e=ad();if(d=a?da(a)?a:""+tb(a):"",e.length){for(var f,g,h,i,j,k="",l=0,m=0,n=d.length,o=0,p=0,q={};p<e.length&&n>o;){if(f=e[p],g=b.getField(f).length,h=n>=l+g,k=d.substring(l,h?l+g:n),i=!1,h&&k.length&&""!==ic.trim(k))for(j=k.length-1;j>-1;j--)if(""===ic.trim(k[j]))i=!1;else{if(i){m=j+1;break}i=!0}else m=k.length;b.updateRow(c,f,k.substring(0,m)),l+=m,o+=g,p++}for(;p<e.length;)f=e[p],q[f]=null,p++;if(b.updateRow(c,q),o<n)throw"The total number of characters in this Page's Layout ("+n+") exceeds the maximum number of characters available for each Page ("+o+"). Please split out some of your content into other Pages, and then include these Pages within this Page."}}function ob(a){var b,c=a.model,d=a.row,e=a.field,f=e.lastIndexOf("."),g=c.isAggregate,h=-1!==f?e.substring(0,f+1):"";return g?b=pc.getConversionRates()[0].IsoCode:(b=c.getFieldValue(d,h+"CurrencyIsoCode",!0))||(b=c.getFieldValue(d,"CurrencyIsoCode",!0)),b}function pb(b,c,d){var e,f=pc.getConversionRates(),g=a.utils.conversionRatesMap;if(!f||!f.length)return b;if(e=f[0].IsoCode,g||(g=a.utils.conversionRatesMap={},ic.each(f,function(a,b){g[b.IsoCode]=b})),g&&g[c]&&g[d]){var h=g[d],i=Math.pow(10,6);if(c!==e){var j=g[c];b=Math.round(b/j.ConversionRate*i)/i}return Math.round(b*h.ConversionRate*i)/i}}function qb(a){a&&(gc=a.substring(0,a.indexOf("?")))}function rb(a){return(gc||"")+"?file="+a+"&retURL="+encodeURIComponent(location.pathname+location.search)}function sb(a){return ic(ic.parseXML(a)).children().first()}function tb(a){return a.xml?a.xml:(new XMLSerializer).serializeToString(a)}function ub(a){if(ga(a)||null===a)return 0;if(ic.isPlainObject(a)){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}return ic.isArray(a)||da(a)?a.length:U(a)?a.toString().replace(/\D/g,"").length:0}function vb(a,b){b||(b=".");var c=["\\\\","\\"+b,b];return a.indexOf(".")<0?[a]:a.indexOf("\\")<0?a.split("."):wb(a,c)}function wb(a,b){var c,d=b[0],e=[],f=[],g=d&&d.substring(1);return 1===b.length?a.split(d):(a.split(d).forEach(function(a){e.push(wb(a,b.slice(1,b.length)))}),c=e.length,ic.each(e,function(a,b){if(b.length){var d=b.length;ic.each(b,function(b,h){if(b===d-1&&a!==c-1){var i=h+g+e[a+1][0];for(e[a+1].shift();e[a+2]&&!e[a+1].length;)a++,i+=g+e[a+1][0],e[a+1].shift();f.push(i)}else f.push(h)})}}),f)}function xb(a,b){return["\\",b||"."].reduce(function(a,b){return a.split(b).join("\\"+b)},a)}function yb(a){function b(a,c,d,e){var f=d?d+".":d;if(f+=xb(a),ic.isPlainObject(c))return void ic.each(c,function(a,c){b(a,c,f,e)});e[f]=c}var c={};return ic.each(a,function(a,d){b(a,d,"",c)}),c}function zb(a){var b=ic.Deferred();return setTimeout(function(){b.resolve()},a||0),b.promise()}function Ab(b,c,d){var e,f,g,h,i,j="change";d=d||{},g=d.delayTime||400,f=d.dataPropertyName,f?b.data(f,b.val()):e=b.val(),j+=bd?9===bd?" selectionchange keyup":bd<9?" keyup":" keyup input":" keyup input",b.on(j,function(d){if(!b.prop("disabled")){var j=b.val(),k=function(){if(clearTimeout(h),i&&a.events.unsubscribe(i),f&&(e=b.data(f)),j===b.val()&&j!==e){var d=e;f?b.data(f,j):e=j,c&&c(j,d)}};clearTimeout(h),i&&a.events.unsubscribe(i),"change"===d.type?k():(i=a.events.subscribe("skuid.ui.commitUserInput",k),h=setTimeout(k,g))}})}function Bb(a){if(a&&a.eventType){var b,c=a.eventType,d=a.delay||400,e=a.callback;(a.context||ic(window)).on(c,function(){clearTimeout(b),b=setTimeout(function(){e&&e()},d)})}}function Cb(a,b){ic.fn[a]=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):typeof c!==Fc&&c?void ic.error("Method "+c+" does not exist on jQuery."+a):b.init.apply(this,arguments)}}function Db(a,b){var c=ic("html"),d=function(e){ic(e.target).closest(a).length||(c.off("click.skuidBlur",d),b())};c.on("click.skuidBlur",d)}function Eb(){return cd++}function Fb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)})}function Gb(a,b){var c=a.split("."),d=b||"";return d&&-1===d.indexOf(".")&&c.length>1?d+="."+c[c.length-1]:d||(d=a),d}function Hb(a){var b="";do{b=dd[63&a]+b,a>>>=6}while(0!==a);return b}function Ib(a){a||(a={});var b=a.prefix,c=""+Hb(Date.now());return c.substr(0,c.length-2),(b||"sk")+"-"+c+"-"+Eb()}function Jb(b,c,d,e){return a.utils.isString(c)&&(c=[c]),b&&ic.each(b,function(){var a=this;a[d]={},ic.each(c,function(b,c){a[c]&&a[c].length&&ic.each(a[c],function(b,c){var f;ic.each(e instanceof Array?e:[e],function(b,e){(f=c[e])&&"undefined"!=f&&(a[d][f]=c)})})})}),b}function Kb(a){return a instanceof Array?a:[a]}function Lb(b){b&&b.data("eventSubscriptions")&&(ic.each(b.data("eventSubscriptions"),function(){a.events.unsubscribe(this)}),b.removeData("eventSubscriptions"))}function Mb(a){return hd[a]}function Nb(a,b,c,d,e,f){var g=c?c.attr("uniqueid"):"";f||(f={});var h=function(){var b,g=d.data("rendered");return!g&&(b=a(c,d,e,f),d.data("rendered",!0),b)},i=function(){var a,g=d.data("rendered");return!(!g&&g!==undefined)&&(a=b(c,d,e,f),d.data("rendered",!1),a)};return g&&!hd[g]&&(hd[g]={override:!1,doRender:!0}),f.renderOverride=hd[g],f.uniqueid=g,Ob(h,i,f.renderConditions?f.renderConditions:c&&c.children?c.children("renderconditions"):null,f.eventParentElement||d,f)}function Ob(b,c,d,e,f){function g(a){return w&&w.override?!0===w.doRender:N(a,{row:r,model:s,logicType:n,logic:o})}function h(a){if(a?f.event=a:"event"in f&&delete f.event,!t){t=!0;var d;d=g(q)?b(f):c(f),f.component&&a&&a.name&&(mb(d)||(d=ic.Deferred().resolve()),d.then(function(){f.component.publish("handled."+a.name)})),t=!1}}function i(b){var c,d,e=s&&r&&s.id&&(!b.fieldModel||b.fieldModel===s.id),f=e?s.id:b.fieldModel?b.fieldModel:s?s.id:null,g=f?a.$M(f):null,h=e?r:b.fieldRow?b.fieldRow:r||null;return h&&ia(h)&&g?c=g.getRowId(h):ea(h)?(d=h())&&(c=g.getRowId(d)):c=h,{
modelId:f,rowId:c}}function j(){q.length=0,k={};var b,c,d=e.data("eventSubscriptions");if(u.length){if(ic.each(u,function(b,c){a.events.unsubscribe(c)}),d&&d.length)for(b=d.length-1;b>=0;b--){c=d[b];for(var f=0;f<u.length;f++)c===u[f]&&d.splice(b,1)}u.length=0}p&&p.each(function(){var b=new a.model.Condition(ic(this));q.push(b)}),q.length&&(ic.each(q,function(a,b){var c,d,e=i(b),f=e.modelId,g=e.rowId,h=b.field,j=b.sourceType;f&&(c=k[f],c||(c=k[f]={}),g?(d=c[g])||(d=c[g]={}):"fieldvalue"===j&&(c.__conditionsNeedRows=!0),"hasChanged"===b.sourceProperty?"modelproperty"===j?c.__any=!0:d&&(d.__any=!0):d&&h&&(pa(h,".")&&(h=H(h)),d[h]||(d[h]=1)))}),u.push(v("row.updated",function(a){var b,c=k[a.modelId],d=!1;c&&(b=c[a.rowId],b&&(ic.each(b,function(b){if(Y(a.updates,b))return d=!0,!1}),!d&&b.__any&&(d=!a.rowHadPriorChanges)),d||(c.__any?d=!a.modelHadPriorChanges:c.__conditionsNeedRows&&(delete c.__conditionsNeedRows,j(),d=!0))),d&&h({name:"row.updated",data:a})})),u.push(v("row.created",function(a){a.modelId in k&&h({name:"row.created",data:a})})),u.push(v("row.deleted",function(a){a.modelId in k&&h({name:"row.deleted",data:a})})),u.push(v("row.undeleted",function(a){a.modelId in k&&h({name:"row.undeleted",data:a})})),u.push(v("models.saved",function(a){var b=!1;ic.each(k,function(c,d){if(c in a.models){b=!0;var e=a.insertResults;e&&e.length&&ic.each(e,function(a,b){var c=b.oldId,e=b.id;b.success&&c&&e&&c in d&&(d[e]=d[c],delete d[c])})}}),b&&h({name:"models.saved",data:a})})),u.push(v("models.cancelled",function(a){ic.each(k,function(b){if(b in a.models)return h({name:"models.cancelled",data:a}),!1})})),u.push(v("models.loaded",function(a){ic.each(k,function(b){if(b in a.models)return h({name:"models.loaded",data:a}),!1})}))),u.push(v("actions.conditionaloverride",function(a){x===a.componentId&&h({name:"actions.conditionaloverride"})})),u.length&&(d&&d.length?d.push.apply(d,u):e.data("eventSubscriptions",u))}f||(f={});var k,l=f.context||{},m=d&&d.attr,n=m?d.attr("logictype"):null,o=m?d.attr("logic"):null,p=m?d.children():null,q=[],r=f.row?f.row:l.row,s=f.model?f.model:l.model,t=!1,u=f.eventSubscriptions=[],v=a.events.subscribe,w=f.renderOverride,x=f.uniqueid;return j(),w&&w.override&&w.doRender||q.length&&g(q)||!q.length?b(f):c(f)}function Pb(){return a.utils.userLocale}function Qb(a,b,c){var d,e=Pb().timeFormat,f=e.toLowerCase(),g=f.indexOf("a"),h=f.indexOf("h"),i=[],j=new Date;for(-1!=g&&(e=g<h?"a"+e.charAt(h):e.charAt(h)+"a"),a=a||0,b=b||24,d=a;d<=b;d++)j.setHours(d,0,0,0),i.push({value:d,label:kc.formatTime(e,j),isSelected:c===d});return i}function Rb(a,b,c,d){c=c||0;var e,f,g,h=a.scrollParent(),i=h[0],j=i.scrollTop,k=i.clientHeight,l=j+k;if(!d&&ic(b).is(":visible"))b.hide();else if(b.show(),e=a[0].offsetHeight,g=a[0].offsetTop-c,(f=g+e)>=l-1){var m=Math.min(f-k+18,g);m>j&&(bd||h.animate({scrollTop:m},500))}}function Sb(a,b){b=b||0;var c=a.scrollParent(),d=c[0],e=d.clientHeight,f=a[0].offsetHeight,g=a[0].offsetTop+f-b,h=g-e+18;bd||c.animate({scrollTop:h},500)}function Tb(a,b){Bb({eventType:"resize orientationchange",delay:b,callback:a})}function Ub(b,c,d){c.element&&(c=c.element);var e={},f={},g=[];d=d||{},d.removeInlineStyles&&c.removeAttr("style"),b.find("styleitem").each(function(){var b,c,h=ic(this),i=h.attr("property"),j=h.attr("value"),k=h.attr("type"),l=h.attr("datasource"),m=a.dataSource.get(l);"background"===k&&"image"===h.attr("bgtype")?(!d.whitelist||d.whitelist&&-1!==d.whitelist.indexOf("background-image"))&&(b=h.attr("bg-source"),(c=m&&m.getImageSource(b))&&c.getSrc&&g.push(c.getSrc({context:{},mergeSettings:{},dataSource:c.dataSource,xmlDef:h,prefix:"bg-"}).then(function(a){f["background-image"]=a?"url("+a+")":""},function(){f["background-image"]=""}))):i&&(!d.whitelist||d.whitelist&&-1!==d.whitelist.indexOf(i))&&(e[i]=j||"")}),ic.isEmptyObject(e)||c.css(e),ic.when.all(g).then(function(){ic.isEmptyObject(f)||c.css(f)})}function Vb(a,b){var c;return b=b||{},a&&(c=a.toString().match(/^([\d]*\.?[\d]+)([^\d]*)$/)),!!c&&(c[1]=c[1].indexOf(".")>=0?parseFloat(c[1]):parseInt(c[1],10),{original:c[0],number:c[1],unit:c[2]?c[2]:b.defaultUnit||"px"})}function Wb(){return a.dev||!a.version?(new Date).getTime():a.version.date}function Xb(a){var b=this;if(b._GUID="SelectItem-"+Eb(),!a)throw"You must provide a configuration object when creating a new SelectItem.";if(!("value"in a))throw"Value is required.";ic.extend(b,a),"label"in a||(b.label=b.value),b.isSelected||(b.isSelected=!1)}function Yb(){this.items=[],this.itemsMap={},this.selectedIndex=this.selectedKey=!1}function Zb(a){a||(a={});var b=this;b._get=a.get,b._set=a.set,b.key=b._createKey({id:a.id,type:a.type})}function $b(b,c){var d=this;return d.element=b,d.options=c||{},d.editor=new a.ui.Editor(b,{showHeader:!1,showMessages:!1,customContentClass:"nx-editor-contents-template"}),c.model&&(d.model=c.model,d.editor.registerModel(d.model)),!d.conditions&&c.conditions&&(d.conditions=c.conditions),c.controllingComponent||(d.editor.handleSave=function(a){a&&d.render()},d.editor.handleCancel=function(){d.render()},d.editor.handleDataRefresh=function(){d.render()},d.editor.handleChange=function(){d.render()}),d.render(),d}function _b(a){var b=a.uploadMethod,d=Uc&&l()&&c().isAuthenticated;this.options=a,this.canUpload=!1,this.uploadMethod=a.uploadMethod,this.progressDiv=ic("<div>").addClass("nx-file-progress"),this.dragAndDrop=d,b.supportsIframeUpload&&b.supportsIframeUpload()?this.canUpload=!0:d&&(this.canUpload=!0),this.iframe=ic(d?'<input style="display:none;" type="file" id="'+Ib()+'" multiple>':'<iframe style="display:none;" src="" frameborder="0">')}function ac(){try{return window.self!==window.top}catch(a){return!0}}function bc(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function cc(a){var b=ic.Deferred(),c=new FileReader;return c.onload=function(a){var c=a.target.result;c?b.resolve(c.substring(c.indexOf(",")+1)):b.reject("No Content Found")},c.onerror=function(a){b.reject(a)},c.readAsDataURL(a),b.promise()}function dc(b,c){var d,e=this,f=c.uploadMethod,g=!1!==c.autoRefreshModelsOnUpload,h=c.onUploadSuccessActions,i=c.onUploadFailureActions,k=c.row,m=c.model;if(b.data("object",e).addClass("nx-fileupload"),e.elem=b,e.options=c,e.buttonText=c.label||lc("upload"),e.cacheBuster=c.cacheBuster,e.uploadMethod=f,e.model=m,e.row=k,!f){if(!(d=m.getDataSource()))return b.text(a.label.merge(lc("error_invalid_file_upload_data_source"),m.id)),!1;if(f=d.getUploadMethod(c.storeAs),c.uploadMethod=e.uploadMethod=f,!f)return b.text(a.label.merge(lc("error_could_not_find_upload_method"),c.storeAs)),!1}if(f.needsRecordContext&&!k)return b.text("No record found for file component."),!1;if(b.off("imageuploadcomplete imageuploadstarted mouseenter mouseleave click drop dragleave dragenter dragover"),e.canCreateOrUpdateImage=!0,f.needsRecordContext){if(!m.accessible)return b.text("You do not have permission to upload files to this record."),!1;if(m.isRowNew(k)){b.text("This record must be saved before you can upload files.");var n=a.events.subscribe("models.saved",function(d){m.id in d.models&&(m.isRowNew(k)||(b.empty(),new dc(b,c),a.events.unsubscribe(n)))});return!1}}if(f.needsFieldContext){var o=e.fieldName=c.idField;if(!o)return b.text("No image field was specified."),!1;e.fieldValue=m.getFieldValue(k,o);var p=f.getFileIdField&&f.getFileIdField(e.fieldName),q=f.getFileNameField&&f.getFileNameField(e.fieldName),r=m.getField(e.fieldName);e.fileId=m.getFieldValue(k,p),e.fileName=m.getFieldValue(k,q),e.canCreateOrUpdateImage=m.accessible&&(e.options.editable||e.options.deleteable)&&(m.updateable&&r.editable||e.fieldValue)}if(e.canCreateOrUpdateImage&&(e.uploader=new _b(c,f),e.uploader.canUpload?(e.uploader.attach(e),k&&m.getRowId(k)&&e.uploader.setSource({row:k,model:m},e.elem,e.fieldName)):b.text(function(){var a=l();return a||Uc?a&&!Uc?"Your browser does not support HTML5 file uploads.":!a&&Uc?"You do not have permission to upload files using the API.":void 0:"You either do not have permission to upload files using the API, or your browser does not support HTML5 file uploads."}())),e.uploader&&e.uploader.canUpload||(e.canCreateOrUpdateImage=!1),e.status=ic("<div>").addClass("nx-fileupload-status").css({"float":"none",display:"inline-block"}).appendTo(b).hide(),e.statustext=ic("<div>").appendTo(e.status),"filename"===c.displayAs||f.forceStoreAsFileName){var s,t;if(!1!==e.canCreateOrUpdateImage&&e.uploader&&(t=ic("<div>"),e.progressParentDiv=t,a.mobile?(t.addClass("sm-button").css("display","inline-block"),s=new a.mobile.ui.Button({icon:"fa-plus",label:e.buttonText,element:t,iconColor:"green"}),t.on("tap",function(){e.uploader.pickFile()})):t.text(e.buttonText).css("vertical-align","top").skooButton({icon:"sk-icon-upload"}).click(function(){e.uploader.pickFile()}),t.appendTo(b)),a.mobile||(e.status.addClass("nx-actionselect nx-status").css({"margin-left":"4px","word-break":"break-all"}),e.statustext.addClass("nx-actionselect-text")),m&&m.updateable&&c.deleteable){if(a.mobile){e.deletebutton=ic('<div class="sm-button">');var u=new a.mobile.ui.Button({icon:"fa-minus",element:e.deletebutton,iconColor:"red"});e.deletebutton.on("tap",function(){u.startProcessing(),e.deleteImage()}),b.on("imagedeletecomplete",function(){u.stopProcessing()})}else e.deletebutton=ic('<div class="sk-icon inline sk-icon-delete">').css({border:"3px solid #EEE","vertical-align":"top","background-color":"#EEE","margin-top":"3px",cursor:"pointer"}),e.deletebutton.click(function(){e.deleteImage()});e.deletebutton.css("display","inline-block").appendTo(b)}b.on("imageuploadstarted",function(b,c){e.dragAndDrop||(e.fileName=c.fileName),e.setStatus(a.label.merge(lc("uploading"),c.fileName)),e.status.off("click.skuid"),s&&s.startProcessing()}),s&&b.on("imageuploadcomplete",function(){s.stopProcessing()})}else"image"===c.displayAs&&(e.progressParentDiv=e.elem,e.elem.children(".nx-edithover").remove(),e.elem.addClass("nx-attachmentimage"),e.defaultImageSrc=j(e.options.defaultImage||"person"),e.image=ic("<img>").addClass("nx-attachmentimage-image").css("max-width","100%").appendTo(b),!1!==e.canCreateOrUpdateImage&&e.elem.on("mouseenter",function(){e.options.editable&&e.uploader&&e.elem.append(ic("<div>").addClass("nx-edithover sk-icon inline sk-icon-edit").css({"background-color":"white",opacity:"0.8",border:"4px solid white"}).click(function(a){e.elem.find(".nx-error").remove(),e.uploader&&e.uploader.pickFile(),a.stopPropagation()})),e.fileId&&e.options.deleteable&&e.elem.append(ic("<div>").addClass("nx-edithover sk-icon inline sk-icon-delete").css({cursor:"pointer","background-color":"white",opacity:"0.8",border:"4px solid white",left:"4px"}).click(function(a){e.elem.find(".nx-error").remove(),e.deleteImage(),a.stopPropagation()}))}).on("mouseleave",function(){e.elem.find("div.nx-edithover").remove()}));b.on("imageuploadcomplete",function(b,d){var j,l,n=d&&(d.newFileId||d.newAttachmentId),o=new Date;e.cacheBuster=o.getTime(),n&&(d.newFileName&&(e.fileName=d.newFileName),e.fileId=n,e.fieldValue=d.newFieldValue||d.newImageId,e.syncModel(),e.draw()),d&&d.message?(j={text:d.message,hideIn:4},e.fileId&&e.fileName?"image"!==c.displayAs&&(j.complete=function(){e.setStatus(e.fileName)}):!e.fileId&&e.fileName&&(e.fileName=""),e.setStatus(j),i&&a.actions.runActionsNode(i,e,{model:m,row:k,$Error:{Message:d.message}})):(f.needsFieldContext||(e.setStatus({text:lc("upload_successful"),hideIn:2}),f.canRunPostUploadSnippet&&c.snippetName&&a.snippet.get(c.snippetName)(d)),f.relatedObjectName&&g&&(l=[],ic.each(a.model.list(),function(){var a=this.objectName===f.relatedObjectName,b=this.dataSource===f.dataSource;a&&b&&(l.push(this),this.cancel())}),a.model.updateData(l)),h&&a.actions.runActionsNode(h,e,{model:m,row:k,apiExtensions:{$Result:{body:d&&d.body?d.body:{}}}}))}),e.draw()}a.utils||(a.utils={});var ec,fc,gc,hc,ic=a.$,jc=a.utils,kc=a.time,lc=a.$L,mc=ic.inArray,nc={}.toString,oc=a.constants,pc=a.currency,qc=oc.MERGE_CONTEXTS,rc=qc.GLOBAL,sc=qc.MODEL,tc=qc.ROW,uc="fieldvalue",vc='"',wc='""',xc=[",",'"',"\n"],yc=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,zc=/^([and|or|\d|\(|\)]+)$/,Ac=/\{{2,3}[^\{\}]+\}{2,3}/g,Bc=oc.JS_TYPES,Cc=Bc.BOOLEAN,Dc=Bc.NUMBER,Ec=Bc.STRING,Fc=Bc.OBJECT,Gc=Bc.FUNCTION,Hc=Bc.UNDEFINED,Ic=oc.DISPLAY_TYPES,Jc=Ic.BOOLEAN,Kc=Ic.INTEGER,Lc=Ic.NUMBER,Mc=Ic.PERCENT,Nc=Ic.CURRENCY,Oc=Ic.DOUBLE,Pc=Ic.DATE,Qc=Ic.DATETIME,Rc=Ic.ID,Sc=Ic.REFERENCE,Tc="nodata",Uc=window.File&&window.FileReader&&window.FileList&&window.Blob&&window.XMLHttpRequest,Vc={createFields:!1,registerFields:!1},Wc={createFields:!0,registerFields:!1},Xc={global:1,model:1,row:1},Yc=[Kc,Lc,Mc,Nc,Oc],Zc={defaultcurrency:"defaultCurrency",firstname:"firstName",lastname:"lastName",organizationid:"organizationId",organizationname:"organizationName",profileid:"profileId",profilename:"profileName",sessionid:"sessionId",userid:"userId",username:"userName",userroleid:"userRoleId",usertype:"userType"},$c={includes:1,excludes:1,"in":1,"not in":1},_c={},ad=function(){return a.platform.getLayoutFields()},bd=function(){for(var a=3,b=document.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",c[0];);return a<=4&&!window.ActiveXObject&&"ActiveXObject"in window?11:a>4?a:void 0}(),cd=2,dd="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_-".split(""),ed=window.location.host,fd={"!=":function(a,b){return a!==b},"=":function(a,b){return a===b},gt:function(a,b){return a>b},lt:function(a,b){return a<b},gte:function(a,b){return a>=b},lte:function(a,b){return a<=b},"starts with":function(a,b){return oa(a,b,!0)},"does not start with":function(a,b){return!oa(a,b,!0)},"ends with":function(a,b){return na(a,b,!0)},"does not end with":function(a,b){return!na(a,b,!0)},contains:function(a,b){return pa(a,b,!0)},"does not contain":function(a,b){return!pa(a,b,!0)},includes:function(a,b){return-1!==mc(b,a.split(";"))},excludes:function(a,b){return-1===mc(b,a.split(";"))}},gd={"!=":function(a,b){return a<b[0]||a>=b[1]},"=":function(a,b){return a>=b[0]&&a<b[1]},gt:function(a,b){return a>=b[1]},lt:function(a,b){return a<b[0]},gte:function(a,b){return a>=b[0]},lte:function(a,b){return a<b[1]}},hd={};Xb.prototype.id=function(){return this._GUID},Yb.prototype={getItems:function(){return this.items},addItem:function(a,b){var c,d=this,e=d.items;if(!a._GUID)throw"Invalid SelectItem.";if(-1!==mc(a,e))throw"Item is already in the List.";a.isSelected&&!1!==d.selectedIndex&&(e[d.selectedIndex].isSelected=!1),b?e.unshift(a):e.push(a),c=b?0:e.length-1,a.isSelected?(d.selectedIndex=c,d.selectedKey=a.value):b&&!1!==d.selectedIndex&&d.selectedIndex++,d.itemsMap[a.value]=a,!1===d.selectedIndex&&(d.selectedIndex=c,d.selectedKey=a.value,a.isSelected=!0)},getSelected:function(){return!1===this.selectedIndex?null:this.items[this.selectedIndex]},addItems:function(a,b){var c=this;a&&ic.each(a,function(){c.addItem(this,b)})},size:function(){return this.items?this.items.length:0},removeItemAtIndex:function(a){this._validateIndex(a);var b=this.items[a],c=b.isSelected;b&&(b.value&&b.value in this.itemsMap&&delete this.itemsMap[b.value],this.items.splice(a,1),b.isSelected=!1),!1!==c&&(this.selectedIndex=!1,this.selectedKey=!1,this.size()>0&&this.selectItemAtIndex(0))},getItemAtIndex:function(a){return this.items[a]},getItemById:function(a){return ic.grep(this.items,function(){return this.id()===a})},selectItemAtIndex:function(a){if(this._validateIndex(a),!1!==this.selectedIndex){if(a===this.selectedIndex)return!0;this.items[this.selectedIndex].isSelected=!1}this.items[a].isSelected=!0,this.selectedIndex=a,this.selectedKey=this.items[a].value},unselectItemAtIndex:function(a){this._validateIndex(a),a===this.selectedIndex&&(this.items[a].isSelected=!1,this.selectedIndex=!1,this.selectedKey=!1)},_getItemIndex:function(a){var b;if(-1!==(b=U(a)?a:this.indexOf(a)))return b;throw"Invalid Item"},selectItem:function(a){this.selectItemAtIndex(this._getItemIndex(a))},unselectItem:function(a){this.unselectItemAtIndex(this._getItemIndex(a))},removeItem:function(a){this.removeItemAtIndex(this._getItemIndex(a))},indexOf:function(a){return!(a instanceof Xb)&&a.value&&a.value in this.itemsMap&&(a=this.itemsMap[a.value]),a?mc(a,this.items):-1},contains:function(a){return-1!==this.indexOf(a)},_validateIndex:function(a){if(a>=this.size()||a<0)throw"Invalid Index";return!0}},Zb.prototype={_createKey:function(a){if(a&&a.id)switch(a.type){case"component":return"skuid.component("+a.id+")";case"model":return"skuid.model("+a.id+")";default:return typeof a.type===Ec?a.type+"("+a.id+")":a.id}},getSettings:function(){var a=this.key,b=this._get();return a&&b&&a in b?ic.extend(!0,{},b[a]):{}},updateSettings:function(a,b){var c=this.key,d=this._get(),e=ic.extend(!0,{},d[c],a);if(b&&!0===b.removeNulls){var f=0,g=function(a){var b,c;if(!(f>200)){c=[];for(b in a)c.push(b);ic.each(c,function(b,c){"undefined"==typeof a[c]||null===a[c]?delete a[c]:typeof a[c]===Fc&&(f++,g(a[c]),f--)})}};g(e)}d[c]=e,this._set(d)}},$b.prototype={unregister:function(){this.editor&&this.model&&this.editor.unregister()},render:function(){var a,b=this,c=b.model,d=b.options||{},e=d.templateBody||"",f=d.context,g=b.conditions,h={allowHTML:d.allowHTML,registerFields:!1};f!==undefined&&(h.apiExtensions=f),b.editor.contents.empty(),c?(a=g&&g.length?c.getRows(g,f):f&&c&&f.model&&f.row&&f.model===c?[f.row]:c.getRows(null,f),!d.isMultiRow&&a&&a.length?(a&&a.length>1&&!0===d.onlyShowFirstRow&&(a=[a[0]]),ic.each(a,function(a,d){d&&b.editor.contents.append(c.mergeRow(d,e,h))})):b.editor.contents.append(c.mergeModel(e,h))):b.editor.contents.append(fb(rc,e,h))}},_b.prototype={setSource:function(a,b,c){var d=this.uploadMethod;if(!this.dragAndDrop){var e,f,g=this.options;g&&(e=this.options.description,f=this.options.filename),d&&d.getIframeSrc&&this.iframe.attr("src",d.getIframeSrc(a,b,c,e,f))}},pickFile:function(){this.dragAndDrop?this.iframe.click():this.iframe.contents().find("input[type=file]").click()},startProgress:function(){this.fileComponent.progressParentDiv&&this.fileComponent.progressParentDiv.append(this.progressDiv)},handleProgress:function(a){if(this.fileComponent.progressParentDiv){var b=Math.round(a.loaded/a.total*100);b<100&&this.progressDiv.css("width",b+"%")}},endProgress:function(){var a=this;this.fileComponent.progressParentDiv&&(this.progressDiv.css("width","100%"),setTimeout(function(){a.progressDiv.detach()},1e3))},uploadFile:function(a,b){var c=this,d=c.options,e=c.element,f=ic.Deferred(),g=d.uploadMethod.dataSource,h=function(a){c.startProgress(),e.trigger("imageuploadstarted",a)},i=function(a){c.endProgress(),e.trigger("imageuploadcomplete",a),a&&a.message?f.reject(a.message):f.resolve()},j=function(a){c.handleProgress(a)};return g.authenticate().then(function(){d.uploadMethod.upload(a,b,d,h,i,j)},function(a){i({message:a})}),f.promise()},attach:function(a){var b,c,d,e,f=this,g=a.elem,h=f.options,i=!1;if(f.iframe.appendTo(g),f.element=g,f.fileComponent=a,f.dragAndDrop){b=ic(document.body),c=ic("<div>").addClass("nx-file-droppable").text(a.buttonText),d=function(b){b.preventDefault();var c=b.originalEvent.dataTransfer?b.originalEvent.dataTransfer.files:b.target.files;if(!c||!c.length)return!1;var d;ic.each(c,function(b,c){d=d?d.then(function(){return f.uploadFile(c,a)}):f.uploadFile(c,a)})};var j=function(){e&&clearTimeout(e),e=setTimeout(function(){c.detach(),i=!1,c.removeClass("nx-file-dropping")},100)};f.iframe.on("click",function(a){this.value=null,a.stopPropagation()}).on("change",d),g.on("dragover",function(a){a.preventDefault(),a.originalEvent.dataTransfer.dropEffect="copy"}).on("dragenter",function(a){a.stopPropagation(),a.preventDefault(),j(),c.addClass("nx-file-dropping"),i||(g.append(c),i=!0)}).on("dragleave",function(a){a.stopPropagation(),a.preventDefault(),c.removeClass("nx-file-dropping")}).on("drop",d),b.on("dragenter."+h._GUID,function(a){a.preventDefault(),i||(g.append(c),i=!0),j()}).on("dragover."+h._GUID,function(a){a.preventDefault(),j()}).on("drop."+h._GUID,function(a){return a.preventDefault(),a.stopPropagation(),c.detach(),c.removeClass("nx-file-dropping"),!1})}},unregister:function(a){var b=a.options._GUID;ic(document.body).off("dragenter."+b+" dragleave."+b+" drop."+b)}},dc.prototype={draw:function(){var a=this,b=this.uploadMethod,c=a.cacheBuster?"&cachebuster="+a.cacheBuster:"",d=function(){if(a.fileId){var d=ic("<img>").css({"max-height":"600px","max-width":"800px"}),e=a.image&&a.image.attr("src");e?d.attr("src",e):b.getSrc&&b.getSrc({context:{id:a.fileId},paramString:c,dataSource:b.dataSource}).then(function(a){d.attr("src",a)},function(){d.attr("src","")}),d.load(function(){var b=ic("<div>").attr("title",ca(a.fileName)).append(d).dialog({close:function(){ic(this).remove()},modal:!0,width:"auto",resizable:!1,open:function(){ic(".ui-widget-overlay").on("click",function(){b.dialog("close")})},dialogClass:"nx-imageview"})})}};"filename"===a.options.displayAs||b.forceStoreAsFileName?a.fileId&&a.fileName&&a.fieldName?(a.setStatus(a.fileName),a.status.off("click.skuid").on("click.skuid",function(){d()}),a.options.deleteable&&a.deletebutton&&a.deletebutton.show()):(a.deletebutton&&a.deletebutton.hide(),a.status.hide()):"image"===a.options.displayAs&&(a.fileId?b.getSrc&&b.getSrc({context:{id:a.fileId},paramString:c,dataSource:b.dataSource}).then(function(b){a.image.attr("src",b)},function(){a.image.attr("src","")}):a.image.attr("src",a.defaultImageSrc),a.elem.off("click.skuid").on("click.skuid",function(){d()}),a.status&&a.status.hide())},setStatus:function(b){var c,d,e,f=this,g=f.status,h=f.statustext;b&&(da(b)?c=b:(c=b.text,d=b.hideIn,e=b.complete)),g&&h&&(f.statusTimeout&&clearTimeout(f.statusTimeout),a.ui.setStatus(g,h,c),d>=0&&(f.statusTimeout=setTimeout(function(){g.animate({opacity:0},{duration:2e3,complete:e||function(){g.hide()}})},1e3*d)))},deleteImage:function(){var a=this,b=a.uploadMethod,c=b.dataSource,d=function(){a.setStatus(lc("deleting"))},e=function(b){var c;b&&b.message?a.setStatus({text:b.message,hideIn:2,complete:function(){a.draw()}}):(c=a.fileId,a.fileId=null,a.fileName=null,a.fieldValue=null,a.elem.trigger("imagedeletecomplete",{oldFileId:c}),a.syncModel(),a.draw())};c.authenticate().then(function(){b.deleteFile({row:a.row,model:a.model},a.fieldName,d,e)},function(a){e({message:a})})},unregister:function(){this.elem&&this.elem.remove&&this.elem.remove(),this.uploader&&this.uploader.unregister(this)},syncModel:function(){var a=this,b={},c=a.model,d=a.row,e={},f=a.uploadMethod,g=f.getFileIdField&&f.getFileIdField(a.fieldName),h=f.getFileNameField&&f.getFileNameField(a.fieldName);if(b[c.getRowId(d)]=e,a.fieldName){a.fieldValue===d[a.fieldName]&&a.fileId===c.getFieldValue(d,g,!0)||(e[a.fieldName]=a.fieldValue);var i={};Z(i,g,a.fileId),Z(i,h,a.fileName),a.fieldValue?(ic.each(i,function(a,b){e[a]=b}),ic.extend(d,e)):(delete d[a.fieldName],ic.each(i,function(a){delete d[a]})),ub(e)&&c.notifyFieldsOfChange(b,{initiatorId:a._GUID})}}},ic.extend(jc,{addResizeHandler:Tb,adjustValueBasedOnQuotedness:W,areConditionsMet:N,calculateReferenceMerges:C,calculateReferenceText:D,canUseSessionStorage:m,capitalizeFirst:s,combineStrings:u,combineUrls:t,conditionallyDo:Ob,conditionallyRender:Nb,contains:pa,convertCurrency:pb,createMapForArray:Jb,createPopupFromPopupXML:A,createPopupFromAction:B,createSearchSubConditions:Qa,decodeHTML:ba,decodeXML:aa,delay:zb,delayEventCallback:Bb,delayInputCallback:Ab,doArraysIntersect:sa,doesRowMeetConditions:O,downloadBase64StringAsFile:P,downloadStringAsFile:Q,encodeHTML:ca,endsWith:na,escapeCSVCell:ta,escapeFieldName:xb,escapeSelector:ua,escapeSingleQuotes:va,extractFieldsFromTemplate:Ra,filterRowsByConditions:R,filterByDataSourceAndEntity:S,generateGUID:Eb,rfc4122v4GUID:Fb,renameFileWhileKeepingExtension:Gb,generateUniqueId:Ib,getAPIDescribeSObject:Ga,getAPIDescribeLayout:Fa,getBodiesOfZIPResourceFiles:xa,getBodyOfStaticResource:wa,getBodyOfZIPResourceFile:za,getCacheTimestamp:Wb,getCSSSizeObj:Vb,getContextToUse:k,getCurrentDomain:e,getDefaultImageUrl:j,getDisplayTypeOfEntity:Ta,getFieldReference:G,getFieldRelationshipName:E,getHourOptions:Qb,getInvokable:db,getJSONBodiesOfZIPResourceFiles:ya,getJSONBodyOfZIPResourceFile:Aa,getLayoutFields:ad,getLocalVisualforceDomain:f,getMergeApi:gb,getMergeResult:hb,getMetadataForRecordTypes:Ea,getModelFieldIdChanges:yb,getNameField:Ba,getObjectProperty:X,getPicklistEntriesValidForRecordTypes:Ha,getQueryParamsObject:Za,getReferenceFieldNameFromRelationshipField:H,getReferenceFieldRelationshipName:I,getRowCurrency:ob,getSafeRelativeUrl:i,getSearchOperatorForDisplayType:Pa,getStaticResourceUrl:h,determineIfInSkuidNamespace:g,getTargetObject:F,getUnescapedParts:vb,getUrlFromAttachmentId:rb,getUserInfoPropValue:J,getXML:tb,hasObjectProperty:Y,highlightSFTab:Ja,applyURLParametersToURL:Ia,ifElse:Ka,inPlatform:b,insertAtIndex:La,isApiEnabled:l,isBlank:ha,isDate:fa,isExactlyNaN:V,isFunction:ea,isMultiValueOperator:T,isNumber:U,isPromise:mb,isString:da,isUndefined:ga,isObject:ia,joinStrings:v,listToMap:jb,removeAllAttrsExcept:kb,loadJS:Ma,loadRichTextApi:Na,loadCSS:Oa,lowercase:ka,makeConditionLogicString:K,makeXMLDoc:sb,merge:fb,mergeAsDataInContext:bb,mergeAsTextInContext:cb,mergeAsText:eb,mergeInContext:_a,mergeNodeProperty:y,modelLookup:Sa,niceExpand:Rb,nl2br:ja,outerHTML:lb,processStylesNode:Ub,readFileAsBase64:cc,redirect:z,registerBlurHandler:Db,registerPlugin:Cb,removeEventSubscriptions:Lb,removeScriptTags:_,scrollTo:Sb,sessionStorage:x,setObjectProperty:Z,size:ub,startsWith:oa,substringLeft:qa,substringRight:ra,toArray:Kb,toClass:nc,unsetObjectProperty:$,uppercase:la,writeXmlToPageLayoutFields:nb,_getRenderOverride:Mb,_ie:bd,_inIframe:ac,_oniOS:bc,_setAttachmentBaseUrl:qb,_setCurrentDomain:d,FileUploader:_b,FileComponent:dc,KeyValueService:Zb,SelectList:Yb,SelectItem:Xb,TemplateComponent:$b})}(window.skuid),function(a){function b(a){var b=a.getFullName();if(t[b]&&t[b]!==a)throw'A formula with the name "'+b+'" was already registered.';return t[b]=a,a}function c(a){var b=a.getFullName();return t[b]&&delete t[b],a}function d(a){return a=a.toUpperCase(),t[a]}function e(){return k(!0,t)}function f(){var a=j.map(t,function(a){var b=a._getIsDeprecated(),c=a.getLocalName(),d=a.getFullName(),e=a.getNamespace(),f=a.getDefaultBuilderState(),g=null!==e;if(!b)return{label:c.toUpperCase()+(g?" (custom - "+e+")":""),value:f||d+"()",isCustom:g,formula:a}});return a.sort(function(a,b){var c=a.formula,d=b.formula,e=c.getLocalName().toUpperCase(),f=d.getLocalName().toUpperCase(),g=(c.getNamespace()||"").toUpperCase(),h=(d.getNamespace()||"").toUpperCase();return e<f?-1:e>f?1:g<h?-1:1}),a}function g(a,b){return n.isUndefined(b)&&(b=0),function(){var c=Array.prototype.slice.call(arguments),d=c[b];return n.isDate(d)&&(c[b]=m().getLocalDateTime(d)),a.apply(window,c)}}function h(a,b){function c(a){var b=a["class"].major,c=a["class"].minor;return"expression"===b?e(c,a):g(c,a)}function e(a,b){var e,g,h,i,j=b.params;return"operational"===a?(e=c(j.head),j.operations?j.operations.forEach(function(a){e=f(e,a)}):j.operation&&(e=f(e,j.operation))):(i=(j.name||"").toUpperCase(),i.startsWith("C_")&&!i.startsWith("C__")&&(i="C__"+i.substring(2)),g=d(i),h=g&&j.arguments.map(function(a){return c(a)}),e=g&&g.evaluate(h)),e}function f(a,b){var d=b.operator,e=u[d["class"].minor][d.params.symbol],f=b.operand,g=e&&f&&c(f);return e&&e(a,g)}function g(a,b){var c=b.params.value;if(null!==c&&c!==undefined||(c=""),"keyword"!==a)return"number"===a?parseFloat(c):c;switch(c.toLowerCase()){case"true":return!0;case"false":return!1;case"null":return null;case"undefined":return undefined}}return b||(b={}),c(l.parser.parse(a))}function i(a,b,c){if(!(this instanceof i))return new i(a,b,c);c=c||{};var d=this,e=s?null:c.namespace||"c",f=((s?"":e+"__")+a).toUpperCase();if(!n.isString(a)||!n.isFunction(b))throw"Bad Formula Initialization: both forumula formulaName and formula function must be defined";d[w]=a,d[x]=e,d[z]=c.argCount||c.numArgs,d[A]=c.returnType,d[B]=b,d[y]=f,d[C]=c.defaultBuilderState||c.defaultState,d[D]=c.deprecated||!1,t[f]=d}var j=a.$,k=j.extend,l=a.formula={},m=function(){return a.time},n=a.utils,o="boolean",p="number",q="string",r="date",s=!1,t={},u={logical:{"|":function(a,b){return a||b},"&":function(a,b){return a&&b},"!=":function(a,b){return a!=b},"=":function(a,b){return a===b},"<":function(a,b){return a<b},"<=":function(a,b){return a<=b},">":function(a,b){return a>b},">=":function(a,b){return a>=b}},algebraic:{"+":function(a,b){return a+b},"-":function(a,b){return a-b},"*":function(a,b){return a*b},"/":function(a,b){return a/b},"%":function(a,b){return a%b}},unary:{"+":function(a){return+a},"-":function(a){return-a},"!":function(a){return!a}}};j(document.body).one("pageload",function(){a.builder&&a.builder.core&&(a.builder.core.formula={getFormulasAsItems:f})});var v=1,w="_prop"+v++,x="_prop"+v++,y="_prop"+v++,z="_prop"+v++,A="_prop"+v++,B="_prop"+v++,C="_prop"+v++,D="_prop"+v++;i.prototype={evaluate:function(a){var b=this[B];if(b)return 1===arguments.length&&j.isArray(a)||(a=arguments),b.apply(this,a)},getLocalName:function(){return this[w]},getNamespace:function(){return this[x]},getArgumentCount:function(){return this[z]},getReturnType:function(){return this[A]},getFullName:function(){return this[y]},getDefaultBuilderState:function(){return this[C]},_getIsDeprecated:function(){return this[D]},register:function(){b(this)},unregister:function(){c(this)},getFunction:function(){return this[B]},getName:function(){return this.getFullName()},getNumArgs:function(){return this.getArgumentCount()}},function(){s=!0,j.each({ABS:{state:"ABS(number)",type:p,func:Math.abs},AMPM:{state:"AMPM(datetime)",type:r,func:g(m().getPeriod)},CEIL:{state:"CEIL(val)",type:r,func:Math.ceil},COMBINE_STRINGS:{state:"COMBINE_STRINGS(startString,endString,separator)",type:q,args:3,func:n.combineStrings,deprecated:!0},CONTAINS:{state:"CONTAINS(stringToExamine,stringToLookFor)",type:o,args:2,func:n.contains},ENDS_WITH:{state:"ENDS_WITH(stringToExamine,stringToLookFor)",type:o,args:2,func:n.endsWith},TODAY:{type:r,state:"TODAY()",args:0,func:function(){var a=new Date;return a.setHours(0,0,0,0),a}},DAY:{state:"DAY(date)",type:r,func:g(m().getDay)},DAY_NAME:{state:"DAY_NAME(date)",type:r,func:g(m().getDayName)},DAY_NAME_SHORT:{state:"DAY_NAME_SHORT(date)",type:r,func:g(m().getDayNameShort)},DAY_OF_WEEK:{state:"DAY_OF_WEEK(date)",type:r,func:g(m().getDayOfWeek)},DAY_OF_WEEK_UTC:{state:"DAY_OF_WEEK_UTC(date)",type:r,func:g(m().getUTCDayOfWeek)},FLOOR:{state:"FLOOR(val)",type:p,func:Math.floor},FORMAT_DATE:{state:"FORMAT_DATE(format,date)",type:r,args:2,func:g(m().formatDate,1)},FORMAT_TIME:{state:"FORMAT_TIME(format,datetime)",type:r,args:2,func:g(m().formatTime,1)},HOUR:{state:"HOUR(datetime)",type:r,func:g(m().getHour)},HOUR_UTC:{state:"HOUR_UTC(datetime)",type:r,func:m().getUTCHour},IF:{state:"IF(logic_test,value_if_true,value_if_false)",type:o,args:3,func:n.ifElse},ISBLANK:{state:"ISBLANK(val)",type:o,func:n.isBlank},JOIN_TEXT:{state:"JOIN_TEXT(separator,firstString,secondString,etcString)",type:q,args:3,func:n.joinStrings},LEFT:{state:"LEFT(string,numChars)",type:q,args:2,func:n.substringLeft},LEN:{state:"LEN(string)",type:q,func:n.size},LOWER:{state:"LOWER(string)",type:q,func:n.lowercase},MILLISECOND:{state:"MILLISECOND(datetime)",type:r,func:g(m().getMillisecond)},MINUTE:{state:"MINUTE(datetime)",type:r,func:g(m().getMinute)},MINUTE_UTC:{state:"MINUTE_UTC(datetime)",type:r,func:m().getUTCMinute},MODEL_LOOKUP:{state:"MODEL_LOOKUP(Lookup_Model_Id,Model_Field_To_Return,Model_Field_To_Search,Search_Value)",args:4,func:n.modelLookup},MONTH:{state:"MONTH(date)",type:r,func:g(m().getMonth)},MONTH_UTC:{state:"MONTH_UTC(date)",type:r,func:m().getUTCMonth},MONTH_NAME:{state:"MONTH_NAME(date)",type:r,func:g(m().getMonthName)},MONTH_NAME_SHORT:{state:"MONTH_NAME_SHORT(date)",type:r,func:g(m().getMonthNameShort)},NOW:{type:r,state:"NOW()",args:0,func:m().roundedNow},RIGHT:{state:"RIGHT(string,numChars)",
type:q,args:2,func:n.substringRight},ROUND:{state:"ROUND(val)",type:p,func:Math.round},SECOND:{state:"SECOND(datetime)",type:r,func:g(m().getSecond)},SECOND_UTC:{state:"SECOND_UTC(datetime)",type:r,func:m().getUTCSecond},STARTS_WITH:{state:"STARTS_WITH(stringToExamine,stringToLookFor)",type:o,args:2,func:n.startsWith},UPPER:{state:"UPPER(string)",type:q,func:n.uppercase},VALUE:{state:"VALUE(text)",type:q,func:window.parseFloat},YEAR:{state:"YEAR(date)",type:r,func:g(m().getYear)},YEAR_UTC:{state:"YEAR_UTC(date)",type:r,func:m().getUTCYear}},function(a,b){new i(a,b.func,{argCount:b.args,returnType:b.type,defaultBuilderState:b.state,deprecated:b.deprecated})}),s=!1}(),j.extend(l,{evaluate:h,Formula:i,get:d,map:e})}(window.skuid),function(a){function b(a,c,d,e){this.message=a,this.expected=c,this.found=d,this.location=e,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,b)}function c(a,c){function d(b,c){throw c=void 0!==c?c:i(uc,tc),k([g(b)],a.substring(uc,tc),c)}function e(a,b){return{type:"literal",text:a,ignoreCase:b}}function f(a,b,c){return{type:"class",parts:a,inverted:b,ignoreCase:c}}function g(a){return{type:"other",description:a}}function h(b){var c,d=vc[b];if(d)return d;for(c=b-1;!vc[c];)c--;for(d=vc[c],d={line:d.line,column:d.column};c<b;)10===a.charCodeAt(c)?(d.line++,d.column=1):d.column++,c++;return vc[b]=d,d}function i(a,b){var c=h(a),d=h(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:d.line,column:d.column}}}function j(a){tc<wc||(tc>wc&&(wc=tc,xc=[]),xc.push(a))}function k(a,c,d){return new b(b.buildMessage(a,c),a,c,d)}function l(){var a,b,c,d,e=28*tc+0,f=zc[e];return f?(tc=f.nextPos,f.result):(a=tc,b=L(),b!==T?(c=v(),c!==T?(d=L(),d!==T?(uc=a,b=W(c),a=b):(tc=a,a=T)):(tc=a,a=T)):(tc=a,a=T),a===T&&(a=tc,b=L(),b!==T?(c=s(),c!==T?(d=L(),d!==T?(uc=a,b=W(c),a=b):(tc=a,a=T)):(tc=a,a=T)):(tc=a,a=T),a===T&&(a=tc,b=L(),b!==T?(c=m(),c!==T?(d=L(),d!==T?(uc=a,b=W(c),a=b):(tc=a,a=T)):(tc=a,a=T)):(tc=a,a=T),a===T&&(a=tc,b=L(),b!==T&&(uc=a,b=X()),a=b))),zc[e]={nextPos:tc,result:a},a)}function m(){var a,b=28*tc+1,c=zc[b];return c?(tc=c.nextPos,c.result):(a=n(),a===T&&(a=p())===T&&(a=q())===T&&(a=r()),zc[b]={nextPos:tc,result:a},a)}function n(){var b,c,d,e,f=28*tc+2,g=zc[f];if(g)return tc=g.nextPos,g.result;if(b=tc,34===a.charCodeAt(tc)?(c=Y,tc++):(c=T,0===yc&&j(Z)),c!==T){for(d=[],e=o(),e===T&&($.test(a.charAt(tc))?(e=a.charAt(tc),tc++):(e=T,0===yc&&j(_)));e!==T;)d.push(e),(e=o())===T&&($.test(a.charAt(tc))?(e=a.charAt(tc),tc++):(e=T,0===yc&&j(_)));d!==T?(34===a.charCodeAt(tc)?(e=Y,tc++):(e=T,0===yc&&j(Z)),e!==T?(uc=b,c=aa(d),b=c):(tc=b,b=T)):(tc=b,b=T)}else tc=b,b=T;if(b===T)if(b=tc,39===a.charCodeAt(tc)?(c=ba,tc++):(c=T,0===yc&&j(ca)),c!==T){for(d=[],e=o(),e===T&&(da.test(a.charAt(tc))?(e=a.charAt(tc),tc++):(e=T,0===yc&&j(ea)));e!==T;)d.push(e),(e=o())===T&&(da.test(a.charAt(tc))?(e=a.charAt(tc),tc++):(e=T,0===yc&&j(ea)));d!==T?(39===a.charCodeAt(tc)?(e=ba,tc++):(e=T,0===yc&&j(ca)),e!==T?(uc=b,c=aa(d),b=c):(tc=b,b=T)):(tc=b,b=T)}else tc=b,b=T;return zc[f]={nextPos:tc,result:b},b}function o(){var b,c,d,e,f,g,h,i,k=28*tc+3,l=zc[k];return l?(tc=l.nextPos,l.result):(b=tc,92===a.charCodeAt(tc)?(c=fa,tc++):(c=T,0===yc&&j(ga)),c!==T?(d=tc,e=tc,ha.test(a.charAt(tc))?(f=a.charAt(tc),tc++):(f=T,0===yc&&j(ia)),f!==T?(ja.test(a.charAt(tc))?(g=a.charAt(tc),tc++):(g=T,0===yc&&j(ka)),g===T&&(g=null),g!==T?(ja.test(a.charAt(tc))?(h=a.charAt(tc),tc++):(h=T,0===yc&&j(ka)),h===T&&(h=null),h!==T?(ja.test(a.charAt(tc))?(i=a.charAt(tc),tc++):(i=T,0===yc&&j(ka)),i===T&&(i=null),i!==T?(f=[f,g,h,i],e=f):(tc=e,e=T)):(tc=e,e=T)):(tc=e,e=T)):(tc=e,e=T),e===T&&(e=tc,ja.test(a.charAt(tc))?(f=a.charAt(tc),tc++):(f=T,0===yc&&j(ka)),f!==T?(ja.test(a.charAt(tc))?(g=a.charAt(tc),tc++):(g=T,0===yc&&j(ka)),g!==T?(ja.test(a.charAt(tc))?(h=a.charAt(tc),tc++):(h=T,0===yc&&j(ka)),h===T&&(h=null),h!==T?(f=[f,g,h],e=f):(tc=e,e=T)):(tc=e,e=T)):(tc=e,e=T)),d=e!==T?a.substring(d,tc):e,d!==T?(uc=b,c=la(d),b=c):(tc=b,b=T)):(tc=b,b=T),b===T&&(b=tc,a.substr(tc,2)===ma?(c=ma,tc+=2):(c=T,0===yc&&j(na)),c!==T?(d=tc,e=tc,oa.test(a.charAt(tc))?(f=a.charAt(tc),tc++):(f=T,0===yc&&j(pa)),f!==T?(oa.test(a.charAt(tc))?(g=a.charAt(tc),tc++):(g=T,0===yc&&j(pa)),g!==T?(f=[f,g],e=f):(tc=e,e=T)):(tc=e,e=T),d=e!==T?a.substring(d,tc):e,d!==T?(uc=b,c=qa(d),b=c):(tc=b,b=T)):(tc=b,b=T),b===T&&(b=tc,a.substr(tc,2)===ra?(c=ra,tc+=2):(c=T,0===yc&&j(sa)),c!==T?(d=tc,e=tc,oa.test(a.charAt(tc))?(f=a.charAt(tc),tc++):(f=T,0===yc&&j(pa)),f!==T?(oa.test(a.charAt(tc))?(g=a.charAt(tc),tc++):(g=T,0===yc&&j(pa)),g!==T?(oa.test(a.charAt(tc))?(h=a.charAt(tc),tc++):(h=T,0===yc&&j(pa)),h!==T?(oa.test(a.charAt(tc))?(i=a.charAt(tc),tc++):(i=T,0===yc&&j(pa)),i!==T?(f=[f,g,h,i],e=f):(tc=e,e=T)):(tc=e,e=T)):(tc=e,e=T)):(tc=e,e=T),d=e!==T?a.substring(d,tc):e,d!==T?(uc=b,c=qa(d),b=c):(tc=b,b=T)):(tc=b,b=T),b===T&&(b=tc,a.substr(tc,2)===ta?(c=ta,tc+=2):(c=T,0===yc&&j(ua)),c!==T&&(uc=b,c=va()),(b=c)===T&&(b=tc,a.substr(tc,2)===wa?(c=wa,tc+=2):(c=T,0===yc&&j(xa)),c!==T&&(uc=b,c=ya()),(b=c)===T&&(b=tc,a.substr(tc,2)===za?(c=za,tc+=2):(c=T,0===yc&&j(Aa)),c!==T&&(uc=b,c=Ba()),(b=c)===T&&(b=tc,a.substr(tc,2)===Ca?(c=Ca,tc+=2):(c=T,0===yc&&j(Da)),c!==T&&(uc=b,c=Ea()),(b=c)===T&&(b=tc,a.substr(tc,2)===Fa?(c=Fa,tc+=2):(c=T,0===yc&&j(Ga)),c!==T&&(uc=b,c=Ha()),(b=c)===T&&(b=tc,a.substr(tc,2)===Ia?(c=Ia,tc+=2):(c=T,0===yc&&j(Ja)),c!==T&&(uc=b,c=Ka()),(b=c)===T&&(b=tc,a.substr(tc,2)===La?(c=La,tc+=2):(c=T,0===yc&&j(Ma)),c!==T&&(uc=b,c=Na()),(b=c)===T&&(b=tc,a.substr(tc,2)===Oa?(c=Oa,tc+=2):(c=T,0===yc&&j(Pa)),c!==T&&(uc=b,c=Qa()),(b=c)===T&&(b=tc,a.substr(tc,2)===Ra?(c=Ra,tc+=2):(c=T,0===yc&&j(Sa)),c!==T&&(uc=b,c=Ta()),(b=c)===T&&(b=tc,a.substr(tc,2)===Ua?(c=Ua,tc+=2):(c=T,0===yc&&j(Va)),c!==T&&(uc=b,c=Wa()),(b=c)===T&&(b=tc,a.substr(tc,2)===Xa?(c=Xa,tc+=2):(c=T,0===yc&&j(Ya)),c!==T&&(uc=b,c=Za()),b=c))))))))))))),zc[k]={nextPos:tc,result:b},b)}function p(){var b,c,d,e,f,g,h=28*tc+4,i=zc[h];if(i)return tc=i.nextPos,i.result;for(b=tc,c=tc,d=tc,e=tc,f=[],$a.test(a.charAt(tc))?(g=a.charAt(tc),tc++):(g=T,0===yc&&j(_a));g!==T;)f.push(g),$a.test(a.charAt(tc))?(g=a.charAt(tc),tc++):(g=T,0===yc&&j(_a));if(f!==T?(46===a.charCodeAt(tc)?(g=ab,tc++):(g=T,0===yc&&j(bb)),g!==T?(f=[f,g],e=f):(tc=e,e=T)):(tc=e,e=T),e===T&&(e=null),e!==T){if(f=[],$a.test(a.charAt(tc))?(g=a.charAt(tc),tc++):(g=T,0===yc&&j(_a)),g!==T)for(;g!==T;)f.push(g),$a.test(a.charAt(tc))?(g=a.charAt(tc),tc++):(g=T,0===yc&&j(_a));else f=T;f!==T?(e=[e,f],d=e):(tc=d,d=T)}else tc=d,d=T;return c=d!==T?a.substring(c,tc):d,c!==T&&(uc=b,c=cb(c)),b=c,zc[h]={nextPos:tc,result:b},b}function q(){var b,c,d,e,f,g,h,i,k,l,m,n,o,p,q,r,s,t,u,v,w=28*tc+5,x=zc[w];if(x)return tc=x.nextPos,x.result;if(b=tc,a.substr(tc,4).toLowerCase()===db?(c=a.substr(tc,4),tc+=4):(c=T,0===yc&&j(eb)),c!==T)if(L()!==T)if(d=tc,e=tc,$a.test(a.charAt(tc))?(f=a.charAt(tc),tc++):(f=T,0===yc&&j(_a)),f!==T?($a.test(a.charAt(tc))?(g=a.charAt(tc),tc++):(g=T,0===yc&&j(_a)),g!==T?($a.test(a.charAt(tc))?(h=a.charAt(tc),tc++):(h=T,0===yc&&j(_a)),h!==T?($a.test(a.charAt(tc))?(i=a.charAt(tc),tc++):(i=T,0===yc&&j(_a)),i!==T?(f=[f,g,h,i],e=f):(tc=e,e=T)):(tc=e,e=T)):(tc=e,e=T)):(tc=e,e=T),(d=e!==T?a.substring(d,tc):e)!==T)if(45===a.charCodeAt(tc)?(e=fb,tc++):(e=T,0===yc&&j(gb)),e!==T)if(f=tc,g=tc,$a.test(a.charAt(tc))?(h=a.charAt(tc),tc++):(h=T,0===yc&&j(_a)),h!==T?($a.test(a.charAt(tc))?(i=a.charAt(tc),tc++):(i=T,0===yc&&j(_a)),i===T&&(i=null),i!==T?(h=[h,i],g=h):(tc=g,g=T)):(tc=g,g=T),(f=g!==T?a.substring(f,tc):g)!==T)if(45===a.charCodeAt(tc)?(g=fb,tc++):(g=T,0===yc&&j(gb)),g!==T)if(h=tc,i=tc,$a.test(a.charAt(tc))?(k=a.charAt(tc),tc++):(k=T,0===yc&&j(_a)),k!==T?($a.test(a.charAt(tc))?(l=a.charAt(tc),tc++):(l=T,0===yc&&j(_a)),l===T&&(l=null),l!==T?(k=[k,l],i=k):(tc=i,i=T)):(tc=i,i=T),(h=i!==T?a.substring(h,tc):i)!==T){if(i=tc,84===a.charCodeAt(tc)?(k=hb,tc++):(k=T,0===yc&&j(ib)),k!==T)if(l=tc,m=tc,$a.test(a.charAt(tc))?(n=a.charAt(tc),tc++):(n=T,0===yc&&j(_a)),n!==T?($a.test(a.charAt(tc))?(o=a.charAt(tc),tc++):(o=T,0===yc&&j(_a)),o!==T?(n=[n,o],m=n):(tc=m,m=T)):(tc=m,m=T),(l=m!==T?a.substring(l,tc):m)!==T)if(58===a.charCodeAt(tc)?(m=jb,tc++):(m=T,0===yc&&j(kb)),m!==T)if(n=tc,o=tc,$a.test(a.charAt(tc))?(p=a.charAt(tc),tc++):(p=T,0===yc&&j(_a)),p!==T?($a.test(a.charAt(tc))?(q=a.charAt(tc),tc++):(q=T,0===yc&&j(_a)),q!==T?(p=[p,q],o=p):(tc=o,o=T)):(tc=o,o=T),(n=o!==T?a.substring(n,tc):o)!==T){if(o=tc,58===a.charCodeAt(tc)?(p=jb,tc++):(p=T,0===yc&&j(kb)),p!==T)if(q=tc,r=tc,$a.test(a.charAt(tc))?(s=a.charAt(tc),tc++):(s=T,0===yc&&j(_a)),s!==T?($a.test(a.charAt(tc))?(t=a.charAt(tc),tc++):(t=T,0===yc&&j(_a)),t!==T?(s=[s,t],r=s):(tc=r,r=T)):(tc=r,r=T),(q=r!==T?a.substring(q,tc):r)!==T){if(r=tc,46===a.charCodeAt(tc)?(s=ab,tc++):(s=T,0===yc&&j(bb)),s!==T){if(t=tc,u=[],$a.test(a.charAt(tc))?(v=a.charAt(tc),tc++):(v=T,0===yc&&j(_a)),v!==T)for(;v!==T;)u.push(v),$a.test(a.charAt(tc))?(v=a.charAt(tc),tc++):(v=T,0===yc&&j(_a));else u=T;t=u!==T?a.substring(t,tc):u,t!==T?(uc=r,s=lb(d,f,h,l,n,q,t),r=s):(tc=r,r=T)}else tc=r,r=T;r===T&&(r=null),r!==T?(uc=o,p=mb(d,f,h,l,n,q,r),o=p):(tc=o,o=T)}else tc=o,o=T;else tc=o,o=T;o===T&&(o=null),o!==T?(uc=i,k=nb(d,f,h,l,n,o),i=k):(tc=i,i=T)}else tc=i,i=T;else tc=i,i=T;else tc=i,i=T;else tc=i,i=T;i===T&&(i=null),i!==T?(k=tc,90===a.charCodeAt(tc)?(l=ob,tc++):(l=T,0===yc&&j(pb)),l===T&&(a.substr(tc,6)===qb?(l=qb,tc+=6):(l=T,0===yc&&j(rb))),l===T&&(l=null),k=l!==T?a.substring(k,tc):l,k!==T?(uc=b,c=sb(d,f,h,i,k),b=c):(tc=b,b=T)):(tc=b,b=T)}else tc=b,b=T;else tc=b,b=T;else tc=b,b=T;else tc=b,b=T;else tc=b,b=T;else tc=b,b=T;else tc=b,b=T;return zc[w]={nextPos:tc,result:b},b}function r(){var b,c,d,e,f=28*tc+6,g=zc[f];return g?(tc=g.nextPos,g.result):(b=tc,a.substr(tc,4).toLowerCase()===tb?(c=a.substr(tc,4),tc+=4):(c=T,0===yc&&j(ub)),c===T&&(a.substr(tc,5).toLowerCase()===vb?(c=a.substr(tc,5),tc+=5):(c=T,0===yc&&j(wb)),c===T&&(a.substr(tc,4).toLowerCase()===xb?(c=a.substr(tc,4),tc+=4):(c=T,0===yc&&j(yb)),c===T&&(a.substr(tc,9).toLowerCase()===zb?(c=a.substr(tc,9),tc+=9):(c=T,0===yc&&j(Ab))))),c!==T?(d=tc,yc++,Bb.test(a.charAt(tc))?(e=a.charAt(tc),tc++):(e=T,0===yc&&j(Cb)),yc--,e===T?d=void 0:(tc=d,d=T),d!==T?(uc=b,c=Db(c),b=c):(tc=b,b=T)):(tc=b,b=T),zc[f]={nextPos:tc,result:b},b)}function s(){var b,c,d,e,f,g,h,i,k,l,m,n,o=28*tc+7,p=zc[o];if(p)return tc=p.nextPos,p.result;if(b=tc,c=tc,d=t(),(c=d!==T?a.substring(c,tc):d)!==T)if((d=L())!==T)if(40===a.charCodeAt(tc)?(e=Eb,tc++):(e=T,0===yc&&j(Fb)),e!==T)if(L()!==T){if(f=tc,(g=u())!==T)if(L()!==T){for(h=[],i=tc,44===a.charCodeAt(tc)?(k=Gb,tc++):(k=T,0===yc&&j(Hb)),k!==T?(l=L(),l!==T?(m=u(),m!==T?(n=L(),n!==T?(uc=i,k=Ib(c,g,m),i=k):(tc=i,i=T)):(tc=i,i=T)):(tc=i,i=T)):(tc=i,i=T);i!==T;)h.push(i),i=tc,44===a.charCodeAt(tc)?(k=Gb,tc++):(k=T,0===yc&&j(Hb)),k!==T?(l=L(),l!==T?(m=u(),m!==T?(n=L(),n!==T?(uc=i,k=Ib(c,g,m),i=k):(tc=i,i=T)):(tc=i,i=T)):(tc=i,i=T)):(tc=i,i=T);h!==T?(uc=f,g=Jb(c,g,h),f=g):(tc=f,f=T)}else tc=f,f=T;else tc=f,f=T;f===T&&(f=null),f!==T?(41===a.charCodeAt(tc)?(g=Kb,tc++):(g=T,0===yc&&j(Lb)),g!==T?(uc=b,c=Mb(c,f),b=c):(tc=b,b=T)):(tc=b,b=T)}else tc=b,b=T;else tc=b,b=T;else tc=b,b=T;else tc=b,b=T;return zc[o]={nextPos:tc,result:b},b}function t(){var b,c,d,e,f,g,h=28*tc+8,i=zc[h];if(i)return tc=i.nextPos,i.result;if(b=tc,(c=M())!==T){for(d=[],e=tc,46===a.charCodeAt(tc)?(f=ab,tc++):(f=T,0===yc&&j(bb)),f!==T?(g=M(),g!==T?(f=[f,g],e=f):(tc=e,e=T)):(tc=e,e=T);e!==T;)d.push(e),e=tc,46===a.charCodeAt(tc)?(f=ab,tc++):(f=T,0===yc&&j(bb)),f!==T?(g=M(),g!==T?(f=[f,g],e=f):(tc=e,e=T)):(tc=e,e=T);d!==T?(c=[c,d],b=c):(tc=b,b=T)}else tc=b,b=T;return zc[h]={nextPos:tc,result:b},b}function u(){var b,c,d,e,f,g,h=28*tc+9,i=zc[h];return i?(tc=i.nextPos,i.result):(b=v(),b===T&&(b=m())===T&&(b=tc,c=L(),c!==T?(d=tc,e=M(),d=e!==T?a.substring(d,tc):e,d!==T?(e=L(),e!==T?(f=tc,yc++,40===a.charCodeAt(tc)?(g=Eb,tc++):(g=T,0===yc&&j(Fb)),yc--,g===T?f=void 0:(tc=f,f=T),f!==T?(uc=b,c=Nb(d),b=c):(tc=b,b=T)):(tc=b,b=T)):(tc=b,b=T)):(tc=b,b=T),b===T&&(b=s())),zc[h]={nextPos:tc,result:b},b)}function v(){var a,b,c,d,e,f,g=28*tc+10,h=zc[g];if(h)return tc=h.nextPos,h.result;if(a=tc,(b=x())!==T){if(c=[],d=tc,e=w(),e!==T?(f=x(),f!==T?(uc=d,e=Ob(b,e,f),d=e):(tc=d,d=T)):(tc=d,d=T),d!==T)for(;d!==T;)c.push(d),d=tc,e=w(),e!==T?(f=x(),f!==T?(uc=d,e=Ob(b,e,f),d=e):(tc=d,d=T)):(tc=d,d=T);else c=T;c!==T?(uc=a,b=Pb(b,c),a=b):(tc=a,a=T)}else tc=a,a=T;return a===T&&(a=x()),zc[g]={nextPos:tc,result:a},a}function w(){var b,c,d,e,f,g,h=28*tc+11,i=zc[h];if(i)return tc=i.nextPos,i.result;if(b=tc,(c=L())!==T){if(d=tc,e=tc,124===a.charCodeAt(tc)?(f=Qb,tc++):(f=T,0===yc&&j(Rb)),(e=f!==T?a.substring(e,tc):f)!==T){for(f=[],124===a.charCodeAt(tc)?(g=Qb,tc++):(g=T,0===yc&&j(Rb));g!==T;)f.push(g),124===a.charCodeAt(tc)?(g=Qb,tc++):(g=T,0===yc&&j(Rb));f!==T?(uc=d,e=Sb(e),d=e):(tc=d,d=T)}else tc=d,d=T;d===T&&(a.substr(tc,2).toLowerCase()===Tb?(d=a.substr(tc,2),tc+=2):(d=T,0===yc&&j(Ub))),d!==T?(e=L(),e!==T?(uc=b,c=Vb(d),b=c):(tc=b,b=T)):(tc=b,b=T)}else tc=b,b=T;return zc[h]={nextPos:tc,result:b},b}function x(){var a,b,c,d,e,f,g=28*tc+12,h=zc[g];if(h)return tc=h.nextPos,h.result;if(a=tc,(b=z())!==T){if(c=[],d=tc,e=y(),e!==T?(f=z(),f!==T?(uc=d,e=Ob(b,e,f),d=e):(tc=d,d=T)):(tc=d,d=T),d!==T)for(;d!==T;)c.push(d),d=tc,e=y(),e!==T?(f=z(),f!==T?(uc=d,e=Ob(b,e,f),d=e):(tc=d,d=T)):(tc=d,d=T);else c=T;c!==T?(uc=a,b=Pb(b,c),a=b):(tc=a,a=T)}else tc=a,a=T;return a===T&&(a=z()),zc[g]={nextPos:tc,result:a},a}function y(){var b,c,d,e,f,g,h=28*tc+13,i=zc[h];if(i)return tc=i.nextPos,i.result;if(b=tc,(c=L())!==T){if(d=tc,e=tc,38===a.charCodeAt(tc)?(f=Wb,tc++):(f=T,0===yc&&j(Xb)),(e=f!==T?a.substring(e,tc):f)!==T){for(f=[],38===a.charCodeAt(tc)?(g=Wb,tc++):(g=T,0===yc&&j(Xb));g!==T;)f.push(g),38===a.charCodeAt(tc)?(g=Wb,tc++):(g=T,0===yc&&j(Xb));f!==T?(uc=d,e=Sb(e),d=e):(tc=d,d=T)}else tc=d,d=T;d===T&&(a.substr(tc,3).toLowerCase()===Yb?(d=a.substr(tc,3),tc+=3):(d=T,0===yc&&j(Zb))),d!==T?(e=L(),e!==T?(uc=b,c=Vb(d),b=c):(tc=b,b=T)):(tc=b,b=T)}else tc=b,b=T;return zc[h]={nextPos:tc,result:b},b}function z(){var a,b,c,d,e,f,g=28*tc+14,h=zc[g];if(h)return tc=h.nextPos,h.result;if(a=tc,(b=B())!==T){if(c=[],d=tc,e=A(),e!==T?(f=B(),f!==T?(uc=d,e=Ob(b,e,f),d=e):(tc=d,d=T)):(tc=d,d=T),d!==T)for(;d!==T;)c.push(d),d=tc,e=A(),e!==T?(f=B(),f!==T?(uc=d,e=Ob(b,e,f),d=e):(tc=d,d=T)):(tc=d,d=T);else c=T;c!==T?(uc=a,b=Pb(b,c),a=b):(tc=a,a=T)}else tc=a,a=T;return a===T&&(a=B()),zc[g]={nextPos:tc,result:a},a}function A(){var b,c,d,e,f,g,h,i=28*tc+15,k=zc[i];if(k)return tc=k.nextPos,k.result;if(b=tc,(c=L())!==T){if(d=tc,e=tc,f=tc,33===a.charCodeAt(tc)?(g=$b,tc++):(g=T,0===yc&&j(_b)),g===T&&(g=null),g!==T?(61===a.charCodeAt(tc)?(h=ac,tc++):(h=T,0===yc&&j(bc)),h!==T?(g=[g,h],f=g):(tc=f,f=T)):(tc=f,f=T),(e=f!==T?a.substring(e,tc):f)!==T){for(f=[],61===a.charCodeAt(tc)?(g=ac,tc++):(g=T,0===yc&&j(bc));g!==T;)f.push(g),61===a.charCodeAt(tc)?(g=ac,tc++):(g=T,0===yc&&j(bc));f!==T?(uc=d,e=Sb(e),d=e):(tc=d,d=T)}else tc=d,d=T;d!==T?(e=L(),e!==T?(uc=b,c=Vb(d),b=c):(tc=b,b=T)):(tc=b,b=T)}else tc=b,b=T;return zc[i]={nextPos:tc,result:b},b}function B(){var a,b,c,d,e,f,g=28*tc+16,h=zc[g];if(h)return tc=h.nextPos,h.result;if(a=tc,(b=D())!==T){if(c=[],d=tc,e=C(),e!==T?(f=D(),f!==T?(uc=d,e=Ob(b,e,f),d=e):(tc=d,d=T)):(tc=d,d=T),d!==T)for(;d!==T;)c.push(d),d=tc,e=C(),e!==T?(f=D(),f!==T?(uc=d,e=Ob(b,e,f),d=e):(tc=d,d=T)):(tc=d,d=T);else c=T;c!==T?(uc=a,b=Pb(b,c),a=b):(tc=a,a=T)}else tc=a,a=T;return a===T&&(a=D()),zc[g]={nextPos:tc,result:a},a}function C(){var b,c,d,e,f,g,h=28*tc+17,i=zc[h];return i?(tc=i.nextPos,i.result):(b=tc,c=L(),c!==T?(d=tc,e=tc,cc.test(a.charAt(tc))?(f=a.charAt(tc),tc++):(f=T,0===yc&&j(dc)),f!==T?(61===a.charCodeAt(tc)?(g=ac,tc++):(g=T,0===yc&&j(bc)),g===T&&(g=null),g!==T?(f=[f,g],e=f):(tc=e,e=T)):(tc=e,e=T),d=e!==T?a.substring(d,tc):e,d!==T?(e=L(),e!==T?(uc=b,c=Vb(d),b=c):(tc=b,b=T)):(tc=b,b=T)):(tc=b,b=T),zc[h]={nextPos:tc,result:b},b)}function D(){var a,b,c,d,e,f,g=28*tc+18,h=zc[g];if(h)return tc=h.nextPos,h.result;if(a=tc,(b=F())!==T){if(c=[],d=tc,e=E(),e!==T?(f=F(),f!==T?(uc=d,e=Ob(b,e,f),d=e):(tc=d,d=T)):(tc=d,d=T),d!==T)for(;d!==T;)c.push(d),d=tc,e=E(),e!==T?(f=F(),f!==T?(uc=d,e=Ob(b,e,f),d=e):(tc=d,d=T)):(tc=d,d=T);else c=T;c!==T?(uc=a,b=Pb(b,c),a=b):(tc=a,a=T)}else tc=a,a=T;return a===T&&(a=F()),zc[g]={nextPos:tc,result:a},a}function E(){var b,c,d,e,f=28*tc+19,g=zc[f];return g?(tc=g.nextPos,g.result):(b=tc,c=L(),c!==T?(d=tc,ec.test(a.charAt(tc))?(e=a.charAt(tc),tc++):(e=T,0===yc&&j(fc)),d=e!==T?a.substring(d,tc):e,d!==T?(e=L(),e!==T?(uc=b,c=gc(d),b=c):(tc=b,b=T)):(tc=b,b=T)):(tc=b,b=T),zc[f]={nextPos:tc,result:b},b)}function F(){var a,b,c,d,e,f,g=28*tc+20,h=zc[g];if(h)return tc=h.nextPos,h.result;if(a=tc,(b=H())!==T){if(c=[],d=tc,e=G(),e!==T?(f=H(),f!==T?(uc=d,e=Ob(b,e,f),d=e):(tc=d,d=T)):(tc=d,d=T),d!==T)for(;d!==T;)c.push(d),d=tc,e=G(),e!==T?(f=H(),f!==T?(uc=d,e=Ob(b,e,f),d=e):(tc=d,d=T)):(tc=d,d=T);else c=T;c!==T?(uc=a,b=Pb(b,c),a=b):(tc=a,a=T)}else tc=a,a=T;return a===T&&(a=H()),zc[g]={nextPos:tc,result:a},a}function G(){var b,c,d,e,f=28*tc+21,g=zc[f];return g?(tc=g.nextPos,g.result):(b=tc,c=L(),c!==T?(d=tc,hc.test(a.charAt(tc))?(e=a.charAt(tc),tc++):(e=T,0===yc&&j(ic)),d=e!==T?a.substring(d,tc):e,d!==T?(e=L(),e!==T?(uc=b,c=gc(d),b=c):(tc=b,b=T)):(tc=b,b=T)):(tc=b,b=T),zc[f]={nextPos:tc,result:b},b)}function H(){var a,b,c,d=28*tc+22,e=zc[d];return e?(tc=e.nextPos,e.result):(a=tc,b=tc,c=I(),c!==T&&(uc=b,c=jc(c)),b=c,b!==T?(c=H(),c!==T?(uc=a,b=kc(b,c),a=b):(tc=a,a=T)):(tc=a,a=T),a===T&&(a=J()),zc[d]={nextPos:tc,result:a},a)}function I(){var b,c,d,e,f=28*tc+23,g=zc[f];return g?(tc=g.nextPos,g.result):(b=tc,c=L(),c!==T?(d=tc,lc.test(a.charAt(tc))?(e=a.charAt(tc),tc++):(e=T,0===yc&&j(mc)),d=e!==T?a.substring(d,tc):e,d!==T?(e=L(),e!==T?(uc=b,c=nc(d),b=c):(tc=b,b=T)):(tc=b,b=T)):(tc=b,b=T),zc[f]={nextPos:tc,result:b},b)}function J(){var b,c,d,e,f,g,h=28*tc+24,i=zc[h];return i?(tc=i.nextPos,i.result):(b=tc,40===a.charCodeAt(tc)?(c=Eb,tc++):(c=T,0===yc&&j(Fb)),c!==T?(d=L(),d!==T?(e=l(),e!==T?(f=L(),f!==T?(41===a.charCodeAt(tc)?(g=Kb,tc++):(g=T,0===yc&&j(Lb)),g!==T?(uc=b,c=oc(e),b=c):(tc=b,b=T)):(tc=b,b=T)):(tc=b,b=T)):(tc=b,b=T)):(tc=b,b=T),b===T&&(b=K()),zc[h]={nextPos:tc,result:b},b)}function K(){var a,b=28*tc+25,c=zc[b];return c?(tc=c.nextPos,c.result):(a=m(),a===T&&(a=s()),zc[b]={nextPos:tc,result:a},a)}function L(){var b,c,d=28*tc+26,e=zc[d];if(e)return tc=e.nextPos,e.result;for(b=[],pc.test(a.charAt(tc))?(c=a.charAt(tc),tc++):(c=T,0===yc&&j(qc));c!==T;)b.push(c),pc.test(a.charAt(tc))?(c=a.charAt(tc),tc++):(c=T,0===yc&&j(qc));return zc[d]={nextPos:tc,result:b},b}function M(){var b,c,d,e,f=28*tc+27,g=zc[f];if(g)return tc=g.nextPos,g.result;if(b=tc,c=[],rc.test(a.charAt(tc))?(d=a.charAt(tc),tc++):(d=T,0===yc&&j(sc)),d!==T)for(;d!==T;)c.push(d),rc.test(a.charAt(tc))?(d=a.charAt(tc),tc++):(d=T,0===yc&&j(sc));else c=T;if(c!==T){for(d=[],Bb.test(a.charAt(tc))?(e=a.charAt(tc),tc++):(e=T,0===yc&&j(Cb));e!==T;)d.push(e),Bb.test(a.charAt(tc))?(e=a.charAt(tc),tc++):(e=T,0===yc&&j(Cb));d!==T?(c=[c,d],b=c):(tc=b,b=T)}else tc=b,b=T;return zc[f]={nextPos:tc,result:b},b}function N(a,b,c){this["class"]={major:a,minor:b},this.params=c}function O(a,b,c){return new N(a,b,c)}function P(a,b){return O("expression",a,b)}function Q(a,b){return O("literal",a,{value:b})}function R(a,b){return O("operator",a,{symbol:b})}c=void 0!==c?c:{};var S,T={},U={Expression:l},V=l,W=function(a){return a},X=function(){return Q("keyword","null")},Y='"',Z=e('"',!1),$=/^[^"\\]/,_=f(['"',"\\"],!0,!1),aa=function(a){return Q("string",a.join(""))},ba="'",ca=e("'",!1),da=/^[^'\\]/,ea=f(["'","\\"],!0,!1),fa="\\",ga=e("\\",!1),ha=/^[1-7]/,ia=f([["1","7"]],!1,!1),ja=/^[0-7]/,ka=f([["0","7"]],!1,!1),la=function(a){var b=parseInt(a,8),c="";return b>=256&&(b=parseInt(a.substring(0,2),8),c=a.substring(2,3)),String.fromCharCode(b)+c},ma="\\x",na=e("\\x",!1),oa=/^[0-9a-f]/i,pa=f([["0","9"],["a","f"]],!1,!0),qa=function(a){var b=parseInt(a,16);return String.fromCharCode(b)},ra="\\u",sa=e("\\u",!1),ta="\\n",ua=e("\\n",!1),va=function(){return"\n"},wa="\\\n",xa=e("\\\n",!1),ya=function(){return""},za="\\r",Aa=e("\\r",!1),Ba=function(){return"\r"},Ca="\\t",Da=e("\\t",!1),Ea=function(){return"\t"},Fa="\\b",Ga=e("\\b",!1),Ha=function(){return"\b"},Ia="\\f",Ja=e("\\f",!1),Ka=function(){return"\f"},La="\\v",Ma=e("\\v",!1),Na=function(){return"\x0B"},Oa="\\0",Pa=e("\\0",!1),Qa=function(){return"\0"},Ra="\\\\",Sa=e("\\\\",!1),Ta=function(){return"\\"},Ua="\\'",Va=e("\\'",!1),Wa=function(){return"'"},Xa='\\"',Ya=e('\\"',!1),Za=function(){return'"'},$a=/^[0-9]/,_a=f([["0","9"]],!1,!1),ab=".",bb=e(".",!1),cb=function(a){return Q("number",parseFloat(a))},db="date",eb=e("date",!0),fb="-",gb=e("-",!1),hb="T",ib=e("T",!1),jb=":",kb=e(":",!1),lb=function(a,b,c,d,e,f,g){return g},mb=function(a,b,c,d,e,f,g){return{second:f,millisecond:g||"0"}},nb=function(a,b,c,d,e,f){return f||(f={second:"0",millisecond:"0"}),{hour:d,minute:e,second:f.second,millisecond:f.millisecond}},ob="Z",pb=e("Z",!1),qb="+00:00",rb=e("+00:00",!1),sb=function(a,b,c,e,f){var g=0,h=0,i=0,j=0;a=parseInt(a),b=parseInt(b),c=parseInt(c),(b<1||b>12)&&d("A Valid Date");var k=new Date(a,b,1);k.setDate(0),(c<1||c>k.getDate())&&d("A Valid Date"),e&&(g=parseInt(e.hour),h=parseInt(e.minute),i=parseInt(e.second),j=parseInt(e.millisecond),(g>23||h>59||i>59||j>999)&&d("A Valid Date"));var l;return l=f?new Date(Date.UTC(a,b-1,c,g,h,i,j)):skuid.time.getRealJSDateTimeFromLocal(new Date(a,b-1,c,g,h,i,j)),Q("date",new Date(l))},tb="true",ub=e("true",!0),vb="false",wb=e("false",!0),xb="null",yb=e("null",!0),zb="undefined",Ab=e("undefined",!0),Bb=/^[a-z0-9_]/i,Cb=f([["a","z"],["0","9"],"_"],!1,!0),Db=function(a){return Q("keyword",a)},Eb="(",Fb=e("(",!1),Gb=",",Hb=e(",",!1),Ib=function(a,b,c){return c},Jb=function(a,b,c){return[b].concat(c)},Kb=")",Lb=e(")",!1),Mb=function(a,b){return P("function",{name:a,arguments:b||[]})},Nb=function(a){return Q("identifier",a)},Ob=function(a,b,c){return{operator:b,operand:c}},Pb=function(a,b){return P("operational",{head:a,operations:b})},Qb="|",Rb=e("|",!1),Sb=function(a){return a},Tb="or",Ub=e("or",!0),Vb=function(a){return R("logical",a)},Wb="&",Xb=e("&",!1),Yb="and",Zb=e("and",!0),$b="!",_b=e("!",!1),ac="=",bc=e("=",!1),cc=/^[<>]/,dc=f(["<",">"],!1,!1),ec=/^[\-+]/,fc=f(["-","+"],!1,!1),gc=function(a){return R("algebraic",a)},hc=/^[\/%*]/,ic=f(["/","%","*"],!1,!1),jc=function(a){return{operator:a}},kc=function(a,b){return P("operational",{head:b,operation:a,unary:!0})},lc=/^[\-+!]/,mc=f(["-","+","!"],!1,!1),nc=function(a){return R("unary",a)},oc=function(a){return a},pc=/^[ \f\n\r\t\x0B\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/,qc=f([" ","\f","\n","\r","\t","\x0B"," "," ","᠎",[" "," "],"\u2028","\u2029"," "," ","　","\ufeff"],!1,!1),rc=/^[a-z]/i,sc=f([["a","z"]],!1,!0),tc=0,uc=0,vc=[{line:1,column:1}],wc=0,xc=[],yc=0,zc={};if("startRule"in c){if(!(c.startRule in U))throw new Error("Can't start parsing from rule \""+c.startRule+'".');V=U[c.startRule]}if(N.prototype.is=function(a,b){return this["class"].major===a&&this["class"].minor===b},(S=V())!==T&&tc===a.length)return S;throw S!==T&&tc<a.length&&j(function(){return{type:"end"}}()),k(xc,wc<a.length?a.charAt(wc):null,wc<a.length?i(wc,wc+1):i(wc,wc))}!function(a,b){function c(){this.constructor=a}c.prototype=b.prototype,a.prototype=new c}(b,Error),b.buildMessage=function(a,b){function c(a){return a.charCodeAt(0).toString(16).toUpperCase()}function d(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+c(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+c(a)})}function e(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+c(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+c(a)})}function f(a){return g[a.type](a)}var g={literal:function(a){return'"'+d(a.text)+'"'},"class":function(a){var b,c="";for(b=0;b<a.parts.length;b++)c+=a.parts[b]instanceof Array?e(a.parts[b][0])+"-"+e(a.parts[b][1]):e(a.parts[b]);return"["+(a.inverted?"^":"")+c+"]"},any:function(a){return"any character"},end:function(a){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){var b,c,d=new Array(a.length);for(b=0;b<a.length;b++)d[b]=f(a[b]);if(d.sort(),d.length>0){for(b=1,c=1;b<d.length;b++)d[b-1]!==d[b]&&(d[c]=d[b],c++);d.length=c}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}(a)+" but "+function(a){return a?'"'+d(a)+'"':"end of input"}(b)+" found."},a.skuid.formula.parser={SyntaxError:b,parse:c}}(this),function(a,b){function c(b){var c,d,e,f=i({},h.params);return b&&(a.utils.isString(b)?(c=b,d=a.$C(c)):(d=b,c=d.id())),d&&(e=d.getPageParameters()),e||(e=h._parametersByPage[c]),i(f,e),f}function d(){var b=[],c=a.component.getByType("skuidpage"),d={};return c&&c.length&&c.forEach(function(c){var e=c.problems;e&&e.length&&e.forEach(function(c){var e;c&&(e=a.utils.isString(c)?c:c.message),e&&!e[d]&&b.push(c)})}),b}function e(c){var e=d(),f=h.problemsWrapper,g=!!c&&!0===c.justUpdateWrapper;f&&(g||h.problemsContainer.empty(),e.length?(g||b.each(e,function(){this.isDisplayed=!1,h.displayProblem(this)}),f.css("display","block"),h.problemsIndicator.text(a.label.merge(a.$L("skuid_page_problems"),e.length)).append(b("<div>").append(b('<div class="ui-icon ui-icon-close">')).addClass("nx-page-problems-dismiss").on("click",function(){f.hide()}))):f.css("display","none"))}function f(){h.rebuildPageProblems({justUpdateWrapper:!0})}function g(a){var c,d=this._uniqueProblemMessages,e=a.message;return d||(d=this._uniqueProblemMessages={}),!(!h.problemsContainer||a.isDisplayed||d[e])&&(c=b("<div>").addClass("nx-problem").appendTo(h.problemsContainer),c.text(c.index()-0+1+". "+a.message),a.isDisplayed=!0,d[e]=a,!0)}var h=a.page={_parametersByPage:{}},i=b.extend;i(h,{getAllProblems:d,getParameters:c,displayProblem:g,updateProblemsWrapper:f,rebuildPageProblems:e,params:a.utils.getQueryParamsObject(window.location.search)})}(skuid,skuid.$),function(){var a=skuid.$,b=skuid.utils,c=function(a){return" sk-pagepanel-"+a},d=function(a){return" nx-page-withpanels-"+a};skuid.componentType.register("panel",function(e,f,g){var h=g.context,i="true"===f.attr("closeonpageclick"),j=a('<div class="nx-page-clickcatcher">'),k=f.attr("uniqueid"),l=f.children("interactions").first(),m=g.origin=f.attr("origin")||"left",n=g.getParentPage(),o=g.behavior=f.attr("behavior")||"overlay",p="left"===g.origin||"right"===g.origin,q=!p;g.size=f.attr("size")||"270px",g._open=!1,e.addClass("sk-pagepanel"+c(o)+c(m));var r={};r["overflow-"+(q?"x":"y")]=b._oniOS()?"scroll":"auto",r[q?"height":"width"]=g.size,e.css(r),g.createChildComponents(f.find("components").first().children(),e,h),l.length&&skuid.interactions.enableInteractions(e,{interactionsDef:l,component:g,context:h}),g.toggle=function(e){if(e!==g._open){var f,h=a("body"),k=g.behavior,l=n.getContentElement(),o=n.getElement(),r=g.element,s=r[q?"outerHeight":"outerWidth"](!0)+"px",t="reveal"===k?l:o,u="right"===g.origin||"bottom"===g.origin?"-":"",v=q?"0,"+u+s+",0":u+s+",0,0";e=e!==undefined?e:!g._open,r[e?"addClass":"removeClass"](c("open")),"overlay"!==k&&"reveal"!==k||(r.addClass(c("animatable")),r.one("transitionend.skuid",function(){r.removeClass(c("animatable"))})),"reveal"!==k&&"push"!==k||(e?(a.each(n.panel.getAll(),function(a,b){b.id()!==g.id()&&b.close()}),(p||"push"===k)&&(f=h.scrollTop(),t.one("transitionend.skuid",function(){l.scrollTop(f)}))):f=l.scrollTop(),l.toggleClass(d("pushed"),e),e?(o.addClass("nx-page-withpanels "+d(m)),l.scrollTop(f),b._oniOS()&&l.css("overflow","scroll"),r.css("opacity",""),p?h.css("overflow-x","hidden"):(l["top"===g.origin?"append":"prepend"]('<div class="sk-slidingpanelhelper" style="height: '+s+'">'),"top"!==g.origin&&s&&l.scrollTop(l.scrollTop()+parseFloat(s)))):((p||"push"===k)&&(h.scrollTop(f),p||r.css({top:f+"px","z-index":1})),t.one("transitionend.skuid",function(){if(!g._open){r.css({opacity:0,top:"","z-index":""});a.each(n.panel.getAll(),function(a,b){return"overlay"===b.behavior||"reveal"===b.behavior}),o.removeClass("nx-page-withpanels "+d(m)),b._oniOS()&&l.css("overflow","")}}),p?t.one("transitionend.skuid",function(){g._open||h.css("overflow-x","")}):a(".sk-slidingpanelhelper").remove()),e?(t.css("transform","translate3d("+v+")"),r.css("z-index","")):(t.css("transform",""),t.one("transitionend.skuid",function(){g._open||r.css("z-index","-100")}))),e?i&&(l.append(j),t.one("transitionend.skuid",function(){g._open&&j.one("click.skuid",function(){j.remove(),g.close()})})):j.remove(),g._open=e}},g.close=function(){g.toggle(!1)},g.open=function(){g.toggle(!0)},g.isOpen=function(){return g._open},g.unregister=function(){skuid.component.Component.prototype.unregister.call(g),n.panel._detachById(k)},g.updateContext=function(a){var b=f.children("interactions").first();e.empty(),g.unregisterChildComponents(),g.createChildComponents(f.find("components").first().children(),e,a),b.length&&(skuid.interactions.disableInteractions(e),skuid.interactions.enableInteractions(e,{interactionsDef:b,component:g,context:a})),g.context=a},setTimeout(function(){g.toggle(!0)},0)})}(skuid),function(a,b){function c(a,b){return b?a:a&&a.body||a}function d(d){d||(d={});var e,f,g,h,i=d.type,j=d.url,k=d.data,l=!k&&!0===d.cache,m=d.dataSource,n=w(m),q=function(a){var b=c(a,n);return d.success&&d.success(b),b},v=function(a,b,c){if(a.responseJSON||n||(a.responseJSON=a.body),d.error)d.error(a,b,c);else{var e=a.responseJSON[0];window.alert("There was an error performing this "+i+" request:\n\nError code: "+e.errorCode+"\nMessage: "+e.message+"\n")}return a};if(!i)throw o;if(!j)throw p;var x=m&&m.name||"";f=i+" "+j+(x?" "+x:"");var y=a.utils.getSafeRelativeUrl(s+r+j);return e={url:y,dataType:"json",headers:{"Content-Type":"application/json"},success:q,error:v},f in u?l?(g=u[f],e=b.Deferred(),e.done(q).resolve(g),e.promise()):void delete u[f]:!k&&f in t?t[f].done(q).fail(v):(d.crossDomain&&(e.crossDomain=!0),n?(e.type=i,e.headers.Authorization="Bearer "+a.utils.userInfo.sessionId,k&&(e.data=JSON.stringify(k)),h=b.ajax(e)):(e.method=i,e.contentType="application/json",e.url=a.utils.combineUrls(m.serviceUrl,e.url),k&&(e.body=JSON.stringify(k)),h=m.authenticate().then(function(){return m.makeRequest(m.createHTTPRequest(e))}).then(e.success,e.error)),k||(t[f]=h,h.always(function(){delete t[f]}),l&&h.done(function(a){u[f]=a})),h)}function e(a){a||(a={});var b,c=a.type,d=a.url,e=a.data,f=a.dataSource,g=f&&f.name;if(!c)throw o;if(!d)throw p;if(b=c+" "+d+(g?" "+g:""),!e&&b in u)return u[b]}function f(a,b){this._type=a,"object"==typeof b&&n(this,b)}function g(a){a||(a={});var c=this,e=c.getFields(),f=c.getType(),g={},h=a.useToolingApi||"ApexClass"===f;return e&&b.each(e,function(a,b){var d=c[a];if(b.required&&(void 0===d||""===d)){if(!b.defaultValue)throw q+a;d=c[a]=b.defaultValue}g[a]=d}),d({type:"POST",url:"/"+(h?"tooling/":"")+"sobjects/"+f,data:g,success:function(b){b.success&&(c.Id=b.id,a.success&&a.success(b))},error:function(b,c,d){if(a.error)a.error(b,c,d);else{var e=b.responseJSON;e&&e.length&&window.alert("Unable to create new "+f+" due to error:\n\nError code: "+e[0].errorCode+"\nMessage: "+e[0].message)}}})}function h(a){a||(a={});var c=this,e=c.getFields(),f=c.getType(),g={};return e&&b.each(e,function(a){var b=c[a];void 0!==b&&(g[a]=b)}),d({type:"PATCH",url:"/"+(a.useToolingApi?"tooling/":"")+"sobjects/"+f+"/"+c.Id,data:g,success:a.success,error:function(b,d,e){if(a.error)a.error(b,d,e);else{var g=b.responseJSON;g&&g.length&&window.alert("Unable to update "+f+" with Id "+c.Id+" due to error:\n\nError code: "+g[0].errorCode+"\nMessage: "+g[0].message)}}})}function i(a){a||(a={})
;var b=this,c=b.getType(),e=a.useToolingApi||"ApexClass"===c;if(!b.Id)throw q+"Id";return d({type:"DELETE",url:"/"+(e?"tooling/":"")+"sobjects/"+c+"/"+b.Id,success:a.success,error:a.error})}function j(a,b){return b||(b={}),d({type:"GET",url:"/"+(b.useToolingApi?"tooling/":"")+"query/?q="+encodeURIComponent(a),success:b.success,error:function(a,c,d){if(b.error)b.error(a,c,d);else{var e=a.responseJSON;e&&e.length&&window.alert("There was an error performing this query: "+e[0].message)}}})}function k(a){return window.btoa(window.unescape(encodeURIComponent(a)))}var l=a.sfdc={},m=l.api={},n=b.extend,o='Parameter "type" expected, e.g. "POST", "GET"',p='Parameter "url" expected, e.g. "/sobjects/Account", "/query/?q=select+Name+from+Account"',q="Missing object property: ",r=m.version="39.0",s="/services/data/v",t={},u={},v={StaticResource:{fields:{Name:{required:!0},Description:{required:!1},Body:{required:!0},CacheControl:{required:!0,defaultValue:"Public"},ContentType:{required:!0,defaultValue:"text/plain"}}},ApexPage:{fields:{Name:{required:!0},Markup:{required:!0},MasterLabel:{required:!0},ApiVersion:{required:!0,defaultValue:m.version}}},ApexClass:{fields:{Name:{required:!0},Body:{required:!0},ApiVersion:{required:!0,defaultValue:m.version}}}},w=function(a){if(!a)return!0;var b=a.dataSourceType;return!!b&&(!!b.isDataSourceNativeSalesforce&&b.isDataSourceNativeSalesforce(a))};f.prototype={insert:function(){return g.apply(this,arguments)},update:function(){return h.apply(this,arguments)},"delete":function(){return i.apply(this,arguments)},get:function(a){return this[a]},set:function(b,c){a.utils.isString(b)?this[b]=c:n(this,b)},getType:function(){return this._type},getFields:function(){var a=v[this.getType()];return a?a.fields:null},getField:function(a){var b=this.getFields();return b?b[a]:null}},n(m,{getCachedResult:e,makeRequest:d,query:j,escapeMetadataBody:k,SObject:f})}(skuid,skuid.$),function(a,b){var c=a.component,d=c.Component,e=c.createChildComponents,f=c.getById,g=a.events;a.componentType.register("skuidpage",{onlyRenderOnce:!0,render:function(c,h,i){function j(){b.each(D,function(a,b){b._createDefaultRowIfNeeded(),b._cloneRowsIfNeeded(i)}),b.each(C,function(a,b){delete b.realToFakeIdMap}),!0===a.webfonts.haveFontsLoaded()?B():g.subscribeOnce("ui.fontsloaded",B),a.utils._oniOS()&&a.utils._inIframe()&&b(function(){b("body").removeClass("sk-scrollfix-ios-body"),b("html").removeClass("sk-scrollfix-ios-html"),b("body").addClass("sk-scrollfix-ios-body"),b("html").addClass("sk-scrollfix-ios-html")}),"Theme4d"===a.platform.get("SFUITheme")&&b("body").addClass("sk-body-nopadding")}var k,l,m=a?a.page:null,n=i.preventUnloadIfUnsavedChanges="yes"===h.attr("unsavedchangeswarning"),o=b.Deferred(),p=i.problems=[],q=i._pageRecord?i._pageRecord.Name:"",r=a.region.get("__header"+q),s=a.region.get("__footer"+q),t=h.children("components").first().children(),u=h.children("interactions").first(),v=[],w=c.parent().hasClass("nx-include-panel"),x=b('<div class="nx-page-content">'),y=w?i.getParentPage().getPanelsElement():b('<div class="nx-page-panels">'),z=a.page.updateProblemsWrapper,A={},B=function(){if(!0===i.get("loading.stopped"))return void b.holdReady(!1);(i.isReplace||i.isInclude)&&i.previousPageComponent&&i.previousPageComponent.unrender().unregister({removeElement:!1});var d={_parentPageId:i.id()},f=i.context;r&&(v=v.concat(e(r.xmlDefinition.children("components").first().children(),x,f,d))),v=v.concat(e(t,x,f,d)),s&&(v=v.concat(e(s.xmlDefinition.children("components").first().children(),x,f,d))),m.updateProblemsWrapper(),x.css("display","block"),c.css("display","block"),a.responsive.handleResize(),c.find(".nx-field > :input:visible:not(.hasDatepicker)").first().focus();var h=b('a.zen-trigger[title="Publisher Type Overflow Menu"]'),j=h.next();h.click(function(){j.toggle()}),j.click(function(){j.hide()}),u.length&&a.interactions.enableInteractions(x,{interactionsDef:u,component:i}),w?c.append(x):c.append(x,y),a.events.publish("page.rendered",[{page:i}]),g.publish("ui.reflow",[],{buffer:10}),b.holdReady(!1),c.trigger("pageload"),o.resolve()};i.subscribe("stop.loading",function(){i.set("loading.stopped",!0),o.reject()}),"true"!==h.attr("useviewportmeta")||a.mobile||b("#sk-meta-viewport").length||b("head").append('<meta id="sk-meta-viewport" name="viewport" content="width=device-width, initial-scale=1">'),i.addProblem=function(b,c){("string"==typeof b||b instanceof String)&&(b={message:b}),a.page.displayProblem(b)&&p.push(b),!0!==c&&z()},i.addProblems=function(a){a instanceof Array?b.each(a,function(a,b){i.addProblem(b,!0)}):i.addProblem(a,!0),z()},i.removeProblem=function(a){var b,c=i.problems;if(c&&c.length&&c instanceof Array)for(b=c.length-1;b>=0;b--)if(c[b]===a)return c.splice(b,1)[0]},i&&(i.unregisterChildComponents=function(){return v.length&&b.each(v,function(){this.unregister()}),b.each(i.getModels(),function(){this.unregister()}),i},i.unregister=function(){return a.page.rebuildPageProblems(),d.prototype.unregister.call(i)}),i.getPageRecord=function(){return f(i.id())._pageRecord},i.getPageParameters=function(){var b=i.id(),c=f(b),d=c._pageParameters;return d||(d=a.page._parametersByPage[b],c._pageParameters=d),d},i.setPageParameters=function(c){var d=i._pageParameters;return d||(d=i._pageParameters=a.page._parametersByPage[i.id()]={}),b.extend(d,c),i},i.getModels=function(b){return a.model.list().filter(function(a){return a.getParentPageId()===i.id()&&(!b||a.id===b)})},i.getModel=function(a){return i.getModels(a)},i.getContentElement=function(){return x},i.getPanelsElement=function(){return y},i.panel={create:function(a,b,c){var d=a.attr("uniqueid");return A[d]=i.createChildComponents(a,y,c)[0],A[d]},createFromAction:function(a,b,c){var d=a.children().first(),e=d.attr("uniqueid");return A[e]=i.createChildComponents(d,y,c)[0],A[e]},getById:function(a){return A[a]},_detachById:function(a){A[a]&&delete A[a]},getAll:function(){return b.extend({},A)},closeAll:function(){b.each(A,function(){this.close()})}},!m._unsavedChangesHandler&&n&&function(){m._unsavedChangesHandler=!0,b(window).on("beforeunload.skuid",function(){var c;return b.each(a.model.list(),function(){var b=this.getParentPage();if(this.hasChanged&&this.preventUnloadIfUnsavedChanges&&(!b||b.preventUnloadIfUnsavedChanges))return c=a.$L("unsaved_changes_warning"),!1}),c})}(),i.isInclude||i.isReplace||(a.mainPageElement=x),a.utils.processStylesNode(h.children("styles"),x),!m||!m.editable||m.runningOnForceSite||a.mobile||i.isInclude||i.isReplace||(function(){var c="PageBuilder"==a.page.name;if("true"===h.attr("hideeditbutton"))return!1;if(!c){var d=b("<div>").prop("id","skuidEditBtnContainer"),e=b("<div>").prop("id","skuidEditBtn").appendTo(d);b("<div>").addClass("inline sk-icon sk-icon-configure").css("margin-right","4px").appendTo(e),b("<div>").addClass("skuidEditButtonLabel").text(a.$L("edit_page")).appendTo(e),d.css("display","block").on("mouseover",function(){d.stop().animate({width:"90px"},400)}).on("mouseleave",function(){d.stop().animate({width:"16px"},400)}).on("click",function(){window.open(a.platform.getPageComposeUrlById(m.id),"_blank")}).appendTo("body")}}(),function(){var a,c,d,e=m.getAllProblems();m.problemsIndicator?a=m.problemsWrapper:(a=b("<div>").addClass("nx-page-problems-wrapper clearfix"),c=b("<div>").addClass("nx-page-problems-indicator nx-error").css({display:"inline-block","text-align":"left",padding:"7px"}).click(function(){d.toggle()}),d=b('<div class="nx-page-problems-container">').css({display:"none","white-space":"wrap"}),b.extend(m,{problemsIndicator:c,problemsWrapper:a,problemsContainer:d}),a.append(c,d),x.prepend(a)),e.length?b.each(e,function(){m.displayProblem(this)}):a.css("display","none")}()),l=h.children("models").children(),l.length&&l.each(function(){var c={_parentPageId:i.id()};i.isReplace&&(c.processOnClient=!0),new a.model.Model(b(this),c).register()}),k=[];var C=i.getModels(),D=[],E=[];return b.each(C,function(a,b){b.initialize({createDefaultRowIfNeeded:!1,cloneRowsIfNeeded:!1,pageComponent:i}),!b.processOnClient||!b.doQuery&&b.hasMetadataLoaded()?(b.errors&&b.errors.length&&i.addProblems(b.errors),D.push(b)):(b.loadAsync?E:k).push(b)}),b.holdReady(!0),k.length?a.model.load(k,j,{pageComponent:i}):j(),b.each(E,function(){this.load()}),o.promise()}})}(skuid,skuid.$),function(a){function b(b){return f[b||a.platform.getDefaultDataSourceTypeName()]}function c(){return d({},f)}var d=a.$.extend,e=a.dataSource||(a.dataSource={}),f={},g=a.$,h=a.utils,i=function(a){if(!1!==a){d(this,a);var b=this.name;if(!b)throw"Data Source Type name is required.";f.hasOwnProperty(b)||(f[b]=this)}};d(i.prototype,{prop:function(b){return this.properties?a.utils.getObjectProperty(this.properties,b):null},getActions:function(){return a.$.Deferred().resolve({})},runAction:function(b,c,d,e,f){var g=a.$;return f.getActions(f).then(function(h){var i={};a.utils.isFunction(h)&&(h=h(f)),g.isArray(h)?g.each(h,function(a,b){b.disabled||(i[b.name]=b)}):i=h;var j=i[b];return j?j.runtimeExecution(c,d,e,f):a.$.Deferred().reject("Invalid Data Source Action.").promise()})},getNameFieldURLForReferenceField:function(b,c,d,e){var f,i=b.options.fieldXML,j={model:b.model,row:b.row},k=b.model.getDataSourceType(),l=i&&i.attr("redirecttype")||e,m=h.inPlatform(a.constants.NATIVE),n={},o="page"===l&&i.attr("page"),p="route"===l&&i.attr("route"),q="customurl"===l&&i.attr("window")||"self",r="customurl"===l&&i.attr("rooturl"),s='<a href="',t=!1;if("none"!==l&&l){if("datasourcedefault"===l&&k.getNameFieldURLForReferenceField&&k.getNameFieldURLForReferenceField!==this.getNameFieldURLForReferenceField)return k.getNameFieldURLForReferenceField(b,c,d,e);if("datasourcedefault"!==l)return g.each(i.children("params").children(),function(a,b){var c=g(b);n[c.attr("key")]=h.mergeAsTextInContext(c.attr("value"),j,{createFields:!1,registerFields:!1})}),m&&(o||p)&&(s+='#" onclick="skuid.loader.load('+h.encodeHTML(JSON.stringify({isReplace:!0,pageName:o,parameters:n,routeName:p}))+")",t=!0),"customurl"===l&&(f=h.mergeAsTextInContext(h.applyURLParametersToURL(r,n),j),"self"===q?s+=f:"blank"===q&&(s+='#" onclick="window.open(\''+h.encodeHTML(f)+"')"),t=!0),t?s+='" tabindex="-1">'+d+"</a>":void 0}},getNameFieldURLForTextField:function(a,b,c){return this.getNameFieldURLForReferenceField(a,c,b,"datasourcedefault")},getDefaultFieldsForReferenceField:function(b,c,d){if(!!(d&&d.dataSourceType&&d.dataSourceType.getNameField))return[a.utils.getFieldReference(b,c,d)]}}),d(e,{DataSourceType:i,getAllTypes:c,getAllDataSourceTypes:c,mapTypes:c,mapDataSourceTypes:c,getType:b,getDataSourceType:b,libraries:{skuid:{}}})}(skuid),function(a){function b(b){return a.platform.getOAuthRedirectUri(b)}function c(a,b){var c=a.authentication,d=a.name,e=c.authMethod;return e?r.startsWith(e,"oauth")?d+(b?"::"+b:""):"apex"===e?d:void 0:c.url}function d(b){return q[b||a.platform.getDefaultDataSourceName()]}function e(b){b!==a.platform.getDefaultDataSourceName()&&delete q[b]}function f(b,c){var e,f,g=s.extend({useDefault:!0,nodeIdentifierAttribute:"id",allowNullReturn:!1},c);return b&&(e=g.customAttributeName?b.attr(g.customAttributeName):b.attr("datasource")||b.attr("service")),!e&&g.useDefault&&(e=a.platform.getDefaultDataSourceName()),f=e&&d(e),void 0!==f||g.allowNullReturn?f:(a.component.getByType("skuidpage")[0].addProblem(a.label.merge({template:a.$L("invalid_data_source"),data:[b.attr("datasource")||b.attr("service"),b.attr(g.nodeIdentifierAttribute)]})),d())}function g(){return t({},q)}function h(){return JSON.parse(window.localStorage[D]||"{}")}function i(a){t(this,a)}function j(a){t(this,a)}function k(b){var c=b.name,d=b.dataSourceTypeName;t(this,b),this.customConfig&&(this._c=this.customConfig,delete this.customConfig),this.dataSourceType=a.dataSource.getType(d||a.platform.getDefaultDataSourceTypeName()),this.entityMetadataCache={},this._cache={},q.hasOwnProperty(c)||(q[c]=this)}function l(a){return a&&0!==a.length?a.length>1?a:1===a.length?a[0]:void 0:null}function m(a){this[C]=t(!0,{},a),this._isFull=!1}function n(a){return s.map(a,function(a){return a})}function o(a,b){var c={};return a&&a.length&&s.each(a,function(a,d){s.isArray(b)?s.each(b,function(a,b){d.hasOwnProperty(b)&&(c[d[b]]=d)}):d.hasOwnProperty(b)&&(c[d[b]]=d)}),c}var p=a.dataSource||(a.dataSource={}),q={},r=a.utils,s=a.$,t=s.extend,u=a.constants.SALESFORCE,v=r.isString,w=r.mergeAsTextInContext,x=r.contains,y=r.isUndefined,z=r.startsWith,A="skuidDataSourceMetadata",B={},C="_m",D="skuidOAuth",E={Username:"{{$Auth.Username}}",Password:"{{$Auth.Password}}",Client_Id:"{{$Auth.Client_Id}}",Client_Secret:"{{$Auth.Client_Secret}}",BasicAuth:"{{$Auth.BasicAuth}}"};m.prototype={update:function(a){var b=this,c=this[C];c||(c=this[C]={}),delete this._fm,s.each(a,function(d,e){if(!a.hasOwnProperty(d))return!0;if(c.hasOwnProperty(d))if("fields"===d){var f=b.getFieldsMap({noCache:!0,onlyIdKey:!0});s.each(e,function(a,b){var c=b.id,d=f[c];d?s.each(b,function(a,b){null!==b&&void 0!==b&&(d[a]=b)}):f[c]=b}),c.fields=n(f)}else c[d]=e;else c[d]=e})},get:function(a){var b=this[C];if("string"==typeof a)return b[a];if(a instanceof Array){var c={};return s.each(a,function(a,d){c[d]=b[d]}),c}},getLabel:function(){return this[C].label},getLabelPlural:function(){return this[C].labelPlural},getPluralLabel:function(){return this.getLabelPlural()},getEntityName:function(){return this[C].objectName},getObjectName:function(){return this[C].objectName},getFieldsList:function(){return this[C].fields||[]},getSortedFieldsList:function(){var a=r.capitalizeFirst;return this.getFieldsList().slice().sort(function(b,c){var d=a(b.label||b.id)||"",e=a(c.label||c.id)||"";return d<e?-1:d>e?1:0})},getFieldsMap:function(a){var b=a&&a.noCache,c=a&&a.onlyIdKey,d=this.getFieldsList(),e=c?"id":["id","name"];return b?o(d,e):(this._fm||(this._fm=o(d,e)),this._fm)},getField:function(a){return this.getFieldsMap()[a]},getChildRelationshipsList:function(){return this[C].childRelationships||[]},getExtensions:function(a){var b=this[C].extensions||{};return a?r.getObjectProperty(b,a):b},_getCRMap:function(){return this._crm||(this._crm=o(this[C].childRelationships,"relationshipName")),this._crm},getChildRelationship:function(a){return this._getCRMap()[a]},_unwrap:function(){return this[C]},setIsFullMetadata:function(){return this._isFull=!0,this},isFullMetadata:function(){return this._isFull}},k.prototype={save:function(a){return this.dataSourceType.save(a,{dataSource:this})},load:function(a,b){return b=b||{},this.dataSourceType.load(a,t({},b,{dataSource:this}))},getRowId:function(a,b){var c;try{c=this.dataSourceType.getRowId(a,b,this)}catch(d){}return(y(c)||null===c)&&(c=r.generateUniqueId()),c},getIdField:function(a){var b=this.dataSourceType;return b&&b.getIdField?b.getIdField(a):null},getRowName:function(a,b){return this.dataSourceType.getRowName(a,b,this)},getNameField:function(a){var b={dataSource:this};return r.isString(a)?b.objectName=a:a&&(b.model=a,b.objectName=a.objectName),this.dataSourceType.getNameField(b)},getConditionSourceProperties:function(a,b){var c=this.dataSourceType.getConditionSourceProperties;return c&&c(a,b)},getDataSourceType:function(){return this.dataSourceType},getDataSourceTypeName:function(){return this.dataSourceType&&this.dataSourceType.name},getEntityList:function(){return this.dataSourceType.getEntityList({dataSource:this})},search:function(a,b,c){var d=this;return a.dataSource||(a.dataSource=this),d.authenticate().then(function(){return d.dataSourceType.search(a,b,c)})},searchableEntities:function(){return this.dataSourceType.searchableEntities()},getFieldRenderers:function(){return!!this.dataSourceType.fieldRenderers&&this.dataSourceType.fieldRenderers()},getActions:function(a,b){var c=this,d=c._cacheService().getCachedValue("actionsMetadata");return d?(r.isFunction(d)&&(d=d(c,a,b)),s.Deferred().resolve(d).promise()):c.dataSourceType.getActions(c,a,b).then(function(a){return c._cacheService().setCachedValue("actionsMetadata",a),a})},_cacheService:function(){function a(a,b){r.setObjectProperty(d._cache,a,b)}function b(a){"sessionStorage"!==a&&(a="localStorage");var b=window[a][A];if(b)return JSON.parse(b)[d.name]}function c(a,b){"sessionStorage"!==a&&(a="localStorage");var c=window[a][A];c=c?JSON.parse(c):{},c[d.name]=b,window[a][A]=JSON.stringify(c)}var d=this;return{setPersistentCachedValue:function(e,f,g){a(e,f);var h=b(g);return h||(h={}),r.setObjectProperty(h,e,f),c(g,h),d},setPersistentCachedValues:function(e,f){var g=b(f);return g||(g={}),s.each(e,function(b,c){a(b,c),g[b]=c}),c(f,g),d},setCachedValue:function(b,c){return a(b,c),d},setCachedValues:function(b){return s.each(b,function(b,c){a(b,c)}),d},getCachedValue:function(a,c){var e,f=r.getObjectProperty(d._cache,a);return y(f)&&(e=b(c))&&(f=r.getObjectProperty(e,a),y(f)||(d._cache[a]=f)),f},getCachedValues:function(a,c){var e,f=!1,g={};return a.forEach(function(a){var h=r.getObjectProperty(d._cache,a);y(h)&&(e||f||(f=!0,e=b(c)),e&&(h=r.getObjectProperty(e,a),y(h)||(d._cache[a]=h))),y(h)||(g[a]=h)}),g}}},getCacheProperty:function(a,b){return this._cacheService().getCachedValue(a,b&&b.cacheLocation)},getCacheProperties:function(a,b){return this._cacheService().getCachedValues(a,b&&b.cacheLocation)},setCacheProperty:function(a,b){return this._cacheService().setCachedValue(a,b),this},setCacheProperties:function(a){return this._cacheService().setCachedValues(a),this},setPersistentCacheProperty:function(a,b,c){return this._cacheService().setPersistentCachedValue(a,b,c&&c.cacheLocation),this},setPersistentCacheProperties:function(a,b){return this._cacheService().setPersistentCachedValues(a,b&&b.cacheLocation),this},clearPropertiesCache:function(){var a=this;return a._cache={},["localStorage","sessionStorage"].forEach(function(b){var c=window[b][A];c&&(c=JSON.parse(c),c[a.name]&&(delete c[a.name],window[b][A]=JSON.stringify(c)))}),a},unregister:function(){return e(this.name),this},runAction:function(a,b,c,d){var e=this;return e.dataSourceType.runAction(a,b,c,d,e)},getConfigProperty:function(a){return r.getObjectProperty(this._c||{},a)},getUploadMethod:function(a){var b=this.getUploadMethods(),c=b&&b[a];return c?(c.dataSource=this,new i(c)):null},getUploadMethods:function(){var a=this.getDataSourceType();return a.getUploadMethods?a.getUploadMethods(this):{}},getImageSources:function(){var a=this.getDataSourceType(),b=a.getImageSources?a.getImageSources(this):{},c={label:"URL",optionalRecordContext:!0,getSrc:function(a){var b=s.Deferred(),c=a.context,d=a.mergeSettings,e=a.prefix||"",f=a.xmlDef.attr(e+"url"),g=r.getSafeRelativeUrl(r.mergeAsTextInContext(f,c,d));return g?b.resolve(g):b.reject(),b.promise()},builderProps:function(a,b,c){var d=c.additionalOnRefresh;return[{id:(c.prefix||"")+"url",label:"Image URL",type:"template",location:"attribute",onChange:function(){a.refresh(),d&&d()}}]}};return b.url=c,b||{}},getImageSource:function(a){this.name===u&&"external"===a&&(a="url");var b=this.getImageSources(),c=b&&b[a];return c?(c.dataSource=this,new j(c)):null},buildEntityMetadataRequest:function(a){var b=this.dataSourceType.buildEntityMetadataRequest(a);return b.dataSource=this,b},getEntityMetadataLoadingMessageFromBreadcrumb:function(a){return this.dataSourceType.getEntityMetadataLoadingMessageFromBreadcrumb(a)},prefillMetadataForObject:function(a,b){var c=this.dataSourceType.prefillMetadataForObject;c&&c({object:a,data:b,dataSource:this}),this.cacheEntityMetadata(this.getEntityMetadataCacheKey(a),b)},populateBreadcrumbFromEntityMetadata:function(a){var b=this,c=b.getDataSourceType(),d=c.populateBreadcrumbFromEntityMetadata;return d?(a.dataSource=b,d(a)):a.crumb},getEntityMetadataCacheKey:function(a){var b=this;return r.isString(a)?a:b.dataSourceType.getEntityMetadataCacheKey?(a.dataSource||(a.dataSource=b),b.dataSourceType.getEntityMetadataCacheKey(a)):void 0},cacheEntityMetadata:function(a,b){var c=this;if(1===arguments.length&&r.size(arguments[0]))return s.map(arguments[0],function(a,b){return c.cacheEntityMetadata(b,a)});var d=c.entityMetadataCache,e=d[a];return e?e.update(b):e=d[a]=new m(b),e},getCachedEntityMetadata:function(b){var c,d=this,e=d.entityMetadataCache;return b?(c=b.entities?b.entities:a.utils.isString(b)?[{objectName:b}]:[b],s.isArray(c)||(c=[c]),l(s.map(c,function(a){return e[d.getEntityMetadataCacheKey(a)]}))):e},clearEntityMetadataCache:function(){return this.entityMetadataCache={},this},createHTTPRequest:function(a){a||(a={});var b,c,d=this,e=d.authentication,f=t({},d.requestHeaders,a.headers),g={},h=t({model:a.model,row:a.row},a.apiExtensions,a.context),i=d.requestBodyParameters,j=a.url,k=x(j,"?"),l=a.contentType,m=a.body,n=t({},d.requestUrlParameters||{},a.parameters||{});return e&&e.success&&(h.$Auth=s.extend({},E,{Response:{Body:e.responseBody,Headers:e.responseHeaders}})),s.each(n,function(a,b){a&&b&&(k?j+="&":(j+="?",k=!0),j+=a+"="+encodeURIComponent(w(b,h,{createFields:!1})))}),j=w(j,h,{createFields:!1}),s.each(f,function(a,b){var c=b&&v(b)?w(b,h,{createFields:!1}):b;g[a]=c}),(i&&r.size(i)||m&&r.size(m))&&(l&&x(l,"json")&&s.isPlainObject(m)?(c={},i&&t(c,i),m&&t(c,m)):c=m),b={url:j,headers:g,method:a.method,modelDataSource:d.name,originalRequest:a},c&&(b.contentType=l,b.body=c),b.method||(b.method=c?"POST":"GET"),a.accept&&(b.accept=a.accept),e&&e.success&&(b.isAuthenticated=!0),b},_hasRetriedAuthTwice:function(){return!0===this["2ndAuthRetry"]},_setHasRetriedAuthTwice:function(){return this["2ndAuthRetry"]=!0,this},_clearHasRetriedAuthTwice:function(){delete this["2ndAuthRetry"]},makeRequest:function(b,c){function d(a){return g.call(e,a||e.createHTTPRequest(h),c)}var e=this,f=e.name,g=a.ajax[e.useApexProxy?"proxy":"direct"],h=b.originalRequest;return d(b).then(function(a){return e._clearHasRetriedAuthTwice(),a},function(a){var b,c=a.statusCode,g=a.error,h=e.authentication,i=function(){return s.Deferred().reject(a)};if(z(g,"Invalid Request: Unauthorized endpoint")&&window.confirm("To access this Data Source, you will need to add its endpoint as a Remote Site from Salesforce Setup.\n\nWould you like to do that now?")){var j=window.location.href+"",k=encodeURIComponent(j.substring(j.indexOf("/",j.indexOf("//")+2),j.length));window.location="/0rp/e?setupid=SecurityRemoteProxy&IsActive=1&retURL="+k+"&cancelURL="+k+"&EndpointUrl="+encodeURIComponent(e.serviceUrl||"")+"&SiteName="+e.name.replace(/[\W]+/g,"")+'&DescriptionField=For Skuid Model Data Source "'+f+'"'}if(401===c&&h&&"basicauth"!==h.method){if(h.success?(e.invalidateAuthentication(),h.hasRetried||(h.hasRetried=!0,b=e.authenticate())):e.getPendingAuthenticationRequest()&&(h.hasRetried=!0,b=e.getPendingAuthenticationRequest()),b){var l=s.Deferred();return b.then(function(){d().always(function(){delete h.hasRetried}).done(function(){l.resolve.apply(l,arguments)}).fail(function(a){401!==a.statusCode&&403!==a.statusCode||e._hasRetriedAuthTwice()?e._hasRetriedAuthTwice()?(e._clearHasRetriedAuthTwice(),l.reject.apply(l,arguments)):l.reject.apply(l,arguments):e._setHasRetriedAuthTwice().logout().authenticate().then(function(){d().done(function(){l.resolve.apply(l,arguments)}).fail(function(){l.reject.apply(l,arguments)})})})},function(){delete h.hasRetried,l.reject.apply(l,arguments)}),l.promise()}return i()}return i()})},processEntityMetadataRequests:function(a){var b,c,d=this,e=a.entities,f=a.results,g=d.getDataSourceType().processEntityMetadataRequest;if(g){for(c=[],b=0;b<e.length;b++){var h=f[b];h?c.push(g({entity:e[b],result:h})):c.push(null)}return c}return f},processModelXMLExtensions:function(a,b){var c=this.getDataSourceType(),d=function(a){var b={};return s.each(a.attr(),function(a,c){b[a]=c}),a.children().each(function(a,c){var e=c.nodeName;(b[e]||(b[e]=[])).push(d(s(c)))}),b},e=a.extensions={};if(s.each(b.attr(),function(a,b){if(!z(a,"x-"))return!0;e[a.slice(2)]=b}),b.children().each(function(a,b){var c=b.nodeName;if(!z(c,"x-"))return!0;c=c.slice(2),(e[c]||(e[c]=[])).push(d(s(b)))}),c&&c.processModelXMLExtensions)return void c.processModelXMLExtensions(a,b)},getEntityMetadata:function(a){var b,c,d=this,e=s.Deferred(),f=a.entities,g=a.ignoreCache||!1,h=[],i=[],j=function(){e.resolve(l(i))};return f&&(s.isArray(f)||(f=[f]),s.each(f,function(a,c){try{c.dataSource=d}catch(e){}b=null,g||(b=d.getCachedEntityMetadata(c)),b&&b.isFullMetadata()?i.push(b):h.push(c)})),h.length?(c={entities:h,dataSource:d,ignoreCache:g},d.dataSourceType.getEntityMetadata(c).then(function(a){i=s.map(d.processEntityMetadataRequests({entities:h,results:a}),function(a,b){return d.cacheEntityMetadata(d.getEntityMetadataCacheKey(h[b]),a).setIsFullMetadata()}),j()},function(a){e.reject(a)})):j(),e.promise()},getPendingAuthenticationRequest:function(){return B[c(this)]},isAuthenticated:function(){var a=this.authentication;return!a||a.success},getStoredAuthData:function(a){return r.getObjectProperty(h(),this.name+(a?"."+a:""))},setStoredAuthData:function(a){var b=h();return r.setObjectProperty(b,this.name,a),window.localStorage[D]=JSON.stringify(b),b},removeStoredAuthData:function(){var a=h(),b=a[this.name];return delete a[this.name],window.localStorage[D]=JSON.stringify(a),b},authenticate:function(d,e){function f(a,b){a&&r.size(a)&&s.each(a,function(c,d){v(d)?a[c]=w(d,b):"object"==typeof d&&f(d,b)})}function g(a){var b,c=[];return v(a)?b=a:a&&a.error?v(a.error)?b=a.error:a.error&&a.error.message&&(b=a.error.message):a&&a.body&&(v(a.body.error)&&c.push(a.body.error),v(a.body.message)&&c.push(a.body.message),v(a.body.description)&&c.push(a.body.description),b=c.join(": ")),L.reject(b||"Authentication Failed"),L.promise()}function h(){return L.resolve(K),L.promise()}function i(a){return a&&a.refresh_token}function j(){var f=K.providerType,j={force:!1},k=a.oauth(J),l=k?k.getAuthResponse():null,m=(K.defaultScopes||"").split(","),n=(I.scopes||"").split(","),o=e&&e.scopes?e.scopes:d&&d.scopes||"",p={},u={id:K.clientId,name:J,type:f},v={},w={};if(l&&l.error&&I.logout(),o=r.isString(o)?o.split(","):o,s.each(m.concat(n,o),function(a,b){b&&!p[b]&&(p[b]=1)}),r.size(p)&&(j.scope=Object.keys(p).join(",")),M||(K.grantType="implicit"),"implicit"!==K.grantType&&(j.response_type="code"),k.isSessionValid()||i(l)&&(j.display="none"),q=c(I,j.scope||""),(x=B[q])&&!I._hasRetriedAuthTwice())return x.done(h).fail(g);K.url&&(v.auth=K.url),K.tokenUrl&&(v.grant=K.tokenUrl),"code"===j.response_type&&(v.response_type="code"),a.utils.size(v)&&(u.oauth=v),w[J]=t(!0,{},a.oauth.services[f]||{},u);var y=b(K);a.oauth.init(w,{redirect_uri:y}),D=a.oauth.login(J,j).then(function(a){K.responseBody=a.authResponse,K.success=!0,h(),delete B[q]},function(a){K.success=!1,g(a),delete B[q]}),B[q]=D}var k,l,m,n,o,p,q,u,x,y,A,C,D,F,G,H,I=this,J=I.name,K=I.authentication,L=s.Deferred(),M=I.useApexProxy;if(K)if(l=K.method,C=K.authMethod,p=K.verb||"POST",k=K.url,H=K.username,A=K.password,k&&z(k,"/")&&I.serviceUrl&&(k=r.combineUrls(I.serviceUrl,k)),"provider"===l&&0===C.indexOf("oauth")&&K.success&&s.inArray(K.grantType,["password","saml2-bearer"])<0&&(u=K.responseBody.scope.split(","),F=e?e.scopes:d&&d.scopes,F&&v(F)&&(F=F.split(",")),F&&F.length&&s.each(F,function(a,b){if(-1===s.inArray(b,u))return K.success=!1,!1})),K.success)h();else if("separateurl"===l){if(K.expires&&K.expiresunit&&window.sessionStorage&&(G=sessionStorage.getItem("auth_"+I.name),G&&(G=JSON.parse(G)),G&&G.expires&&Date.parse(G.expires)>new Date))return K.responseHeaders=G.headers,K.responseBody=G.body,K.success=!0,h();if(n={url:k,headers:K.requestHeaders,method:p,modelDataSource:I.name},m=K.requestBody,q=c(I),x=B[q])return x;o=n.headers,M?(f(o,{$Auth:E}),f(m,{$Auth:E})):(y={$Auth:s.extend({},E,{Username:H,Password:A})},f(o,y),f(m,y)),m&&(n.contentType=K.requestBodyContentType||"application/x-www-form-urlencoded",n.body=JSON.stringify(m)),D=I.makeRequest(n,{buffer:!1}),B[q]=D,D.always(function(){delete B[q]}).done(function(a){if(K.responseHeaders=a.headers,delete K.responseBody,r.isString(a.body))try{K.responseBody=JSON.parse(a.body)}catch(d){}if(K.responseBody||(K.responseBody=a.body),K.success=!0,K.expires&&K.expiresunit&&window.sessionStorage){var b=w(K.expires,{$Auth:{Response:{Body:K.responseBody,Headers:K.responseHeaders}}},{createFields:!1});if(b&&(b=parseInt(b,10))){var c=new Date;c.setSeconds(c.getSeconds()+b),sessionStorage.setItem("auth_"+I.name,JSON.stringify({headers:K.responseHeaders,body:K.responseBody,expires:c}))}}h()}).fail(function(a){K.success=!1,g(a)})}else if("basicauth"!==l||M)if("provider"===l){var N=0===C.indexOf("oauth"),O=K.grantType;if(N&&s.inArray(O,["password","saml2-bearer"])>-1){if(!M)return g("You must connect through the Proxy to use this OAuth grant type."),L.promise();if(G=I.getStoredAuthData(),r.getObjectProperty(G,"responseBody.access_token")){if(!(G.responseBody.expires&&G.responseBody.expires<(new Date).getTime()))return s.extend(!0,K,G),K.success=!0,h();I.removeOAuthAccessToken()}if(n={url:K.tokenUrl,headers:K.requestHeaders,method:p,modelDataSource:J},m=K.requestBody,q=c(I),x=B[q])return x;m&&(n.contentType=K.requestBodyContentType||"application/x-www-form-urlencoded",n.body=JSON.stringify(m)),D=a.ajax.proxy(n,{buffer:!1}),B[q]=D,D.always(function(){delete B[q]}).done(function(a){if(K.success=!0,K.responseHeaders=a.headers,K.responseBody=a.body,a.body&&r.isString(a.body))try{K.responseBody=JSON.parse(a.body)}catch(b){}I.setStoredAuthData({responseBody:K.responseBody}),h()}).fail(function(a){K.success=!1,g(a)})}else if(N)a.oauth?j():r.loadJS(r.getStaticResourceUrl("models/oAuthClient.js","skuid",undefined,r.getCacheTimestamp())).done(function(){a.oauth=window.hello}).done(j);else if("apex"===C){if(n={headers:K.requestHeaders,method:"GET",modelDataSource:I.name},q=c(I),x=B[q])return x;D=a.ajax.proxy(n,{buffer:!1}).done(function(a){K.responseHeaders=a.headers;try{K.responseBody=JSON.parse(a.body)}catch(b){K.responseBody=a.body}K.success=!0,h()}).fail(function(a){K.success=!1,g(a)}).always(function(){delete B[q]}),B[q]=D.promise()}else K.success=!0,h()}else r.isString(K)||(K.success=!0),h();else{if(H&&A)return I.requestHeaders.Authorization="Basic "+btoa(H+":"+A),K.success=!0,h();if(!H)return K.success=!1,I.removeStoredAuthData(),g({error:"No Username provided."});if(!A)return K.success=!1,I.removeStoredAuthData(),g({error:"No Password provided."})}else h();return L.promise()},removeOAuthAccessToken:function(){var a=["access_token","expires","expires_in"],b=function(b){b&&b.responseBody&&a.forEach(function(a){delete b.responseBody[a]})};return b(this.authentication),b(this.getStoredAuthData()),this},invalidateAuthentication:function(){function a(a){a&&s.isPlainObject(a)&&Object.keys(a).forEach(function(b){"refresh_token"!==b&&delete a[b]})}var b,c=this.authentication,d=this.getStoredAuthData();return c&&(b=c.authMethod&&z(c.authMethod,"oauth"),c.success=!1,delete c.responseHeaders,d&&delete d.responseHeaders,b?(a(c.responseBody),d&&a(d.responseBody)):(delete c.responseBody,d&&delete d.responseBody),d&&this.setStoredAuthData(d)),this},logout:function(){var b=this.authentication,c=this.name;if(b&&(b.success=!1,delete b.responseHeaders,delete b.responseBody,b.authMethod&&z(b.authMethod,"oauth")&&"saml2-bearer"!==b.grantType)){var d=a.oauth&&a.oauth(c);d&&d.logout&&d.logout({name:c,options:{force:!0}})}return this.removeStoredAuthData(),this}},t(p,{DataSource:k,get:d,getDataSource:d,getDataSourceFromXML:f,map:g,mapDataSources:g})}(skuid),function(a){var b,c=a.$,d=a.utils,e=d.getInvokable,f=e(c,"Deferred"),g=e(c,"each"),h=e(c,"map"),i=d.mergeAsTextInContext,j=d.getObjectProperty,k=d.setObjectProperty,l=function(a){var b={},c=m(a);return g(c,function(a,c){c.synonym&&(b[c.synonym]=c)}),b},m=function(a){return a.fieldsMap?a.fieldsMap:(a.fieldsMap=d.listToMap(a.fields,"id"),a.fieldsMap)},n=function(a){return Array.prototype.slice.call(a)};b=a.dataSource.utils={mergeThenURLEncode:function(a,b,c){return encodeURIComponent(i(a,b,c))},getModelMergeConditions:function(a,b,c){b=b||{model:a},c=c||{};var d=a.conditions,e={},f={},h=!1!==c.urlEncode;return d&&d.length?(g(d,function(a,b){
e[b.sourceParam||b.name]=b}),g(e,function(a,c){if(c.value!==undefined&&!c.inactive){var d=i(c.value,b);h&&(d=encodeURIComponent(d)),f[a]=d}}),f):f},applySynonym:function(a,b){var c=m(b),d=l(b);g(d,function(b,c){a[c.id]=j(a,b)}),g(a,function(b,d){var e,f,h,i="";c[b]&&(h=c[b].makeFlatList)&&d&&d.length&&(e=h.delimiter,f=h.fieldPath,e||(e=";"),f?g(d,function(a,b){if(b){var c=j(b,f);i&&(i+=e+" "),i+=c+""}}):g(d,function(a,b){i&&(i+=e+" "),i+=b+""}),a[b]=i)})},revertSynonym:function(a,b){var c=m(b),e=l(b);g(a,function(b,e){var f,h,i,j,l,m=[];if(c[b]&&(i=c[b].makeFlatList)&&e&&d.isString(e)){if(!(e=e.replace(/\s/g,"")))return;f=i.delimiter,h=i.fieldPath,f||(f=";"),j=e.split(f),h?g(j,function(a,b){b&&(l={},k(l,h,b),m.push(l))}):g(j,function(a,b){b&&m.push(b)}),a[b]=m}}),g(e,function(b,c){k(a,b,a[c.id]),delete a[c.id]})},getActionsStatic:function(a,c,d){return b.deferrable(this.createActions(a,c,d))},getEntityListStatic:function(a){return b.deferrable(h(this.prop("x-metadata"),function(b,c){if((!b.hidden||a.ignoreHidden)&&"__skuid_fieldDefaults"!==c)return{value:c,label:b.label}}))},makeLabelFromId:function(a){function b(a){if(a)return a[0].toUpperCase()+a.substring(1)}var c=a.replace(/\./g," ").replace(/_/g," ").split(/(?=[A-Z]|\s)/),d=[],e=0,f=!1;return g(c,function(a,c){(c=b(c.trim()))&&(f?1===c.length?d[e]+=c:(f=!1,e++,d[e]=c):(e++,1===c.length&&(f=!0),d[e]=c))}),d=h(d,function(a){if(a)return a}),d.join(" ")},queryEntityMetadataStatic:function(a){var d=this.getEntityMetadataCacheKey(a),e=this.prop("x-metadata"),h=e&&e[d],i=e&&e.__skuid_fieldDefaults,j=f();return h?(g(h.fields,function(a,e){i&&(e=h.fields[a]=c.extend({},i["*"],i[d],e)),e.createable=e.createable||e.writeable,e.editable=e.editable||e.writeable,e.label||(e.label=b.makeLabelFromId(e.id))}),j.resolve(h)):j.reject()},parseSuccessfulLoadResponseWithSynonyms:function(a,c,d){var e=b.parseAsJSONIfString(a.body),f=c.pathToContent,g=f?j(e,f):e;b.safeEach(g,function(a,c){b.applySynonym(c,d)}),a.body=e,d.data=g},parseAsJSONIfString:function(a){if(a&&d.isString(a))try{a=JSON.parse(a)}catch(b){}return a},safeEach:function(a,b){a instanceof Object&&g(a,b)},applyAccessTokenAsParam:function(a,b,c){-1===a.request.url.indexOf(c+"=")&&(-1===a.request.url.indexOf("?")?a.request.url+="?"+c+"="+b.access_token:a.request.url+="&"+c+"="+b.access_token)},downloadWithLink:function(a,b){var d=document.createElement("a");document.body.appendChild(d),d.style="display: none",d.href=b,d.target="__blank",d.download=a,d.click(),c(d).remove()},makeAWSRequest:function(c,d,e){var f={url:"/core/data/aws",type:"POST",headers:{"x-skuid-data-source-name":c}},g={method:d};return e&&(g.body=e),f.body=g,f.contentType="application/json",a.ajax.direct(f).then(function(a){return a.body},function(a){var c=b.parseAsJSONIfString(a.body);return c?c.message:a.status})},compose:function(){var a=n(arguments).reverse();return function(b){return g(a,function(a,c){b=c(b)}),b}},deferrable:function(a){return a&&d.isPromise(a)?a:f().resolve(a).promise()},rejectable:function(a){f().reject(a).promise()},getComboBoxOptions:function(a){var c=n(arguments);return c.shift(),function(e,f,g,h){g(),a.apply(null,c).then(function(a){h(),f(a.filter(function(a){return-1!==(d.isString(a)?a:a.value).toLowerCase().indexOf(e.term.toLowerCase())}))},function(a){return h(),f([]),b.rejectable(a)})}}}}(skuid),function(a){function b(a,b){return a&&b in a?a[b]:l[b]?g(l[b])?function(){return l[b].apply(a,arguments)}:l[b]:void 0}var c=a.$,d=a.utils,e=c.extend,f=d.isString,g=d.isFunction,h=a.dataSource.utils,i=d.startsWith,j=d.contains,k=d.combineUrls,l=h.REST={processErrorObject:function(a){var b=[];return f(a)?b.push(a):(a.error&&b.push(a.error),a.message&&b.push(a.message)),b.join(": ")},generateErrorMessage:function(a,d){d=d||{};var e,f=b(this,"processErrorObject"),g=a.body,i=!1===d.showStatus?null:a.status;if("OK"===i&&(i=""),g)if(g=h.parseAsJSONIfString(g),c.isPlainObject(g))e=f(g.errors&&c.isArray(g.errors)&&g.errors.length?g.errors[0]:g);else if(c.isArray(g)&&g.length)e=f(g[0]);else if(g&&j(g,"/html")){var k,l=g.toLowerCase().indexOf("<body"),m=g.toLowerCase().indexOf("</body>",l);k=c(l&&m?g.substring(l,m+7):g),e=c.trim(k.text()||"")}else e=g;return i&&e?i+": "+e:e},getConditionSourceProperties:function(b,c){var d=a.builder.core;return"propsonly"===c.renderMode?d.getConditionParameterProperties(b,{url:c.url}):[{label:"URL Merge Parameter",deleteable:!1,linkedComponent:b,summaryFunction:function(a){return d.conditionDescriptionRenderers.parameter(a)},propsFunction:function(a){return d.getConditionParameterProperties(b,{handleChange:c.handleChange(a),handleRefresh:c.handleRefresh(a)})}}]},getIdField:function(a){var b=a?a.idFields:null;return b&&b.length?b.length>1?b:b[0]:"id"},getNameField:function(a){var d,e,f=this;return d=a&&a.fields?a:a&&a.model?a.model:{},d.nameField?d.nameField:(e=b(f,"getIdField")(d),c.isArray(e)?e[0]:e)},getRowId:function(a,d){var e=this,f=b(e,"getIdField")(d);return c.isArray(f)&&f.length>1?d.getFieldValues(a,f,!0).join(","):d.getFieldValue(a,f,!0)},getRowName:function(a,c){return c.getFieldValue(a,b(this,"getNameField")(c),!0)},makeRequest:function(a,d,f){var g=c.Deferred(),h=d.request||d,j=d.parameters,l=d.row,m=this,n=b(m,"generateErrorMessage");return function(a,b,d,f){f=f||{},d||(d={method:a.verb,dataType:a.dataType,contentType:a.contentType,url:a.serviceUrl,type:"query",scopes:a.scopes});var g=a.getDataSource(),h=g.serviceUrl||"",l=d.url||"",m=f.dfd;g.authenticate(a,d).done(function(){var o,p={},q=!1;a.conditions&&!f.isSample&&c.each(a.conditions,function(b,c){if(!1===c.inactive&&c.sourceParam){var d,e=a.getConditionValueResult(c),f=e.status;if(f){if("deactivate"===f)return!0;if("noquery"===f)return q=!0,m.reject("Could not perform this query because no value could be found for merge variable  '"+c.sourceParam+"'"),!1}else d=e.value,p[c.sourceParam]=d?encodeURIComponent(d):d}}),q||(o=e({},d,{apiExtensions:p,model:a,url:h?k(h,l):l,method:d.method||"GET",contentType:d.dataType||d.contentType||"application/json"}),b&&(o.row=b),d.data&&(o.body=d.data),j&&(o.parameters=j),o=g.createHTTPRequest(o),a.soql=a.query=a.debug=o.url,g.makeRequest(o).done(function(a){var b,d=o.method,e=a.statusCode;"POST"===d?201!==e&&200!==e&&(b=n(a)):-1!==c.inArray(d,["PUT","PATCH","DELETE"])?204!==e&&200!==e&&(b=n(a)):200!==e&&(b=n(a)),b?m.reject(b):m.resolve(a)}).fail(function(a){var b=a.statusCode,c=a.error;if(i(c,"Invalid Request: Unauthorized endpoint")&&window.confirm("To access this Data Source, you will need to add its endpoint as a Remote Site from Salesforce Setup.\n\nWould you like to do that now?")){var d=window.location.href+"",e=encodeURIComponent(d.substring(d.indexOf("/",d.indexOf("//")+2),d.length));window.location="/0rp/e?setupid=SecurityRemoteProxy&IsActive=1&retURL="+e+"&cancelURL="+e+"&EndpointUrl="+encodeURIComponent(h)+"&SiteName="+g.name.replace(/[\W]+/g,"")+'&DescriptionField=For Skuid Model Data Source "'+g.name+'"'}404===b?(c=n(a))||(c='The requested resource for data source "'+g.name+'" could not be found:\n\n'+l):401===b&&(c=n(a)),c||(c=n(a,{showStatus:!1})),b>=400&&b<500&&c?m.reject(c):m.reject('Request to data source "'+g.name+'" failed'+(c?": "+c:a.status))}))}).fail(function(a){m.reject('Unable to authenticate to data source "'+g.name+'": '+a)}),m.promise()}(a,l,h,e(f,{dfd:g})),g.promise()},populateBreadcrumbFromEntityMetadata:function(a){var b=a.crumb,c=a.dataSource,d=a.modelXML;if(0===a.index){var e=d.attr("verb");b.rel=b.ref=c.name+(e?": "+e:"")}return b},setDefaultConditionState:function(a){a.sourceType="param",a.operator="=",a.encloseValueInQuotes=!0}}}(skuid),function(a){function b(){return a.utils}function c(a,b,d){ca.each(a,function(a,e){null!==e&&"object"==typeof e?c(e,b,d?d+"."+a:a):b.push(d?d+"."+a:a)})}function d(a){return b().isString(a)}function e(a){return b().size(a)}function f(b,c,e){var f=d(b)?b:b.id,g=!d(c),h=g?c.name:c;return e||(e=a.page.id),"apex__"+(g&&c.customCookie?c.customCookie:"nx-page-"+e+"-model-condition-"+f+"-"+h)}function g(a){return b().isMultiValueOperator(a)}function h(a){var c=La[a];return c||(c=La[a]=b().getXML(b().makeXMLDoc("<"+a+"/>")[0]).length),c}function i(b){var c=b.dataSource;return c?c instanceof a.dataSource.DataSource||(c=b.dataSource=a.dataSource.getDataSource(c.name)):b.dataSource=c=a.dataSource.getDataSource(b.dataSourceName||ea()),c}function j(b,c){var d=c&&c.getParentPage()||a.component.getByType("skuidpage")[0];if(!d)return void ca(document).one("pageload",function(){j(b,c)});d.addProblems(b)}function k(a,b){return b?b+"("+a+")":a}function l(a,b,c,d,e){typeof c.attr(d)!==ya?a[b]=c.attr(d):typeof e!==ya&&(a[b]=e)}function m(a,c,d){return a&&(a=ca.trim(a).toUpperCase()),c&&c.length&&!a&&(a="",ca.each(c,function(b){a+=b+1+" AND "}),b().endsWith(a," AND ")&&(a=a.substring(0,a.length-5))),a&&!b().startsWith(a,"(")&&d&&(a="("+a+")"),a}function n(a){var c=null,d="";return a&&(c=ca(a),d=c.attr("field")),b().makeXMLDoc('<field id="{id}" query="false"/>'.replace("{id}",d))}function o(c){var d,e,f,g,k,l,o,p,q,r,s,t,u=c.model,v=c.xml,w=v.children("conditions"),x=v.children("havings"),y=v.children("actions"),z=v.children("groupby"),A=v.children("fields"),B=v.children("idfields").first().children(),C={};if(v.attr("_parentpageid")&&(u._parentPageId=v.attr("_parentpageid")),u.dataSourceName=v.attr("datasource")||v.attr("service")||ea(),!(d=i(u)))return void j("Missing Data Source: "+u.dataSourceName,u);if(t=d&&d.processModelXMLExtensions,!(e=d.getDataSourceType()))return void j("Missing Data Source Type",u);switch(f=e?e.name:ga,g=e.prop("runtime.metadataSource"),k="local"===g,l=k||"hybrid"===g,a.utils.isUndefined(u.processOnClient)&&(u.processOnClient=!(u.dataSourceName===ga&&!a.platform.requiresClientSideModelLoading())||"true"===v.attr("processonclient")),ca.extend(u,{id:v.attr("id")||b().generateUniqueId(),objectName:v.attr("sobject"),type:v.attr("type"),createRowIfNoneFound:"true"===(v.attr("createrowifnonefound")||"false"),preventUnloadIfUnsavedChanges:"false"!==v.attr("unloadwarningifunsavedchanges"),recordsLimit:v.attr("limit")||null,orderByClause:v.attr("orderby"),rTypeFor:v.attr("rtypfor"),doQuery:"false"!==v.attr("query"),deferFieldRendering:"true"===v.attr("deferfieldrendering"),deferredFields:v.attr("fieldstodefer")?v.attr("fieldstodefer").split(","):"",loadAsync:"true"===v.attr("async"),readonly:v.attr("readonly"),pathToContent:v.attr("pathtocontent")}),ca.extend(u,{fields:ca.map(A.children(),function(a){return new V({model:u,xml:ca(a)})}),havings:ca.map(x.children(),function(a){return new U(ca(a),u)}),methods:ca.map(v.children("methods").children(),function(a){return new W(ca(a))})}),ca.each(u.fields,function(a,b){C[b.id]=b}),l||ca.each(w.children(),function(a,b){(r=n(b))&&(C[r.attr("id")]||u.fields.push(new V({model:u,xml:r})))}),s=D(u,w,C),u.conditions=s.conditions,u.uiOnlyConditions=s.uiOnlyConditions,v.attr("doclone")){case"yes":u.doClone=!0;break;case"no":u.doClone=!1}z.length&&(u.groupByFields=ca.map(z.children(),function(a){return new V({model:u,xml:ca(a)})}),u.groupByMethod=z.attr("method")||"simple"),u.groupByFields&&u.groupByFields.length&&(u.fields=u.groupByFields.concat(u.fields)),f===ga&&(u.queryAllRows="true"===v.attr("queryallrows"),u.forView="true"===v.attr("forview")),y.length&&(u.actions=ca.map(y.children("action"),function(a){return new Z(ca(a))})),u.needsMetadataLoad=!k,!u.pathToContent&&u.methods&&u.methods.length&&(o=u.methods.filter(function(a){return"query"===a.type&&a.pathToContent}),o.length&&(u.pathToContent=o[0].pathToContent)),p=v.attr("label"),q=v.attr("labelplural"),u.label||(u.label=p?b().mergeAsText("global",p):u.id),u.labelPlural||(u.labelPlural=q?b().mergeAsText("global",q):u.id),v.attr("namefield")&&(u.nameField=v.attr("namefield")),B.length&&(u.idFields=ca.map(B,function(a){if(a.textContent)return a.textContent;var c=b().getXML(a);return c.length>h("field")?c=b().decodeXML(c.substring(7,c.length-8)):null})),u.serviceUrl=v.attr("serviceurl")||v.attr("endpoint"),u.verb=v.attr("verb"),v.attr("scopes")&&(u.scopes=v.attr("scopes")),w.length&&(u.conditionLogic=m(w.attr("logic"),u.conditions)),x.length&&(u.havingLogic=m(x.attr("logic"),u.havings)),t&&t.call(d,u,v,c)}function p(a,c,d,e){var f=d.attr(e),g=!1;return f&&(g=b().escapeSingleQuotes(f),a[c]=g),g}function q(a){return a&&a.type&&-1!==ca.inArray(a.type,[Ca,Da])}function r(a,c){var d,e=c===ua,f=c===va,g=c===wa,h=typeof a,i=b().isUndefined;if(e||f){if(h===Aa){if(e&&!da.parseSFDate(a)||f&&!da.parseSFDateTime(a)){var j=da.resolveDateKeyword(a);return ca.isArray(j)?f?da.getSFDateTime(j[0]):da.getSFDate(da.getLocalDateTime(j[0])):null}}else if(h===ya)return null}else{if(g&&h!==Ba&&null!==a&&!i(a))return h===Aa&&"true"===a.toLowerCase()||h===za&&0!==a;if(-1!==ca.inArray(c,[na,oa,pa])&&h!==za&&a)try{d=parseFloat(a),b().isExactlyNaN(d)||(a=d)}catch(k){}else if(c===qa&&h!==za&&!i(a)&&null!==a&&a)try{d=parseInt(a,10),b().isExactlyNaN(d)||(a=d)}catch(k){}}return a}function s(a,b){a&&b&&a._GUID&&!(a._GUID in b)&&(b[a._GUID]=a)}function t(a,b){a&&b&&a._GUID&&a._GUID in b&&delete b[a._GUID]}function u(a,c,d){return a.getRows().filter(function(b){return!a.getRecordForRow(b)||!a.getRecordForRow(b).isMarkedForDeletion()}).map(function(e){return{value:c?b().mergeAsText("row",c,null,a,e):a.getRowId(e),label:d?b().mergeAsText("row",d,null,a,e):a.getRowName(e)}})}function v(c,d){var e,f,g="aggregate"===c.type,h=[],i={},j=b().createMapForArray;return c.isAggregate=g,e=c.getDataSourceType(),e&&(c.dataSourceTypeName=e.name||ga,e.initialize&&e.initialize(c)),c.fields&&ca.each(c.fields,function(b,c){var d,e,f,g,j,k=c.picklistSource,l=a.snippet.get(c.picklistSourceSnippet);if(!0===q(c)&&c.subFields&&h.push(c),c.uiOnly&&c.calculated&&(c.createable=c.editable=!1),"rowsinmodel"===k&&a.$M(c.picklistSourceModel))d=a.$M(c.picklistSourceModel),e=c.picklistEntryValue,f=c.picklistEntryLabel,d.getRows().length&&(c.picklistEntries=u(d,e,f)),g=a.events.subscribe(["models.loaded","models.saved","models.cancelled","row.updated","row.created","row.deleted","row.undeleted"],function(a){j!==a&&((a.models&&a.models[d.id]||d.id===a.modelId)&&(c.picklistEntries=u(d,e,f)),j=a)}),d[Fa]||(d[Fa]=[]),d[Fa].push(g);else if("snippet"===k&&l){var m=l();m.length&&(c.picklistEntries=m)}if("REFERENCE"===c.displaytype&&c.rel){var n=c.id.split(".");n.pop(),n.push(c.rel);var o=n.join(".");i[o]={id:o,displaytype:"OBJECT",uiOnly:!0,accessible:!0,editable:!0,createable:!0}}}),h.length&&j(h,"subFields","subFieldsMap","id"),i&&ca.each(i,function(a,b){var d=!1;ca.each(c.fields,function(b,c){if(c.id===a)return d=!0,!1}),d||c.fields.push(b)}),j([c],"fields","fieldsMap",["id","name"]),g||(d&&!1===d.cloneRowsIfNeeded||c._cloneRowsIfNeeded(d?d.pageComponent:aa),B(c)),c._generateDataIndices(),c.processOnClient?F(c):(f=D(c),c.conditions=f.conditions,c.uiOnlyConditions=f.uiOnlyConditions,F(c),c.uiOnlyConditions.length&&(c.conditionLogic=m(null,c.conditions)),c.data=E(c)),L(c),!c.hasMetadataLoaded()||d&&!1===d.createDefaultRowIfNeeded||c._createDefaultRowIfNeeded(),c.evaluateFormulaFields({preventTrackChanges:!0}),c.isInitialized=!0,c}function w(a){return!(d(a)&&(15===a.length||18===a.length))}function x(){return b().generateUniqueId()}function y(a,b){var c,d=b._findRow(a);return d&&(c=b.getRecordForRow(d)),!!c&&c.isClone()}function z(a,b){var c;return c=b instanceof Y?b:new Y(b),c.register(a),c}function A(a){var b;if(b=d(a)?I(a):a)return b.unregister(),b}function B(a){a.dataSourceTypeName===ga&&ca.each(a.data,function(b,c){var d=a.getRowId(c);c.Id15=d?d.substring(0,15):null})}function C(a,b,c,d){var e=(c-a)*Math.PI/180,f=(d-b)*Math.PI/180,g=Math.sin(e/2)*Math.sin(e/2)+Math.cos(a*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2);return 2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))*6378.137*1e3}function D(a,b,c){var d=[],e=[],f=b?b.children():a.conditions,g=a.uiOnly;return a.uiOnlyConditions?{uiOnlyConditions:a.uiOnlyConditions,conditions:a.conditions}:(c=c||a.fieldsMap,ca.map(f,function(f){var h=b?f.getAttribute("field"):f.field,i=b?new U(ca(f),a):f;g||c[h]&&c[h].uiOnly?d.push(i):e.push(i)}),{conditions:e,uiOnlyConditions:d})}function E(a){if(a.uiOnlyConditions){var b=function(a){return!a.inactive},c=a.uiOnlyConditions.filter(b);return a.getRows(c)}return a.data}function F(a){a.conditions||(a.conditions=[]),a.conditions.forEach(function(b){a.updateConditionValue(b);var c=b.subConditions;c&&c.length&&c.forEach(function(b){a.updateConditionValue(b)})})}function G(){return ca.map(Ja,function(a){return a})}function H(){return Ja}function I(a){return Ja[a]}function J(a){return Ka[a]}function K(a){var b={};return ca.each(Ja,function(c,d){var e=d.dataSource&&d.dataSource.name;b[e]||(b[e]=[]),a&&a!==e||b[e].push(d)}),a!==undefined?b[a]:b}function L(c){var d=c?c.actions:null,e=c?c.id:null,f=b().startsWith,g=c[Ea];g||(g=c[Ea]=[]),g.length&&(ca.each(g,function(b,c){a.events.unsubscribe(c)}),g.length=0),d&&d.length&&ca.each(d,function(d,h){var i=h.events,j=h.actions,k=h.fields,l=h.conditions;typeof j===Aa&&(j=b().makeXMLDoc(j)),i&&i.length&&ca.each(i,function(d,h){g.push(a.events.subscribe(h,function(d){var g=!1;if(f(h,"models.")&&d.models[e]&&("models.saved"!==h||d.totalsuccess))g=!0;else if(f(h,"row.")&&d.modelId===e)g="row.updated"!==h||!k||!k.length||b().doArraysIntersect(Object.keys(d.updates),k);else if(f(h,"condition.")&&d.modelId===e){var i=d.conditionName,m=c.getConditionByName(i);g=c.isFilterableCondition(m)&&(!l||-1!==ca.inArray(i,l))}if(g){var n=ca.extend({model:I(e),initiatorId:e},d),o=a.actions.runActionsNode,p=a.component.getByType("skuidpage");p&&p.length?o(j,c,n):ca(document.body).one("pageload",function(){o(j,c,n)})}}))})})}function M(f,h){h||(h={});var i,j=!1,k=ca.Deferred(),l={},m={},n={},o={},p={},q=[],r={},s=h.rollbackOnAnyError,t={};if(a.events.publish("skuid.ui.commitUserInput"),!0===s&&(m.rollbackOnAnyError=!0),ca.each(f,function(){var a,d,f,g,h,i=this;if(n.hasOwnProperty(i.id)||i.isBeingSaved||!i.hasChanged||!e(i.changes))return!0;n[i.id]=i,i.isBeingSaved=!0,d=i.dataSource,f=d.name,g=i.getIdField(),h=t[i.id]={},a={id:i.id,type:i.objectName},ca.each(i.registeredFields,function(a,b){b.messages=[]}),o[f]||(o[f]=[],p[f]=d),o[f].push(i),l[f]||(l[f]=[]),a.inserts={},a.updates={},a.deletes={},ca.each(i.changes,function(d,e){var f,j,k=i.record(d),l=k.row(),m=k.isMoribund(),n=k.isNew();m&&n?(h[d]=e,delete i.changes[d]):m?(f=a.deletes[d]={},g?ca.isArray(g)?g.forEach(function(a){f[a]=i.getFieldValue(l,a,!0)}):f[g]=i.getFieldValue(l,g,!0):ca.each(l,function(a,b){a===Ha||ca.isPlainObject(b)||ca.isArray(b)||(f[a]=b)})):(j=a[n?"inserts":"updates"][d]={},ca.each(e,function(a,d){var e=i.getField(a),f=[],g=!0,h=b().isObject(d);if(e&&e.uiOnly)return!0;e||!h?j[a]=d:!e&&h&&(c(d,f,a),ca.each(f,function(){return i.getField(this)||(g=!1),-1}),g&&(j[a]=d))}))}),q=q.concat(this.validateRequiredFields()),a.returning=i.fields?ca.map(i.fields.filter(function(a){return a.type!==Ca&&!1!==a.query&&!0!==a.uiOnly}),function(a){return a.id}):[],l[f].push(a),j=!0}),q.length&&(j=!1),j){var u=[],v={},w=[],x={event:"models.saved",models:n,initiatorId:h.initiatorId,insertResults:[],updateResults:[],deleteResults:[],totalsuccess:!0,messages:[]},y={};ca.each(l,function(b,c){var f=ca.Deferred(),h=o[b],j=p[b];u.push(f.promise()),m.operations=c,j.save(m).then(function(b){var c,j={},k={},l=function(a,b,c){ca.each(a,function(){this.rowId=c,this.model=b,w.push(this)})};b.totalsuccess=!0,ca.each(h,function(a,b){k[b.id]=!0}),ca.each(["delete","insert","update"],function(a,c){var d=b[c+"Results"];d&&d.length&&ca.each(d,function(a,c){var d=c.source,e=n[d],f=c.id||c.oldId;c.success||(b.totalsuccess=!1,k[d]=!1,l(c.errors,e,f)),l(c.messages,e,f)})}),ca.each(w,function(a,b){var c,d,e=b.fields,f=b.model;if(e&&e.length)for(c=0;c<e.length;c++)d=f.getField(e[c]),e[c]={id:d.id,label:d.label}}),s&&b.totalsuccess||!s?(ca.each(b.deleteResults,function(a,b){if(b.success){var c=b.source;y[c]||(y[c]={}),y[c][b.id]=b.id}}),ca.each(b.insertResults,function(a,b){if(b.success){var c,e,f,g,h=b.source,i=n[h],k=b.oldId,l=i.getRowById(k),m=b.record,o=i.registeredFieldsByRowThenField,p=i.registeredItemsByRow,q=i.record(k);if(m&&d(m))try{m=b.record=JSON.parse(m)}catch(r){}k in i.changes&&delete i.changes[k],k in i.originals&&delete i.originals[k],c=b.hasOwnProperty("id")?b.id:m?i.getRowId(m):k,m&&q.setRow(m),q.setId(c).markSaved(),j[k]={row:l,id:c},i.dataSourceTypeName===ga&&(l.Id15=c?c.substring(0,15):c),c===k&&i.dataMap[c]||(delete i.dataMap[k],delete i.recordsMap[k],i.dataMap[c]=l,i.recordsMap[c]=q),e=k in o&&o[k],f=k in p&&p[k],!1!==e&&(delete o[k],o[c]=e),!1!==f&&(delete p[k],p[c]=f),m&&(g=v[h],g||(g=v[h]={}),g[c]=m)}}),ca.each(b.updateResults,function(a,b){if(b.success){var c,e,f,g=b.id,h=b.record,i=b.source,j=n[i];if(g in j.changes&&delete j.changes[g],g in j.originals&&delete j.originals[g],c=j.getRowById(g),f=j.getRecordForRow(c),f.markSaved(),h){if(d(h))try{h=b.record=JSON.parse(h)}catch(k){}e=v[i],e||(e=v[i]={}),e[j.getRowId(c)]=h}}}),i={},ca.each([y,t],function(a,b){e(b)&&ca.each(b,function(a,b){e(b)&&(i[a]||(i[a]=[]),ca.each(b,function(b){i[a].push(b)}))})}),e(i)&&(ca.each(i,function(b,c){a.$M(b).abandonRows(c,{notify:!1})}),i=null,y=null,t=null),e(v)&&ca.each(v,function(a,b){n[a].updateRows(b,{preventSetActive:!1,preventTrackChanges:!0})}),c=a.model.list(),ca.each(c,function(){var a=this,b=a.conditions,c={};a.hasChanged&&ca.each(a.changes,function(b,d){ca.each(d,function(d,e){if(e){var f,g,h=j[e];h&&(f=a.getField(d))&&f.displaytype===ja&&(g=c[b],g||(g=c[b]={}),g[d]=h.id,g[f.rel]=h.row)}})}),b&&b.length&&ca.each(b,function(a,b){if("modelmerge"===b.type){var c,d=I(b.model),e=d&&d.getIdField(),f=b.mergeField,h=d&&f?d.getField(f):null;(h&&h.displaytype===ja||f===e)&&(g(b.operator)?(c=b.values)&&c.length&&ca.each(c,function(a,b){var d=j[b];d&&(c[a]=d.id)}):b.value&&b.value in j&&(b.value=j[b.value].id))}}),e(c)&&a.updateRows(c,{preventSetActive:!1,preventTrackChanges:!1})}),ca.each(c,function(){this.evaluateFormulaFields({preventTrackChanges:!0})})):s&&!b.totalsuccess&&e(t)&&ca.each(t,function(b,c){var d=a.$M(b).changes;ca.each(c,function(a,b){d[a]=b})}),ca.each(h,function(a,b){b.hasChanged=!k[b.id],ca.each(b.registeredEditors,function(a,c){c._GUID in r||(r[c._GUID]=c),!0!==c.hadErrors&&(c.hadErrors=b.hasChanged)})}),ca.each(h,function(a,b){b.isBeingSaved=!1}),f.resolve({insertResults:b.insertResults,updateResults:b.updateResults,deleteResults:b.deleteResults,totalsuccess:b.totalsuccess})},function(a){ca.each(h,function(){this.isBeingSaved=!1}),ca.each(h,function(a,b){ca.each(b.registeredEditors,function(a,c){c._GUID in r||(r[c._GUID]=c),!0!==c.hadErrors&&(c.hadErrors=b.hasChanged)})}),x.totalsuccess=!1,d(a)&&(a=[a]),ca.each(a,function(a,b){w.push({message:b,severity:"ERROR"})}),f.reject(a)})}),ca.when.all(u).then(function(b){ca.each(n,function(a,b){ca.each(b.registeredLists,function(){this.render({resetItemModes:!0,resetPagination:this.options&&this.options.alwaysResetPagination,changedRows:v[b.id],destroyDeletedRows:!0})})}),ca.each(b,function(a,b){ca.merge(x.insertResults,b.insertResults),ca.merge(x.updateResults,b.updateResults),ca.merge(x.deleteResults,b.deleteResults),!1===b.totalsuccess&&(x.totalsuccess=!1),w&&w.length&&(x.messages=ca.merge(x.messages,ca.map(w,function(a){return a.message})))}),a.events.publish("models.saved",[x]),k.resolve(x),h.callback&&h.callback(x)},function(b){var c=[];ca.each(b,function(){d(this)&&c.push(this)}),w&&w.length&&(x.messages=ca.merge(x.messages||[],ca.map(w,function(a){return a.message}))),a.events.publish("models.saved",[x]),k.reject(c)}).always(function(){if(e(r)){var a=[];ca.each(r,function(){this.handleSave(!this.hadErrors,x),this.hadErrors=!1}),ca.each(r,function(){var b=h.initiatorId;this.clearInlineErrors(),b&&this._GUID!==b||(this.handleMessages(w,{initiatorId:b}),a.push(this._GUID)),ca.each(w,function(){var c=this,d=c.model&&c.model.registeredFieldsByRowThenField[c.rowId];d&&!d[0]&&(d=[d]),d&&d.length&&ca.each(d,function(){var d=this,e=c.fields;e&&e.length?ca.each(e,function(){var b=this;ca.each(d,function(){var d=this;ca.each(d,function(){this.id===b.id&&(this.handleMessage(c),a.push(this._GUID))})})}):ca.each(d,function(c,d){var e=d[b];if(e){var f=e.editor,g=f.id();-1===a.indexOf(g)&&(f.handleMessages(w),a.push(g))}})})})})}})}else{var z=q.length>0,A={event:"models.saved",models:n,initiatorId:h.initiatorId};A.totalsuccess=!z,s&&!A.totalsuccess?e(t)&&ca.each(t,function(b,c){var d=a.$M(b).changes;ca.each(c,function(a,b){d[a]=b})}):e(t)&&(i={},ca.each(t,function(a,b){e(b)&&(i[a]||(i[a]=[]),ca.each(b,function(b){i[a].push(b)}))}),e(i)&&ca.each(i,function(b,c){a.$M(b).abandonRows(c,{notify:!1})})),z&&(A.messages=ca.map(q,function(a){return a.message}));var B={};ca.each(n,function(a,b){var c=(!s||s&&A.totalsuccess)&&e(t)&&e(t[a]),d=b.registeredEditors,f=b.registeredLists;b.isBeingSaved=!1,b.hasChanged=!!e(b.changes),d&&e(d)&&ca.each(d,function(a,b){b._GUID in r||(r[b._GUID]=b)}),c&&f&&e(f)&&ca.each(f,function(a,b){b._GUID in B||(B[b._GUID]=b)})}),e(r)&&ca.each(r,function(){this.handleSave(A.totalsuccess,A),h.initiatorId&&this._GUID!==h.initiatorId||this.handleMessages(q,A)}),z&&ca.each(q,function(){var a=this;ca.each(a.model.registeredFieldsByRowThenField[a.rowId],function(){var b=this;a.fields&&ca.each(a.fields,function(){var c=this;ca.each(b,function(){this.id===c.id&&this.handleMessage(a)})})})}),e(B)&&ca.each(B,function(){this.render({resetPagination:!0,resetItemModes:!0,destroyDeletedRows:!0})}),a.events.publish("models.saved",[A]),h.callback&&h.callback(A),k.resolve(A)}return k.promise()}function N(b,c){if(b){b instanceof Array||(b=[b]),c||(c={});var d,f={},g={};ca.each(b,function(a,b){if(!1===b.hasChanged)return!0;ca.each(b.registeredFields,function(a,b){b.messages=[]});var h,i={},j={},k=[];ca.each(b.changes,function(a){b.originals[a]||(a||"0"===a)&&k.push(b.getRowById(a))}),b.abandonRows(k,{notify:!1}),d=b.changes,b.changes={},ca.each(b.originals,function(a,c){var e=b.getRowById(a),f=b.record(a),g=d[a],h=j[a]={};f.isNew()?(ca.each(e,function(a){h[a]=""}),i[a]={}):(ca.each(g,function(a){a in c||(h[a]=undefined)}),ca.each(c,function(a,b){h[a]=b})),f.isMoribund()&&f.unmarkForDeletion()}),e(j)&&b.updateRows(j,{preventSetActive:!1,preventTrackChanges:!0}),h=ca.extend(!0,{},b.originals),b.originals=i,b.hasChanged=!1,b.evaluateFormulaFields({preventTrackChanges:!0}),b.notifyFieldsOfChange(h,c),b.registeredLists&&ca.each(b.registeredLists,function(){this._GUID in f||(f[this._GUID]=this)}),b.registeredEditors&&ca.each(b.registeredEditors,function(){this._GUID in g||(g[this._GUID]=this)})}),ca.each(f,function(a,b){b.render({resetItemModes:!0,resetPagination:this.options&&this.options.alwaysResetPagination,changedRows:d,destroyDeletedRows:!0})});var h={},i={event:"models.cancelled",models:h,initiatorId:c.initiatorId};return b.forEach(function(a){h[a.id]=a}),ca.each(g,function(a,b){b.handleCancel&&b.handleCancel(i)}),a.events.publish("models.cancelled",[i]),b}}function O(a,b,c){return c=c||{},ca.extend(c,{loadAllMetadata:!0}),S(a,b,c)}function P(a,b,c){return S(a,b,c)}function Q(a,b){return S(a,b,{syncOnly:!0})}function R(a,b){return S(a,b,{addOnly:!0})}function S(b,c,f){f=f||{};var g=ca.Deferred(),h={},i={},k={},l={},m=f.loadAllMetadata;if(ca.each(b,function(){var a=this,b=a.getDataSource(),c=b&&b.name||a.dataSourceName,d=f.syncOnly&&a.lastSyncTime;if(a.hasChanged)throw"Model '"+a.id+"' has unsaved changes. To update this model's data, you must first save or cancel the changes.";if(d){var e=a.getConditionByName("_sync",!1);if(!a.fieldsMap.IsDeleted){var g={id:"IsDeleted"};a.fields.push(g),a.fieldsMap.IsDeleted=g}e||(e={name:"_sync",type:"fieldvalue",field:"LastModifiedDate",inactive:!1,operator:"gte",encloseValueInQuotes:!1},a.addCondition(e)),a.setCondition(e,a.lastSyncTime),a.queryAllRows=!0}a.getConditionsWithDependencies().forEach(function(b){a.updateConditionValue(b)}),f.addOnly||(delete a.offsetPageNumber,delete a.offsetPageSize),a.isProcessing++,l[a.id]=++a.calloutIterator,m||(a.doQuery=!0),delete a.errors,h[c]||(h[c]=[],i[c]=b),h[c].push(a)}),e(h)){var n=[],o=[],p={},q={event:"models.loaded",models:p,initiatorId:f.initiatorId};ca.each(h,function(b,c){var e,g=ca.Deferred();n.push(g),a.loader.service.loadDataSourceAndDependencies(b).then(function(a){return e=a,e.load(c,f)}).always(function(){ca.each(c,function(a,b){b.isProcessing--})}).done(function(b){var d=b,e={};ca.each(d,function(b,d){var g,h=c[b],i=!1,j=f.syncOnly&&h.lastSyncTime,k=d.errors,m={pageComponent:f?f.pageComponent:aa};if(f.addOnly||h._invalidateDataIndices(),h.lastLoadTime=(new Date).getTime(),"function"==typeof h.lastSuccessfulCallout&&(h.lastSuccessfulCallout=h.lastSuccessfulCallout()),!(l[h.id]>h.lastSuccessfulCallout))return!0;if(h.lastSuccessfulCallout=l[h.id],k&&k.length&&(h.errors=k),f.loadAllMetadata||!h.hasMetadataLoaded()){if(h.hasMetadataLoaded()||(i=!0,h.setMetadataHasLoaded()),d.actions||delete d.actions,d.fields){var n={};d.fields&&d.fields.length&&ca.each(d.fields,function(a,b){b.id&&(n[b.id]=b)}),ca.each(h.fields,function(a,b){if(b.id){var c=n[b.id];c&&ca.extend(!0,c,b)}}),h.fields=d.fields,delete d.fields}ca.extend(h,d),h.initialize(m),i&&h.registerKeyPrefix(),h.loadAsync&&a.events.publish("models.loaded.async",[h]),g=h.data}else{if(h.isInitialized||h.initialize(m),j){var o=h.getConditionByName("_sync",!1),p=[];h.deactivateCondition(o),h.queryAllRows=!1,d.data.forEach(function(a){h.dataSourceTypeName===ga&&a.IsDeleted?h.removeRowById(h.getRowId(a)):p.push(a)}),g=h.adoptRows(p,{notify:!1})}else g=f.addOnly?h.adoptRows(d.data,{doAppend:!0,notify:!1}):h.data=d.data||[];h.isAggregate||(h._cloneRowsIfNeeded(f?f.pageComponent:aa),h._createDefaultRowIfNeeded(),B(h)),h.conditions&&d.conditions&&ca.each(h.conditions,function(a,b){var c=d.conditions[a];c&&(b.values=c.values),ca.extend(b,c)}),h._generateDataIndices(),h.canRetrieveMoreRows=d.canRetrieveMoreRows,h.recordsLimit=d.recordsLimit,h.lastSyncTime=d.lastSyncTime,h.debug=d.debug,h.soql=d.soql}h.doQuery=!0,e[b]=g}),ca.each(d,function(a){var b=c[a];if(b.evaluateFormulaFields({preventTrackChanges:!0,updatedRows:e[a]}),b.uiOnlyConditions){var d=function(a){return!a.inactive},f=b.uiOnlyConditions.filter(d);b.data=b.getRows(f)}}),e={},ca.each(c,function(a,b){b.lastLoadTime=(new Date).getTime()}),ca.each(c,function(a,b){p[b.id]=b,ca.each(b.getDependentConditions(),function(a,b){var c=I(a);c&&ca.each(b,function(a,b){c.updateConditionValue(b)})})});var h=[];ca.each(c,function(a,b){b.batchLabelModels&&ca.each(b.batchLabelModels,function(a,c){var d=c.getConditionByName("__reference_batch"),e={};ca.each(b.data,function(b,c){var d=c[a];(d||0===d)&&(e[d]=!0)}),0!==Object.keys(e).length&&(c.setCondition(d,ca.map(e,function(a,b){return b})),c.referenceFieldId=a,c.referenceModelId=b.id,h.push(c))})}),h.length?S(h).then(function(a){ca.each(a.models,function(a,b){var c=I(b.referenceModelId),d=c.getField(b.referenceFieldId);d.rel&&ca.each(c.data,function(a,c){var e=c[b.referenceFieldId];(e||0===e)&&(c[d.rel]=b.dataSource.getDataSourceType().getReferenceHandler().getRowFromReferenceValue(b,e,d))})}),g.resolve(q)},function(a){g.reject(a)}):g.resolve(q)}).fail(function(a){d(a)?o.push({message:a,severity:"ERROR"}):a instanceof Array&&ca.each(a,function(a,b){o.push({message:b,severity:"ERROR"})}),ca.each(c,function(){var a=this;a.registeredEditors&&ca.each(a.registeredEditors,function(a,b){b._GUID in k||(k[b._GUID]=b)})}),g.reject(a)})}),ca.settle(n).always(function(b){function h(a,b){var c,d=a.registeredEditors,f=a.errors;if(f&&f.length&&(c=ca.map(f,function(a){return{message:a,severity:"ERROR"}})),e(c))if(e(d)){var g=b.initiatorId;ca.each(d,function(){g&&this._GUID!==g||this.handleMessages(c,{initiatorId:g})})}else j(c,a)}var i=[];if(ca.each(b,function(a,b){b.success||i.push(b.results)}),i.length)return void function(a){var b,h=[],i=!1;ca.each(a,function(a,b){b instanceof Array?(ca.merge(h,b),i=!0):d(b)&&h.push(b)}),e(k)?ca.each(k,function(){
f.initiatorId&&this._GUID!==f.initiatorId||this.handleMessages(o,{initiatorId:f.initiatorId})}):j(h),b=!1===i&&1===h.length?h[0]:h,c&&c(b),g.reject(b)}(i);ca.each(p,function(a,b){var c=f.initiatorId,d=b.registeredItems,e=b.registeredFields,g=b.registeredLists,i=b.registeredEditors;d&&ca.each(d,function(){this.fields&&ca.each(this.fields,function(){f.addOnly||this.destroy()})}),e&&ca.each(e,function(){this.render&&this.render(),b.unregisterField(this)}),g&&ca.each(g,function(){this.render({doNotCache:!f.addOnly,initiatorId:c})}),i&&ca.each(i,function(a,b){b._GUID in k||(k[b._GUID]=b),b.clearMessages()}),h(b,{initiatorId:c})}),ca.each(k,function(a,b){b.handleDataRefresh&&b.handleDataRefresh({updatedModels:ca.map(p,function(a){return a})})}),a.events.publish("models.loaded",[q]),c&&c(q),g.resolve(q)})}return g.promise()}function T(b,c){c||(c={});var d={};ca.each(b,function(a,b){b.registeredFields&&ca.each(b.registeredFields,function(){b.unregisterField(this)}),b.registeredItems&&ca.each(b.registeredItems,function(){this.destroy()}),b.registeredLists&&ca.each(b.registeredLists,function(){this.render({doNotCache:!0})}),b.registeredEditors&&ca.each(b.registeredEditors,function(a,b){b._GUID in d||(d[b._GUID]=b)})}),ca.each(d,function(a,c){c.handleDataRefresh&&c.handleDataRefresh({updatedModels:b})});var e={},f={event:"models.loaded",models:e,initiatorId:c.initiatorId};ca.each(b,function(a,b){e[b.id]=b}),a.events.publish("models.loaded",[f])}function U(c,d){var e,f,g,i,j,k,n,o=this,p=d?d.getDataSourceType():null,q=a.page.getParameters(!!d&&d.getParentPageId());if(p&&p.setDefaultConditionState?p.setDefaultConditionState(o):(o.sourceType="fieldvalue",o.type="fieldvalue",o.operator="=",o.inactive=!1,o.encloseValueInQuotes=!0),c)if(c.jquery&&c.attr){if(n=c,f="false"!==n.attr("enclosevalueinquotes"),e=b().adjustValueBasedOnQuotedness,g=n.attr("sourcetype"),g&&g!==o.sourceType?o.sourceType=g:g=o.sourceType,j=n.attr("fieldmodel"),"fieldvalue"===g){if(o.field=n.attr("field"),k=n.attr("nosourcerowbehavior"),k&&(o.noSourceRowBehavior=k),j){o.fieldModel=j;var r,s=a.$M(j);s&&s.data&&s.data.length&&(r=s.data[0],o.fieldRow=s.getRowId(r))}}else"param"===g?o.sourceParam=n.attr("sourceparam"):"snippet"===g?o.sourceSnippet=n.attr("sourcesnippet"):"userinfo"===g?o.sourceUserInfoType=n.attr("sourceuserinfotype"):b().endsWith(g,"property")&&(o.sourceProperty=n.attr("sourceproperty"),j&&(o.fieldModel=j));o.operator=n.attr("operator")||"=",o.type=n.attr("type")||"fieldvalue",o.encloseValueInQuotes=f,o.value=e(n.attr("value"),f),o.state=n.attr("state"),o.inactive="true"===n.attr("inactive")||!1,o.mergeField=n.attr("mergefield"),i=o.type,ca.each(["name","fieldFunction","fieldTargetObjects","label","model","noValueBehavior","customCookie","units","locationSource","locationModel","latitudeField","longitudeField","locationNoValueBehavior","locationChangeBehavior","locationDelta"],function(a,b){l(o,b,n,b.toLowerCase())});var t=n.attr("row");if(t)try{t=parseInt(t,10)}catch(x){t=0}if(o.row=t,"userinfo"===i)o.userInfoType=n.attr("userinfotype"),o.mergeField=o.userInfoType||o.value,o.value=null;else if("modelmerge"===i)o.mergeField=n.attr("mergefield")||o.value,o.value=null;else if("multiple"===i){var u=o.values=[];n.children("values").first().children().each(function(){var a=b().getXML(this);a.length>h("value")?(a=b().decodeXML(a.substring(7,a.length-8)),u.push(e(a,f))):u.push("")})}else if("join"===i){o.joinObject=n.attr("joinobject"),o.joinField=n.attr("joinfield");var v=n.children("conditions"),w=n.children("condition");v.length&&(o.subConditions=ca.map(v.children(),function(a){return new U(ca(a),d)})),w.length&&(o.subConditions=ca.map(w,function(a){return new U(ca(a),d)})),o.subConditionLogic=m(n.attr("logic"),o.subConditions)}}else ca.extend(o,c);"param"===o.type?(o.value in q?o.value=q[o.value]:delete o.value,o.value||(o.value="","noquery"===o.noValueBehavior?d&&(d.doQuery=!1):"deactivate"===o.noValueBehavior&&(o.inactive=!0,o.originalInactive=!0)),o.originalValue=o.value,o.type="fieldvalue"):"fieldvalue"===o.type&&o.name in q&&(o.originalValue=o.value,o.value=q[o.name],o.inactive=!1),o.originalInactive===undefined&&(o.originalInactive=o.inactive),o.originalValue===undefined&&(o.originalValue=o.value)}function V(c){var d,e,f,g,i,j,k,n,o,q,r,s,t,u,v,w,x,y,z=c.xml,A=c.field||{},B=c.model,C=c.dataSourceType?c.dataSourceType:B?B.getDataSourceType():null,D="true"===z.attr("uionly")||C&&C.name===ha,E=C&&C.prop("runtime.metadataSource"),F="local"===E,G=F||"hybrid"===E,H="true"===z.attr("overridemetadata"),I=z.attr("readonly");if(f=A.id=b().escapeSingleQuotes(z.attr("id")),l(A,"targetObjects",z,"targetobjects"),p(A,"name",z,"name"),p(A,"function",z,"function"),l(A,"type",z,"type"),p(A,"orderByClause",z,"orderby"),"true"===z.attr("sortable")&&(A.sortable=!0),"false"===z.attr("query")&&(A.query=!1),(D||G)&&(A.accessible=!0),D&&(A.uiOnly=!0),H&&(A.overrideMetadata=!0),(H||D||G)&&(l(A,"displaytype",z,"displaytype"),l(A,"defaultvaluetype",z,"defaultvaluetype"),l(A,"mergefield",z,"mergefield"),l(A,"model",z,"model"),l(A,"userinfotype",z,"userinfotype"),z.attr("label")&&(A.label=z.attr("label")),z.attr("helptext")&&(A.inlineHelpText=z.attr("helptext")),"true"===z.attr("required")&&(A.required=!0),z.attr("placeholder")&&(A.placeholder=z.attr("placeholder")),A.createable="false"!==z.attr("createable"),A.editable="false"!==z.attr("editable"),"true"===I&&(A.createable=A.editable=!1),g=A.displaytype,g===ta&&(g=A.displaytype=z.attr("returntype"),A.calculated=!0,D&&(A.createable=A.editable=!1,z.attr("readonly","true")),q="formula",r=z.children(q).first(),s=r&&r.length?b().getXML(r.get(0)):"",s=s.length>q.length+3?b().decodeXML(s.substring(q.length+2,s.length-q.length-3)):null,A.formula=s),g===ka||g===la||g===ma?(z.attr("picklistsource")&&(A.picklistSource=z.attr("picklistsource")),z.attr("picklistmodel")&&(A.picklistSourceModel=z.attr("picklistmodel")),z.attr("snippet")&&(A.picklistSourceSnippet=z.attr("snippet")),z.attr("entryvalue")&&(A.picklistEntryValue=z.attr("entryvalue")),z.attr("entrylabel")&&(A.picklistEntryLabel=z.attr("entrylabel")),z.attr("limitentries")&&(A.limitEntries="true"===z.attr("limitentries")),k=z.children("picklistentries").children(),k.length&&(A.picklistEntries=ca.map(k,function(a){var b=ca(a),c={value:b.attr("value"),label:b.attr("label"),defaultValue:"true"===(b.attr("defaultValue")||"false"),active:!0};return"true"===b.attr("disabled")&&(c.disabled=!0),c}))):ca.inArray(g,[na,oa,pa])>-1?(i=z.attr("precision"),null===i&&D?A.precision=8:null!==i&&(A.precision=parseInt(i,10)),j=z.attr("scale"),null===j&&D?A.scale=2:null!==j&&(A.scale=parseInt(j,10))):g===qa?(n=z.attr("digits"),null===n&&D?A.digits=8:null!==n&&(A.digits=parseInt(n,10))):g===sa||g===ra?(o=z.attr("length"),null===o||""===o||o===undefined?D&&(A.length=255):A.length=parseInt(o,10)):g===ja&&(d=a.dataSource.getDataSourceFromXML(z),e=d.getDataSourceType(),A.dataSourceName=d.name,e&&e.getReferenceHandler&&e.getReferenceHandler().getMetadataHandler(z,A,B,f,D)),l(A,"defaultValue",z,"defaultValue"),x=A.enclosedInQuotes="false"!==z.attr("enclosevalueinquotes"),y=A.defaultValues=[],z.children("values").first().children().each(function(){var a=b().getXML(this);a.length>h("value")?(a=b().decodeXML(a.substring(7,a.length-8)),y.push(b().adjustValueBasedOnQuotedness(a,x))):y.push("")})),-1!==ca.inArray(A.type,[Ca,Da])&&(t=z.children("fields").first(),w=z.children("conditions").first(),t.length>0&&(u=A.subFields=[],t.children("field").each(function(){var a=ca(this);u.push(new V({xml:a,field:c.field,model:c.model,dataSourceType:c.dataSourceType}))})),A.type===Ca)){if((v=z.attr("limit"))||"0"===v)try{A.recordsLimit=parseInt(v,10),A.recordsLimit&&A.recordsLimit<1&&(A.recordsLimit=1)}catch(J){}A.subConditions=ca.map(w.children(),function(a){return new U(ca(a),B)}),A.subConditionLogic=m(w.attr("logic"),A.subConditions)}return A}function W(a){var b,c;a&&(a.jquery?(b=a.attr("type"),c={verb:a.attr("verb"),endpoint:a.attr("endpoint"),type:b,pathToContent:a.attr("pathtocontent"),scopes:a.attr("scopes"),sendChanges:a.attr("sendchanges"),successIf:a.attr("successif"),successField:a.attr("successfield"),successValue:a.attr("successvalue"),isBatch:"true"===a.attr("batch")},"insert"===b&&(c.insertResponse=a.attr("insertresponse"),c.createdRecordIdLocation=a.attr("createdrecordidlocation")),c.sendChanges&&(c.changeMapping=a.attr("changemapping"),c.changeMappingPrefix=a.attr("changemappingprefix"),"custompayloadinbody"===c.sendChanges&&(c.payloadSnippet=a.attr("payloadsnippet"),c.contentType=a.attr("contenttype")))):ca.isPlainObject(a)&&(c=a),ca.extend(this,c))}function X(a,c,d){this._model=a,this._row=c||{},c[Ha]=this,b().isUndefined(d)||(this[Ga]=d)}function Y(c,e){var f=this;if(e&&ca.extend(f,e),c)if(d(c))try{o({model:f,xml:b().makeXMLDoc(c)})}catch(g){ca(document.body).one("pageload",function(){a.component.getByType("skuidpage")[0].addProblem("Unable to create Model: invalid Model XML string provided to Model constructor. "+g)})}else c.jquery?o({model:f,xml:c}):ca.extend(f,c);f.id||(f.id=a.utils.generateUniqueId()),f.conditions||(f.conditions=[]),f.fields||(f.fields=[]),f.data||(f.data=[]),f.changes={},f.originals={},f.registeredFields={},f.registeredFieldsByRowThenField={},f.registeredItems={},f.registeredItemsByRow={},f.registeredLists={},f.registeredEditors={},f.hasChanged=!1,"preventUnloadIfUnsavedChanges"in f||(f.preventUnloadIfUnsavedChanges=!0),f.isProcessing=0,f.calloutIterator=0,f.lastSuccessfulCallout=0,f.events={},f.extensions||(f.extensions={}),f.recordsMap={},i(f)}function Z(a){var b=a.children("actions"),c=a.children("fields").first().children("field"),d=a.children("events").first().children("event"),e=a.children("conditions").first().children("condition"),f={};return b.length&&(f.actions=b),c.length&&(f.fields=ca.map(c,function(a){return a.textContent})),d.length&&(f.events=ca.map(d,function(a){return a.textContent})),e.length&&(f.conditions=ca.map(e,function(a){return a.textContent})),f}function $(a,b){var c,e,f=b[0],g={};if(b.length<2)return!1;d(b[1])?(e={},e[b[1]]=b[2],c=b[3]):(e=b[1],c=b[2]),g[a.getRowId(f)]=e,this.updates=g,this.options=c}function _(a,b){this.list=a,this.map=b}var aa,ba=a.model||(a.model={}),ca=a.$,da=a.time,ea=function(){return a.platform.getDefaultDataSourceName()},fa=a.constants,ga=fa.SALESFORCE,ha="Ui-Only",ia=fa.DISPLAY_TYPES,ja=ia.REFERENCE,ka=ia.PICKLIST,la=ia.MULTIPICKLIST,ma=ia.COMBOBOX,na=ia.DOUBLE,oa=ia.CURRENCY,pa=ia.PERCENT,qa=ia.INTEGER,ra=ia.TEXT,sa=ia.TEXTAREA,ta=ia.FORMULA,ua=ia.DATE,va=ia.DATETIME,wa=ia.BOOLEAN,xa=ia.UUID,ya="undefined",za="number",Aa="string",Ba="boolean",Ca="childRelationship",Da="array",Ea="_eventSubscriptionsActions",Fa="_eventSubscriptionsMetadata",Ga="__id",Ha="__skuid_record__",Ia=1,Ja={},Ka={},La={};X.prototype={id:function(){return this.getId()},getId:function(){if(this.hasOwnProperty(Ga))return this[Ga];var a=this.model(),c=this.isNew()?b().generateUniqueId():a.getDataSource().getRowId(this.row(),a);return this.setId(c),c},setId:function(a){return this[Ga]=a,this},name:function(){return this.model().getDataSource().getRowName(this.row(),this.model())},model:function(){return this._model},row:function(){return this._row},getRow:function(){return this._row},setRow:function(a){return this._row=a,a[Ha]=this,this},isNew:function(){return!0===this.__new},isClone:function(){return!0===this.__cloned},isMoribund:function(){return this.isMarkedForDeletion()},isMarkedForDeletion:function(){return!0===this.__deleted},markForDeletion:function(){return this.__deleted=!0,this},unmarkForDeletion:function(){return delete this.__deleted,this},markNew:function(){return this.__new=!0,this},markCloned:function(){return this.__cloned=!0,this},markSaved:function(){var a=this;return["__new","__cloned","__deleted"].forEach(function(b){delete a[b]}),a},get:function(a){var c,d=this._row,e=b().getObjectProperty;return a?e(d,a):(c={},ca.each(d,function(a,b){a!==Ha&&(c[a]=b)}),c)},set:function(){return 1===arguments.length?ca.each(arguments[0],function(a,c){b().setObjectProperty(this._row,a,c)}):2===arguments.length&&b().setObjectProperty(this._row,arguments[0],arguments[1]),this}},_.prototype={indexOf:function(a){var b=-1;return ca.each(this.list,function(c,d){if(d.fieldName&&d.fieldName===a||d.fieldId===a)return b=c,!1}),b},size:function(){return this.list.length}},Y.prototype={addPageProblems:function(a){return j(a,this)},getDataSource:function(){return i(this)},getDataSourceType:function(){var a=this.getDataSource();return a&&a.getDataSourceType()},setParentPageId:function(a){var b=this;return b._parentPageId=a,b},getParentPage:function(){return a.$C(this._parentPageId)},getParentPageId:function(){return this._parentPageId},hasMetadataLoaded:function(){return!this.needsMetadataLoad},setMetadataHasLoaded:function(){return this.needsMetadataLoad=!1,this},isSingleRow:function(){var a=this,b=!1;return a.conditions&&a.conditions.length&&ca.each(a.conditions,function(a,c){if(c.field&&"id"===c.field.toLowerCase()&&c.type&&"param"===c.type)return b=!0,!1}),b},getField:function(a,b){var c,d,e=this.fieldsMap,f=e;return f&&!(f=a in e&&e[a])&&b&&b in e&&(c=e[b],(d=c&&c.type===Ca?c.subFieldsMap:null)&&a in d&&(f=d[a])),f},getFieldValue:function(a,c,d){if(!a)return null;var e,f=this,g=b().getObjectProperty(a,c);return g===undefined&&"Id"===c&&(e=f.getRecordForRow(a))&&(g=e.id()),d?g:b().encodeHTML(g)},getFieldValues:function(a,b,c){var d=[],e=this;return ca.each(b,function(){d.push(e.getFieldValue(a,this,c))}),d},getFirstRow:function(){return this.data[0]},getRowById:function(a){return a in this.dataMap&&this.dataMap[a]},getNameField:function(){var a=this.getDataSource();if(a.getNameField)return a.getNameField(this)},getNameFieldValueForRow:function(a,c){var d,e=this,f=e.objectName,g=e.getNameField();return e.dataSourceTypeName===ga&&f&&-1!==ca.inArray(f,["Lead","User","Contact"])?d=b().mergeAsText("row","{{#Name}}{{{Name}}}{{/Name}}{{^Name}}{{{FirstName}}} {{{LastName}}}{{/Name}}",{createFields:!1},e,a):g&&(d=e.getFieldValue(a,g,!0)),d&&!0!==c&&(d=b().encodeHTML(d)),d},load:function(a){return O([this],a)},updateData:function(a,b){return P([this],a,b)},getOverrideableFieldMetadata:function(a){var b,c,d;return!0===a.overrideMetadata&&(b=a.displaytype,c=["displaytype","defaultValue","label","inlineHelpText","idField","nameField","placeholder"],d={overrideMetadata:!0},!0===a.calculated&&a.formula!==undefined&&c.push("calculated","createable","editable","formula"),!1===a.createable&&c.push("createable"),!1===a.editable&&c.push("editable"),-1!==ca.inArray(b,[ka,la,ma])?c.push("picklistEntries"):-1!==ca.inArray(b,[na,oa,pa])?c.push("precision","scale"):b===qa?c.push("digits"):-1!==ca.inArray(b,[ra,sa,"STRING",ma,"ANYTYPE"])?c.push("length"):b===ja&&c.push("isNamePointing","relationshipName","referenceTo","rel","ref"),ca.each(c,function(b,c){var e=a[c];e!==undefined&&(d[c]=ca.isArray(e)?ca.extend(!0,[],e):e)})),d},sync:function(a){return Q([this],a)},getMoreData:function(a){return R([this],a)},loadNextOffsetPage:function(a){var b=this;if(b.canRetrieveMoreRows&&!b.isProcessing){if(b.offsetPageNumber&&b.offsetPageSize)b.offsetPageNumber++;else if(b.recordsLimit>2e3?b.offsetPageSize=2e3:b.offsetPageSize=b.recordsLimit||100,b.data.length>0){var c=b.offsetPageSize>0?Math.ceil(b.data.length/b.offsetPageSize):1;b.offsetPageNumber=c>1?c:2}else b.offsetPageNumber=1;b.getMoreData(function(){a&&a()})}},loadAllRemainingRecords:function(a){a=a||{};var b=this,c=a.batchSize||b.recordsLimit,d=function(e){if(b.canRetrieveMoreRows){var f=b.data.length;a.stepCallback&&a.stepCallback(f+1,f+c),a.batchSize&&(b.offsetSize=f,b.recordsLimit=c),b.loadNextOffsetPage(d)}else a.batchSize&&(delete b.offsetSize,b.recordsLimit=e),a.finishCallback&&a.finishCallback(b.data.length)};d(b.recordsLimit)},getRecords:function(){var a=this;return ca.map(a.data,function(b){return a.getRecordForRow(b)})},getRows:function(a,c){return b().filterRowsByConditions(this.data,a,c,this)},getRawRows:function(){var a=this;return a.getRows.apply(a,arguments).map(function(b){return a.getRecordForRow(b).get()})},adoptRow:function(a,b){var c=this.adoptRows([a],b);return c&&c.length?c[0]:null},adoptRows:function(a,b){b||(b={});var c=this,d=[];return ca.each(a,function(a,e){var f=c.getRowId(e),g=f&&c.getRowById(f);g?ca.extend(g,e):(g={},g=ca.extend(!0,g,e),b.doAppend?c.data.push(g):c.data.unshift(g),c.dataMap[f]=g,c.recordsMap[f]=new X(c,g,f)),d.push(g)}),!1!==b.notify&&c.notifyEditorsOfDataRefresh(),d},abandonRow:function(a){return this.abandonRows([a]),a},abandonRows:function(a,b){var c=this,d=c.changes,f=c.originals,g=c.registeredItemsByRow,h=c.registeredFieldsByRowThenField,i=[],j=!(b&&!1===b.notify);if(a&&a.length)return ca.each(a,function(a,b){var d=c._findRow(b);d&&i.push(d)}),i.length&&ca.each(i,function(a,b){var e=c.getRowId(b),i=ca.inArray(b,c.data),k=!!d&&d[e],l=!!f&&f[e];k&&delete d[e],l&&delete f[e],-1!=i&&(c.data.splice(i,1),delete c.dataMap[e],delete c.recordsMap[e]),j||c.registeredLists&&ca.each(c.registeredLists,function(){this.handleRowDeletion&&this.handleRowDeletion(e)}),e in g&&(ca.each(g[e],function(){c.unregisterItem(this)}),delete g[e]),e in h&&(ca.each(h[e],function(a,b){b.length&&ca.each(b,function(){c.unregisterField(this)})}),delete h[e])}),0===e(c.changes)&&(c.hasChanged=!1),j&&c.notifyEditorsOfDataRefresh(),a},emptyData:function(){var a=this,b=a.data;return a.data=[],a.changes={},a.originals={},a.hasChanged=!1,a._invalidateDataIndices(),a.notifyEditorsOfDataRefresh(),ca.each(a.registeredItemsByRow,function(b,c){ca.each(c,function(){a.unregisterItem(this)})}),a.registeredItemsByRow={},ca.each(a.registeredFieldsByRowThenField,function(b,c){ca.each(c,function(b,c){ca.each(c,function(){a.unregisterField(this)})})}),a.registeredFieldsByRowThenField={},b},abandonAllRows:function(){return this.emptyData()},record:function(a){var c=b().isObject(a)?this.getRowId(a):a;return this.getRecordById(c)},getRecordById:function(a){return this.recordsMap[a]},createRow:function(c){function d(c){if(!c.inactive&&c.field&&"null"!=c.value){var d,e=g.getField(c.field),f=e?e.displaytype:null,h=c.operator||"=";if(e&&e.createable&&("="===h||"starts with"===h))if(g.updateConditionValue(c),d=c.value,"="===h&&f===ja){var j=e.rel,k=b().getNameField(e.ref),l=c.nameFieldValue||!1;if(l||"RecordType"!==e.ref||ca.each(g.recordTypeInfos,function(){if(this.recordTypeId===d)return l=this.name,!1}),!l){if(c.model){var m=a.$M(c.model),o=m.getDataSourceType().name===ga;m&&m.data.length&&ca.each(m.data,function(a,b){if(d===m.getRowId(b)||o&&d===b.Id15){var c=m.getRecordForRow(b);return l=c?c.get():b,!1}})}if(!l){var p=b().getFieldReference(c.field,e);ca.each(n,function(a,b){b===c||b.field!==p||b.inactive||!b.value||c.operator&&"="!==c.operator||(l=b.value)})}}var q={};if(l){var s;"object"==typeof l?s=l:(s={},s[k]=l),q[j]=s}q[c.field]=d,g.updateRow(i,q)}else{if(d=r(d,f),b().startsWith(f,ua)&&!d)return!0;g.updateRow(i,c.field,d)}}}c||(c={});var e,f,g=this,h=g.hasChanged,i={},j={},k=g.dataSourceTypeName===ga;if(c.editModeForNewItems&&(j.editModeForNewItems=!0),g.hasChanged=!0,e=new X(g,i).markNew(),f=e.id(),c.doAppend?g.data.push(i):g.data.unshift(i),g.dataMap&&(g.dataMap[f]=i),g.recordsMap&&(g.recordsMap[f]=e),k&&(i.Id=f),"ignoreDefaults"in c==!1||!0!==c.ignoreDefaults){var l,m,n=[],o=c.additionalConditions,p=g.recordTypeInfos&&g.recordTypeInfos.length>1,q=[];if(["conditions","uiOnlyConditions"].forEach(function(a){var b=g[a];b&&b.length&&b.forEach(function(a){n.push(a)})}),o&&o.length&&ca.each(o,function(a,b){n.push(b)}),k){if(p&&ca.each(g.recordTypeInfos,function(){if(this.isDefaultRecordTypeMapping&&!this.isMaster)return l=this.recordTypeId,!1}),g.createable&&n&&ca.each(n,function(a,b){!b.inactive&&b.field&&"RecordTypeId"===b.field&&b.value&&"null"!=b.value&&b.value.length>=15&&(l=b.value,q.unshift(a))}),l){var s=l.substring(0,15),t={};ca.each(g.recordTypeInfos,function(){if(this.recordTypeId.substring(0,15)===s)return m=this,l=this.recordTypeId,!1}),t.RecordTypeId=l,m&&(t.RecordType={Name:m.name}),g.updateRow(i,t,{preventSetActive:!0})}q.length&&ca.each(q,function(){n.splice(this,1)})}g.fields&&ca.each(g.fields,function(a,b){b.createable&&g.getDefaultValue(b,g,l)&&g.updateRow(i,b.id,b.evaluatedDefaultValue,{preventSetActive:!0})}),n&&ca.each(n,function(a,b){d(b)})}f in g.changes||(g.changes[f]={}),g.evaluateFormulaFields({updatedRows:[i],updates:g.changes[f]}),g.registeredLists&&ca.each(g.registeredLists,function(){c.initiatorId&&this._GUID===c.initiatorId||this.handleNewRow(i,j)}),g.notifyEditorsOfChange({hadPriorChanges:h,changes:g.changes[f]});var u={modelId:g.id,rowId:f,row:i,initiatorId:c?c.initiatorId:null,event:"row.created"};return ca.extend(u,j),a.events.publish("row.created",[u]),i},updateRow:function(){var a=new $(this,arguments),b=this.updateRows(a.updates,a.options);return b&&b.length?b[0]:b},updateRows:function(a,c){var d,f,g,h,i=this,j=i.hasChanged,k=[],l=b().setObjectProperty;return!!a&&(c||(c={}),c.preventTrackChanges||(c.preventTrackChanges=!1),f=c.notifyFields,typeof f===ya&&(f=!0),g=c.notify,typeof g===ya&&(g=!0),ca.each(a,function(a,e){var f,g,h=i.getRowById(a),j=i.isNewRow(h);if(!h||!e)return!0;ca.each(e,function(m,n){var o,p,q,s=i.getField(m),t=s&&s.displaytype,u=s&&s.id&&b().isString(s.id),v=(!u||!!c._ignoreMetadata||(j?s.createable:s.editable))&&!c.preventTrackChanges,w=t===ja,x=w&&!n,y=w&&b().getReferenceFieldRelationshipName(m),z=i.getFieldValue(h,m,!0);if(p=t?r(n,t):n,(z===p||p!==p)&&!c.alwaysAddChanges)return!0;if(w&&!x&&e[y]===undefined){if(ca.each(i.data,function(){if(this[m]&&(this[m]===p||this[m].length&&this[m].length>=15&&this[m].substr(0,15)===p)&&i.getFieldValue(this,y))return o=i.getFieldValue(this,y,!0),!1}),!o&&i.dataSourceTypeName===ga){var A=s.referenceTo,B=[],C=[];A&&A.length&&ca.each(A,function(){B.push(this.keyPrefix),C.push(this.objectName)}),B.length>1&&p.length>=15&&(B=[p.substring(0,3)]),ca.each(B,function(a,b){ca.each(ba.getModelsByKeyPrefix(b)||[],function(){var a=this,b=a.getDataSourceType().name===ga;if(a.data&&a.data.forEach(function(c){if(a.getRowId(c)===p||b&&c.Id15&&c.Id15===p){var d=a.getRecordForRow(c);return o=d?d.get():c,!1}}),o)return!1})})}if(!o){var D=i.dataSource&&i.dataSource.name;ca.each(K(D),function(){var a=this,b=[];if(a!==i)return ca.each(this.fields,function(){var a=this,c=a.referenceTo;c&&c.length&&ca.each(C,function(d,e){ca.each(c,function(){e===this.objectName&&b.push(a)})})}),b.length&&ca.each(a.getRows(),function(){var c=this;if(ca.each(b,function(){var b=this;if(a.getFieldValue(c,b.id,!0)===p)return o=a.getFieldValue(c,b.rel,!0),!1}),o)return!1}),!o&&void 0})}}v&&(m&&(f||(d||(d={}),d[a]={},f=i.changes[a],d[a].__hadPriorChanges=!!f,f||(f=i.changes[a]={})),q=p,l(f,m,q),l(d[a],m,q),x?delete f[y]:!0===w&&o&&(l(f,y,o),l(d[a],y,o))),i.hasChanged||c.preventSetActive||(i.hasChanged=!0),j||(g||(g=i.originals[a])||(g=i.originals[a]={}),g.hasOwnProperty(m)||(l(g,m,i.getFieldValue(h,m,!0)),x&&l(g,y,i.getFieldValue(h,y,!0))))),l(h,m,p),x?delete h[y]:!0===w&&o&&l(h,y,o),k.push(h)})}),d&&(h=!1,ca.each(d,function(a,b){if(b&&e(b)>1)return h=!0,!1}),h&&(i.evaluateFormulaFields({updatedRows:k,updates:a,preventTrackChanges:c.preventTrackChangesSecondTime}),!1!==g&&i.notifyEditorsOfChange({hadPriorChanges:j,changes:d}),!1!==f&&!1!==g&&i.notifyFieldsOfChange(d,{initiatorId:c.initiatorId,hadPriorChanges:j}))),k)},notifyFieldsOfChange:function(b,c){var d=this,e=d.registeredFieldsByRowThenField;c=c||{},ca.each(b,function(b,f){var g=f.__hadPriorChanges;delete f.__hadPriorChanges,ca.each(f,function(a,d){b in e&&a in e[b]&&ca.each(e[b][a],function(){c.initiatorId&&this._GUID===c.initiatorId||this.handleChange&&this.handleChange(d,a)})});a.events.publish("row.updated",[{event:"row.updated",modelId:d.id,rowId:b,row:d.getRowById(b),updates:f,rowHadPriorChanges:g,modelHadPriorChanges:c.hadPriorChanges,initiatorId:c?c.initiatorId:null}])})},_findRow:function(a){var b,c=this,d=typeof a;return"object"===d?a:(b=c.getRowById(a),b||d!==za||(b=c.data[a]),b)},deleteRows:function(b,c){c||(c={});var d=this,e={},f=d.hasChanged,g=!1!==c.notify;return b||(b=d.data),b.length&&(d.hasChanged=!0,ca.each(b,function(a,b){if(b=d._findRow(b)){var f=d.getRowId(b),h=d.changes[f],i=d.record(f);h||(d.changes[f]={},h=d.changes[f]),i.markForDeletion(),i.isNew()||d.originals[f]||(d.originals[f]={},d.originals[f]),f in d.registeredItemsByRow&&ca.each(d.registeredItemsByRow[f],function(){c&&c.initiatorId&&this._GUID===c.initiatorId||this.handleMarkRowForDeletion&&this.handleMarkRowForDeletion(b)}),g&&(e[f]={},e[f].__deleted=!0,e[f].__notdeleted=!1)}}),g&&(d.notifyEditorsOfChange({hadPriorChanges:f,changes:e}),ca.each(e,function(b){a.events.publish("row.deleted",[{event:"row.deleted",modelId:d.id,rowId:b,row:d.getRowById(b),initiatorId:c?c.initiatorId:null,modelHadPriorChanges:f}])}))),d},deleteRow:function(a,b){return this.deleteRows([a],b),this},undeleteRows:function(b,c){c||(c={});var d=this,e={},f=d.hasChanged,g=!1!==c.notify;b||(b=d.data),b.length&&(d.hasChanged=!0,ca.each(b,function(a,b){if(b=d._findRow(b)){var f=d.getRowId(b);d.record(f).unmarkForDeletion(),f in d.registeredItemsByRow&&ca.each(d.registeredItemsByRow[f],function(){c.initiatorId&&this._GUID===c.initiatorId||this.handleUnmarkRowForDeletion&&this.handleUnmarkRowForDeletion(b)}),g&&(e[f]={},e[f].__deleted=!1,e[f].__notdeleted=!0)}}),g&&(d.notifyEditorsOfChange({hadPriorChanges:f,changes:e}),ca.each(e,function(b){a.events.publish("row.undeleted",[{event:"row.undeleted",modelId:d.id,rowId:b,row:d.getRowById(b),initiatorId:c?c.initiatorId:null,modelHadPriorChanges:f}])})))},undeleteRow:function(a,b){return this.undeleteRows([a],b)},removeRowById:function(a){if(a||0===a)return this.abandonRow(this.getRowById(a))},validateRequiredFields:function(){var a=[];return ca.each(this.registeredLists,function(){a=a.concat(this.validateRequiredFields())}),a},getNewId:function(){var a=this.getDataSource();return a&&a.getNewId?a.getNewId():x()},save:function(a){return M([this],a)},cancel:function(a){return N([this],a),this},notifyEditorsOfChange:function(a){this.registeredEditors&&ca.each(this.registeredEditors,function(){this.handleChange&&this.handleChange(a)})},getConditionCookieName:function(a){return f(this,a)},setCondition:function(b,c,e){if(b){var f=!1,h=this,i="",j={event:"condition.valueChanged",conditionName:b.name,modelId:h.id,newValue:"",newValues:[],oldValue:"",oldValues:[]};b.inactive=!1,"modelmerge"===b.type&&(b.type="fieldvalue"),g(b.operator)&&(typeof c!==ya&&(c instanceof Array?(f=!0,b.values=c):d(c)&&-1!=c.indexOf(";")?b.values=c.split(";"):b.values=[c]),j.newValues=b.values),f||(b.value=c,j.newValue=c),i=b.originalValue,i instanceof Array?(j.oldValue="",j.oldValues=i):(j.oldValue=i,j.oldValues=[]),e&&b.name&&this.getPersonalizationService().setCondition({name:b.name,value:c}),a.events.publish("condition.valueChanged",[j])}},deactivateCondition:function(b,c){b&&(b.inactive=!0,b.value=b.originalValue,g(b.operator)&&(b.originalValue?-1!=b.originalValue.indexOf(";")?b.values=b.originalValue.split(";"):b.values=[b.originalValue]:b.values&&b.values.length||(b.values=[])),c&&b.name&&this.getPersonalizationService().setCondition({name:b.name,value:"-off-"}),a.events.publish("condition.deactivated",[{event:"condition.deactivated",conditionName:b.name,modelId:this.id}]))},deactivateFilterableConditions:function(a){var b=this;b&&b.conditions&&b.conditions.length&&ca.each(b.conditions,function(c,d){b.isFilterableCondition(d)&&b.deactivateCondition(d,a)})},isFilterableCondition:function(a){return a.state&&-1!==a.state.indexOf("filter")},activateCondition:function(b,c){b&&(b.inactive=!1,c&&b.name&&this.getPersonalizationService().setCondition({name:b.name,value:"-on-"}),a.events.publish("condition.activated",[{event:"condition.activated",conditionName:b.name,modelId:this.id}]))},resetCondition:function(b,c){if(b){var d="",e={event:"condition.reset",conditionName:b.name,modelId:this.id,newValue:"",newValues:[],oldValue:"",oldValues:[],isActive:!b.inactive,wasActive:!b.originalInactive};b.inactive=b.originalInactive,b.value=b.originalValue,g(b.operator)&&(b.originalValue?-1!=b.originalValue.indexOf(";")?b.values=b.originalValue.split(";"):b.values=[b.originalValue]:b.values&&b.values.length||(b.values=[]),e.newValues=b.values),d=b.originalValue,d instanceof Array?(e.oldValue="",e.oldValues=d):(e.oldValue=d,e.oldValues=[]),c&&b.name&&this.getPersonalizationService().resetCondition({name:b.name}),a.events.publish("condition.reset",[e])}},getConditionValueResult:function(c){var d,e,f=c.noValueBehavior||(-1!==ca.inArray(c.type,["param","multiple"])?"":"deactivate"),g=this,h={},i=b().startsWith(c.state,"filterable")&&c.name,j=c.value;if("userinfo"===c.type)e=b().getUserInfoPropValue(c.userInfoType);else if("modelmerge"===c.type){var k=I(c.model),l=k.getFirstRow();l&&(e=k.getFieldValue(l,c.mergeField,!0))}else if("blank"===c.type)e=null;else if("param"===c.type){var m=a.page.getParameters(g?g.getParentPageId():null),n=c.valueParamName;c.value&&c.value in m?(e=m[c.value],c.valueParamName=c.value):n&&n in m&&(e=m[n])}else e=c.value;return i&&typeof j!==ya&&j!==e&&(e=j),d=e||!1===e||0===e||null===e,d?h.value=c.value=e:c.values&&c.values.length?h.values=c.values:"noquery"===f?(g&&(g.doQuery=!1),h.status="noquery"):"deactivate"===f?(c.originalInactive&&(c.originalInactive=c.inactive),c.inactive=!0,h.value=c.value=null,h.status="deactivate"):h.value=c.value="",h},getConditionValue:function(a){return this.getConditionValueResult(a).value},updateConditionValue:function(a){var b,c=a.type,d=a.mergeField,e=I(a.model),f=e&&e.data,h=a.row,i=this,j=!1;if("modelmerge"===c&&d&&f&&!a.inactive)if(g(a.operator))if(b=a.values,a.values=ca.map(f,function(a){return e.getFieldValue(a,d,!0)}),b&&b instanceof Array){if(b)if(b.length!==a.values.length)j=!0;else if(b.length){var k={};b.forEach(function(a){k[a]=1}),ca.each(a.values,function(a,b){if(!k.hasOwnProperty(b))return j=!0,!1})}}else j=!0;else(!h||h<0||h>=f.length)&&(a.row=0),b=e.getFieldValue(f[a.row],d,!0),a.value!==b&&(a.value=b,j=!0);if("userlocation"===a.locationSource&&!a.inactive&&!a.latitudeValue){var l=a.locationDelta?parseInt(a.locationDelta,10):100,m={enableHighAccuracy:!0,timeout:15e3,maximumAge:36e5};navigator.geolocation?(ca.blockUI({message:"Determining your current location...",onOverlayClick:ca.unblockUI}),navigator.geolocation[("false"===a.locationChangeBehavior?"getCurrent":"watch")+"Position"](function(b){ca.unblockUI();var c,d,e=b.coords,f=e.latitude,g=e.longitude;c=a.latitudeValue,d=a.longitudeValue,i.isProcessing||c&&d&&!(c&&d&&C(f,g,c,d)>=l)||(a.latitudeValue=f,a.longitudeValue=g,j=f!==c||g!==d,i.updateData())},function(b){ca.blockUI({message:"Unable to determine your current location: "+b.message,timeout:2e3}),"noquery"===a.locationNoValueBehavior?i.emptyData():(a.inactive=!0,i.updateData())},m)):ca.blockUI({message:"Your browser does not support GeoLocation. Some features may not work.",timeout:2e3})}return j},getDefaultValue:function(c,e,f){var g,h,i,j,k,l=b().isUndefined,m=c.defaultValue,n=c.defaultValues,o=l(m),p=c.displaytype,q=e.recordTypeInfos&&e.recordTypeInfos.length>1,r=c.mergefield,s=I(c.model),t=s&&s.data,u=c.row,v=c.defaultvaluetype,w="fieldvalue"===v||l(v);return"modelmerge"===v&&r&&t&&t.length?("MULTIPICKLIST"===c.displaytype?(g=[],ca.each(t,function(a,b){g.push(s.getFieldValue(b,r,!0))}),k=g.join(";")):((!u||u<0||u>=t.length)&&(c.row=0),k=s.getFieldValue(t[c.row],r,!0)),null!==k&&c.evaluatedDefaultValue!==k&&(i=k)):!q||!b().endsWith(p,ka)||c.overrideMetadata&&m||(j=b().getPicklistEntriesValidForRecordTypes(e.objectName,c.id,[f]))&&j.length&&(ca.each(j,function(a,b){if("true"===b.defaultValue)return h=b.value,!1}),h&&0!==h&&"null"!=h&&(p===wa&&(h=!0===h||"true"===h),i=h)),
p===xa&&!i&&w&&o?i=b().rfc4122v4GUID():!w||!l(i)||o||d(m)&&!m?"userinfo"!==v||l(c.userinfotype)?"param"!==v||o?"multiple"===v&&!l(n)&&n.length&&(i=n.join(";")):i=a.page.params[m.toLowerCase()]:i=b().getUserInfoPropValue(c.userinfotype):i=m,c.evaluatedDefaultValue=i,!l(c.evaluatedDefaultValue)},registerEditor:function(a){s(a,this.registeredEditors)},unregisterEditor:function(a){t(a,this.registeredEditors)},registerList:function(a){s(a,this.registeredLists)},unregisterList:function(a){t(a,this.registeredLists)},registerItem:function(a){s(a,this.registeredItems);var b,c=this.registeredItemsByRow,d=a.row;c&&d&&(b=this.getRowId(d),b in c||(c[b]={}),c[b][a._GUID]=a)},unregisterItem:function(a){t(a,this.registeredItems);var b=this.registeredItemsByRow,c=a?a.row:0,d=c?this.getRowId(c):0,f=b[d];b&&f&&a._GUID in f&&(delete f[a._GUID],e(f)||delete b[d])},registerField:function(a,b){s(a,this.registeredFields);var c=this.registeredFieldsByRowThenField,d=b||a.id,e=a.row,f=e?this.getRowId(e):0;if(c&&e&&d&&f){f in c||(c[f]={});var g=c[f];d in g||(g[d]={}),g[d][a._GUID]=a}},unregisterField:function(a,b){if(typeof a===Aa&&(a=this.registeredFields[a]),a){t(a,this.registeredFields);var c,d,f=this.registeredFieldsByRowThenField,g=[],h=a._GUID,i=a.row,j=i?this.getRowId(i):0;f&&j&&(c=f[j])&&(b&&b.length&&ca.each(b,function(){g.push(this)}),a.id&&g.push(a.id),ca.each(g,function(a,b){(d=c[b])&&h in d&&(delete d[h],e(d)||delete c[b])}),e(c)||delete f[j])}},mergeRow:function(a,c,d){return b().merge("row",c,d,this,a)},getRowMergeResult:function(a,c,d){return b().getMergeResult("row",c,d,this,a)},mergeModel:function(a,c){return b().merge("model",a,c,this)},getMergeResult:function(a,c){return b().getMergeResult("model",a,c,this)},getOrderObject:function(){var a=this,b=(a.orderByClause||"").split(","),c=[],d={};return ca.each(b,function(){var b=ca.trim(this);if(b){var e,f,g,h,i=b.split(" "),j=i[0],k={suffix:i.length>1?i.slice(1).join(" "):"ASC NULLS LAST"};-1!==j.indexOf("(")?(h=j.split("("),g=h[0],e=h[1].split(")")[0],k.fieldId=e,g&&(k.fieldFunction=g),ca.each(a.fields,function(){if(this.name&&this.id===e&&this["function"]===g)return f=this.name,!1}),f&&(k.fieldName=f)):a.isAggregate?(e=j,ca.each(a.fields,function(){if(this.name&&this.id===e)return f=this.name,!1}),k.fieldId=e,f&&(k.fieldName=f)):(k.fieldId=j,f=j),c.push(k),d[f]=k}}),new _(c,d)},toggleOrdering:function(a,c){var e,f,g=this,h=g.getOrderObject(),i="",j=d(a),l=j?a:a.id,m=j?a:a.name?a.name:l,n=j?null:a["function"],o=g.getField(m);return o.displaytype===ja&&(l=b().getFieldReference(l,o),m=k(l,n)),e=h.map[m],e?(f=ca.inArray(e,h.list),-1!=f&&h.list.splice(f,1),m in h.map&&delete h.map[m],ca.each(h.list,function(a,b){i+=k(b.fieldId,b.fieldFunction)+" "+b.suffix+","}),-1!=e.suffix.indexOf("ASC")?(i=k(l,n)+" DESC NULLS LAST,"+i,e.suffix="DESC NULLS LAST"):e=!1):(i=k(l,n)+" ASC NULLS LAST,"+(g.orderByClause||""),e={fieldId:l,fieldName:m,suffix:"ASC NULLS LAST"},n&&(e.fieldFunction=n)),i=i.replace(/,+$/,""),g.orderByClause=i,g.updateData(c),g.getPersonalizationService().setOrderBy({newValue:i}),e},createSearchSubConditions:function(a,c,d,e){return b().createSearchSubConditions(this,a,c,d,e)},buildSearchCondition:function(a,b,c,d){b=!!b&&ca.trim(b),d||(d={}),a||(a="__default_searchbox");var e=this,f=d.affectCookies||!1,g=b&&b.length>(d.useSOSLSearch?1:0),h=e.getConditionByName(a,!1),i=this.getDataSourceType(),j=!1!==i.prop("canFieldsBeIndividuallySearched"),k=i.prop("hasDefaultSearch");return g?((j||k)&&(h||(h=new U,h.name=a,d.useSOSLSearch?h.type="search":h.type="group",e.addCondition(h))),j?(e.activateCondition(h,f),d.useSOSLSearch?(h.fieldfunction=d.SOSLFields,d.tokenize?h.value=ca.map(b.split(d.delemiter||" "),function(a){return'"'+a+'*"'}).join(" AND "):h.value='"'+b+'*"'):e.createSearchSubConditions(h,b,c,d)):h&&e.setCondition(h,b,f),h&&"group"===h.type&&(h.value=b)):h&&(e.deactivateCondition(h,f),h.subConditions=[],h.subConditionLogic="",h.value=""),h},prepareSearchConditions:function(a,b,c,d){this.buildSearchCondition(null,b,a.searchFields,d)},_invalidateDataIndices:function(){return this.dataMap={},this.recordsMap={},this},isRowMarkedForDeletion:function(a){var b,c=this._findRow(a);return!!c&&((b=this.getRecordForRow(c))&&b.isMoribund())},getRowId:function(a){var b=this.getRecordForRow(a);return b?b.id():this.dataSource.getRowId(a,this)},getRowName:function(a){var b=this.getRecordForRow(a);return b?b.name():this.dataSource.getRowName(a,this)},rowHasId:function(a){return!!this.getRowId(a)},getIdField:function(){return this.dataSource.getIdField(this)},getRowChanges:function(a){a=this._findRow(a);var b;return a&&(b=this.changes?this.changes[this.getRowId(a)]:null),b},getRowOriginals:function(a){a=this._findRow(a);var b;return a&&(b=this.originals?this.originals[this.getRowId(a)]:null),b},isRowChanged:function(a){a=this._findRow(a);var b;return!!a&&(b=this.getRowId(a),this.getRowById(b)&&b in this.changes)},doesRowHaveUnsavedChanges:function(a){return this.isRowChanged(a)},isRowNew:function(a){var b,c=this._findRow(a);return!!c&&((b=this.getRecordForRow(c))&&b.isNew())},isNewRow:function(a){return this.isRowNew(a)},isRowUnsavedClone:function(a){return a=this._findRow(a),y(a,this)},cancelRowChanges:function(a,b,c){if(c||(c={}),!a)throw"Row is required.";var f=this,g=f.getRowId(a),h=f.originals[g],i=f.changes[g],j={};return i&&(!b&&i?b=Object.keys(i):b&&d(b)&&(b=[b]),b.forEach(function(b){h&&b in h?j[b]=h[b]:f.isNewRow(a)&&(j[b]="")}),e(j)&&(f.updateRow(a,j,{initiatorId:c.initiatorId}),e(i)||delete f.changes[g],e(h)||delete f.originals[g],e(f.changes)||(f.hasChanged=!1))),f},getPersonalizationService:function(){var b="_personalizationService",c=this[b];return c||(c=this[b]=a.personalization.createModelService(this)),c},notifyEditorsOfDataRefresh:function(a){T([this],a)},exportData:function(c){c||(c={});var d=this,e=d.getIdField(),f=d.isAggregate,g=new Date,h=c.fileName||d.id+"-export-"+g.getTime(),i=c.additionalConditions||!1,j=c.rows||d.data,k=(c.fields||d.fields).slice(0),l=j.length,m=k.length,n=c.useAPINamesForHeaders||!1,o=c.doNotAppendRowIdColumn||!1,p=!f&&!o,q="";if(m>0&&l>0){var r={},s=[];ca.each(k,function(a,b){b.name?r[b.name]=b:b.id&&(r[b.id]=b)}),p&&e&&e in r&&(p=!1),p&&e&&(p=(ca.isArray(e)?e:[e]).filter(function(a){return!(a in r)}).length>0),ca.each(k,function(a,c){if(c.displaytype&&c.displaytype===ja){var e=c.name?c.name:c.id,f=b().getFieldReference(e,c);if(!(f in r)&&f in d.fieldsMap){var g=d.getField(f);n||(g.label=c.label+": "+g.label),s.push({atIndex:a+1,id:f,field:g})}}}),s.length&&ca.each(s,function(a,b){k.splice(b.atIndex,0,b.field),m++}),p&&e&&ca.each(ca.isArray(e)?e:[e],function(a,b){if(b in r)return!0;d.getField(b)?k.push(d.getField(b)):k.push({id:b,name:b,label:b}),m++}),k.forEach(function(a,c){var d=n?a.name?a.name:a.id:a.label;q+=b().escapeCSVCell(d)+(c<m-1?",":"\r\n")}),j.forEach(function(a){var c=!0;i&&i.length&&(c=b().doesRowMeetConditions(a,i)),c&&k.forEach(function(c,e){var f,g=c.name?c.name:c.id,h=c.template,i=c.type===Ca;i&&h&&(h="{{#"+g+".records}}"+c.template+",{{/"+g+".records}}"),f=d.getFieldValue(a,g,!0),i||!f&&0!==f&&!1!==f?d.getField(g)&&!i||!h?f="":(f=d.mergeRow(a,h).text(),i&&f&&(f=f.substring(0,f.length-1))):f=""+f,q+=""===f?f:b().escapeCSVCell(f),q+=e<m-1?",":"\r\n"})})}return a.utils.downloadStringAsFile(q,h,"text/csv")},getSOQL:function(){return this.getQuery()},getQuery:function(){return this.soql},getConditionsWithDependencies:function(a){var b=[],c=this,d=c.conditions;return d&&d.length&&d.forEach(function(c){var d=c.subConditions;"modelmerge"!==c.type||a&&c.model!==a.id?"join"===c.type&&d&&d.length&&d.forEach(function(c){"modelmerge"!==c.type||a&&c.model!==a.id||b.push(c)}):b.push(c)}),b},getDependentConditions:function(){var a=this,b={};return ca.each(ba.list(),function(c,d){if(a!==d){var e=d.getConditionsWithDependencies(a);e&&e.length&&(b[d.id]=e)}}),b},getConditionByName:function(a,b){var c,d,e,f,g=this,h=[],i=Array.prototype.push;if(ca.each([g.conditions,g.havings,g.uiOnlyConditions],function(a,b){b&&b.length&&i.apply(h,b)}),h.length)for(e=0;e<h.length;e++){if(c=h[e],c.name===a)return c;if(b&&c.subConditions&&c.subConditions.length)for(f=0;f<c.subConditions.length;f++)if(d=c.subConditions[f],d.name===a)return d}return!1},hasCondition:function(a){return!1!==this.getConditionByName(a,!0)},addCondition:function(a,b){var c,d,e=this;return!a||a instanceof U||(a=new U(a)),b&&"or"==b.toLowerCase()||(b="AND"),e.conditions.push(a),c="("+e.conditions.length+")",e.conditionLogic&&""!==e.conditionLogic?(d="and"===b.toLowerCase()&&-1===e.conditionLogic.toLowerCase().indexOf("or"),e.conditionLogic=(d?"":"(")+e.conditionLogic+(d?"":")")+b+c):e.conditionLogic=c,a},initialize:function(a){return v(this,a),this},register:function(a){var b=this;return Ja[a||b.id]=b,b.registerKeyPrefix(),b},registerKeyPrefix:function(){var a,b=this,c=b.keyPrefix;c&&(a=Ka[c],a||(a=Ka[c]=[]),-1===ca.inArray(a,b)&&a.push(b))},unregister:function(){var b,c=this,d=Ka[c.keyPrefix];return ca.each([Fa,Ea],function(b,d){var e=c[d];e&&e.length&&(ca.each(e,function(b,c){a.events.unsubscribe(c)}),delete c[d])}),delete Ja[c.id],d&&-1!==(b=ca.inArray(c,d))&&(d.splice(b,1),d.length||delete Ka[c.keyPrefix]),c},evaluateFormulaField:function(a,c){d(c)&&(c=this.getField(c));var e={evaluateFormulas:!0,outputType:c.displaytype},f=c.formula||"",g=this?a?"row":"model":"global";return b().getMergeResult(g,f,e,this,a)},evaluateFormulaFields:function(a){a||(a={});var c,d,f=this,g={},h=a.updatedRows||f.getRows(),i=a.preventTrackChanges;h.length&&(c={_ignoreMetadata:!0},i&&(c.notify=!1),d={},f.fields&&ca.each(f.fields,function(a,c){c.calculated&&c.uiOnly&&(g[c.id]=c,ca.each(h,function(a,e){var g=f.getRowId(e),h=d[g],i=f.getFieldValue(e,c.id,!0),j=f.evaluateFormulaField(e,c);(b().isDate(i)&&b().isDate(j)?i.getTime()!==j.getTime():i!==j)&&(h||(h=d[g]={}),h[c.id]=j)}))}),e(d)&&(c.preventTrackChangesSecondTime=i,f.updateRows(d,c),i&&(ca.each(d,function(a){var b=f.changes[a],c=f.originals[a];b&&(ca.each(b,function(a){a in g&&delete b[a]}),e(b)||delete f.changes[a]),c&&(ca.each(c,function(a){a in g&&delete c[a]}),e(c)||delete f.originals[a])}),e(f.changes)||(f.hasChanged=!1))))},_cloneRowsIfNeeded:function(c){var d,e,f,g=this,h=!1,i=b().isUndefined;if(!g.isAggregate&&(i(c)&&(c=g.getParentPage()||a.component.getByType("skuidpage")[0]),!0===g.doClone?h=!0:!1!==g.doClone&&(e=a.page.getParameters(c),f=e.id,!i(e.clone)&&f&&g.conditions.length&&ca.each(g.conditions,function(a,b){if(("param"===b.type||"fieldvalue"===b.type)&&b.value===f)return g.doClone=h=!0,!1;if("modelmerge"===b.type&&b.model){var c=I(b.model),d=c&&c.getFirstRow(),e=d?c.getRowId(d):null,i=c?c.realToFakeIdMap:null;if(d&&(e===f||i&&i[f]===e))return g.doClone=h=!0,!1}})),h&&g.data&&g.data.length)){g._invalidateDataIndices(),g.realToFakeIdMap||(g.realToFakeIdMap={}),g.data.forEach(function(a){var b=g.getRowId(a),c=g.realToFakeIdMap[b]="clone_"+Ia++,d=g.getRecordForRow(a);d?d.setId(c):d=new X(g,a,c),d.markNew().markCloned(),g.getDataSourceType().name===ga&&(a.Id=c)}),g._generateDataIndices();var j={};g.conditions&&ca.each(g.conditions,function(a,b){var c=b.field,d=b.value,e=g.getField(c);if(e&&e.createable&&(-1!==c.indexOf(".")||!d&&!1!==d&&0!==d||ca.each(g.data,function(a,b){c in b||(b[c]=d)}),e.displaytype===ja&&"modelmerge"===b.type&&b.model)){var f=I(b.model);f&&f.realToFakeIdMap&&(j[c]=f)}}),g.fields&&ca.each(g.fields,function(a,b){if(b.displaytype===ja){var c=[];j[b.id]?c.push(j[b.id].realToFakeIdMap):ca.each(b.referenceTo,function(a,b){var d=Ka[b.keyPrefix];d&&d.length&&ca.each(d,function(a,b){b.realToFakeIdMap&&c.push(b.realToFakeIdMap)})}),c.length&&ca.each(g.data,function(a,d){ca.each(c,function(a,c){if(d[b.id]in c)return d[b.id]=c[d[b.id]],!1})})}}),d=function(){var a={},b=g.fields,c=g.data;c&&c.length&&b&&b.length&&ca.each(c,function(c,d){var e={};ca.each(b,function(a,b){e[b.id]=g.getFieldValue(d,b.id,!0)}),a[g.getRowId(d)]=e}),g.updateRows(a,{alwaysAddChanges:!0,notifyFields:!1})},!0===c.isRendered?d():c.element.one("pageload",function(){d()})}},_createDefaultRowIfNeeded:function(){var a,b=this,c=b.data&&b.data.length<1;return c&&!0===b.createRowIfNoneFound&&(!b.doQuery||b.doQuery&&b.lastLoadTime)&&(a=b.createRow(),delete b.createRowIfNoneFound),a},getRecordForRow:function(a){if(!a)throw"No row provided";return a[Ha]},_generateDataIndices:function(){var a=this,c=a.dataMap,d=a.recordsMap,e=a.data;return c||(a.dataMap=c={}),d||(a.recordsMap=d={}),e&&e.length&&e.forEach(function(e){var f;f=b().isString(e)?{value:e}:e;var g,h=a.getRecordForRow(f);h||(h=new X(a,f)),g=h.id(),c[g]=f,d[g]=h}),a}},ca.extend(Y,{cancel:N,getMoreData:R,initialize:v,load:O,register:z,save:M,sync:Q,unregister:A,update:P}),ca.extend(ba,{Condition:U,Field:V,Method:W,Model:Y,Record:X,getModel:I,getModelsByKeyPrefix:J,getModelsByName:H,getModelsByDataSource:K,getModelList:G,list:G,map:H,getConditionCookieName:f,getModelsList:G,getNewId:x,isNewId:w,cancel:Y.cancel,getMoreData:Y.getMoreData,initializeModel:Y.initialize,load:Y.load,registerModel:Y.register,save:Y.save,sync:Y.sync,unregisterModel:Y.unregister,updateData:Y.update}),a.$M=I}(skuid),function(a,b){var c=a.datajs||{},d=a.OData||{};"function"==typeof define&&define.amd?(define("datajs",c),define("OData",d)):(a.datajs=c,a.OData=d),c.version={major:1,minor:1,build:1};var e=function(b){return a.ActiveXObject?new a.ActiveXObject(b):null},f=function(a){return null!==a&&void 0!==a},g=function(a,b){var c,d;for(c=0,d=a.length;c<d;c++)if(a[c]===b)return!0;return!1},h=function(a,b){return void 0!==a?a:b},i=function(b){if(1===arguments.length)return void a.setTimeout(b,0);var c=Array.prototype.slice.call(arguments,1);a.setTimeout(function(){b.apply(this,c)},0)},j=function(a,b){for(var c in b)a[c]=b[c];return a},k=function(a,b){if(a){var c,d;for(c=0,d=a.length;c<d;c++)if(b(a[c]))return a[c]}return null},l=function(a){return"[object Array]"===Object.prototype.toString.call(a)},m=function(a){return"[object Date]"===Object.prototype.toString.call(a)},n=function(a){return"object"==typeof a},o=function(a){return parseInt(a,10)},p=function(a,b,c){a.hasOwnProperty(b)&&(a[c]=a[b],delete a[b])},q=function(a){throw a},r=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},s=function(a,b){return void 0!==a?a:b},t=/^([^:\/?#]+:)?(\/\/[^\/?#]*)?([^?#:]+)?(\?[^#]*)?(#.*)?/,u=["scheme","authority","path","query","fragment"],v=function(a){var b={isAbsolute:!1};if(a){var c=t.exec(a);if(c){var d,e;for(d=0,e=u.length;d<e;d++)c[d+1]&&(b[u[d]]=c[d+1])}b.scheme&&(b.isAbsolute=!0)}return b},w=function(a){return"".concat(a.scheme||"",a.authority||"",a.path||"",a.query||"",a.fragment||"")},x=/^\/{0,2}(?:([^@]*)@)?([^:]+)(?::{1}(\d+))?/,y=/%[0-9A-F]{2}/gi,z=function(a){var b=v(a),c=b.scheme,d=b.authority;if(c&&(b.scheme=c.toLowerCase(),d)){var e=x.exec(d);e&&(b.authority="//"+(e[1]?e[1]+"@":"")+e[2].toLowerCase()+(e[3]?":"+e[3]:""))}return a=w(b),a.replace(y,function(a){return a.toLowerCase()})},A=function(a,b){if(!b)return a;var c=v(a);if(c.isAbsolute)return a;var d,e=v(b),f={};return c.authority?(f.authority=c.authority,d=c.path,f.query=c.query):(c.path?(d="/"===c.path.charAt(0)?c.path:B(c.path,e.path),f.query=c.query):(d=e.path,f.query=c.query||e.query),f.authority=e.authority),f.path=C(d),f.scheme=e.scheme,f.fragment=c.fragment,w(f)},B=function(a,b){var c,d="/";return b&&(c=b.lastIndexOf("/"),d=b.substring(0,c),"/"!==d.charAt(d.length-1)&&(d+="/")),d+a},C=function(a){for(var b,c="",d="";a;)0===a.indexOf("..")||0===a.indexOf(".")?a=a.replace(/^\.\.?\/?/g,""):0===a.indexOf("/..")?(a=a.replace(/^\/\..\/?/g,"/"),b=c.lastIndexOf("/"),c=-1===b?"":c.substring(0,b)):0===a.indexOf("/.")?a=a.replace(/^\/\.\/?/g,"/"):(d=a,b=a.indexOf("/",1),-1!==b&&(d=a.substring(0,b)),c+=d,a=a.replace(d,""));return c},D=function(b){var c=[];if(void 0===a.atob)c=E(b);else for(var d=a.atob(b),e=0;e<d.length;e++)c.push(d.charCodeAt(e));for(var f="",g=0;g<c.length;g++){var h=c[g];f+="0123456789ABCDEF"[h>>4],f+="0123456789ABCDEF"[15&h]}return f},E=function(a){for(var b="",c=0;c<a.length;c++){var d=F(a[c]),e="";null!==d&&(e=d.toString(2),b+=G(e))}var f=[],g=parseInt(b.length/8,10);for(c=0;c<g;c++){var h=parseInt(b.substring(8*c,8*(c+1)),2);f.push(h)}return f},F=function(a){var b=a.charCodeAt(0);return b>=65&&b<=90?b-65:b>=97&&b<=122?b-65-6:b>=48&&b<=57?b+4:"+"==a?62:"/"==a?63:null},G=function(a){for(;a.length<6;)a="0"+a;return a},H="http://",I=H+"www.w3.org/",J=I+"1999/xhtml",K=I+"2000/xmlns/",L=I+"XML/1998/namespace",M=function(a){return/(^\s)|(\s$)/.test(a)},N=function(a){var b=/^\s*$/;return null===a||b.test(a)},O=function(a){for(;null!==a&&1===a.nodeType;){var b=Z(a,"space",L);if("preserve"===b)return!0;if("default"===b)break;a=a.parentNode}return!1},P=function(a){var b=a.nodeName;return"xmlns"==b||0===b.indexOf("xmlns:")},Q=function(a,b,c){try{a.setProperty(b,c)}catch(d){}},R=function(){var a=e("Msxml2.DOMDocument.3.0");return a&&(Q(a,"ProhibitDTD",!0),Q(a,"MaxElementDepth",256),Q(a,"AllowDocumentFunction",!1),Q(a,"AllowXsltScript",!1)),a},S=function(){try{var a=e("Msxml2.DOMDocument.6.0");return a&&(a.async=!0),a}catch(b){return R()}},T=function(a){var b=S();if(!b)return null;b.loadXML(a);var c=b.parseError;return 0!==c.errorCode&&U(c.reason,c.srcText,a),b},U=function(a,b,c){throw"string"==typeof a&&(a={message:a}),j(a,{srcText:b||"",errorXmlText:c||""})},V=function(b){var c,d=a.DOMParser&&new a.DOMParser;if(!d)return c=T(b),c||U("XML DOM parser not supported"),c;try{c=d.parseFromString(b,"text/xml")}catch(m){U(m,"",b)}var e=c.documentElement,f=e.namespaceURI,g=ha(e);if("parsererror"===g&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"===f){var h=da(e,"http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext"),i=h?ja(h):"";U(ga(e)||"",i,b)}if("h3"===g&&f===J||ea(e,J,"h3")){for(var j="",k=[],l=e.firstChild;l;)1===l.nodeType&&(j+=ga(l)||""),k.push(l.nextSibling),l=l.firstChild||k.shift();j+=ga(e)||"",U(j,"",b)}return c},W=function(a,b){return a?a+":"+b:b},X=function(a,b){if(M(b.data)){var c=$(a,L,"space");c||(c=pa(a.ownerDocument,L,W("xml","space")),oa(a,c)),c.value="preserve"}return a.appendChild(b),a},Y=function(a,b){var c,d,e=a.attributes;for(c=0,d=e.length;c<d;c++)b(e.item(c))},Z=function(a,b,c){var d=$(a,b,c);return d?ja(d):null},$=function(a,b,c){var d=a.attributes;return d.getNamedItemNS?d.getNamedItemNS(c||null,b):d.getQualifiedItem(b,c)||null},_=function(a,b){var c=$(a,"base",L);return(c?A(c.value,b):b)||null},aa=function(a,b){ka(a,!1,function(a){return 1===a.nodeType&&b(a),!0})},ba=function(a,b,c){var d,e,f=c.split("/");for(d=0,e=f.length;d<e;d++)a=a&&da(a,b,f[d]);return a||null},ca=function(a,b,c){var d=c.lastIndexOf("/"),e=c.substring(d+1),f=c.substring(0,d),g=f?ba(a,b,f):a;return g?"@"===e.charAt(0)?$(g,e.substring(1),b):da(g,b,e):null},da=function(a,b,c){return fa(a,b,c,!1)},ea=function(a,b,c){if(a.getElementsByTagNameNS){var d=a.getElementsByTagNameNS(b,c);return d.length>0?d[0]:null}return fa(a,b,c,!0)},fa=function(a,b,c,d){var e=null;return ka(a,d,function(a){if(1===a.nodeType){var d=!b||ia(a)===b,f=!c||ha(a)===c;d&&f&&(e=a)}return null===e}),e},ga=function(a){var b,c=null,d=9===a.nodeType&&a.documentElement?a.documentElement:a,e=!1===d.ownerDocument.preserveWhiteSpace;return ka(d,!1,function(a){if(3===a.nodeType||4===a.nodeType){var f=ja(a),g=e||!N(f);g||(void 0===b&&(b=O(d)),g=b),g&&(c?c+=f:c=f)}return!0}),c},ha=function(a){return a.localName||a.baseName},ia=function(a){return a.namespaceURI||null},ja=function(a){return 1===a.nodeType?ga(a):a.nodeValue},ka=function(a,b,c){for(var d=[],e=a.firstChild,f=!0;e&&f;)(f=c(e))&&(b&&e.firstChild&&d.push(e.firstChild),e=e.nextSibling||d.shift())},la=function(a,b,c){for(var d=a.nextSibling;d;){if(1===d.nodeType){var e=!b||ia(d)===b,f=!c||ha(d)===c;if(e&&f)return d}d=d.nextSibling}return null},ma=function(){var b=a.document.implementation;return b&&b.createDocument?b.createDocument(null,null,null):S()},na=function(a,b){if(!l(b))return oa(a,b);var c,d;for(c=0,d=b.length;c<d;c++)b[c]&&oa(a,b[c]);return a},oa=function(a,b){if(b){if("string"==typeof b)return X(a,ta(a.ownerDocument,b));2===b.nodeType?a.setAttributeNodeNS?a.setAttributeNodeNS(b):a.setAttributeNode(b):a.appendChild(b)}return a},pa=function(a,b,c,d){var e=a.createAttributeNS&&a.createAttributeNS(b,c)||a.createNode(2,c,b||void 0);return e.value=d||"",e},qa=function(a,b,c,d){var e=a.createElementNS&&a.createElementNS(b,c)||a.createNode(1,c,b||void 0);return na(e,d||[])},ra=function(a,b,c){return pa(a,K,W("xmlns",c),b)},sa=function(a,b){for(var c="<c>"+b+"</c>",d=V(c),e=d.documentElement,f=("importNode"in a?a.importNode(e,!0):e),g=a.createDocumentFragment(),h=f.firstChild;h;)g.appendChild(h),h=h.nextSibling;return g},ta=function(a,b){return a.createTextNode(b)},ua=function(a,b,c,d,e){var f,g,h="",i=e.split("/"),j=da,k=qa,l=b;for(f=0,g=i.length;f<g;f++){h=i[f],"@"===h.charAt(0)&&(h=h.substring(1),j=$,k=pa);var m=j(l,c,h);m||(m=k(a,c,W(d,h)),oa(l,m)),l=m}return l},va=function(b){var c=a.XMLSerializer;if(c){return(new c).serializeToString(b)}if(b.xml)return b.xml;throw{message:"XML serialization unsupported"}},wa=function(a){var b,c=a.childNodes,d=c.length;if(0===d)return"";var e=a.ownerDocument,f=e.createDocumentFragment(),g=e.createElement("c");for(f.appendChild(g),b=0;b<d;b++)g.appendChild(c[b]);var h=va(f);for(h=h.substr(3,h.length-7),b=0;b<d;b++)a.appendChild(g.childNodes[b]);return h},xa=function(a,b,c){return function(){return a[b].apply(a,arguments),c}},ya=function(){this._arguments=void 0,this._done=void 0,this._fail=void 0,this._resolved=!1,this._rejected=!1};ya.prototype={then:function(a,b){return a&&(this._done?this._done.push(a):this._done=[a]),b&&(this._fail?this._fail.push(b):this._fail=[b]),this._resolved?this.resolve.apply(this,this._arguments):this._rejected&&this.reject.apply(this,this._arguments),this},resolve:function(){if(this._done){var a,b;for(a=0,b=this._done.length;a<b;a++)this._done[a].apply(null,arguments);this._done=void 0,this._resolved=!1,this._arguments=void 0}else this._resolved=!0,this._arguments=arguments},reject:function(){if(this._fail){var a,b;for(a=0,b=this._fail.length;a<b;a++)this._fail[a].apply(null,arguments);this._fail=void 0,this._rejected=!1,this._arguments=void 0}else this._rejected=!0,this._arguments=arguments},promise:function(){var a={};return a.then=xa(this,"then",a),a}};var za=function(){return a.jQuery&&a.jQuery.Deferred?new a.jQuery.Deferred:new ya},Aa=function(a,b){return(a&&a.__metadata||{}).type||(b?b.type:null)},Ba=["Edm.String","Edm.Int32","Edm.Int64","Edm.Boolean","Edm.Double","Edm.Single","Edm.DateTime","Edm.DateTimeOffset","Edm.Time","Edm.Decimal","Edm.Guid","Edm.Byte","Edm.Int16","Edm.SByte","Edm.Binary"],Ca=["Edm.Geometry","Edm.GeometryPoint","Edm.GeometryLineString","Edm.GeometryPolygon","Edm.GeometryCollection","Edm.GeometryMultiPolygon","Edm.GeometryMultiLineString","Edm.GeometryMultiPoint"],Da=["Edm.Geography","Edm.GeographyPoint","Edm.GeographyLineString","Edm.GeographyPolygon","Edm.GeographyCollection","Edm.GeographyMultiPolygon","Edm.GeographyMultiLineString","Edm.GeographyMultiPoint"],Ea=function(a,b){if(!a)return null;if(l(a)){var c,d,e;for(c=0,d=a.length;c<d;c++)if(e=Ea(a[c],b))return e;return null}return a.dataServices?Ea(a.dataServices.schema,b):b(a)},Fa=function(a,b){return a=0===a?"":"."+Ia(a.toString(),3),b>0&&(""===a&&(a=".000"),a+=Ia(b.toString(),4)),a},Ga=function(a){if("string"==typeof a)return a;var b=Ra(a),c=Ja(a.__offset);if(b&&"Z"!==c){a=new Date(a.valueOf());var d=wb(c),e=a.getUTCHours()+d.d*d.h,f=a.getUTCMinutes()+d.d*d.m;a.setUTCHours(e,f)}else b||(c="");var g=a.getUTCFullYear(),h=a.getUTCMonth()+1,i="";g<=0&&(g=-(g-1),i="-");var j=Fa(a.getUTCMilliseconds(),a.__ns);return i+Ia(g,4)+"-"+Ia(h,2)+"-"+Ia(a.getUTCDate(),2)+"T"+Ia(a.getUTCHours(),2)+":"+Ia(a.getUTCMinutes(),2)+":"+Ia(a.getUTCSeconds(),2)+j+c},Ha=function(a){var b=a.ms,c="";b<0&&(c="-",b=-b);var d=Math.floor(b/864e5);b-=864e5*d;var e=Math.floor(b/36e5);b-=36e5*e;var f=Math.floor(b/6e4);b-=6e4*f;var g=Math.floor(b/1e3);return b-=1e3*g,c+"P"+Ia(d,2)+"DT"+Ia(e,2)+"H"+Ia(f,2)+"M"+Ia(g,2)+Fa(b,a.ns)+"S"},Ia=function(a,b,c){for(var d=a.toString(10);d.length<b;)c?d+="0":d="0"+d;return d},Ja=function(a){return a&&"Z"!==a&&"+00:00"!==a&&"-00:00"!==a?a:"Z"},Ka=function(a){if("string"==typeof a){var b=a.indexOf(")",10);if(0===a.indexOf("Collection(")&&b>0)return a.substring(11,b)}return null},La=function(a,b,c,d,e,f){return e.request(a,function(e){try{e.headers&&ob(e.headers),void 0===e.data&&204!==e.statusCode&&d.read(e,f)}catch(g){return void 0===g.request&&(g.request=a),void 0===g.response&&(g.response=e),void c(g)}b(e.data,e)},c)},Ma=function(a){return Qa(a)&&l(a.__batchRequests)},Na=/Collection\((.*)\)/,Oa=function(a,b){var c=a&&a.results||a;return!!c&&Pa(b)||!b&&l(c)&&!Qa(c[0])},Pa=function(a){return Na.test(a)},Qa=function(a){return!!a&&n(a)&&!l(a)&&!m(a)},Ra=function(a){return"Edm.DateTimeOffset"===a.__edmType||!a.__edmType&&a.__offset},Sa=function(a){if(!a&&!Qa(a))return!1;var b=a.__metadata||{},c=a.__deferred||{};return!b.type&&!!c.uri},Ta=function(a){return Qa(a)&&a.__metadata&&"uri"in a.__metadata},Ua=function(a,b){var c=a&&a.results||a;return l(c)&&!Pa(b)&&Qa(c[0])},Va=function(a){return g(Da,a)},Wa=function(a){return g(Ca,a)},Xa=function(a){if(!a&&!Qa(a))return!1;var b=a.__metadata,c=a.__mediaresource;return!b&&!!c&&!!c.media_src},Ya=function(a){return m(a)||"string"==typeof a||"number"==typeof a||"boolean"==typeof a},Za=function(a){return g(Ba,a)},$a=function(a,b){return Sa(a)?"deferred":Ta(a)?"entry":Ua(a)?"feed":b&&b.relationship?null!==a&&void 0!==a&&Ua(a)?"feed":"entry":null},_a=function(a,b){return k(a,function(a){return a.name===b})},ab=function(a,b,c){return a?Ea(b,function(b){return lb(a,b,c)}):null},bb=function(a,b){return k(a,function(a){return a.name===b})},cb=function(a,b){return ab(a,b,"complexType")},db=function(a,b){return ab(a,b,"entityType")},eb=function(a){return Ea(a,function(a){return k(a.entityContainer,function(a){return pb(a.isDefaultEntityContainer)})})},fb=function(a,b){return ab(a,b,"entityContainer")},gb=function(a,b){return k(a,function(a){return a.name===b})},hb=function(a,b){var c=null;if(a){var d=a.relationship,e=Ea(b,function(a){var b=kb(a.namespace,d),c=a.association;if(b&&c){var e,f;for(e=0,f=c.length;e<f;e++)if(c[e].name===b)return c[e]}return null});if(e){var f=e.end[0];f.role!==a.toRole&&(f=e.end[1]),c=f.type}}return c},ib=function(a,b,c){if(a){var d=a.relationship,e=Ea(c,function(a){for(var b=a.entityContainer,c=0;c<b.length;c++){var e=b[c].associationSet;if(e)for(var f=0;f<e.length;f++)if(e[f].association==d)return e[f]}return null});if(e&&e.end[0]&&e.end[1])return e.end[0].entitySet==b?e.end[1].entitySet:e.end[0].entitySet}return null},jb=function(a,b){return Ea(b,function(b){for(var c=b.entityContainer,d=0;d<c.length;d++){var e=c[d].entitySet;if(e)for(var f=0;f<e.length;f++)if(e[f].name==a)return{entitySet:e[f],containerName:c[d].name,functionImport:c[d].functionImport}}return null})},kb=function(a,b){return 0===b.indexOf(a)&&"."===b.charAt(a.length)?b.substr(a.length+1):null},lb=function(a,b,c){if(a&&b){var d=kb(b.namespace,a);if(d)return k(b[c],function(a){return a.name===d})}return null},mb=function(a,b){if(a===b)return a;for(var c=a.split("."),d=b.split("."),e=c.length>=d.length?c.length:d.length,f=0;f<e;f++){var g=c[f]&&o(c[f]),h=d[f]&&o(d[f]);if(g>h)return a;if(g<h)return b}},nb={accept:"Accept","content-type":"Content-Type",dataserviceversion:"DataServiceVersion",maxdataserviceversion:"MaxDataServiceVersion"},ob=function(a){for(var b in a){var c=b.toLowerCase(),d=nb[c];if(d&&b!==d){var e=a[b];delete a[b],a[d]=e}}},pb=function(a){return"boolean"==typeof a?a:"string"==typeof a&&"true"===a.toLowerCase()},qb=/^(-?\d{4,})-(\d{2})-(\d{2})T(\d{2}):(\d{2})(?::(\d{2}))?(?:\.(\d+))?(.*)$/,rb=function(a,b,c){var d=qb.exec(a),e=d?Ja(d[8]):null;if(!d||!b&&"Z"!==e){if(c)return null;throw{message:"Invalid date/time value"}}var f=o(d[1]);f<=0&&f++;var g=d[7],h=0;if(g){if(g.length>7){if(c)return null;throw{message:"Cannot parse date/time value to given precision."}}h=Ia(g.substring(3),4,!0),g=Ia(g.substring(0,3),3,!0),g=o(g),h=o(h)}else g=0;var i=o(d[4]),j=o(d[5]),k=o(d[6])||0;if("Z"!==e){var l=wb(e),m=-l.d;i+=l.h*m,j+=l.m*m}var n=new Date;if(n.setUTCFullYear(f,o(d[2])-1,o(d[3])),n.setUTCHours(i,j,k,g),isNaN(n.valueOf())){if(c)return null;throw{message:"Invalid date/time value"}}return b&&(n.__edmType="Edm.DateTimeOffset",n.__offset=e),h&&(n.__ns=h),n},sb=function(a,b){return rb(a,!1,b)},tb=function(a,b){return rb(a,!0,b)},ub=/^([+-])?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)(?:\.(\d+))?S)?)?/,vb=function(a){var b=ub.exec(a);if(null===b)throw{message:"Invalid duration value."};var c=b[2]||"0",d=b[3]||"0",e=o(b[4]||0),f=o(b[5]||0),g=o(b[6]||0),h=parseFloat(b[7]||0);if("0"!==c||"0"!==d)throw{message:"Unsupported duration value."};var i=b[8],j=0;if(i){if(i.length>7)throw{message:"Cannot parse duration value to given precision."};j=Ia(i.substring(3),4,!0),i=Ia(i.substring(0,3),3,!0),i=o(i),j=o(j)}else i=0;i+=1e3*h+6e4*g+36e5*f+864e5*e,"-"===b[1]&&(i=-i);var k={ms:i,__edmType:"Edm.Time"};return j&&(k.ns=j),k},wb=function(a){var b=a.substring(0,1);return b="+"===b?1:-1,{d:b,h:o(a.substring(1)),m:o(a.substring(a.indexOf(":")+1))}},xb=function(a,b,c){a.method||(a.method="GET"),a.headers?ob(a.headers):a.headers={},void 0===a.headers.Accept&&(a.headers.Accept=b.accept),f(a.data)&&void 0===a.body&&b.write(a,c),f(a.headers.MaxDataServiceVersion)||(a.headers.MaxDataServiceVersion=b.maxDataServiceVersion||"1.0")},yb=function(a,b,c){if(a&&"object"==typeof a)for(var d in a){var e=a[d],f=yb(e,d,c);f=c(d,f,b),f!==e&&(void 0===e?delete a[d]:a[d]=f)}return a},zb=function(a,b){return b("",yb(a,"",b))},Ab=0,Bb=function(a){return!a.method||"GET"===a.method},Cb=function(b){var c=a.document.createElement("IFRAME");c.style.display="none";var d=b.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/\</g,"&lt;"),e='<html><head><script type="text/javascript" src="'+d+'"><\/script></head><body></body></html>';return a.document.getElementsByTagName("BODY")[0].appendChild(c),Jb(c,e),c},Db=function(){if(a.XMLHttpRequest)return new a.XMLHttpRequest;var b;if(a.ActiveXObject)try{return new a.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(c){try{return new a.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(d){b=d}}else b={message:"XMLHttpRequest not supported"};throw b},Eb=function(a){return 0===a.indexOf("http://")||0===a.indexOf("https://")||0===a.indexOf("file://")},Fb=function(b){if(!Eb(b))return!0;var c=a.location,d=c.protocol+"//"+c.host+"/";return 0===b.indexOf(d)},Gb=function(b,c){try{delete a[b]}catch(d){a[b]=void 0,c===Ab-1&&(Ab-=1)}},Hb=function(a){return a&&(Jb(a,""),a.parentNode.removeChild(a)),null},Ib=function(a,b){var c,d,e=a.getAllResponseHeaders().split(/\r?\n/);for(c=0,d=e.length;c<d;c++)if(e[c]){var f=e[c].split(": ");b[f[0]]=f[1]}},Jb=function(a,b){var c=a.contentWindow?a.contentWindow.document:a.contentDocument.document;c.open(),c.write(b),c.close()};d.defaultHttpClient={callbackParameterName:"$callback",formatQueryString:"$format=json",enableJsonpCallback:!1,request:function(b,c,d){var e,f={},g=null,j=!1;f.abort=function(){e=Hb(e),j||(j=!0,g&&(g.abort(),g=null),d({message:"Request aborted"}))};var k,l=function(){e=Hb(e),j||(j=!0,g=null,d({message:"Request timed out"}))},m=b.requestUri,n=h(b.enableJsonpCallback,this.enableJsonpCallback),o=h(b.callbackParameterName,this.callbackParameterName),p=h(b.formatQueryString,this.formatQueryString);if(!n||Fb(m)){if(g=Db(),g.onreadystatechange=function(){if(!j&&null!==g&&4===g.readyState){var a=g.statusText,e=g.status;1223===e&&(e=204,a="No Content");var f=[];Ib(g,f);var h={requestUri:m,statusCode:e,statusText:a,headers:f,body:g.responseText};j=!0,g=null,e>=200&&e<=299?c(h):d({message:"HTTP request failed",request:b,response:h})}},g.open(b.method||"GET",m,!0,b.user,b.password),b.headers)for(k in b.headers)g.setRequestHeader(k,b.headers[k]);b.timeoutMS&&(g.timeout=b.timeoutMS,
g.ontimeout=l),g.send(b.body)}else{if(!Bb(b))throw{message:"Request is not local and cannot be done through JSONP."};var q=Ab;Ab+=1;var r,s=q.toString(),t=!1;k="handleJSONP_"+s,a[k]=function(b){if(e=Hb(e),!j){t=!0,a.clearTimeout(r),Gb(k,q),a.ActiveXObject&&(b=a.JSON.parse(a.JSON.stringify(b)));var d;d=void 0===b.d?{"Content-Type":"application/json;odata=minimalmetadata",dataServiceVersion:"3.0"}:{"Content-Type":"application/json"},i(function(){Hb(e),c({body:b,statusCode:200,headers:d})})}};var u=b.timeoutMS?b.timeoutMS:12e4;r=a.setTimeout(l,u);var v=o+"=parent."+k;this.formatQueryString&&(v+="&"+p);var w=m.indexOf("?");-1===w?m=m+"?"+v:w===m.length-1?m+=v:m=m+"&"+v,e=Cb(m)}return f}};var Kb=function(a){if(!a)return null;var b,c,d=a.split(";"),e={};for(b=1,c=d.length;b<c;b++){var f=d[b].split("=");e[r(f[0])]=f[1]}return{mediaType:r(d[0]),properties:e}},Lb=function(a){if(a){var b,c=a.mediaType;for(b in a.properties)c+=";"+b+"="+a.properties[b];return c}},Mb=function(a,b,c,d){var e={};return j(e,c),j(e,{contentType:a,dataServiceVersion:b,handler:d}),e},Nb=function(a,b,c){if(a){var d=a.headers;d[b]||(d[b]=c)}},Ob=function(a,b){if(a){var c=a.headers,d=c.DataServiceVersion;c.DataServiceVersion=d?mb(d,b):b}},Pb=function(a,b){var c=a.headers;return c&&c[b]||void 0},Qb=function(a){return Kb(Pb(a,"Content-Type"))},Rb=/^\s?(\d+\.\d+);?.*$/,Sb=function(a){var b=Pb(a,"DataServiceVersion");if(b){var c=Rb.exec(b);if(c&&c.length)return c[1]}},Tb=function(a,b){return a.accept.indexOf(b.mediaType)>=0},Ub=function(a,b,c,d){if(!c||!c.headers)return!1;var e=Qb(c),g=Sb(c)||"",h=c.body;if(!f(h))return!1;if(Tb(a,e)){var i=Mb(e,g,d,a);return i.response=c,c.data=b(a,h,i),void 0!==c.data}return!1},Vb=function(a,b,c,d){if(!c||!c.headers)return!1;var e=Qb(c),f=Sb(c);if(!e||Tb(a,e)){var g=Mb(e,f,d,a);if(g.request=c,c.body=b(a,c.data,g),void 0!==c.body)return Ob(c,g.dataServiceVersion||"1.0"),Nb(c,"Content-Type",Lb(g.contentType)),Nb(c,"MaxDataServiceVersion",a.maxDataServiceVersion),!0}return!1},Wb=function(a,b,c,d){return{accept:c,maxDataServiceVersion:d,read:function(b,c){return Ub(this,a,b,c)},write:function(a,c){return Vb(this,b,a,c)}}},Xb=function(a,b){return b},Yb=function(a,b){return f(b)?b.toString():void 0};d.textHandler=Wb(Xb,Yb,"text/plain","3.0");var Zb="http://www.opengis.net/gml",$b="http://www.opengis.net/def/crs/EPSG/0/",_b=function(a,b,c){var d={type:a};return d[b]=c,d},ac=function(a){if(l(a)&&a.length>=2){var b=a[0];a[0]=a[1],a[1]=b}return a},bc=function(a,b,c,d,e,f){var g=cc(a,c,d,e,f);return _b(b,"coordinates",g)},cc=function(a,b,c,d,e){var f=[];return aa(a,function(a){if(ia(a)===Zb){var g=ha(a);if(g!==b)g===c&&aa(a,function(a){if(ia(a)===Zb){var b=d(a,e);b&&f.push(b)}});else{var h=da(a,Zb);if(h){var i=d(h,e);i&&f.push(i)}}}}),f},dc=function(a,b){var c=cc(a,"geometryMember","geometryMembers",rc,b);return _b("GeometryCollection","geometries",c)},ec=function(a,b){return _b("LineString","coordinates",kc(a,b))},fc=function(a,b){return bc(a,"MultiLineString","curveMember","curveMembers",kc,b)},gc=function(a,b){return bc(a,"MultiPoint","pointMember","pointMembers",lc,b)},hc=function(a,b){return bc(a,"MultiPolygon","surfaceMember","surfaceMembers",nc,b)},ic=function(a,b){return _b("Point","coordinates",lc(a,b))},jc=function(a,b){return _b("Polygon","coordinates",nc(a,b))},kc=function(a,b){var c=[];return aa(a,function(a){if(ia(a)===Zb){var d=ha(a);return"posList"===d?void(c=pc(a,b)):"pointProperty"===d?void c.push(mc(a,b)):"pos"===d?void c.push(qc(a,b)):void 0}}),c},lc=function(a,b){var c=da(a,Zb,"pos");return c?qc(c,b):[]},mc=function(a,b){var c=da(a,Zb,"Point");return c?lc(c,b):[]},nc=function(a,b){var c=[],d=!1;return aa(a,function(a){if(ia(a)===Zb){var e=ha(a);return"exterior"===e?(d=!0,void c.unshift(oc(a,b))):"interior"===e?void c.push(oc(a,b)):void 0}}),!d&&c.length>0&&c.unshift([[]]),c},oc=function(a,b){var c=[];return aa(a,function(a){ia(a)===Zb&&"LinearRing"===ha(a)&&(c=kc(a,b))}),c},pc=function(a,b){var c=qc(a,!1),d=c.length;if(d%2!=0)throw{message:"GML posList element has an uneven number of numeric values"};for(var e=[],f=0;f<d;f+=2){var g=c.slice(f,f+2);e.push(b?ac(g):g)}return e},qc=function(a,b){var c=[],d=ga(a);if(d)for(var e=d.length,f=0,g=0;g<=e;){if(-1!==" \t\r\n".indexOf(d.charAt(g))){var h=d.substring(f,g);h&&c.push(parseFloat(h)),f=g+1}g++}return b?ac(c):c},rc=function(a,b){var c,d=ha(a);switch(d){case"Point":c=ic;break;case"Polygon":c=jc;break;case"LineString":c=ec;break;case"MultiPoint":c=gc;break;case"MultiCurve":c=fc;break;case"MultiSurface":c=hc;break;case"MultiGeometry":c=dc;break;default:throw{message:"Unsupported element: "+d,element:a}}var e=c(a,b),f=Z(a,"srsName",Zb)||Z(a,"srsName");if(f){if(0!==f.indexOf($b))throw{message:"Unsupported srs name: "+f,element:a};var g=f.substring($b.length);g&&(e.crs={type:"name",properties:{name:"EPSG:"+g}})}return e},sc=function(a,b,c,d){var e;switch(c){case"Point":e=Ac;break;case"LineString":e=Bc;break;case"Polygon":e=Cc;break;case"MultiPoint":e=Ec;break;case"MultiLineString":e=Fc;break;case"MultiPolygon":e=Gc;break;case"GeometryCollection":e=Ic;break;default:return null}var f=e(a,b,d),g=b.crs;if(g&&"name"===g.type){var h=g.properties,i=h&&h.name;if(i&&0===i.indexOf("ESPG:")&&i.length>5){var j=i.substring(5),k=pa(a,null,"srsName","gml"+j);oa(f,k)}}return f},tc=function(a,b,c){return qa(a,Zb,W("gml",b),c)},uc=function(a,b,c){var d=l(b)?b:[];return d=c?ac(d):d,tc(a,"pos",d.join(" "))},vc=function(a,b,c,d){var e=tc(a,b);if(l(c)){var f,g;for(f=0,g=c.length;f<g;f++)oa(e,uc(a,c[f],d));0===g&&oa(e,tc(a,"posList"))}return e},wc=function(a,b,c){return tc(a,"Point",uc(a,b,c))},xc=function(a,b,c){return vc(a,"LineString",b,c)},yc=function(a,b,c,d){var e=tc(a,b);if(l(c)&&c.length>0){var f=vc(a,"LinearRing",c,d);oa(e,f)}return e},zc=function(a,b,c){var d=b&&b.length,e=tc(a,"Polygon");if(l(b)&&d>0){oa(e,yc(a,"exterior",b[0],c));var f;for(f=1;f<d;f++)oa(e,yc(a,"interior",b[f],c))}return e},Ac=function(a,b,c){return wc(a,b.coordinates,c)},Bc=function(a,b,c){return xc(a,b.coordinates,c)},Cc=function(a,b,c){return zc(a,b.coordinates,c)},Dc=function(a,b,c,d,e,f){var g=d&&d.length,h=tc(a,b);if(l(d)&&g>0){var i,j=tc(a,c);for(i=0;i<g;i++)oa(j,e(a,d[i],f));oa(h,j)}return h},Ec=function(a,b,c){return Dc(a,"MultiPoint","pointMembers",b.coordinates,wc,c)},Fc=function(a,b,c){return Dc(a,"MultiCurve","curveMembers",b.coordinates,xc,c)},Gc=function(a,b,c){return Dc(a,"MultiSurface","surfaceMembers",b.coordinates,zc,c)},Hc=function(a,b,c){return sc(a,b,b.type,c)},Ic=function(a,b,c){return Dc(a,"MultiGeometry","geometryMembers",b.geometries,Hc,c)},Jc=H+"schemas.microsoft.com/ado/",Kc=Jc+"2007/08/dataservices",Lc=Jc+"2007/06/edmx",Mc=Kc,Nc=Kc+"/metadata",Oc=Kc+"/related/",Pc=Kc+"/scheme",Qc=function(a,b){var c={name:ha(a),value:a.value};return c[b?"namespaceURI":"namespace"]=ia(a),c},Rc=function(a,b){var c,d,e=[],f=[],g=a.attributes;for(c=0,d=g.length;c<d;c++){var h=g[c];ia(h)!==K&&e.push(Qc(h,b))}for(var i=a.firstChild;null!=i;)1===i.nodeType&&f.push(Rc(i,b)),i=i.nextSibling;var j={name:ha(a),value:ga(a),attributes:e,children:f};return j[b?"namespaceURI":"namespace"]=ia(a),j},Sc=function(a){return ia(a)===Mc&&"element"===ha(a)},Tc=function(a,b){return{type:a,extensions:b}},Uc=function(a){if(da(a,Zb))return"Edm.Geometry";var b=da(a,Mc);if(!b)return"Edm.String";if(Sc(b)){var c=la(b,Mc);if(c&&Sc(c))return"Collection()"}return null},Vc=function(a){var b=null,c=!1,d=[];return Y(a,function(a){var e=ia(a),f=ha(a),g=ja(a);if(e===Nc){if("null"===f)return void(c="true"===g.toLowerCase());if("type"===f)return void(b=g)}if(e!==L&&e!==K)return void d.push(Qc(a,!0))}),{type:!b&&c?"Edm.String":b,isNull:c,extensions:d}},Wc=function(a){if(ia(a)!==Mc)return null;var b=ha(a),c=Vc(a),d=c.isNull,e=c.type,f=Tc(e,c.extensions);return{name:b,value:d?null:Xc(a,e,f),metadata:f}},Xc=function(a,b,c){b||(b=Uc(a),c.type=b);var d=Va(b);return d||Wa(b)?Yc(a,b,d):Za(b)?Zc(a,b):Pa(b)?_c(a,b,c):$c(a,b,c)},Yc=function(a,b,c){var d=da(a,Zb),e=rc(d,c);return e.__metadata={type:b},e},Zc=function(a,b){var c=ja(a)||"";switch(b){case"Edm.Boolean":return pb(c);case"Edm.Binary":case"Edm.Decimal":case"Edm.Guid":case"Edm.Int64":case"Edm.String":return c;case"Edm.Byte":case"Edm.Int16":case"Edm.Int32":case"Edm.SByte":return o(c);case"Edm.Double":case"Edm.Single":return parseFloat(c);case"Edm.Time":return vb(c);case"Edm.DateTime":return sb(c);case"Edm.DateTimeOffset":return tb(c)}return c},$c=function(a,b,c){var d={__metadata:{type:b}};return aa(a,function(a){var b=Wc(a),e=b.name;c.properties=c.properties||{},c.properties[e]=b.metadata,d[e]=b.value}),d},_c=function(a,b,c){var d=[],e=c.elements=[],f=Ka(b);return aa(a,function(a){if(Sc(a)){var b=Vc(a),c=b.extensions,g=b.type||f,h=Tc(g,c),i=Xc(a,g,h);d.push(i),e.push(h)}}),{__metadata:{type:"Collection()"===b?null:b},results:d}},ad=function(a,b){if(ia(a)===Mc){b=_(a,b);var c=ha(a);if("links"===c)return bd(a,b);if("uri"===c)return cd(a,b)}},bd=function(a,b){var c=[];return aa(a,function(a){"uri"===ha(a)&&ia(a)===Mc&&c.push(cd(a,b))}),{results:c}},cd=function(a,b){var c=ga(a)||"";return{uri:A(c,b)}},dd=function(a,b){return"Edm.Geometry"===b||"Edm.Geography"===b?a&&a.type:"Edm.GeometryPoint"===b||"Edm.GeographyPoint"===b?"Point":"Edm.GeometryLineString"===b||"Edm.GeographyLineString"===b?"LineString":"Edm.GeometryPolygon"===b||"Edm.GeographyPolygon"===b?"Polygon":"Edm.GeometryCollection"===b||"Edm.GeographyCollection"===b?"GeometryCollection":"Edm.GeometryMultiPolygon"===b||"Edm.GeographyMultiPolygon"===b?"MultiPolygon":"Edm.GeometryMultiLineString"===b||"Edm.GeographyMultiLineString"===b?"MultiLineString":"Edm.GeometryMultiPoint"===b||"Edm.GeographyMultiPoint"===b?"MultiPoint":null},ed=function(a,b,c){return qa(a,Nc,W("m",b),c)},fd=function(a,b,c){return pa(a,Nc,W("m",b),c)},gd=function(a,b,c){return qa(a,Mc,W("d",b),c)},hd=function(a,b){return"Edm.DateTime"===b||"Edm.DateTimeOffset"===b||m(a)?Ga(a):"Edm.Time"===b?Ha(a):a.toString()},id=function(a,b){return{element:a,dsv:b}},jd=function(a,b,c,d){var e=c?fd(a,"type",c):null,f=gd(a,b,e);return na(f,d)},kd=function(a,b,c,d){var e=hd(c,d),f=jd(a,b,d,e);return id(f,"1.0")},ld=function(a,b,c,d){var e=fd(a,"null","true"),f=jd(a,b,c,e),g=cb(c,d)?"2.0":"1.0";return id(f,g)},md=function(a,b,c,d,e,f,g){var h=Ka(d),i=l(c)?c:c.results,j=d?{type:h}:{};j.properties=e.properties;var k,m,n=jd(a,b,h?d:null);for(k=0,m=i.length;k<m;k++){var o=i[k],p=pd(a,"element",o,j,f,g);oa(n,p.element)}return id(n,"3.0")},nd=function(a,b,c,d,e,f,g){var h=jd(a,b,d),i=e.properties||{},j=cb(d,g)||{},k="1.0";for(var l in c)if("__metadata"!==l){var m=c[l],n=_a(j.property,l),o=i[l]||{},p=pd(a,l,m,o,n,g);k=mb(k,p.dsv),oa(h,p.element)}return id(h,k)},od=function(a,b,c,d,e){var f=dd(c,d),g=sc(a,c,f,e),h=jd(a,b,d,g);return id(h,"3.0")},pd=function(a,b,c,d,e,f){var g=Aa(c,d);if(Ya(c))return kd(a,b,c,g||"Edm.String");var h=Va(g);return h||Wa(g)?od(a,b,c,g,h):Oa(c,g)?md(a,b,c,g,d,e,f):Xa(c)?null:null!==$a(c,e)?null:null===c?ld(a,b,g):nd(a,b,c,g,d,0,f)},qd=function(a){if(a&&n(a)){var b=ma();return oa(b,gd(b,"uri",a.uri))}},rd=function(a,b){if(b){var c=V(b),d=da(c);if(d)return ad(d)}},sd=function(a,b,c){var d=c.contentType=c.contentType||Kb("application/xml");if(d&&"application/xml"===d.mediaType)return va(qd(b))};d.xmlHandler=Wb(rd,sd,"application/xml","3.0");var td=I+"2005/Atom",ud=I+"2007/app",vd=Kc+"/edit-media/",wd=["application/atom+xml","application/atomsvc+xml","application/xml"],xd=wd[0],yd=[td,ud,L,K],zd={SyndicationAuthorEmail:"author/email",SyndicationAuthorName:"author/name",SyndicationAuthorUri:"author/uri",SyndicationContributorEmail:"contributor/email",SyndicationContributorName:"contributor/name",SyndicationContributorUri:"contributor/uri",SyndicationPublished:"published",SyndicationRights:"rights",SyndicationSummary:"summary",SyndicationTitle:"title",SyndicationUpdated:"updated"},Ad=function(a){return zd[a]||a},Bd=function(a){return!g(yd,a)},Cd=function(a,b,c,d,e){e=e||"";var f=a["FC_TargetPath"+e];if(!f)return null;var g=a["FC_SourcePath"+e],h=Ad(f),i=d?d+(g?"/"+g:""):g,j=i&&Qd(c,b,i),k=a["FC_NsUri"+e]||null,l=a["FC_NsPrefix"+e]||null,m=a["FC_KeepInContent"+e]||"";return f!==h&&(k=td,l="a"),{contentKind:a["FC_ContentKind"+e],keepInContent:"true"===m.toLowerCase(),nsPrefix:l,nsURI:k,propertyPath:i,propertyType:j,entryPath:h}},Dd=function(a,b,c){for(var d=[];a;){var e=(a.FC_SourcePath,Cd(a,a,b));e&&c(e);var f,g,h=a.property||[];for(f=0,g=h.length;f<g;f++)for(var i=h[f],j=0,k="";e=Cd(i,a,b,i.name,k);)c(e),j++,k="_"+j;a=db(a.baseType,b)}return d},Ed=function(a){var b=[];return Y(a,function(a){var c=ia(a);Bd(c)&&b.push(Qc(a,!0))}),b},Fd=function(a){return Rc(a,!0)},Gd=function(a,b,c){var d=ia(a),e=ha(a);if(d===ud&&"service"===e)return be(a,b);if(d===td){if("feed"===e)return Kd(a,b,c);if("entry"===e)return Rd(a,b,c)}},Hd=function(a,b){var c=[],d={extensions:c};return Y(a,function(e){var f=ha(e),g=ia(e),h=ja(e);if(null===g){if("title"===f||"metadata"===f)return void(d[f]=h);if("target"===f)return void(d.target=A(h,_(a,b)))}Bd(g)&&c.push(Qc(e,!0))}),d},Id=function(a,b,c){(c.actions=c.actions||[]).push(Hd(a,b))},Jd=function(a,b,c){(c.functions=c.functions||[]).push(Hd(a,b))},Kd=function(a,b,c){var d=Ed(a),e={feed_extensions:d},f=[],g={__metadata:e,results:f};return b=_(a,b),aa(a,function(a){var h=ia(a),i=ha(a);if(h===Nc){if("count"===i)return void(g.__count=parseInt(ga(a),10));if("action"===i)return void Id(a,b,e);if("function"===i)return void Jd(a,b,e)}return Bd(h)?void d.push(Rc(a)):"entry"===i?void f.push(Rd(a,b,c)):"link"===i?void Ld(a,g,b):"id"===i?(e.uri=A(ga(a),b),void(e.uri_extensions=Ed(a))):"title"===i?(e.title=ga(a)||"",void(e.title_extensions=Ed(a))):void 0}),g},Ld=function(a,b,c){var d=Md(a,c),e=d.href,f=d.rel,g=d.extensions,h=b.__metadata;return"next"===f?(b.__next=e,void(h.next_extensions=g)):"self"===f?(h.self=e,void(h.self_extensions=g)):void 0},Md=function(a,b){b=_(a,b);var c=[],d={extensions:c,baseURI:b};if(Y(a,function(a){var e=ia(a),f=ha(a),g=a.value;return"href"===f?void(d.href=A(g,b)):"type"===f||"rel"===f?void(d[f]=g):void(Bd(e)&&c.push(Qc(a,!0)))}),!d.href)throw{error:"href attribute missing on link element",element:a};return d},Nd=function(a,b){if(-1===a.indexOf("/"))return b[a];var c,d,e=a.split("/");for(c=0,d=e.length;c<d;c++){if(null===b)return;if(void 0===(b=b[e[c]]))return b}return b},Od=function(a,b,c,d){var e;if(-1===a.indexOf("/"))b[a]=c,e=a;else{var f,g,h=a.split("/");for(f=0,g=h.length-1;f<g;f++){var i=b[h[f]];if(void 0===i)i={},b[h[f]]=i;else if(null===i)return;b=i}e=h[f],b[e]=c}if(d){var j=b.__metadata=b.__metadata||{},k=j.properties=j.properties||{};(k[e]=k[e]||{}).type=d}},Pd=function(a,b,c){var d=a.propertyPath;if(!a.keepInContent&&null!==Nd(d,c)){var e=ca(b,a.nsURI,a.entryPath);if(e){var f,g=a.propertyType;f="xhtml"===a.contentKind?wa(e):Zc(e,g||"Edm.String"),Od(d,c,f,g)}}},Qd=function(a,b,c){for(var d,e,f=c.split("/");b;){var g=b;for(d=0,e=f.length;d<e;d++){var h=g.property;if(!h)break;var i=_a(h,f[d]);if(!i)break;var j=i.type;if(!j||Za(j))return j||null;if(!(g=cb(j,a)))return null}b=db(b.baseType,a)}return null},Rd=function(a,b,c){var d={},e={__metadata:d},f=Z(a,"etag",Nc);f&&(d.etag=f),b=_(a,b),aa(a,function(a){var f=ia(a),g=ha(a);if(f!==td){if(f===Nc){if("properties"===g)return void ae(a,e,d);if("action"===g)return void Id(a,b,d);if("function"===g)return void Jd(a,b,d)}}else{if("id"===g)return void Sd(a,d,b);if("category"===g)return void Td(a,d);if("content"===g)return void Ud(a,e,d,b);if("link"===g)return void Vd(a,e,d,b,c)}});var g=db(d.type,c);return Dd(g,c,function(b){Pd(b,a,e)}),e},Sd=function(a,b,c){b.uri=A(ga(a),_(a,c)),b.uri_extensions=Ed(a)},Td=function(a,b){if(Z(a,"scheme")===Pc){if(b.type)throw{message:"Invalid AtomPub document: multiple category elements defining the entry type were encounterd withing an entry",element:a};var c=[];Y(a,function(a){var b=ia(a),d=ha(a);if(!b)return void("scheme"!==d&&"term"!==d&&c.push(Qc(a,!0)));Bd(b)&&c.push(Qc(a,!0))}),b.type=Z(a,"term"),b.type_extensions=c}},Ud=function(a,b,c,d){var e=Z(a,"src"),f=Z(a,"type");if(e){if(!f)throw{message:"Invalid AtomPub document: content element must specify the type attribute if the src attribute is also specified",element:a};c.media_src=A(e,_(a,d)),c.content_type=f}aa(a,function(d){if(e)throw{message:"Invalid AtomPub document: content element must not have child elements if the src attribute is specified",element:a};ia(d)===Nc&&"properties"===ha(d)&&ae(d,b,c)})},Vd=function(a,b,c,d,e){var f=Md(a,d),g=f.rel,h=f.href,i=f.extensions;return"self"===g?(c.self=h,void(c.self_link_extensions=i)):"edit"===g?(c.edit=h,void(c.edit_link_extensions=i)):"edit-media"===g?(c.edit_media=f.href,c.edit_media_extensions=i,void _d(f,c)):0===g.indexOf(vd)?void Yd(f,b,c):0===g.indexOf("http://schemas.microsoft.com/ado/2007/08/dataservices/mediaresource/")?void Zd(f,b,c):0===g.indexOf(Oc)?void Xd(a,f,b,c,e):0===g.indexOf("http://schemas.microsoft.com/ado/2007/08/dataservices/relatedlinks/")?void Wd(f,c):void 0},Wd=function(a,b){var c=a.rel.substring("http://schemas.microsoft.com/ado/2007/08/dataservices/relatedlinks/".length);b.properties=b.properties||{};var d=b.properties[c]=b.properties[c]||{};d.associationuri=a.href,d.associationuri_extensions=a.extensions},Xd=function(a,b,c,d,e){var f,g=da(a,Nc,"inline");if(g){var h=da(g),i=_(g,b.baseURI);f=h?Gd(h,i,e):null}else f={__deferred:{uri:b.href}};var j=b.rel.substring(Oc.length);c[j]=f,d.properties=d.properties||{},(d.properties[j]=d.properties[j]||{}).extensions=b.extensions},Yd=function(a,b,c){var d=a.rel.substring(vd.length),e=$d(d,b,c),f=e.value,g=e.metadata,h=a.href;f.edit_media=h,f.content_type=a.type,g.edit_media_extensions=a.extensions,f.media_src=f.media_src||h,g.media_src_extensions=g.media_src_extensions||[],_d(a,f)},Zd=function(a,b,c){var d=a.rel.substring("http://schemas.microsoft.com/ado/2007/08/dataservices/mediaresource/".length),e=$d(d,b,c),f=e.value,g=e.metadata;f.media_src=a.href,g.media_src_extensions=a.extensions,f.content_type=a.type},$d=function(a,b,c){c.properties=c.properties||{};var d=c.properties[a],e=b[a]&&b[a].__mediaresource;return e||(e={},b[a]={__mediaresource:e},c.properties[a]=d={}),{value:e,metadata:d}},_d=function(a,b){var c,d,e=a.extensions;for(c=0,d=e.length;c<d;c++)if(e[c].namespaceURI===Nc&&"etag"===e[c].name)return b.media_etag=e[c].value,void e.splice(c,1)},ae=function(a,b,c){aa(a,function(a){var d=Wc(a);if(d){var e=d.name;(c.properties=c.properties||{})[e]=d.metadata,b[e]=d.value}})},be=function(a,b){var c=[],d=[];if(b=_(a,b),aa(a,function(a){if(ia(a)===ud&&"workspace"===ha(a))return void c.push(ce(a,b));d.push(Rc(a))}),0===c.length)throw{message:"Invalid AtomPub service document: No workspace element found.",element:a};return{workspaces:c,extensions:d}},ce=function(a,b){var c,d=[],e=[];return b=_(a,b),aa(a,function(a){var f=ia(a),g=ha(a);if(f===td&&"title"===g){if(void 0!==c)throw{message:"Invalid AtomPub service document: workspace has more than one child title element",element:a};return void(c=ga(a))}if(f===ud)return void("collection"===g&&d.push(de(a,b)));e.push(Fd(a))}),{title:c||"",collections:d,extensions:e}},de=function(a,b){var c=Z(a,"href");if(!c)throw{message:"Invalid AtomPub service document: collection has no href attribute",element:a};b=_(a,b),c=A(c,_(a,b));var d,e=[];if(aa(a,function(b){var c=ia(b),f=ha(b);if(c!==td)c!==ud&&e.push(Fd(a));else if("title"===f){if(void 0!==d)throw{message:"Invalid AtomPub service document: collection has more than one child title element",element:b};d=ga(b)}}),!d)throw{message:"Invalid AtomPub service document: collection has no title element",element:a};return{title:d,href:c,extensions:e}},ee=function(a,b,c){return qa(a,td,W("a",b),c)},fe=function(a,b,c){return pa(a,null,b,c)},ge=function(a){if(a.childNodes.length>0)return!1;var b,c,d=!0,e=a.attributes;for(b=0,c=e.length;b<c&&d;b++){var f=e[b];d=d&&P(f)||ia(f)==Nc&&"type"===ha(f)}return d},he=function(a,b,c,d,e){var f=null,g=null,h=null,i="";"deferred"!==c?(f=fe(a,"type","application/atom+xml;type="+c),g=ed(a,"inline"),d&&(i=d.__metadata&&d.__metadata.uri||"",h=le(a,d,e)||ke(a,d,e),oa(g,h.element))):i=d.__deferred.uri;var j=ee(a,"link",[fe(a,"href",i),fe(a,"rel",A(b,Oc)),f,g]);return id(j,h?h.dsv:"1.0")},ie=function(a,b,c,d,e,f){if(Xa(c))return null;var g=pd(a,b,c,d,e,f);if(!g){var h=$a(c,e);g=he(a,b,h,c,f)}return g},je=function(a,b,c,d){var e,f=ba(c,Mc,d.propertyPath),g=f&&$(f,"null",Nc),h="1.0";if(g&&"true"===g.value)return h;if(f&&(e=ga(f)||"",!d.keepInContent)){h="2.0";var i=f.parentNode,j=i;for(i.removeChild(f);j!==c&&ge(j);)i=j.parentNode,i.removeChild(j),j=i}var k=ua(a,b,d.nsURI,d.nsPrefix,d.entryPath);if(2===k.nodeType)return k.value=e,h;var l=d.contentKind;return na(k,[l&&pa(a,null,"type",l),"xhtml"===l?sa(a,e):e]),h},ke=function(a,b,c){var d=b.__metadata||{},e=d.properties||{},f=d.etag,g=d.uri,h=d.type,i=db(h,c),j=ed(a,"properties"),k=ee(a,"entry",[ee(a,"author",ee(a,"name")),f&&fd(a,"etag",f),g&&ee(a,"id",g),h&&ee(a,"category",[fe(a,"term",h),fe(a,"scheme",Pc)]),ee(a,"content",[fe(a,"type","application/xml"),j])]),l="1.0";for(var m in b)if("__metadata"!==m){var n=e[m]||{},o=i&&(_a(i.property,m)||_a(i.navigationProperty,m)),p=ie(a,m,b[m],n,o,c);if(p){var q=p.element,r=ia(q)===td?k:j;oa(r,q),l=mb(l,p.dsv)}}return Dd(i,c,function(b){var c=je(a,k,j,b);l=mb(l,c)}),id(k,l)},le=function(a,b,c){var d=l(b)?b:b.results;if(!d)return null;var e,f,g="1.0",h=ee(a,"feed");for(e=0,f=d.length;e<f;e++){var i=ke(a,d[e],c);oa(h,i.element),g=mb(g,i.dsv)}return id(h,g)},me=function(a,b){if(a){var c=Ua(a)&&le||n(a)&&ke;if(c){var d=ma(),e=c(d,a,b);if(e){var f=e.element;return na(f,[ra(d,Nc,"m"),ra(d,Mc,"d")]),id(oa(d,f),e.dsv)}}}return null},ne=function(a,b,c){if(b){var d=V(b),e=da(d);if(e)return Gd(e,null,c.metadata)}},oe=function(a,b,c){var d=c.contentType=c.contentType||Kb(xd);if(d&&d.mediaType===xd){var e=me(b,c.metadata);if(e)return c.dataServiceVersion=mb(c.dataServiceVersion||"1.0",e.dsv),va(e.element)}};d.atomHandler=Wb(ne,oe,wd.join(","),"3.0");var pe=function(a,b,c,d){return{attributes:a,elements:b,text:c||!1,ns:d}},qe={elements:{Annotations:pe(["Target","Qualifier"],["TypeAnnotation*","ValueAnnotation*"]),Association:pe(["Name"],["End*","ReferentialConstraint","TypeAnnotation*","ValueAnnotation*"]),AssociationSet:pe(["Name","Association"],["End*","TypeAnnotation*","ValueAnnotation*"]),Binary:pe(null,null,!0),Bool:pe(null,null,!0),Collection:pe(null,["String*","Int*","Float*","Decimal*","Bool*","DateTime*","DateTimeOffset*","Guid*","Binary*","Time*","Collection*","Record*"]),CollectionType:pe(["ElementType","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","SRID"],["CollectionType","ReferenceType","RowType","TypeRef"]),ComplexType:pe(["Name","BaseType","Abstract"],["Property*","TypeAnnotation*","ValueAnnotation*"]),DateTime:pe(null,null,!0),DateTimeOffset:pe(null,null,!0),Decimal:pe(null,null,!0),DefiningExpression:pe(null,null,!0),Dependent:pe(["Role"],["PropertyRef*"]),Documentation:pe(null,null,!0),End:pe(["Type","Role","Multiplicity","EntitySet"],["OnDelete"]),EntityContainer:pe(["Name","Extends"],["EntitySet*","AssociationSet*","FunctionImport*","TypeAnnotation*","ValueAnnotation*"]),EntitySet:pe(["Name","EntityType"],["TypeAnnotation*","ValueAnnotation*"]),EntityType:pe(["Name","BaseType","Abstract","OpenType"],["Key","Property*","NavigationProperty*","TypeAnnotation*","ValueAnnotation*"]),EnumType:pe(["Name","UnderlyingType","IsFlags"],["Member*"]),Float:pe(null,null,!0),Function:pe(["Name","ReturnType"],["Parameter*","DefiningExpression","ReturnType","TypeAnnotation*","ValueAnnotation*"]),FunctionImport:pe(["Name","ReturnType","EntitySet","IsSideEffecting","IsComposable","IsBindable","EntitySetPath"],["Parameter*","ReturnType","TypeAnnotation*","ValueAnnotation*"]),Guid:pe(null,null,!0),Int:pe(null,null,!0),Key:pe(null,["PropertyRef*"]),LabeledElement:pe(["Name"],["Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time","Collection","Record","LabeledElement","Null"]),Member:pe(["Name","Value"]),NavigationProperty:pe(["Name","Relationship","ToRole","FromRole","ContainsTarget"],["TypeAnnotation*","ValueAnnotation*"]),Null:pe(null,null),OnDelete:pe(["Action"]),Path:pe(null,null,!0),Parameter:pe(["Name","Type","Mode","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","ConcurrencyMode","SRID"],["CollectionType","ReferenceType","RowType","TypeRef","TypeAnnotation*","ValueAnnotation*"]),Principal:pe(["Role"],["PropertyRef*"]),Property:pe(["Name","Type","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","ConcurrencyMode","CollectionKind","SRID"],["CollectionType","ReferenceType","RowType","TypeAnnotation*","ValueAnnotation*"]),PropertyRef:pe(["Name"]),PropertyValue:pe(["Property","Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time"],["Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time","Collection","Record","LabeledElement","Null"]),ReferenceType:pe(["Type"]),ReferentialConstraint:pe(null,["Principal","Dependent"]),ReturnType:pe(["ReturnType","Type","EntitySet"],["CollectionType","ReferenceType","RowType"]),RowType:pe(["Property*"]),String:pe(null,null,!0),Schema:pe(["Namespace","Alias"],["Using*","EntityContainer*","EntityType*","Association*","ComplexType*","Function*","ValueTerm*","Annotations*"]),Time:pe(null,null,!0),TypeAnnotation:pe(["Term","Qualifier"],["PropertyValue*"]),TypeRef:pe(["Type","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","SRID"]),Using:pe(["Namespace","Alias"]),ValueAnnotation:pe(["Term","Qualifier","Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time"],["Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time","Collection","Record","LabeledElement","Null"]),ValueTerm:pe(["Name","Type"],["TypeAnnotation*","ValueAnnotation*"]),Edmx:pe(["Version"],["DataServices","Reference*","AnnotationsReference*"],!1,Lc),DataServices:pe(null,["Schema*"],!1,Lc)}},re=["m:FC_ContentKind","m:FC_KeepInContent","m:FC_NsPrefix","m:FC_NsUri","m:FC_SourcePath","m:FC_TargetPath"];qe.elements.Property.attributes=qe.elements.Property.attributes.concat(re),qe.elements.EntityType.attributes=qe.elements.EntityType.attributes.concat(re),qe.elements.Edmx={attributes:["Version"],elements:["DataServices"],ns:Lc},qe.elements.DataServices={elements:["Schema*"],ns:Lc},qe.elements.EntityContainer.attributes.push("m:IsDefaultEntityContainer"),qe.elements.Property.attributes.push("m:MimeType"),qe.elements.FunctionImport.attributes.push("m:HttpMethod"),qe.elements.FunctionImport.attributes.push("m:IsAlwaysBindable"),qe.elements.EntityType.attributes.push("m:HasStream"),qe.elements.DataServices.attributes=["m:DataServiceVersion","m:MaxDataServiceVersion"];var se=function(a){if(!a)return a;if(a.length>1){var b=a.substr(0,2);return b===b.toUpperCase()?a:a.charAt(0).toLowerCase()+a.substr(1)}return a.charAt(0).toLowerCase()},te=function(a,b){if("Documentation"===b)return{isArray:!0,propertyName:"documentation"};var c=a.elements;if(!c)return null;var d,e;for(d=0,e=c.length;d<e;d++){var f=c[d],g=!1;if("*"===f.charAt(f.length-1)&&(g=!0,f=f.substr(0,f.length-1)),b===f){return{isArray:g,propertyName:se(f)}}}return null},ue=/^(m:FC_.*)_[0-9]+$/,ve=function(a){return"http://schemas.microsoft.com/ado/2006/04/edm"===a||"http://schemas.microsoft.com/ado/2007/05/edm"===a||"http://schemas.microsoft.com/ado/2008/01/edm"===a||"http://schemas.microsoft.com/ado/2008/09/edm"===a||"http://schemas.microsoft.com/ado/2009/08/edm"===a||"http://schemas.microsoft.com/ado/2009/11/edm"===a},we=function(a){var b=ha(a),c=ia(a),d=qe.elements[b];if(!d)return null;if(d.ns){if(c!==d.ns)return null}else if(!ve(c))return null;var e={},f=[],h=d.attributes||[];return Y(a,function(a){var b=ha(a),c=ia(a),d=a.value;if(c!==K){var i=null,j=!1;if(ve(c)||null===c?i="":c===Nc&&(i="m:"),null!==i){i+=b;var k=ue.exec(i);k&&(i=k[1]),g(h,i)&&(j=!0,e[se(b)]=d)}j||f.push(Qc(a))}}),aa(a,function(a){var b=ha(a),c=te(d,b);if(c)if(c.isArray){var g=e[c.propertyName];g||(g=[],e[c.propertyName]=g),g.push(we(a))}else e[c.propertyName]=we(a);else f.push(Rc(a))}),d.text&&(e.text=ga(a)),f.length&&(e.extensions=f),e},xe=function(a,b){var c=V(b),d=da(c);return we(d)||void 0};d.metadataHandler=Wb(xe,null,"application/xml","3.0");var ye={readLink:"self",editLink:"edit",nextLink:"__next",mediaReadLink:"media_src",mediaEditLink:"edit_media",mediaContentType:"content_type",mediaETag:"media_etag",count:"__count",media_src:"mediaReadLink",edit_media:"mediaEditLink",content_type:"mediaContentType",media_etag:"mediaETag",url:"uri"},ze={metadata:"odata.metadata",count:"odata.count",next:"odata.nextLink",id:"odata.id",etag:"odata.etag",read:"odata.readLink",edit:"odata.editLink",mediaRead:"odata.mediaReadLink",mediaEdit:"odata.mediaEditLink",mediaEtag:"odata.mediaETag",mediaContentType:"odata.mediaContentType",actions:"odata.actions",functions:"odata.functions",navigationUrl:"odata.navigationLinkUrl",associationUrl:"odata.associationLinkUrl",type:"odata.type"},Ae=function(a){if(a.indexOf(".")>0){var b=a.indexOf("@"),c=b>-1?a.substring(0,b):null,d=a.substring(b+1);return{target:c,name:d,isOData:0===d.indexOf("odata.")}}return null},Be=function(a,b,c,d,e){return Qa(b)&&b["odata.type"]||c&&c[a+"@odata.type"]||d&&d.type||hb(d,e)||null},Ce=function(a,b){return b?_a(b.property,a)||_a(b.navigationProperty,a):null},De=function(a){return Qa(a)&&"odata.id"in a},Ee=function(a,b,c){if(b[a+"@odata.navigationLinkUrl"]||c&&c.relationship)return!0;var d=l(b[a])?b[a][0]:b[a];return De(d)},Fe=function(a){return Za(a)||Va(a)||Wa(a)},Ge=function(a,b,c,d,e){for(var f in a)if(f.indexOf(".")>0&&"#"!==f.charAt(0)){var g=Ae(f);if(g){var h=g.name,i=g.target,j=null,k=null;i&&(j=Ce(i,d),k=Be(i,a[i],a,j,e)),g.isOData?He(h,i,k,a[f],a,b,c):b[f]=a[f]}}return b},He=function(a,b,c,d,e,f,g){var h=a.substring("odata.".length);switch(h){case"navigationLinkUrl":return void Le(h,b,c,d,e,f,g);case"nextLink":case"count":return void Je(h,b,d,f,g);case"mediaReadLink":case"mediaEditLink":case"mediaContentType":case"mediaETag":return void Ke(h,b,c,d,f,g);default:return void Ie(h,b,d,f,g)}},Ie=function(a,b,c,d,e){var f=d.__metadata=d.__metadata||{},g=ye[a]||a;if("editLink"===a)return f.uri=A(c,e),void(f[g]=f.uri);if("readLink"!==a&&"associationLinkUrl"!==a||(c=A(c,e)),b){var h=f.properties=f.properties||{},i=h[b]=h[b]||{};return"type"===a?void(i[g]=i[g]||c):void(i[g]=c)}f[g]=c},Je=function(a,b,c,d,e){var f=ye[a];(b?d[b]:d)[f]="nextLink"===a?A(c,e):c},Ke=function(a,b,c,d,e,f){var g=e.__metadata=e.__metadata||{},h=ye[a];if("mediaReadLink"!==a&&"mediaEditLink"!==a||(d=A(d,f)),b){var i=g.properties=g.properties||{},j=i[b]=i[b]||{};return j.type=j.type||c,e.__metadata=g,e[b]=e[b]||{__mediaresource:{}},void(e[b].__mediaresource[h]=d)}g[h]=d},Le=function(a,b,c,d,e,f,g){var h=f.__metadata=f.__metadata||{},i=h.properties=h.properties||{},j=i[b]=i[b]||{},k=A(d,g);if(e.hasOwnProperty(b))return void(j.navigationLinkUrl=k);f[b]={__deferred:{uri:k}},j.type=j.type||c},Me=function(a,b,c,d,e,f,g){if("string"==typeof a)return Ne(a,b,g);if(!Fe(b)){if(l(a))return Oe(a,b,c,d,f,g);if(Qa(a))return Pe(a,b,c,d,f,g)}return a},Ne=function(a,b,c){switch(b){case"Edm.Time":return vb(a);case"Edm.DateTime":return sb(a,!1);case"Edm.DateTimeOffset":return tb(a,!1)}return c?sb(a,!0)||tb(a,!0)||a:a},Oe=function(a,b,c,d,e,f){var g,h,i=Ka(b),j=[],k=[];for(g=0,h=a.length;g<h;g++){var l=Be(null,a[g])||i,m={type:l},n=Me(a[g],l,m,d,0,e,f);Fe(l)||Ya(a[g])||j.push(m),k.push(n)}return j.length>0&&(c.elements=j),{__metadata:{type:b},results:k}},Pe=function(a,b,c,d,e,f){var g=Re(a,{type:b},d,e,f),h=g.__metadata,i=h.properties;return i&&(c.properties=i,delete h.properties),g},Qe=function(a,b,c,d,e){return l(a)?Te(a,b,c,d,e):Qa(a)?Re(a,b,c,d,e):null
},Re=function(a,b,c,d,e){b=b||{};var f=a["odata.type"]||b.type||null,g=db(f,d),h=!0;g||(h=!1,g=cb(f,d));var i,j={type:f},k={__metadata:j},l={};if(h&&g&&b.entitySet&&"minimalmetadata"==b.contentTypeOdata){var m=c.substring(0,c.lastIndexOf("$metadata"));for(i=null,g.key||(i=g);i&&!i.key&&i.baseType;)i=db(i.baseType,d);if(g.key||i&&i.key){var n;if(n=g.key?Ue(a,g):Ue(a,i)){var o={key:n,entitySet:b.entitySet,functionImport:b.functionImport,containerName:b.containerName};Ve(a,o,f,m,g,i)}}}for(var p in a)if(0===p.indexOf("#"))Se(p.substring(1),a[p],k,c,d);else if(-1===p.indexOf(".")){j.properties||(j.properties=l);var q=a[p],r=r=Ce(p,g);for(i=g;g&&null===r&&i.baseType;)i=db(i.baseType,d),r=r=Ce(p,i);var s=Ee(p,a,r),t=Be(p,q,a,r,d),u=l[p]=l[p]||{type:t};if(s){var v={};if(void 0!==b.entitySet){var w=ib(r,b.entitySet.name,d);v=jb(w,d)}v.contentTypeOdata=b.contentTypeOdata,v.kind=b.kind,v.type=t,k[p]=Qe(q,v,c,d,e)}else k[p]=Me(q,t,u,c,0,d,e)}return Ge(a,k,c,g,d)},Se=function(a,b,c,d,e){if(a&&(l(b)||Qa(b))){var f=!1,g=a.lastIndexOf("."),h=a.substring(g+1),i=g>-1?a.substring(0,g):"",j=h===a||-1===i.indexOf(".")?eb(e):fb(i,e);if(j){var k=gb(j.functionImport,h);k&&k.isSideEffecting&&(f=!pb(k.isSideEffecting))}var m,n,o=c.__metadata,p=f?"functions":"actions",q=A(a,d),r=l(b)?b:[b];for(m=0,n=r.length;m<n;m++){var s=r[m];if(s){var t=o[p]=o[p]||[],u={metadata:q,title:s.title,target:A(s.target,d)};t.push(u)}}}},Te=function(a,b,c,d,e){var f,g,h,i=l(a)?a:a.value,j=[];for(f=0,g=i.length;f<g;f++)h=Re(i[f],b,c,d,e),j.push(h);var k={results:j};if(Qa(a)){for(var m in a)0===m.indexOf("#")&&(k.__metadata=k.__metadata||{},Se(m.substring(1),a[m],k,c,d));k=Ge(a,k,c)}return k},Ue=function(a,b){var c,d,e=b.key.propertyRef;if(c="(",1==e.length)d=_a(b.property,e[0].name).type,c+=Ze(a[e[0].name],d);else for(var f=!0,g=0;g<e.length;g++)f?f=!1:c+=",",d=_a(b.property,e[g].name).type,c+=e[g].name+"="+Ze(a[e[g].name],d);return c+=")"},Ve=function(a,b,c,d,e,f){var g=a[ze.id]||a[ze.read]||a[ze.edit]||b.entitySet.name+b.key;if(a[ze.id]=d+g,a[ze.edit]||(a[ze.edit]=b.entitySet.name+b.key,b.entitySet.entityType!=c&&(a[ze.edit]+="/"+c)),a[ze.read]=a[ze.read]||a[ze.edit],!a[ze.etag]){var h=We(a,e,f);h&&(a[ze.etag]=h)}af(a,e,f),Ye(a,e,f),_e(a,b)},We=function(a,b,c){for(var d,e="",f=0;b.property&&f<b.property.length;f++)d=b.property[f],e=Xe(a,e,d);if(c)for(f=0;c.property&&f<c.property.length;f++)d=c.property[f],e=Xe(a,e,d);return e.length>0?e+'"':null},Xe=function(a,b,c){return"Fixed"==c.concurrencyMode&&(b.length>0?b+=",":b+='W/"',null!==a[c.name]?b+=Ze(a[c.name],c.type):b+="null"),b},Ye=function(a,b,c){for(var d,e,f,g=0;b.navigationProperty&&g<b.navigationProperty.length;g++)d=b.navigationProperty[g].name,e=d+"@odata.navigationLinkUrl",void 0===a[e]&&(a[e]=a[ze.edit]+"/"+encodeURIComponent(d)),f=d+"@odata.associationLinkUrl",void 0===a[f]&&(a[f]=a[ze.edit]+"/$links/"+encodeURIComponent(d));if(c&&c.navigationProperty)for(g=0;g<c.navigationProperty.length;g++)d=c.navigationProperty[g].name,e=d+"@odata.navigationLinkUrl",void 0===a[e]&&(a[e]=a[ze.edit]+"/"+encodeURIComponent(d)),f=d+"@odata.associationLinkUrl",void 0===a[f]&&(a[f]=a[ze.edit]+"/$links/"+encodeURIComponent(d))},Ze=function(a,b){switch(a=""+$e(a,b),a=encodeURIComponent(a.replace("'","''")),b){case"Edm.Binary":return"X'"+a+"'";case"Edm.DateTime":return"datetime'"+a+"'";case"Edm.DateTimeOffset":return"datetimeoffset'"+a+"'";case"Edm.Decimal":return a+"M";case"Edm.Guid":return"guid'"+a+"'";case"Edm.Int64":return a+"L";case"Edm.Float":return a+"f";case"Edm.Double":return a+"D";case"Edm.Geography":return"geography'"+a+"'";case"Edm.Geometry":return"geometry'"+a+"'";case"Edm.Time":return"time'"+a+"'";case"Edm.String":return"'"+a+"'";default:return a}},$e=function(a,b){switch(b){case"Edm.Binary":return D(a);default:return a}},_e=function(a,b){for(var c=b.functionImport||[],d=0;d<c.length;d++)if(c[d].isBindable&&c[d].parameter[0]&&c[d].parameter[0].type==b.entitySet.entityType){var e="#"+b.containerName+"."+c[d].name;void 0==a[e]&&(a[e]={title:c[d].name,target:a[ze.edit]+"/"+c[d].name})}},af=function(a,b,c){(b.hasStream||c&&c.hasStream)&&(a[ze.mediaEdit]=a[ze.mediaEdit]||a[ze.mediaEdit]+"/$value",a[ze.mediaRead]=a[ze.mediaRead]||a[ze.mediaEdit])},bf=function(a,b,c,d){var e={type:b},f=Me(a.value,b,e,c,0,null,d);return Ge(a,{__metadata:e,value:f},c)},cf=function(a,b,c,d,e){var f={},g=Oe(a.value,b,f,c,d,e);return j(g.__metadata,f),Ge(a,g,c)},df=function(a,b){var c=a.value;if(!l(c))return ef(a,b);var d,e,f=[];for(d=0,e=c.length;d<e;d++)f.push(ef(c[d],b));return Ge(a,{results:f},b)},ef=function(a,b){var c={uri:A(a.url,b)};c=Ge(a,c,b);var d=c.__metadata||{},e=d.properties||{};return ff(e.url),p(e,"url","uri"),c},ff=function(a){a&&delete a.type},gf=function(a,b){var c=a.value,d=[],e=Ge(a,{collections:d},b),f=e.__metadata||{},g=f.properties||{};ff(g.value),p(g,"value","collections");var h,i;for(h=0,i=c.length;h<i;h++){var j=c[h],k={title:j.name,href:A(j.url,b)};k=Ge(j,k,b),f=k.__metadata||{},g=f.properties||{},ff(g.name),ff(g.url),p(g,"name","title"),p(g,"url","href"),d.push(k)}return{workspaces:[e]}},hf=function(a,b){return{kind:a,type:b||null}},jf=function(a,b,c){var d=a["odata.metadata"];if(!d||"string"!=typeof d)return null;var e=d.lastIndexOf("#");if(-1===e)return hf("s");var f=d.indexOf("@Element",e),g=f-1;g<0&&-1===(g=d.indexOf("?",e))&&(g=d.length);var h=d.substring(e+1,g);if(h.indexOf("/$links/")>0)return hf("l");var i=h.split("/");if(i.length>=0){var j=i[0],k=i[1];if(Fe(j))return hf("p",j);if(Pa(j))return hf("c",j);var m,n,o,p=k;if(!k){var q=j.lastIndexOf("."),r=j.substring(q+1),s=r===j?eb(b):fb(j.substring(0,q),b);s&&(m=bb(s.entitySet,r),n=s.functionImport,o=s.name,p=m?m.entityType:null)}var t;if(f>0)return t=hf("o",p),t.entitySet=m,t.functionImport=n,t.containerName=o,t;if(p)return t=hf("f",p),t.entitySet=m,t.functionImport=n,t.containerName=o,t;if(l(a.value)&&!cb(j,b)){var u=a.value[0];if(!Ya(u)&&(De(u)||!c))return hf("f",null)}return hf("o",j)}return null},kf=function(a,b,c,d,e){if(!Qa(a))return a;e=e||"minimalmetadata";var g=a["odata.metadata"],h=jf(a,b,d);f(h)&&(h.contentTypeOdata=e);var i=null;if(h)switch(delete a["odata.metadata"],i=h.type,h.kind){case"f":return Te(a,h,g,b,c);case"c":return cf(a,i,g,b,c);case"p":return bf(a,i,g,c);case"s":return gf(a,g);case"l":return df(a,g)}return Re(a,h,g,b,c)},lf=["type","etag","media_src","edit_media","content_type","media_etag"],mf=function(a,b){var c=/\/\$links\//,d={},e=a.__metadata,f=b&&c.test(b.request.requestUri);return of(a,e&&e.properties,d,f),d},nf=function(a,b){if(a){var c,d;for(c=0,d=lf.length;c<d;c++){var e=lf[c];wf("odata."+(ye[e]||e),null,a[e],b)}}},of=function(a,b,c,d){for(var e in a){var f=a[e];"__metadata"===e?nf(f,c):-1===e.indexOf(".")?d&&"uri"===e?qf(f,c):pf(e,f,b,c,d):c[e]=f}},pf=function(a,b,c,d){var e=c&&c[a]||{properties:void 0,type:void 0},f=Aa(b,e);return Ya(b)||!b?(wf("odata.type",a,f,d),void(d[a]=b)):Ua(b,f)||Ta(b)?void tf(a,b,d):!f&&Sa(b)?void rf(a,b,d):Oa(b,f)?(Ka(f)&&wf("odata.type",a,f,d),void sf(a,b,d)):(d[a]={},wf("odata.type",null,f,d[a]),void of(b,e.properties,d[a]))},qf=function(a,b){b.url=a},rf=function(a,b,c){wf("odata.navigationLinkUrl",a,b.__deferred.uri,c)},sf=function(a,b,c){c[a]=[];var d=l(b)?b:b.results;of(d,null,c[a])},tf=function(a,b,c){if(Ua(b)){c[a]=[];var d,e,f=l(b)?b:b.results;for(d=0,e=f.length;d<e;d++)uf(a,f[d],!0,c)}else uf(a,b,!1,c)},uf=function(a,b,c,d){var e=b.__metadata&&b.__metadata.uri;if(e)return void vf(a,e,c,d);var f=mf(b);if(c)return void d[a].push(f);d[a]=f},vf=function(a,b,c,d){var e=a+"@odata.bind";if(c)return d[e]=d[e]||[],void d[e].push(b);d[e]=b},wf=function(a,b,c,d){void 0!==c&&(b?d[b+"@"+a]=c:d[a]=c)},xf=Kb("application/json"),yf=function(a){var b=[];for(var c in a){var d,e;for(d=0,e=a[c].length;d<e;d++)b.push(j({metadata:c},a[c][d]))}return b},zf=function(a,b,c,d){if(a&&"object"==typeof a){var e,f=a.__metadata;f&&(f.actions&&(f.actions=yf(f.actions)),f.functions&&(f.functions=yf(f.functions)),e=f&&f.type);var g,h=db(e,b)||cb(e,b);if(h){var i=h.property;if(i){var j,k;for(j=0,k=i.length;j<k;j++){var l=i[j],m=l.name;if(g=a[m],"Edm.DateTime"===l.type||"Edm.DateTimeOffset"===l.type){if(g){if(!(g=c(g)))throw{message:"Invalid date/time value"};a[m]=g}}else"Edm.Time"===l.type&&(a[m]=vb(g))}}}else if(d)for(var n in a)"string"==typeof(g=a[n])&&(a[n]=c(g)||g)}return a},Af=function(a){if(a){var b=a.properties.odata;return"nometadata"===b||"minimalmetadata"===b||"fullmetadata"===b}return!1},Bf=function(a,b){var c,d,e={collections:[]};for(c=0,d=a.EntitySets.length;c<d;c++){var f=a.EntitySets[c],g={title:f,href:A(f,b)};e.collections.push(g)}return{workspaces:[e]}},Cf=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/,Df=function(a){var b;a<0?(b="-",a=-a):b="+";var c=Math.floor(a/60);return a-=60*c,b+Ia(c,2)+":"+Ia(a,2)},Ef=function(a){var b=a&&Cf.exec(a);if(b){var c=new Date(o(b[1]));if(b[2]){var d=o(b[3]);"-"===b[2]&&(d=-d);var e=c.getUTCMinutes();c.setUTCMinutes(e-d),c.__edmType="Edm.DateTimeOffset",c.__offset=Df(d)}if(!isNaN(c.valueOf()))return c}},Ff=function(b,c,d){var e=h(d.recognizeDates,b.recognizeDates),f=h(d.inferJsonLightFeedAsObject,b.inferJsonLightFeedAsObject),g=d.metadata,i=d.dataServiceVersion,j=Ef,k="string"==typeof c?a.JSON.parse(c):c;if(mb("3.0",i)===i){if(Af(d.contentType))return kf(k,g,e,f,d.contentType.properties.odata);j=sb}return k=zb(k.d,function(a,b){return zf(b,g,j,e)}),k=Kf(k,d.dataServiceVersion),Jf(k,d.response.requestUri)},Gf=function(b){var c,d=Date.prototype.toJSON;try{Date.prototype.toJSON=function(){return Ga(this)},c=a.JSON.stringify(b,If)}finally{Date.prototype.toJSON=d}return c},Hf=function(a,b,c){var d=c.dataServiceVersion||"1.0",e=h(c.useJsonLight,a.useJsonLight),f=c.contentType=c.contentType||xf;if(f&&f.mediaType===xf.mediaType){var g=b;return e||Af(f)?(c.dataServiceVersion=mb(d,"3.0"),g=mf(b,c),Gf(g)):(mb("3.0",d)===d&&(f.properties.odata="verbose",c.contentType=f),Gf(g))}},If=function(a,b){return b&&"Edm.Time"===b.__edmType?Ha(b):b},Jf=function(a,b){return Qa(a)&&!a.__metadata&&l(a.EntitySets)?Bf(a,b):a},Kf=function(a,b){return b&&b.lastIndexOf(";")===b.length-1&&(b=b.substr(0,b.length-1)),b&&"1.0"!==b||l(a)&&(a={results:a}),a},Lf=Wb(Ff,Hf,"application/json","3.0");Lf.recognizeDates=!1,Lf.useJsonLight=!1,Lf.inferJsonLightFeedAsObject=!1,d.jsonHandler=Lf;var Mf=/^HTTP\/1\.\d (\d{3}) (.*)$/i,Nf=/^([^()<>@,;:\\"\/[\]?={} \t]+)\s?:\s?(.*)/,Of=function(){return Math.floor(65536*(1+Math.random())).toString(16).substr(1)},Pf=function(a){return a+Of()+"-"+Of()+"-"+Of()},Qf=function(a){return a.handler.partHandler},Rf=function(a){var b=a.boundaries;return b[b.length-1]},Sf=function(a,b,c){var d=c.contentType.properties.boundary;return{__batchResponses:Uf(b,{boundaries:[d],handlerContext:c})}},Tf=function(a,b,c){if("multipart/mixed"===(c.contentType=c.contentType||Kb("multipart/mixed")).mediaType)return Zf(b,c)},Uf=function(a,b){var c="--"+Rf(b);Yf(a,b,c),Xf(a,b);for(var d,e=[];"--"!==d&&b.position<a.length;){var f,g=Vf(a,b),h=Kb(g["Content-Type"]);if(h&&"multipart/mixed"===h.mediaType){b.boundaries.push(h.properties.boundary);try{f=Uf(a,b)}catch(j){j.response=Wf(a,b,c),f=[j]}e.push({__changeResponses:f}),b.boundaries.pop(),Yf(a,b,"--"+Rf(b))}else{if(!h||"application/http"!==h.mediaType)throw{message:"invalid MIME part type "};Xf(a,b);var i=Wf(a,b,c);try{i.statusCode>=200&&i.statusCode<=299?Qf(b.handlerContext).read(i,b.handlerContext):i={message:"HTTP request failed",response:i}}catch(j){i=j}e.push(i)}d=a.substr(b.position,2),Xf(a,b)}return e},Vf=function(a,b){var c,d,e,f={};do{e=b.position,d=Xf(a,b),c=Nf.exec(d),null!==c?f[c[1]]=c[2]:b.position=e}while(d&&c);return ob(f),f},Wf=function(a,b,c){var d,e,f,g=b.position,h=Mf.exec(Xf(a,b));return h?(d=h[1],e=h[2],f=Vf(a,b),Xf(a,b)):b.position=g,{statusCode:d,statusText:e,headers:f,body:Yf(a,b,c)}},Xf=function(a,b){return Yf(a,b,"\r\n")},Yf=function(a,b,c){var d=b.position||0,e=a.length;if(c){if(-1===(e=a.indexOf(c,d)))return null;b.position=e+c.length}else b.position=e;return a.substring(d,e)},Zf=function(a,b){if(!Ma(a))throw{message:"Data is not a batch object."};var c,d,e=Pf("batch_"),f=a.__batchRequests,g="";for(c=0,d=f.length;c<d;c++)g+=$f(e,!1)+_f(f[c],b);return g+=$f(e,!0),b.contentType.properties.boundary=e,g},$f=function(a,b){var c="\r\n--"+a;return b&&(c+="--"),c+"\r\n"},_f=function(a,b,c){var d,e=a.__changeRequests;if(l(e)){if(c)throw{message:"Not Supported: change set nested in other change set"};var f=Pf("changeset_");d="Content-Type: multipart/mixed; boundary="+f+"\r\n";var g,h;for(g=0,h=e.length;g<h;g++)d+=$f(f,!1)+_f(e[g],b,!0);d+=$f(f,!0)}else{d="Content-Type: application/http\r\nContent-Transfer-Encoding: binary\r\n\r\n";var i=j({},b);i.handler=Wb,i.request=a,i.contentType=null,xb(a,Qf(b),i),d+=ag(a)}return d},ag=function(a){var b=(a.method?a.method:"GET")+" "+a.requestUri+" HTTP/1.1\r\n";for(var c in a.headers)a.headers[c]&&(b=b+c+": "+a.headers[c]+"\r\n");return b+="\r\n",a.body&&(b+=a.body),b};d.batchHandler=Wb(Sf,Tf,"multipart/mixed","3.0");var bg=[d.jsonHandler,d.atomHandler,d.xmlHandler,d.textHandler],cg=function(a,b,c){var d,e;for(d=0,e=bg.length;d<e&&!bg[d][a](b,c);d++);if(d===e)throw{message:"no handler for data"}};d.defaultSuccess=function(b){a.alert(a.JSON.stringify(b))},d.defaultError=q,d.defaultHandler={read:function(a,b){a&&f(a.body)&&a.headers["Content-Type"]&&cg("read",a,b)},write:function(a,b){cg("write",a,b)},maxDataServiceVersion:"3.0",accept:"application/atomsvc+xml;q=0.8, application/json;odata=fullmetadata;q=0.7, application/json;q=0.5, */*;q=0.1"},d.defaultMetadata=[],d.read=function(a,b,c,e,f,g){var h;return h=a instanceof String||"string"==typeof a?{requestUri:a}:a,d.request(h,b,c,e,f,g)},d.request=function(a,b,c,e,f,g){b=b||d.defaultSuccess,c=c||d.defaultError,e=e||d.defaultHandler,f=f||d.defaultHttpClient,g=g||d.defaultMetadata,a.recognizeDates=h(a.recognizeDates,d.jsonHandler.recognizeDates),a.callbackParameterName=h(a.callbackParameterName,d.defaultHttpClient.callbackParameterName),a.formatQueryString=h(a.formatQueryString,d.defaultHttpClient.formatQueryString),a.enableJsonpCallback=h(a.enableJsonpCallback,d.defaultHttpClient.enableJsonpCallback),a.useJsonLight=h(a.useJsonLight,d.jsonHandler.enableJsonpCallback),a.inferJsonLightFeedAsObject=h(a.inferJsonLightFeedAsObject,d.jsonHandler.inferJsonLightFeedAsObject);var i={metadata:g,recognizeDates:a.recognizeDates,callbackParameterName:a.callbackParameterName,formatQueryString:a.formatQueryString,enableJsonpCallback:a.enableJsonpCallback,useJsonLight:a.useJsonLight,inferJsonLightFeedAsObject:a.inferJsonLightFeedAsObject};try{return xb(a,e,i),La(a,b,c,e,f,i)}catch(j){c(j)}},d.parseMetadata=function(a){return xe(0,a)},d.batchHandler.partHandler=d.defaultHandler;var dg=null,eg=function(){var a={v:this.valueOf(),t:"[object Date]"};for(var b in this)a[b]=this[b];return a},fg=function(a,b){if(b&&"[object Date]"===b.t){var c=new Date(b.v);for(var d in b)"t"!==d&&"v"!==d&&(c[d]=b[d]);b=c}return b},gg=function(a,b){return a.name+"#!#"+b},hg=function(a,b){return b.replace(a.name+"#!#","")},ig=function(a){this.name=a};ig.create=function(b){if(ig.isSupported())return dg=dg||a.localStorage,new ig(b);throw{message:"Web Storage not supported by the browser"}},ig.isSupported=function(){return!!a.localStorage},ig.prototype.add=function(a,b,c,d){d=d||this.defaultError;var e=this;this.contains(a,function(f){f?i(d,{message:"key already exists",key:a}):e.addOrUpdate(a,b,c,d)},d)},ig.prototype.addOrUpdate=function(b,c,d,e){if(e=e||this.defaultError,b instanceof Array)e({message:"Array of keys not supported"});else{var f=gg(this,b),g=Date.prototype.toJSON;try{var h=c;void 0!==h&&(Date.prototype.toJSON=eg,h=a.JSON.stringify(c)),dg.setItem(f,h),i(d,b,c)}catch(j){22===j.code||2147942414===j.number?i(e,{name:"QUOTA_EXCEEDED_ERR",error:j}):i(e,j)}finally{Date.prototype.toJSON=g}}},ig.prototype.clear=function(a,b){b=b||this.defaultError;try{for(var c=0,d=dg.length;d>0&&c<d;){var e=dg.key(c);e!==hg(this,e)?(dg.removeItem(e),d=dg.length):c++}i(a)}catch(f){i(b,f)}},ig.prototype.close=function(){},ig.prototype.contains=function(a,b,c){c=c||this.defaultError;try{var d=gg(this,a),e=dg.getItem(d);i(b,null!==e)}catch(f){i(c,f)}},ig.prototype.defaultError=q,ig.prototype.getAllKeys=function(a,b){b=b||this.defaultError;var c,d,e=[];try{for(c=0,d=dg.length;c<d;c++){var f=dg.key(c),g=hg(this,f);f!==g&&e.push(g)}i(a,e)}catch(h){i(b,h)}},ig.prototype.mechanism="dom",ig.prototype.read=function(b,c,d){if(d=d||this.defaultError,b instanceof Array)d({message:"Array of keys not supported"});else try{var e=gg(this,b),f=dg.getItem(e);f=null!==f&&"undefined"!==f?a.JSON.parse(f,fg):void 0,i(c,b,f)}catch(g){i(d,g)}},ig.prototype.remove=function(a,b,c){if(c=c||this.defaultError,a instanceof Array)c({message:"Batches not supported"});else try{var d=gg(this,a);dg.removeItem(d),i(b)}catch(e){i(c,e)}},ig.prototype.update=function(a,b,c,d){d=d||this.defaultError;var e=this;this.contains(a,function(f){f?e.addOrUpdate(a,b,c,d):i(d,{message:"key not found",key:a})},d)};var jg=a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB||a.indexedDB,kg=a.IDBKeyRange||a.webkitIDBKeyRange,lg=a.IDBTransaction||a.webkitIDBTransaction||{},mg=lg.READ_ONLY||"readonly",ng=lg.READ_WRITE||"readwrite",og=function(a,b){return function(c){var d=a||b;if(d){if("[object IDBDatabaseException]"===Object.prototype.toString.call(c))return 11===c.code?void d({name:"QuotaExceededError",error:c}):void d(c);var e;try{var f=c.target.error||c;e=f.name}catch(g){e="blocked"===c.type?"IndexedDBBlocked":"UnknownError"}d({name:e,error:c})}}},pg=function(a,b,c){var d=a.name,e="_datajs_"+d,f=jg.open(e);f.onblocked=c,f.onerror=c,f.onupgradeneeded=function(){var a=f.result;a.objectStoreNames.contains(d)||a.createObjectStore(d)},f.onsuccess=function(a){var e=f.result;if(!e.objectStoreNames.contains(d)){if("setVersion"in e){var g=e.setVersion("1.0");return g.onsuccess=function(){g.transaction.oncomplete=function(){b(e)},e.createObjectStore(d,null,!1)},g.onerror=c,void(g.onblocked=c)}return a.target.error={name:"DBSchemaMismatch"},void c(a)}e.onversionchange=function(a){a.target.close()},b(e)}},qg=function(a,b,c,d){var e=a.name,f=a.db,g=og(d,a.defaultError);if(f)return void c(f.transaction(e,b));pg(a,function(d){a.db=d,c(d.transaction(e,b))},g)},rg=function(a){this.name=a};rg.create=function(a){if(rg.isSupported())return new rg(a);throw{message:"IndexedDB is not supported on this browser"}},rg.isSupported=function(){return!!jg},rg.prototype.add=function(a,b,c,d){var e=this.name,f=this.defaultError,g=[],h=[];a instanceof Array?(g=a,h=b):(g=[a],h=[b]),qg(this,ng,function(i){i.onabort=og(d,f),i.oncomplete=function(){a instanceof Array?c(g,h):c(a,b)};for(var j=0;j<g.length&&j<h.length;j++)i.objectStore(e).add({v:h[j]},g[j])},d)},rg.prototype.addOrUpdate=function(a,b,c,d){var e=this.name,f=this.defaultError,g=[],h=[];a instanceof Array?(g=a,h=b):(g=[a],h=[b]),qg(this,ng,function(i){i.onabort=og(d,f),i.oncomplete=function(){a instanceof Array?c(g,h):c(a,b)};for(var j=0;j<g.length&&j<h.length;j++){var k={v:h[j]};i.objectStore(e).put(k,g[j])}},d)},rg.prototype.clear=function(a,b){var c=this.name,d=this.defaultError;qg(this,ng,function(e){e.onerror=og(b,d),e.oncomplete=function(){a()},e.objectStore(c).clear()},b)},rg.prototype.close=function(){this.db&&(this.db.close(),this.db=null)},rg.prototype.contains=function(a,b,c){var d=this.name,e=this.defaultError;qg(this,mg,function(f){var g=f.objectStore(d),h=g.get(a);f.oncomplete=function(){b(!!h.result)},f.onerror=og(c,e)},c)},rg.prototype.defaultError=q,rg.prototype.getAllKeys=function(a,b){var c=this.name,d=this.defaultError;qg(this,ng,function(e){var f=[];e.oncomplete=function(){a(f)};var g=e.objectStore(c).openCursor();g.onerror=og(b,d),g.onsuccess=function(a){var b=a.target.result;b&&(f.push(b.key),b["continue"].call(b))}},b)},rg.prototype.mechanism="indexeddb",rg.prototype.read=function(a,b,c){var d=this.name,e=this.defaultError,f=a instanceof Array?a:[a];qg(this,mg,function(g){var h=[];g.onerror=og(c,e),g.oncomplete=function(){a instanceof Array?b(f,h):b(f[0],h[0])};for(var i=0;i<f.length;i++){var j=g.objectStore(d);j.get.call(j,f[i]).onsuccess=function(a){var b=a.target.result;h.push(b?b.v:void 0)}}},c)},rg.prototype.remove=function(a,b,c){var d=this.name,e=this.defaultError,f=a instanceof Array?a:[a];qg(this,ng,function(a){a.onerror=og(c,e),a.oncomplete=function(){b()};for(var g=0;g<f.length;g++){var h=a.objectStore(d);h["delete"].call(h,f[g])}},c)},rg.prototype.update=function(a,b,c,d){var e=this.name,f=this.defaultError,g=[],h=[];a instanceof Array?(g=a,h=b):(g=[a],h=[b]),qg(this,ng,function(i){i.onabort=og(d,f),i.oncomplete=function(){a instanceof Array?c(g,h):c(a,b)};for(var j=0;j<g.length&&j<h.length;j++){var k=i.objectStore(e).openCursor(kg.only(g[j])),l={v:h[j]};k.pair={key:g[j],value:l},k.onsuccess=function(a){var b=a.target.result;b?b.update(a.target.pair.value):i.abort()}}},d)};var sg=function(a){var b=[],c=[],d={};this.name=a;var e=function(a){return a||this.defaultError},f=function(a,b){var c;return a instanceof Array&&(c="Array of keys not supported"),void 0!==a&&null!==a||(c="Invalid key"),!c||(i(b,{message:c}),!1)};this.add=function(a,b,c,g){g=e(g),f(a,g)&&(d.hasOwnProperty(a)?g({message:"key already exists",key:a}):this.addOrUpdate(a,b,c,g))},this.addOrUpdate=function(a,g,h,j){if(j=e(j),f(a,j)){var k=d[a];void 0===k&&(k=b.length>0?b.splice(0,1):c.length),c[k]=g,d[a]=k,i(h,a,g)}},this.clear=function(a){c=[],d={},b=[],i(a)},this.contains=function(a,b){var c=d.hasOwnProperty(a);i(b,c)},this.getAllKeys=function(a){var b=[];for(var c in d)b.push(c);i(a,b)},this.read=function(a,b,g){if(g=e(g),f(a,g)){var h=d[a];i(b,a,c[h])}},this.remove=function(a,g,h){if(h=e(h),f(a,h)){var j=d[a];void 0!==j&&(j===c.length-1?c.pop():(c[j]=void 0,b.push(j)),delete d[a],0===c.length&&(b=[])),i(g)}},this.update=function(a,b,c,g){g=e(g),f(a,g)&&(d.hasOwnProperty(a)?this.addOrUpdate(a,b,c,g):g({message:"key not found",key:a}))}};sg.create=function(a){return new sg(a)},sg.isSupported=function(){return!0},sg.prototype.close=function(){},sg.prototype.defaultError=q,sg.prototype.mechanism="memory";var tg={indexeddb:rg,dom:ig,memory:sg};c.defaultStoreMechanism="best",c.createStore=function(a,b){b||(b=c.defaultStoreMechanism),"best"===b&&(b=ig.isSupported()?"dom":"memory");var d=tg[b];if(d)return d.create(a);throw{message:"Failed to create store",name:a,mechanism:b}};var ug=function(a,b){return a+(a.indexOf("?")>=0?"&":"?")+b},vg=function(a,b){var c=a.indexOf("?"),d="";return c>=0&&(d=a.substr(c),a=a.substr(0,c)),"/"!==a[a.length-1]&&(a+="/"),a+b+d},wg=function(a,b){return{method:"GET",requestUri:a,user:b.user,password:b.password,enableJsonpCallback:b.enableJsonpCallback,callbackParameterName:b.callbackParameterName,formatQueryString:b.formatQueryString}},xg=function(a,b,c,d){return yg(a,b,[],c,d)},yg=function(a,b,c,e,f){var g=wg(a,b),h=d.request(g,function(a){var d=a.__next,g=a.results;c=c.concat(g),d?h=yg(d,b,c,e,f):e(c)},f,void 0,b.httpClient,b.metadata);return{abort:function(){h.abort()}}},zg=function(a){var b=this,c=a.source;return b.identifier=z(encodeURI(decodeURI(c))),b.options=a,b.count=function(a,e){var f=b.options;return d.request(wg(vg(c,"$count"),f),function(b){var c=o(b.toString());isNaN(c)?e({message:"Count is NaN",count:c}):a(c)},e,void 0,f.httpClient,f.metadata)},b.read=function(a,d,e,f){return xg(ug(c,"$skip="+a+"&$top="+d),b.options,e,f)},b},Ag=function(a,b){var c=Bg(a,b);if(c){var d=c.i-b.i,e=d+(a.c-a.d.length);a.d=a.d.concat(b.d.slice(d,e))}},Bg=function(a,b){var c,d=a.i+a.c,e=b.i+b.c,f=a.i>b.i?a.i:b.i,g=d<e?d:e;return g>=f&&(c={i:f,c:g-f}),c},Cg=function(a,b){if(void 0===a||"number"!=typeof a)throw{message:"'"+b+"' must be a number."};if(isNaN(a)||a<0||!isFinite(a))throw{message:"'"+b+"' must be greater than or equal to zero."}},Dg=function(a,b){if(void 0!==a){if("number"!=typeof a)throw{message:"'"+b+"' must be a number."};if(isNaN(a)||a<=0||!isFinite(a))throw{message:"'"+b+"' must be greater than zero."}}},Eg=function(a,b){if(void 0!==a&&("number"!=typeof a||isNaN(a)||!isFinite(a)))throw{message:"'"+b+"' must be a number."}},Fg=function(a,b){var c,d;for(c=0,d=a.length;c<d;c++)if(a[c]===b)return a.splice(c,1),!0;return!1},Gg=function(a){var b=0,c=typeof a;if("object"===c&&a)for(var d in a)b+=2*d.length+Gg(a[d]);else b="string"===c?2*a.length:8;return b},Hg=function(a,b,c){return a=Math.floor(a/c)*c,b=Math.ceil((b+1)/c)*c,{i:a,c:b-a}},Ig=function(a,b,c,d,e,f,g){var h,i,j=this;j.p=b,j.i=d,j.c=e,j.d=f,j.s="start",j.canceled=!1,j.pending=g,j.oncomplete=null,j.cancel=function(){if(c){var a=j.s;"error"!==a&&"end"!==a&&"cancel"!==a&&(j.canceled=!0,l("cancel",h))}},j.complete=function(){l("end",h)},j.error=function(a){j.canceled||l("error",a)},j.run=function(a){i=a,j.transition(j.s,h)},j.wait=function(a){l("wait",a)};var k=function(b,c,d){switch(b){case"start":"init"!==c&&a(j,b,c,d);break;case"wait":a(j,b,c,d);break;case"cancel":a(j,b,c,d),j.fireCanceled(),l("end");break;case"error":a(j,b,c,d),j.canceled=!0,j.fireRejected(d),l("end");break;case"end":j.oncomplete&&j.oncomplete(j),j.canceled||j.fireResolved(),a(j,b,c,d);break;default:a(j,b,c,d)}},l=function(a,b){j.s=a,h=b,k(a,i,b)};return j.transition=l,j};Ig.prototype.fireResolved=function(){var a=this.p;a&&(this.p=null,a.resolve(this.d))},Ig.prototype.fireRejected=function(a){var b=this.p;b&&(this.p=null,b.reject(a))},Ig.prototype.fireCanceled=function(){this.fireRejected({canceled:!0,message:"Operation canceled"})};var Jg=function(b){var d,e="init",g={counts:0,netReads:0,prefetches:0,cacheReads:0},h=[],k=[],l=[],m=0,n=!1,p=s(b.cacheSize,1048576),q=0,r=0,t=0,u=0===p,v=s(b.pageSize,50),w=s(b.prefetchSize,v),x="1.0",y=0,z=b.source;"string"==typeof z&&(z=new zg(b)),z.options=b;var A=c.createStore(b.name,b.mechanism),B=this;B.onidle=b.idle,B.stats=g,B.count=function(){if(d)throw d;var a=za(),b=!1;if(n)return i(function(){a.resolve(q)}),a.promise();var c=z.count(function(b){c=null,g.counts++,a.resolve(b)},function(d){c=null,a.reject(j(d,{canceled:b}))});return j(a.promise(),{cancel:function(){c&&(b=!0,c.abort(),c=null)}})},B.clear=function(){if(d)throw d;if(0===h.length){var a=za(),b=new Ig(R,a,!1);return K(b,h),a.promise()}return h[0].p},B.filterForward=function(a,b,c){return H(a,b,c,!1)},B.filterBack=function(a,b,c){return H(a,b,c,!0)},B.readRange=function(a,b){if(Cg(a,"index"),Cg(b,"count"),d)throw d;var c=za(),e=new Ig(T,c,!0,a,b,[],0);return K(e,k),j(c.promise(),{cancel:function(){e.cancel()}})},B.ToObservable=B.toObservable=function(){if(!a.Rx||!a.Rx.Observable)throw{message:"Rx library not available - include rx.js"};if(d)throw d;return a.Rx.Observable.CreateWithDisposable(function(a){var b=!1,c=0,d=function(c){b||a.OnError(c)},e=function(f){if(!b){var g,h;for(g=0,h=f.length;g<h;g++)a.OnNext(f[g]);f.length<v?a.OnCompleted():(c+=v,B.readRange(c,v).then(e,d))}};return B.readRange(c,v).then(e,d),{Dispose:function(){b=!0}}})};var C=function(a){return function(b){d={message:a,error:b};var c,e;for(c=0,e=k.length;c<e;c++)k[c].fireRejected(d);for(c=0,e=h.length;c<e;c++)h[c].fireRejected(d);k=h=null}},D=function(a){if(a!==e){e=a;var b,c,d=h.concat(k,l);for(b=0,c=d.length;b<c;b++)d[b].run(e)}},E=function(){var a=new ya;return A.clear(function(){m=0,n=!1,q=0,r=0,t=0,u=0===p,g={counts:0,netReads:0,prefetches:0,cacheReads:0},B.stats=g,A.close(),a.resolve()},function(b){a.reject(b)}),a},F=function(a){var b=Fg(h,a);b||(b=Fg(k,a))||Fg(l,a),y--,D("idle")},G=function(a){var b=new ya,c=!1,d=z.read(a,v,function(c){var d={i:a,c:c.length,d:c};b.resolve(d)},function(a){b.reject(a)});return j(b,{cancel:function(){d&&(d.abort(),c=!0,d=null)}})},H=function(a,b,c,e){if(a=o(a),b=o(b),isNaN(a))throw{message:"'index' must be a valid number.",index:a};if(isNaN(b))throw{message:"'count' must be a valid number.",count:b};if(d)throw d;a=Math.max(a,0);var f=za(),g=[],h=!1,i=null,k=function(a,d){h||(b>=0&&g.length>=b?f.resolve(g):i=B.readRange(a,d).then(function(h){for(var i=0,j=h.length;i<j&&(b<0||g.length<b);i++){var l=e?j-i-1:i,m=h[l];if(c(m)){var n={index:a+l,item:m};e?g.unshift(n):g.push(n)}}if(!e&&h.length<d||e&&a<=0)f.resolve(g);else{var o=e?Math.max(a-v,0):a+d;k(o,v)}},function(a){f.reject(a)}))},l=Hg(a,a,v),m=e?l.i:a,n=e?a-l.i+1:l.i+l.c-a;return k(m,n),j(f.promise(),{cancel:function(){i&&i.cancel(),h=!0}})},I=function(){B.onidle&&0===y&&B.onidle()},J=function(a){if(!n&&0!==w&&!u&&(0===l.length||l[0]&&-1!==l[0].c)){var b=new Ig(S,null,!0,a,w,null,w);K(b,l)}},K=function(a,b){a.oncomplete=F,b.push(a),y++,a.run(e)},L=function(a){var b=!1,c=j(new ya,{cancel:function(){b=!0}}),d=O(c,"Read page from store failure");return A.contains(a,function(e){if(!b)return e?void A.read(a,function(a,d){b||c.resolve(void 0!==d,d)},d):void c.resolve(!1)},d),c},M=function(a,b){var c=!1,d=j(new ya,{cancel:function(){c=!0}}),e=O(d,"Save page to store failure"),f=function(){d.resolve(!0)};if(b.c>0){var g=Gg(b);u=p>=0&&p<m+g,u?f():A.addOrUpdate(a,b,function(){P(b,g),N(f,e)},e)}else P(b,0),N(f,e);return d},N=function(a,b){var c={actualCacheSize:m,allDataLocal:n,cacheSize:p,collectionCount:q,highestSavedPage:r,highestSavedPageSize:t,pageSize:v,sourceId:z.identifier,version:x};A.addOrUpdate("__settings",c,a,b)},O=function(a){return function(){a.resolve(!1)}},P=function(a,b){var c=a.c,d=a.i;0===c?r===d-v&&(q=r+t):(r=Math.max(r,d),r===d&&(t=c),m+=b,c<v&&!q&&(q=d+c)),n||q!==r+t||(n=!0)},Q=function(a,b,c,d){var e=a.canceled&&"end"!==b;return e&&"cancel"===b&&d&&d.cancel&&d.cancel(),e},R=function(a,b,c){var d=a.transition;if("destroy"!==c)return D("destroy"),!0;switch(b){case"start":d("clear");break;case"end":I();break;case"clear":E().then(function(){a.complete()}),a.wait();break;default:return!1}return!0},S=function(a,b,c,d){if(!Q(a,b,0,d)){var e=a.transition;if("prefetch"!==c)return"destroy"===c?"cancel"!==b&&a.cancel():"idle"===c&&D("prefetch"),!0;switch(b){case"start":l[0]===a&&e("local",a.i);break;case"done":var f=a.pending;f>0&&(f-=Math.min(f,d.c)),n||0===f||d.c<v||u?a.complete():(a.pending=f,e("local",d.i+v));break;default:return U(a,b,c,d,!0)}}return!0},T=function(a,b,c,d){if(!Q(a,b,0,d)){var e=a.transition;if("read"!==c&&"start"!==b)return"destroy"===c?"start"!==b&&a.cancel():"write"!==c&&D("read"),!0;switch(b){case"start":if("idle"===c||"prefetch"===c)if(D("read"),a.c>0){var f=Hg(a.i,a.c,v);e("local",f.i)}else e("done",a);break;case"done":Ag(a,d);var h=a.d.length;a.c===h||d.c<v?(g.cacheReads++,J(d.i+d.c),a.complete()):e("local",d.i+v);break;default:return U(a,b,c,d,!1)}}return!0},U=function(a,b,c,d,e){var f,h=a.error,i=a.transition,j=a.wait;switch(b){case"end":I();break;case"local":f=L(d).then(function(b,c){a.canceled||(b?i("done",c):i("source",d))});break;case"source":f=G(d).then(function(b){a.canceled||(e?g.prefetches++:g.netReads++,i("save",b))},h);break;case"save":"write"!==c&&(D("write"),f=M(d.i,d).then(function(b){a.canceled||(!b&&e&&(a.pending=0),i("done",d)),D("idle")}));break;default:return!1}return f&&(a.canceled?f.cancel():a.s===b&&j(f)),!0};return A.read("__settings",function(a,b){if(f(b)){var c=b.version;if(!c||0!==c.indexOf("1."))return void C("Unsupported cache store version "+c)();v!==b.pageSize||z.identifier!==b.sourceId?E().then(function(){D("idle")},C("Unable to clear store during initialization")):(m=b.actualCacheSize,n=b.allDataLocal,p=b.cacheSize,q=b.collectionCount,r=b.highestSavedPage,t=b.highestSavedPageSize,x=c,D("idle"))}else N(function(){D("idle")},C("Unable to write settings during initialization."))},C("Unable to read settings from store.")),B};c.createDataCache=function(a){if(Dg(a.pageSize,"pageSize"),Eg(a.cacheSize,"cacheSize"),Eg(a.prefetchSize,"prefetchSize"),!f(a.name))throw{message:"Undefined or null name",options:a};if(!f(a.source))throw{message:"Undefined source",options:a};return new Jg(a)}}(this),function(a){
var b=a.$,c=b.each,d=b.extend,e=a.dataSource,f=e.libraries.skuid,g=".",h=e.core||(e.core={}),i=a.utils,j=i.isString,k=i.createMapForArray,l=i.makeXMLDoc,m=a.time,n=m.parseSFDateTime,o=m.parseDateTimeString,p=m.getSFDateTime,q=b.Deferred,r=a.constants,s=r.HTTP_VERBS,t=s.PATCH,u=s.MERGE,v=s.POST,w=s.DELETE,x={"Edm.String":"STRING","Edm.Boolean":"BOOLEAN","Edm.Date":"DATE","Edm.DateTime":"DATETIME","Edm.DateTimeOffset":"DATETIME","Edm.Int16":"NUMBER","Edm.Int32":"NUMBER","Edm.Decimal":"NUMBER","Edm.Double":"NUMBER","Edm.Int64":"NUMBER","Edm.Guid":"STRING"},y="skuidSupportsBatch",z=["@odata.editLink","@odata.id","@odata.type"],A=["__metadata"],B=function(a){var b;return a.major<4?(b=window.OData,{read:b.read,request:b.request,batchHandler:b.batchHandler,metadataHandler:b.metadataHandler,defaultHttpClient:b.defaultHttpClient}):(b=window.odatajs.oData,{read:b.read,request:b.request,batchHandler:b.batch.batchHandler,metadataHandler:b.metadata.metadataHandler,defaultHttpClient:b.net.defaultHttpClient})},C=function(a,b){var c,d,e,f=j(a)?a:a.objectName;return f?(c=f&&f.split("."),d=c.slice(0,-1).join("."),e=b.dataServices.aliasMap,e&&(d=e[d]||d),d+"."+c[c.length-1]):f},D=function(a,b,d){var e=d.major<4?A:z;c(e,function(c,d){b[d]&&(a[d]=b[d])})},E=function(a){var b=q(),c=J.prototype.getServiceVersion(a),d=c.major,e=d<4,g="odata"+(e?"3":"4"),h=e?"data.js":"odatav4.js";return a._odatalib?b.resolve():f[g]?(a._odatalib=f[g],b.resolve()):i.loadJS(function(a){return i.getStaticResourceUrl("lib/"+a,"skuid",undefined,i.getCacheTimestamp())}(h)).then(function(){a._odatalib=f[g]=B(c),b.resolve()}),b.promise()},F=function(a,c){var d={};return d[a]=!0,b.extend(d,c)},G=function(a,d){c(a,function(a){delete d[a]});var e={};c(a,function(a){var b=e[a]=[];c(d,function(c){0===c.indexOf(a+"/")&&-1===c.substring((a+"/").length).indexOf("/")&&(delete d[c],b.push(c.substring((a+"/").length)))})}),function g(a){var b=e;c(b,function(c,d){if(a){if(0===c.indexOf(a.name+"/")){var e={name:c.substring((a.name+"/").length),list:d};a.list.push(e),delete b[c],g(e)}}else g({name:c,list:d})})}();var f={str:"$expand="};if(i.size(e)&&function h(a,d){var e=!0;c(d,function(d,f){var g=!1,i=!1;if(e||(a.str+=","),e=!1,a.str+=d,f.length){var j=[];c(f,function(a,c){b.isPlainObject(c)||j.push(c)}),j.length&&(a.str+="($select=",a.str+=j.join(","),g=!0),c(f,function(c,d){if(b.isPlainObject(d)){g||i?!i&&g&&(a.str+=";$expand=",i=!0):(a.str+="($expand=",i=!0);var e={};e[d.name]=d.list,h(a,e)}}),!i&&!g||e||(a.str+=")")}})}(f,e),i.size(a))return f.str},H=function(a){var c={};return b.each(a,function(a,b){c[b.id]=b}),c},I=["name"],J=function(a){c(I,function(b,c){if(!a[c])throw"Missing Required Property Error: "+c}),d(this,a),a.extendedProperties&&(d(!0,this.properties,a.extendedProperties),delete this.extendedProperties),e.DataSourceType.prototype.constructor.call(this,this),delete this.getModelProperties},K="metadata";J.prototype=new e.DataSourceType(!1),J.constructor=J,J.prototype=d(!0,J.prototype,{RESOURCE_TYPES:{RESOURCE_METADATA:K,RESOURCE_BATCH:"batch",RESOURCE_ENTITY_SET:"entitySet"},authenticateAndGetMetadata:function(a){var b=this;return a.dataSource.authenticate().then(function(){return b.getMetadata(a)})},populateSelect:function(a,b,c,d){var e,f;c.uiOnly||(e=c.id.split(g),c.isComplexField&&(e=[c.complexInReference?c.referenceParentId:e[0]]),f=e.join("/"),!1!==c.query&&(b&&!b[f]&&(a[f]=!0),d.keyField&&(a[f+"/"+d.keyField]=!0),(d.nameField||c.nameField)&&(a[f+"/"+(d.nameField||c.nameField)]=!0)))},getFieldDef:function(a,b,c,d){var e,f=this,g=d.metadata;return a.complexFields?a:(e=f.tryToGetComplexDef(a,a.id,b,c,d),e||(e=f.getPropertyDef(a.id,b,g,c,b)),e)},isDefEditable:function(a,b,c){var d=this,e=!0;return c.major<4&&(e=!d.propertyHasExtension(a,"StoreGeneratedPattern")),b.isComplexField?e=!b.complexInReference&&c.major<4:a.isFieldOnReferenceField&&c.major>3&&(e=!1),e},isDefCreateable:function(a,b,c){return this.isDefEditable(a,b,c)||this.isDefRequired(a,b,c)},isDefRequired:function(a){return"false"===a.nullable},isDefFilterable:function(a){return"Edm.String"===a.type},buildFieldMetadata:function(a,c,d,e,f,g){var h,i,j,k,l=this,m=g.metadata,n=l.getServiceVersion(g);return!0===a.uiOnly?a:(h=l.getFieldDef(a,c,d,g))?(j={id:a.id,accessible:!0,createable:l.isDefCreateable(h,a,n),editable:l.isDefEditable(h,a,n),sortable:!0,label:a.id,displaytype:x[h.type]||h.type,edmtype:h.type,required:l.isDefRequired(h,a,n),filterable:l.isDefFilterable(h,a,n),minInputLength:1},a.defer&&(j.defer=!0),l.isDefForComplexTypeField(h,m)&&l.populateFieldMetadataForComplexField(j,c),l.isDefForReferenceField(h)?l.populateFieldMetadataForReferenceField(j,h,d,f,m):l.isDefForComplexTypeField(h,m)?(i=!0,l.populateFieldMetadataForComplexField(j,c)):i||n.major>3&&(k=l.getEnumTypeFromDef(h,m))&&l.populateFieldMetadataForEnumField(j,k),l.coerceFieldMetadata(j,h),a.overrideMetadata&&b.extend(j,a),!1===a.query&&(j.query=!1),j):void 0},isDefForReferenceField:function(a){return!(!a.fromRole&&!a.isReferenceProp)},populateFieldMetadataForComplexField:function(a,b){var c=a.id,d=b.propertyMap[c].type;a.displaytype="OBJECT",a.rel=c,a.ref=d,a.referenceTo=[{objectName:d,label:d,relationshipName:c}]},populateFieldMetadataForEnumField:function(a,b){a.displaytype="PICKLIST",a.picklistEntries=b.picklistEntries,a.noneLabel=!a.required,a.deDupLabel=!0},populateFieldMetadataForReferenceField:function(a,c,d,e,f){var g,h,i,j,k,l=this,m=a.id,n=a.id.split(".").join("/");if(c.fromRole)g=l.getAssociation(c.relationship,f),h=l.getEndFromAssociation(g,c.toRole),a.rel=m,-1!==b.inArray(h.multiplicity,["0..1","1"])?(a.displaytype="REFERENCE",a.ref=h.type,a.referenceTo=[{objectName:h.type,label:h.type,relationshipName:m}],k=l.getEntityType(h.type,f),a.keyField=k.key.propertyRef[0].name,k.nameField&&(a.nameField=k.nameField)):(d&&(d[n]=!0),a.displaytype="ARRAY",a.type="array",a.dataPath="results",a.ref=h.type,a.referenceTo=[{objectName:h.type}],a.relationshipName=c.name,a.childSObject=h.type,i=l.getRefConstraintsFromAssociation(g,c.toRole),a.field=i.length&&i[0].name);else if(c.isReferenceProp){var o=c.type;a.rel=m,-1!==c.type.indexOf("Collection(")?(d&&(d[n]=!0),o=o.substring("Collection(".length,o.length-1),a.displaytype="ARRAY",a.type="array",a.ref=o,a.referenceTo=[{objectName:o}],a.relationshipName=c.name,a.childSObject=o,a.createable=!1,a.editable=!1):(j=c.referentialConstraint,k=l.getEntityType(o,f),k&&k.nameField&&(a.nameField=k.nameField),j&&j.length>0?a.keyField=j[0].referencedProperty:a.keyField=k.key[0].propertyRef[0].name,a.displaytype="REFERENCE",a.ref=c.type,a.referenceTo=[{objectName:c.type,label:c.type,relationshipName:m}],a.createable=!0,a.editable=!0),a.sortable=!1}},buildEntityMetadataRequest:function(a){var b=a.targetEntity;return!b&&a.model&&a.model.attr&&(b=a.model.attr("sobject")),{objectName:b}},buildResourceUri:function(a,b,c){if(!a)throw"Unable to build Resource URI";c||(c={});var d,e=i.combineUrls,f=a.serviceUrl,g=c.entitySet,h=c.keyPredicate,j=c.count;switch(b){case K:return e(f,"$metadata");case"batch":return e(f,"$batch");case"entitySet":return d=e(f,g),h&&(d+="("+h+")"),j&&(d+="/$count"),d;default:return f}},getAssociation:function(a,b){var c=this.processFullyQualifiedName(a);return this.getSchema(b,c.nameSpace).associationMap[c.name]},getEndFromAssociation:function(a,b){return a.end.filter(function(a){return a.role===b})[0]},getExtraEntityMetadata:function(a){return a.metadata},getEntityMetadata:function(a){a=a||{};var c=this,d=a.entities,e=a.dataSource;return c.authenticateAndGetMetadata(a).then(function(){return c.getExtraEntityMetadata(e,d)}).then(function(){var f=[],g={},h=e.metadata;return b.each(d,function(b,d){var e,i,j,k=C(d,h);if(!k)throw"No object name provided.";e=c.getEntitySet(k,h),i=c.getEntityTypeFromEntitySet(e,k,h),j=c.getFieldsFromEntityType(i,k,h,a.dataSource,a),c.cacheFieldsOfEntity({dataSource:a.dataSource,objectName:k},j,h,g),f.push({childRelationships:[],fields:j,label:k,labelPlural:k,objectName:k,readonly:!1})}),f})},getEntityMetadataCacheKey:function(a){return j(a)?a:a.objectName},getEntityMetadataLoadingMessageFromBreadcrumb:function(a){return"Loading metadata for external object "+a.endsobject+"..."},getEntitySet:function(a,b){var c=this,d=c.processFullyQualifiedName(a),e=c.getSchema(b,d.nameSpace),f=e.entitySetMap;if(f&&f[d.name])return f[d.name]},getFlatEntitySetList:function(a){var c=this,d=c.getEntitySetList(a);return b.map(d,function(a){return i.isString(a)?a:a.value})},getEntitySetList:function(a){var c=this,d=[],e=this.getEntityContainerToList();return b.each(a.dataServices.schemaMap,function(a,c){var f;if(e&&c.entityContainerMap){var h=c.entityContainerMap[e];f=h&&h.entitySetMap}else f=c.entitySetMap;f&&b.each(f,function(b,c){var e=a+g+b;c.label?d.push({label:c.label,value:e}):d.push(a+g+b)})}),c.coerceEntitySetList(d),d},coerceEntitySetList:function(){},getDefaultNamespace:function(){},getSchema:function(a,c){var d=this;if(!c&&!(c=d.getDefaultNamespace()))return a.dataServices.schema[0];var e=a.dataServices.schemaMap;return e[c]||b.map(e,function(a){if(a.alias===c)return a})[0]},getEntityType:function(a,b){var c=this,d=c.processFullyQualifiedName(a),e=c.getSchema(b,d.nameSpace),f=e.entityTypeMap[d.name];return f?(c._buildEntitySpecificMaps(f,e,b),f):c._tryToGetComplexEntity(a,b)},getEntityTypeFromEntitySet:function(a,b,c){var d=this,e=a?a.entityType:b;return d.getEntityType(e,c)},getEntityTypeNameFromRefPropDef:function(a,b){var c,d,e=this;return a.relationship?(c=e.getAssociation(a.relationship,b),d=e.getEndFromAssociation(c,a.toRole),d.type):a.type?-1!==a.type.indexOf("Collection(")?a.type.substring("Collection(".length,a.type.length-1):a.type:void 0},getErrorFromErrorBody:function(c){var d,e,f;if(i.isString(c))try{d=JSON.parse(c)}catch(g){}else b.isPlainObject(c)&&(d=c);if(d&&b.isPlainObject(d)&&(d.error?d=d.error:d["odata.error"]&&(d=d["odata.error"]),d&&(e=d.code,f=b.isPlainObject(d.message)&&d.message.value?d.message.value:d.message)),!d)try{d=a.utils.makeXMLDoc(c),e=d.find("code").text(),f=d.find("message").text()}catch(h){}return{code:e,message:f}},getFieldDataForItem:function(a,b,c){var d,e=this,f=c.split(g);if(1===f.length){if("DATETIME"===b.displaytype){if(d=a[c]){var h;return h=d instanceof Date?d:o(d),p(h)}return null}return"Edm.Decimal"===b.edmtype||"Edm.Double"===b.edmtype?parseFloat(a[c]):"Edm.Int64"===b.edmtype?parseInt(a[c],10):a[c]}return d=a[f[0]],f.shift(),d?e.getFieldDataForItem(d,b,f.join(g)):null},_getComplexTypeMap:function(a){return a.dataServices&&a.dataServices.complexTypeMap},_tryToGetComplexEntity:function(a,b){var c=this._getComplexTypeMap(b);if(c&&a)return c[a]},_setComplexTypeMap:function(a){function d(a,b){if(!a)return[];b=b||{};var c=a.typeInfo,f=c.baseType,h=c.hasExpandedBaseType;return c.property||(c.property=[]),!f||h?c.property:(c.isDerived=!0,-1===f.indexOf(g)&&(f=a.namespace+g+f),c.hasExpandedBaseType=!0,b[f]?c.property:(b=F(f,b),c.property=c.property.concat(d(e[f],b)),c.property))}var e={};return b.each(a.dataServices.schemaMap,function(a,c){var d=c.complexType;d&&b.each(d,function(b,d){e[a+g+d.name]={typeInfo:d,namespace:a},c.alias&&(e[c.alias+g+d.name]=e[a+g+d.name])})}),c(e,function(a,b){b.typeInfo.property=d(b)}),i.size(e)||(e=null),a.dataServices.complexTypeMap=e,e},_setEnumTypeMap:function(a){var c={};return b.each(a.dataServices.schemaMap,function(a,d){var e=d.enumType,f=d.alias;e&&b.each(e,function(d,e){b.each(e.member,function(a,b){e.member[a].label=b.name}),c[a+g+e.name]=c[f+g+e.name]={picklistEntries:e.member,namespace:a,name:e.name}})}),a.dataServices.enumTypeMap=c,c},isDefForComplexTypeField:function(a,b){var c=a.type;return this._tryToGetComplexEntity(c,b)},getEnumTypeFromDef:function(a,b){var c=a.type,d=b.dataServices.enumTypeMap;if(d)return d[c]},_setMapOfPropertiesOfEntityType:function(a,c,d){if(a.propertyMap)return a.propertyMap;d||(d={});var e=this,f={},g=e.getPropertiesOfEntity(a);return g?(b.each(g,function(a,b){var g;if(b&&(f[b.name]=b,(g=e._tryToGetComplexEntity(b.type,c))&&!d[b.type])){d=F(b.type,d);var h=g;f[b.name].complexFields=e._setMapOfPropertiesOfEntityType(h,c,d)}}),a.propertyMap=f,f):{}},_setMapOfNavigationPropertiesOfEntityType:function(a,b){return a.navigationPropertyMap?a.navigationPropertyMap:a.navigationProperty&&a.navigationProperty.length?(c(a.navigationProperty,function(a,c){var d,e,f=c.type,g="",h=b.aliasMap,i=!!f&&0===f.indexOf("Collection("),j="";c.isReferenceProp=!0,f&&(i?g=f.substring("Collection(".length,f.length-1):f&&(g=f),d=g.split("."),d.length>1&&h&&(e=d.slice(0,d.length-1),h[e]&&(j=h[e]+"."+d[d.length-1],i&&(j="Collection("+j+")"),c.type=j)))}),a.navigationPropertyMap=i.listToMap(a.navigationProperty,"name"),a.navigationPropertyMap):(a.navigationPropertyMap={},a.navigationPropertyMap)},tryToGetComplexDef:function(a,c,d,e,f,h){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=this,y=f.metadata,z=x._getComplexTypeMap(y),A=x.getServiceVersion(f);if(z){if(x._buildEntitySpecificMaps(d,x.getSchema(y,d.__namespace),y),j=c.split(g),l=d.propertyMap,m=d.navigationPropertyMap,h=h||"",j.length>1&&(r=m[j[0]]),i.size(r))return w=j[0],s=x.getEntityTypeNameFromRefPropDef(r,y),t=x.getEntityType(s,y),u=c.substring(w.length+1),v=h?h+"/"+w:w,x.tryToGetComplexDef(a,u,t,e,f,v);if(j.length>1){if(o=j[j.length-2],j.length>2){var B=j.slice(0,j.length-1).join(".complexFields."),C=i.getObjectProperty(l,B);C&&(n=C.type)}2===j.length&&(n=l&&l[o]&&l[o].type),p=j[j.length-1],q=!!n&&z[n],q&&b.each(q.typeInfo.property,function(b,d){d.name===p&&(k=d,a.isComplexField=!0,a.complexParent=q,q.typeInfo.isDerived&&(a.editable=!1),e&&h&&(a.complexInReference=!0,A.major<=3&&(a.referenceParentId=h+"/"+c.substring(0,c.length-d.name.length-1),e[h]=!0)))})}return k}},getPropertiesOfEntity:function(a){return a.property&&a.property.length?a.property:a.typeInfo&&a.typeInfo.property?a.typeInfo.property:[]},getFieldsFromEntityType:function(a,c,d,e,f){f=f||{};var g,h=this,i=h.processFullyQualifiedName(c).nameSpace,j=h.getPropertiesOfEntity(a),k=f.requestedFields,l=f.selects,m=f.expands,n=h.getSchema(d,i);return h._buildEntitySpecificMaps(a,n,d),k?(g={},b.each(k,function(a,b){g[b.id]=b}),b.each(h.getKeyFields(a,d),function(a,b){g[b.id]||k.push(b)})):(k=[],j&&b.each(j,function(){var a={id:this.name};k.push(b.extend({},this,a))}),a.navigationProperty&&b.each(a.navigationProperty,function(){k.push({id:this.name})})),b.map(k,function(b){var c=h.buildFieldMetadata(b,a,m,l,i,e);if(c)return l&&h.populateSelect(l,m,b,c),c})},coerceFieldMetadata:function(){},getFilterStringFromCondition:function(a,b,d){d||(d={});var e,f,h,i,j,k,l=this,m=d.version||{major:1},n=d.fieldsMetadata||[],o=function(a){return l.getURLFormattedValue(a,e.edmtype,m)},p=m.major<4,q=function(a,b){return a.field.split(g).join("/")+" "+(b||"eq")+" "+h},r=function(a,b,c){var d=a.field.split(g).join("/"),e=h;return b+"("+(!0===c?e:d)+","+(!0===c?d:e)+")"},s=function(a){var b=[],d=a.field;return c(j,function(){b.push("("+q({field:d,value:this},"eq")+")")}),"("+b.join(" or ")+")"},t={"=":function(a){return q(a,"eq")},"!=":function(a){return q(a,"ne")},gt:function(a){return q(a,"gt")},lt:function(a){return q(a,"lt")},gte:function(a){return q(a,"ge")},lte:function(a){return q(a,"le")},contains:p?function(a){return r(a,"substringof",!0)}:function(a){return r(a,"contains")},"does not contain":p?function(a){return r(a,"not substringof",!0)}:function(a){return r(a,"not contains")},"starts with":function(a){return r(a,"startswith")},"does not start with":function(a){return r(a,"not startswith")},"ends with":function(a){return r(a,"endswith")},"does not end with":function(a){return r(a,"not endswith")},"in":function(a){return s(a)},"not in":function(a){return"not "+s(a)},">":function(a){return t.gt(a)},">=":function(a){return t.gte(a)},"<":function(a){return t.lt(a)},"<=":function(a){return t.lte(a)}};return a.inactive?"":"group"===a.type?l.getFilterStringFromConditions(a.subConditions,a.subConditionLogic,b,d):(e=l.getFieldMetadataFromConditionField(a.field,n,b))?(e.ref&&e.keyField&&(a.field=a.field+"."+e.keyField,e=l.getFieldMetadataFromConditionField(a.field,n,b)),f=l.coerceConditionValue(a.value,e),h=f&&o(f),i=a.values,j=i&&i.map&&i.map(o),k=t[a.operator],k?k(a):""):""},coerceConditionValue:function(a){return a},getFieldMetadataFromConditionField:function(a,b,d){var e,f=this,g={},h=a.split("."),i=d.dataSource,j=i&&i.metadata;if(c(b,function(a,b){g[b.id]=b}),g[a])return g[a];if((e=g[h[0]])&&e.ref&&!(h.length<2)){var k=e.ref,l=f.getEntityType(k,j),m=f.getFieldsFromEntityType(l,k,j,i);return h.shift(),f.getFieldMetadataFromConditionField(h.join("."),m,d)}},getFilterStringFromConditions:function(a,c,d,e){var f=this,g="",h=b.map(a,function(a){return f.getFilterStringFromCondition(a,d,e)||"!!"});return h.length&&(c||(c=b.map(a,function(a,b){if(!0!==a.inactive)return b+1+""}).join(" and ")),c&&(g=i.makeConditionLogicString(c,h,{customAndString:" and ",customOrString:" or "}),g=g.replace(/\(\)/g,""),-1!==g.indexOf("!!")&&(g=g.replace(/(((AND)|(OR)) ?!!)|(!! ?((AND)|(OR)))|!!|\(!!\)/gi,"").trim()))),g},getItemForDML:function(c,d,e){var f,g=c.edmtype,h=i.adjustValueBasedOnQuotedness;return"Edm.Binary"===g?d=window.btoa(d):-1!==b.inArray(g,["Edm.Boolean","Edm.Byte","Edm.Double","Edm.Int16","Edm.Int32","Edm.SByte","Edm.Single"])?d=h(d,!1):-1!==b.inArray(g,["Edm.Decimal","Edm.Guid","Edm.Int64","Edm.String"])?e.major<4||"Edm.String"===g?d=function(a){return!1===j(a)?""+a:a}(d):"Edm.Int64"!==g&&"Edm.Decimal"!==g||(d=h(d,!1)):"Edm.DateTime"===g?(f=n(d),d=a.time.formatDate("yy-mm-ddT",f)+a.time.formatTime("HH:mm:ss.SSS",f)):"Edm.DateTimeOffset"===g&&(f=n(d),d=a.time.formatDate("yy-mm-ddT",f)+a.time.formatTime("HH:mm:ss.SSS000Z",f),d=d.slice(0,-2)+":"+d.slice(-2)),d},getODataLibrary:function(a){return a._odatalib},getURLFormattedValue:function(c,d,e){var f=a.time,g=e.major<4,h=function(a,b,c){return c&&e.major>c?b:a+"'"+b+"'"},j=function(a,b,c){return c&&e.major>c?b:b+a},k=function(a){if(i.isNumber(a))return parseFloat(a);throw'The value "'+a+'" could not be translated to a number.'},l=function(a){var c;if(i.isDate(a)?c=a:i.isNumber(a)?c=new Date(a):i.isString(a)&&(c=f.parseDateTimeString(a),c||(c=f.resolveDateKeyword(a)),b.isArray(c)&&(c=c[0])),!c)throw'The value "'+a+'" could not be translated to a date.';return c};return null===c?"null":"Edm.Boolean"===d?c?"true":"false":"Edm.Byte"===d?k(c).toFixed(0):"Edm.DateTimeOffset"===d?h("datetimeoffset",l(c).toISOString(),3):"Edm.Decimal"===d?j("M",function(a){var b=i.userLocale.decimalsSeparator;if(-1===a.indexOf(b))return a;var c=new RegExp("\\"+b+"?0+$");return a.replace(c,"")}(k(c).toFixed(20)),3):"Edm.Double"===d?j("D",k(c).toString(),3):"Edm.Guid"===d?h("guid",c,3):"Edm.Int16"===d?k(c).toFixed(0):"Edm.Int32"===d?k(c).toFixed(0):"Edm.Int64"===d?j("L",k(c).toFixed(0),3):"Edm.Float"===d&&g||"Edm.Single"===d?j("F",k(c).toString(),3):"Edm.SByte"===d?k(c).toFixed(0):"Edm.DateTime"===d&&g?h("datetime",l(c).toISOString().slice(0,-1),3):"Edm.Date"!==d||g?"Edm.TimeOfDay"!==d||g?"'"+(""+c).replace("'","''")+"'":l(c).toISOString().split("T")[1].slice(0,-1):l(c).toISOString().split("T")[0]},getIndividualKeyFormatted:function(a,b,c,d){return this.getURLFormattedValue(c[a],b.edmtype,d)},getKey:function(a,c,d,e){var f,g=c.key,h=this;return b.isArray(g)&&(g=g[0]),g?g.propertyRef.length>1?b.map(g.propertyRef,function(b){return b.name+"="+h.getIndividualKeyFormatted(b.name,e[b.name],a,d)}).join(","):(f=g.propertyRef[0].name,i.isUndefined(a[f])?void 0:h.getIndividualKeyFormatted(f,e[f],a,d)):""+(a.Id||a.ID||a.id)},getKeyFields:function(a){var c={},d=a.key;return b.isArray(d)&&(d=d[0]),d&&d.propertyRef&&b.each(d.propertyRef,function(b,d){c[d.name]={id:d.name,entityType:a}}),c},getKeyFieldsInOrderedList:function(a){var c=[],d=a.key;return b.isArray(d)&&(d=d[0]),d&&d.propertyRef&&(c=b.map(d.propertyRef,function(b){return{id:b.name,entityType:a,edmtype:a.propertyMap[b.name].type}})),c},getMetadata:function(a){var b=this;return E(a.dataSource).then(function(){return b.queryMetadata(a)})},getModelProperties:function(b,c){var d=a.builder.core,e=b.state,f=d.getUnsavedChangesWarningProperty({component:b}),h=d.getCoreModelBasicProperties({component:b,propViewer:c}),j=[];return h.push({id:"sobject",type:"sobject",dataSourceTypeName:this.name,dataSourceName:e.attr("datasource")||e.attr("service"),label:"External Object Name",onChange:function(a){if(a&&(!e.attr("label")||!e.attr("labelplural"))){var c=a.split(g).pop();e.attr("label")||e.attr("label",c),e.attr("labelplural")||e.attr("labelplural",c+(i.endsWith(c,"s")?"":"s")),b.save()}}}),Array.prototype.push.apply(h,d.getModelLabelProperties()),h.push(d.getModelQueryOnPageLoadProperty({component:b,propViewer:c}),d.getModelLimitProperty(),d.getModelOrderByProperty(),d.getCreateDefaultRowProperty(),d.getModelNameFieldProperty(),d.getAsyncLoadProperty()),f&&j.push(f),j.push(d.getDeferFieldRenderingProperty(!0)),j.push(d.getFieldsToDeferProperty(b)),[{name:"Basic",props:h},{name:"Advanced",props:j}]},getNameField:function(a){var b,c,d,e,f=this,g=a.dataSource&&a.dataSource.metadata;return g&&(b=f.getEntitySet(a.objectName,g),c=f.getEntityTypeFromEntitySet(b,a.objectName,g),e=Object.keys(f.getKeyFields(c)),c.nameField?d=c.nameField:e&&e.length>0&&(d=e[0])),d},getRowName:function(a,b,c){return b.getFieldValue(a,this.getNameField({dataSource:c,objectName:b.objectName}),!0)},getRowId:function(a,b,c){var d=c.metadata,e=this.getEntitySet(b.objectName,d),f=this.getEntityTypeFromEntitySet(e,b.objectName,d),g=this.getServiceVersion(c);return this.getKey(a,f,g,b.fieldsMap)},getEntityContainerToList:function(){},getEntityList:function(a){var b=this,c=q();return b.authenticateAndGetMetadata(a).then(function(d){c.resolve(b.getEntitySetList(d,a))},function(a){if("string"==typeof a)c.reject(a);else{var b=a.response,d=b.error;c.reject(d,b)}}),c.promise()},getPropertyByName:function(a,b){var c,d,e,f=this;return a.propertyMap?(e=a.propertyMap[b],e||(e=a.navigationPropertyMap&&a.navigationPropertyMap[b]),e&&(d=e)):(c=f.getPropertiesOfEntity(a),d=c.concat(a.navigationProperty).filter(function(a){return!!a&&b===a.name})[0]),d},getPropertyDef:function(a,b,c,d,e,f,h){var i=this,j=a.split(g),k=i.getPropertyByName(b,j[0]);if(f&&(k.isFieldOnReferenceField=!0),1===j.length)return d&&e.navigationPropertyMap[j[0]]&&(d[j[0]]=!0),k;var l=i.getEntityTypeNameFromRefPropDef(k,c),m=i.getEntityType(l,c);return d&&e.navigationPropertyMap[j[0]]&&(d[(h&&h+"/"||"")+j.slice(0,j.length-1).join("/")]=!0),j.shift(),i.getPropertyDef(j.join(g),m,c,d,e,!0,h)},getRefConstraintsFromAssociation:function(a,c){var d=[];return a.referentialConstraint&&b.each(a.referentialConstraint,function(a,e){e.role===c&&b.each(e.propertyRef,function(){d.push(this)})}),d},getRowForItem:function(a,c,d,e){var f=this,h={};return b.each(d,function(b,c){-1!==c.id.indexOf(g)?i.setObjectProperty(h,c.id,f.getFieldDataForItem(a,c,c.id)):h[c.id]=f.getFieldDataForItem(a,c,c.id)}),D(h,a,e),h},getServiceVersion:function(a){if(a.metadata&&a.metadata.skuidVersion)return a.metadata.skuidVersion;var b=a&&a.getConfigProperty("odata-version")||"1.0",c=(b+"").split(g),d=parseFloat(c[0]),e=parseFloat(c[1]),f=parseFloat(c[2]);return{major:isNaN(d)?0:d,minor:isNaN(e)?0:e,patch:isNaN(f)?0:f,toString:function(){return[this.major,this.minor].join(g)}}},getSelectClause:function(a){var b=Object.keys(a);if(b.length)return"$select="+b.join(",")},getExpandClause:function(a){var b=Object.keys(a);if(b.length)return"$expand="+b.join(",")},getOrderByClause:function(a){if(a.orderByClause)return"$orderby="+a.orderByClause.replace(/nulls first/gi,"").replace(/nulls last/gi,"").replace(/asc/gi,"asc").replace(/desc/gi,"desc")},getFilterClause:function(a,b,c,d){var e=this,f=e.getFilterStringFromConditions(a,b.conditionLogic,b,{version:c,fieldsMetadata:d});if(f)return"$filter="+f},getSkipClause:function(a){var b=a.offsetPageNumber,c=a.offsetPageSize;if(b>1&&c>0)return"$skip="+(b-1)*c},getTopClause:function(a){var b=a.offsetPageSize||a.recordsLimit;if(0===b||b>0)return"$top="+(parseInt(b,10)+1)},createQualifiedURL:function(a,b,c,d,e,f){var g,h,j=this,k=[],l=a.getDataSource(),m=i.combineUrls(l.serviceUrl,f.name);if(l)return g=j.getServiceVersion(l),h=g.major>3?G(d,e):j.getExpandClause(d),k.push(h),k.push(j.getSelectClause(e)),k.push(j.getOrderByClause(a)),k.push(j.getFilterClause(b,a,g,c)),k.push(j.getSkipClause(a)),k.push(j.getTopClause(a)),k=k.filter(function(a){return a!==undefined}),k.length&&(m+="?"+encodeURI(k.join("&"))),m},cacheFieldsOfEntity:function(a,b,c,d,e){var f=this,g=a.objectName,h=a.label||g,i=a.labelPlural||g,j=a.dataSource,k=f.getEntitySet(g,c);if(g=k&&k.entityType||g,e=e||0,d=d||{},!(j.getCachedEntityMetadata(g)||(d[g]={objectName:g,label:h,labelPlural:i,fields:b},j.cacheEntityMetadata(g,{objectName:g,label:h,labelPlural:i,fields:b}),e>5)))for(var l=0;l<b.length;l++){var m=b[l];if(m.ref&&!d[m.ref]){g=m.ref;var n=f.getEntityType(g,c),o=f.getFieldsFromEntityType(n,g,c,j);f.cacheFieldsOfEntity({dataSource:j,objectName:g},o,c,d,e+1)}}},getConditionsOfODataModel:function(a){return b.map(a.conditions,function(b){var c=a.getConditionValueResult(b);return b.originalValue||(b.originalValue=c.value),b})},loadIndividualModel:function(a,c,d){var e,f,g,h,i,j,k,l,m=this,n=c.metadata,o=q(),p=a.objectName,r=a.label||p,s=a.labelPlural||p,t={},u={},v=a.offsetPageSize||a.recordsLimit;return p?(b.each(a.fields,function(c,d){b.isArray(a.deferredFields)&&b.inArray(d.id,a.deferredFields)>-1&&(d.defer=!0,a.fieldsMap[d.id].defer=!0)}),f=m.getEntitySet(p,n),g=m.getEntityTypeFromEntitySet(f,p,n),i=m.getFieldsFromEntityType(g,p,n,a.dataSource),j=m.getConditionsOfODataModel(a),m.cacheFieldsOfEntity(a,i,n),h=m.getFieldsFromEntityType(g,p,n,a.dataSource,{requestedFields:a.fields,selects:t,expands:u}),a.deferFieldRendering&&b.each(h,function(a,b){b.defer&&delete t[b.id]}),e=m.createQualifiedURL(a,j,i,u,t,f),l={label:r,labelPlural:s,accessible:!0,createable:!0,updateable:!0,deleteable:!0,fields:h,soql:e,conditions:j,recordsLimit:v},!1===a.doQuery?o.resolve(l):(k={requestUri:e},d&&b.extend(!0,k,d),m.fetchData(c,k,g,h,v).then(function(a){return b.extend(l,a),l}))):o.reject("No object name specified for Model: "+a.id).promise()},makeODataRequest:function(a,b){var c=this,d=q();return c.getODataLibrary(a).read(b,function(a){d.resolve(a)},function(a){d.reject(a)},undefined,a.httpClientOfDataSourceType,a.metadata),d.promise()},fetchData:function(a,c,d,e,f){var g=this,h=g.getServiceVersion(a);return g.makeODataRequest(a,c).then(function(a){var i,j=!1,k=h.major<4?a.results:a.value;return i=k&&b.isArray(k)?b.map(k,function(a){return g.getRowForItem(a,d,e.filter(function(a){return!1!==a.query}),h,H(e))}):!k&&c.singleRow?a:[],f&&i.length>f&&(j=!0,i.pop()),{data:i,canRetrieveMoreRows:j}})},makeAdditionalQueries:function(c,d){var e=this,f=c.dataSource,g=f.metadata,h=e.getServiceVersion(f),i=c.objectName,j=e.getEntitySet(i,g),k=e.getEntityTypeFromEntitySet(j,i,g),l=e.getFieldsFromEntityType(k,i,g,f,{requestedFields:c.fields,selects:function(){var a={};return b.each(c.deferredFields,function(b,c){a[c]=!0}),a}()}),m={requestUri:h.major<4?d.__metadata.uri:d["@odata.id"],singleRow:!0};return e.coerceAdditionalQueries(m),e.fetchData(f,m,k,l).then(function(b){return c.fields.map(function(a){a.defer&&b.data[a.id]&&(d[a.id]=b.data[a.id])}),a.events.publish("odata.deferred.loaded",[d]),{row:d,model:c}})},coerceAdditionalQueries:function(){},getEntitySetFromEntityTypeName:function(a,b){var c=this,d=c.processFullyQualifiedName(a),e=c.getFlatEntitySetList(b),f=e.filter(function(e){var f=c.getEntitySet(e,b);return f.entityType===a||f.entityType===d.name})[0];return c.getEntitySet(f,b)},load:function(a,d){var e=this,f=q(),g=d.dataSource,h=[];return e.authenticateAndGetMetadata(d).then(function(){return e.getExtraEntityMetadata(g,a)}).then(function(){c(a,function(a,b){var c=b.objectName;if(c){var d=e.getEntitySet(c,g.metadata);d||(d=e.getEntitySetFromEntityTypeName(c,g.metadata),b.objectName=d.name)}}),b.each(a,function(){var a=this,b=e.loadIndividualModel(a,g,d);h.push(b)}),b.when.all(h).then(function(a){f.resolve(a)},function(a){var c="There was a problem with an OData Query: ";b.each(a,function(a,b){var d=e.getErrorFromErrorBody(b.message?b:b.response&&b.response.body);d&&b.response?c+=(d.code?d.code+" - ":"")+d.message+" - Request URL: "+b.response.requestUri:j(b)&&(c+=b)}),f.reject(c)})},function(a,b){f.reject(a,b)}),f.promise()},processFullyQualifiedName:function(a){var b=a.split(g);return{name:b.pop(),nameSpace:b.join(g)}},supportsBatch:function(a){var b="true"===(a.getConfigProperty("supports-batch")||"false");return q().resolve(b).promise()},search:function(c,d,e){var f=this,g=c.returning.map(function(a){var b=e[a.modelName];return a.fields||(a.fields=[]),b.searchFields=a.fields,b}),h=q();return f.getEntityMetadata({dataSource:c.dataSource,entities:g}).then(function(d){return b.each(d,function(a,d){var e=g[a],f=1;b.each(e.searchFields,function(e,h){b.each(d.fields,function(d,j){if((h=i.isString(h)?h:h.id)===j.id){if(j.filterable){var k=!1;b.each(g[a].conditions,function(b,d){d.name==="__global_search_"+f&&(k=!0,g[a].conditions[b].value=c.query)}),k||g[a].addCondition({name:"__global_search_"+f,sourceType:"param",sourceParam:"search",value:c.query,field:h,operator:"contains",encloseValueInQuotes:!0,inactive:!1}),f++}g[a].fields[e]=j}})}),e.conditionLogic?e.conditionLogic=e.conditionLogic.replace("AND","OR"):e.conditionLogic=e.conditions.map(function(a,b){if(!0!==a.inactive)return b+1+""}).join(" OR ")}),f.load(g,{dataSource:a.dataSource.getDataSource(c.dataSourceName),loadAllMetadata:!0,performingSearch:!0,ignoreCache:!0}).then(function(a){return h.resolve({request:c,results:a.map(function(a,b){var d=c.returning[b];return{label:a.label,labelPlural:a.labelPlural,objectName:e[d.modelName].objectName,objectMapKey:d.objectMapKey,modelName:d.modelName,records:a.data}})}).promise()})})},properties:{composer:{supports:{childRelationships:!1},canFieldsBeSelected:function(a){return!!a.breadcrumb.endsobject||"Select an external object for this Model."}},canAutoGenerateConditionsFromFields:!0,validConditionTypes:["fieldvalue","multiple","param","userinfo","blank","modelmerge"],canConditionsBeGrouped:!0,hasGlobalSearchEntities:!0},propertyHasExtension:function(a,b){return!!a.extensions&&a.extensions.filter(function(a){return a.name===b}).length>0},createPropertyExtensionsMap:function(a){var c={};if(a.extensions)return b.each(a.extensions,function(a,b){if(!b.name||"undefined"==typeof b.value)return!0;c[b.name]=b.value}),c},_expandBaseTypeForEntity:function(a,b,c,d){if(!a||!b)return[];var e,f,h,i,j,k,l,m=this,n=a.baseType,o=c.dataServices,p=a.hasExpandedBaseType,q=a.__namespace;return d=d||{},!n||p?{properties:a.property||[],navigationProperties:a.navigationProperty||[],key:a.key}:(-1!==n.indexOf(g)&&(f=n.split(g),e=f.slice(0,f.length-1).join(g),h=n.substring(e.length+1)),e?(k=o.aliasMap[e],e=k||e,a.baseType=e+g+h,l=m.getSchema(c,e),i=l&&l.entityTypeMap[h]):(i=m.getSchema(c,q).entityTypeMap[n],e=q),i?d[e+g+i.name]?{properties:a.property||[],navigationProperties:a.navigationProperty||[],key:a.key}:(d=F(e+g+i.name,d),a.hasExpandedBaseType=!0,j=m._expandBaseTypeForEntity(i,m.getSchema(c,e),c,d),a.property=(a.property||[]).concat(j.properties),a.navigationProperty=(a.navigationProperty||[]).concat(j.navigationProperties),a.key=j.key||a.key,{properties:a.property,navigationProperties:a.navigationProperty,key:a.key}):{properties:a.property||[],navigationProperties:a.navigationProperty||[],key:a.key})},_buildEntitySpecificMaps:function(a,b,c){var d,e=this,f=c.dataServices;a.builtMaps||(d=e._expandBaseTypeForEntity(a,b,c),a.property=d.properties,d.navigationProperties&&d.navigationProperties.length&&(a.navigationProperty=d.navigationProperties),a.key=d.key,e._setMapOfPropertiesOfEntityType(a,c),e._setMapOfNavigationPropertiesOfEntityType(a,f),a.builtMaps=!0)},_buildMetadataMaps:function(a,d){var e,f=this,g=d.major<4,h=a.dataServices;k([h],"schema","schemaMap","namespace",{
addKeyRelationships:!1}),k(h.schema,"entityType","entityTypeMap","name",{addKeyRelationships:!1}),e=h.schema,h.aliasMap={},f._setComplexTypeMap(a),f._setEnumTypeMap(a),g&&(k(e,"association","associationMap","name",{addKeyRelationships:!1}),k(e,"entityContainer","entityContainerMap","name",{addKeyRelationships:!1})),c(e,function(a,c){var d,e,f,i;c.alias&&(h.aliasMap[c.alias]=c.namespace),g?e=c.entityContainer:(c.entityContainerMap={},e=(d=c.entityContainer)&&(c.entityContainerMap[d.name]=d)&&[d]),e&&(k(e,"entitySet","entitySetMap","name",{addKeyRelationships:!1}),f=c.entitySetMap={},b.each(e,function(){b.extend(f,this.entitySetMap)}),g&&(k(e,"associationSet","associationSetMap","name",{addKeyRelationships:!1}),i=c.associationSetMap={},b.each(e,function(){b.extend(i,this.associationSetMap)}))),b.each(c.entityTypeMap,function(a,b){b.__namespace=c.namespace})})},getBatchSupport:function(a){return i.getObjectProperty(a,"metadata.skuidSupportsBatch")},attachHttpClientToDataSource:function(c,d){var e=this,f=e.getODataLibrary(c),g=e.getServiceVersion(c).major<4;c.httpClientOfDataSourceType={request:function(h,j,k){var l,m,n=h.dataSource||c,o=b.extend(h.headers,d.headers),p=e.getServiceVersion(n),q=e.getBatchSupport(c);return g&&!q&&(o.DataServiceVersion=p.toString(),o.MaxDataServiceVersion=p.toString()),m={body:h.body,url:h.requestUri,method:h.method,headers:o},q||(m.contentType="application/json;odata=verbose"),l=n.createHTTPRequest(m),n.useApexProxy?(n.authentication&&n.authentication.success&&(l.isAuthenticated=!0),a.ajax.proxy(l).done(function(a){var c=a?a.headers:null;if(3===p.major){var d;if(b.each(["Content-Type","content-type"],function(a){if(c[a])return d=c[a],!1}),d&&"application/json"===d.slice(0,16)){var f=d.split(";"),g=!1;b.each(f,function(){if("odata"===this.slice(0,5))return g=!0,!1}),g||(a.headers["Content-Type"]=d+";odata=minimalmetadata")}}var l={requestUri:h.requestUri,statusCode:a.statusCode,statusText:a.status,headers:a.headers,body:a.body instanceof Document?i.getXML(a.body):a.body};"2"===e.getStatusCode(a)?j(l):k(a.status,l)}).fail(function(a){k({response:a})})):(b.extend(h,{requestUri:l.url,body:l.body,headers:l.headers}),f.defaultHttpClient.request(h,function(a){j(a)},function(a){k(a)}))}}},trimMetadataForCache:function(a){var b=a.dataServices,d=["aliasMap","complexTypeMap","enumTypeMap","schemaMap"];c(d,function(a,c){delete b[c]}),d=["entityContainerMap","entitySetMap","entityTypeMap","function","action"],c(b.schema,function(a,b){c(d,function(a,c){delete b[c]}),c(b.entityType,function(a,b){delete b.navigationPropertyMap,delete b.propertyMap,delete b.builtMaps}),i.isObject(b.entityContainer)?delete b.entityContainer.entitySetMap:c(b.entityContainer,function(a,b){delete b.entitySetMap})})},queryMetadata:function(a){function c(a,b,c){var d,e,i=a&&a.dataServices;if(c=c||{},d=c.minimalOnly,e=c.fromSource,a&&(a.skuidVersion=j),i){f._buildMetadataMaps(a,j),h.metadata=a;(e?l(h,d):q().resolve().promise()).then(function(){return f.supportsBatch(h).then(function(b){return a[y]=b,d?(f.trimMetadataForCache(a),g.resolve(a)):g.resolve(a)},function(){a[y]=!1,g.resolve(a)})})}else{if(b)return"OK"===b.statusText?g.reject("Unable to parse metadata. Is your OData version correct?",b):g.reject(b.statusText+": "+b.body,b);g.reject("Attempted to pull from datasource cache, but failed")}}function d(){return k.read({requestUri:f.buildResourceUri(h,K)},function(a,b){c(a,b,{minimalOnly:i,fromSource:!0})},function(a,b){g.reject(a,b)},k.metadataHandler,h.httpClientOfDataSourceType)}function e(a){a.setPersistentCacheProperties({url:null,version:null}),b.get("/api/v1/datasource-metadata?datasource="+a.name).then(function(e){a.setPersistentCacheProperties({url:e.signedRequest,version:a._metadataCacheVersion}),b.get(e.signedRequest).then(function(a){c(JSON.parse(a))},d)},d)}var f=this,g=q(),h=a.dataSource,i=a.minimalOnly,j=f.getServiceVersion(h),k=f.getODataLibrary(h),l=function(a){var b=q();return f.populateExtraMetadata?f.populateExtraMetadata(a).then(function(a){b.resolve(a)}):b.resolve(),b.promise()};if(h.metadata)return g.resolve(h.metadata).promise();if(f.attachHttpClientToDataSource(h,a),!h._metadataCacheVersion||i)d();else{var m,n=h.getCacheProperties(["url","version"]);n.version===h._metadataCacheVersion?m=n.url:h.setPersistentCacheProperties({url:null,version:null}),m?b.get(m).then(function(a){c(JSON.parse(a))},function(){e(h)}):e(h)}return g.promise()},coerceSaveItemRequest:function(){},coerceChanges:function(){return!1},getUpdateMethod:function(a){return this.getBatchSupport(a)?this.getServiceVersion(a).major<4?u:t:this.getServiceVersion(a).major<3?u:t},itemNeedsIfMatchHeader:function(a){return!(!a.__metadata||!a.__metadata.etag)},getItemChanges:function(a,c,d,e){var f=this,g={},h=f.getServiceVersion(e),i=h.major<4;return b.each(c,function(b,c){var d=a.getField(b);if("REFERENCE"===d.displaytype){var j=f.getEntitySetFromEntityTypeName(d.ref,e.metadata);i?g[b]={__metadata:{uri:j.name+"("+c[d.keyField]+")"}}:g[b+"@odata.bind"]=j.name+"("+c[d.keyField]+")"}else g[b]=f.getItemForDML(d,c,h)}),g},save:function(c,d){function e(){return{Accept:m,"Content-Type":m}}var f=this,h=q(),i=d.dataSource,k=this.getServiceVersion(i),l=k.major<4,m="application/json;"+(l?"odata=verbose":"odata.metadata=full"),n=f.getUpdateMethod(i);return f.authenticateAndGetMetadata(d).then(function(d){var i=[];b.each(c.operations,function(h,j){function m(a,b,c){return{operationType:a,dataSource:p,model:o,key:b,row:c,operation:j,entitySet:s,entityType:t,version:k}}var o=a.$M(j.id),p=o.getDataSource(),r=[],s=f.getEntitySet(j.type,d),t=f.getEntityTypeFromEntitySet(s,j.type,d),u={},x=0,y=q(),z=[],A=[],B=[],C={deleteResults:z,insertResults:A,updateResults:B,totalsuccess:!0};i.push(y),f.coerceChanges(j,c,o),b.each(j.deletes,function(a,b){var c,d=e(),g=o.getRowById(a);f.itemNeedsIfMatchHeader(g)&&(d["If-Match"]="*"),l||(d["Content-ID"]=""+a),D(b,g,k),f.coerceSaveItemRequest(c={requestUri:s.name+"("+a+")",method:w,__oldid:a,headers:d},m("delete",a,b)),r.push(c)}),b.each(j.updates,function(a,b){var c,d=o.getRowById(a),g=f.getItemChanges(o,b,d,p),h=e();f.itemNeedsIfMatchHeader(d)&&(h["If-Match"]="*"),l||(h["Content-ID"]=""+a),D(g,d,k),f.coerceSaveItemRequest(c={requestUri:s.name+"("+a+")",method:n,data:g,__oldid:a,headers:h},m("update",a,b)),r.push(c)}),b.each(j.inserts,function(a,b){var c,d=o.getRowById(a),h=f.getItemChanges(o,b,d,p),i=e(),j=t.__namespace+g+t.name,k=u[a];k||(x++,k=x),l?h.__metadata={type:j}:h["@odata.type"]=j,i["Content-ID"]=""+k,f.coerceSaveItemRequest(c={requestUri:s.name,method:v,data:h,__oldid:a,headers:i},m("insert",a,b)),r.push(c)}),d.skuidSupportsBatch?f.handleBatchRequest(C,p,r,j).then(function(a){y.resolve(a)},function(a){y.reject(a)}):f.handleConcurrentRequests(C,p,r,j).then(function(a){y.resolve(a)},function(a){y.reject(a)})}),b.when.all(i).then(function(a){var c={insertResults:[],updateResults:[],deleteResults:[],globalErrors:[],totalsuccess:!0};b.each(a,function(a,d){b.merge(c.insertResults,d.insertResults),b.merge(c.updateResults,d.updateResults),b.merge(c.deleteResults,d.deleteResults),!1===d.totalsuccess&&(c.totalsuccess=!1)}),h.resolve(c)},function(a){var c=[],d=[];b.each(a,function(a,b){j(b.message)&&c.push(b.message),b.response&&d.push(b.response)}),h.reject(c,d)})}),h.promise()},getStatusCode:function(a){return a.statusCode?(a.statusCode+"").substring(0,1):"4"},handleConcurrentRequests:function(a,e,f,g){var h=this,j=q(),k=[],l=e.metadata;return c(f,function(b,c){var j=q(),m=d({},c,{requestUri:i.combineUrls(e.serviceUrl,c.requestUri)});k.push(j),h.getODataLibrary(e).request(m,function(c,d){var e=h.getStatusCode(d);if("4"===e||"5"===e)return a.totalsuccess=!1,j.reject(d.statusCode+" - "+d.statusText+" - "+d.body,d);h.handleResponse(d,f[b],g,a),j.resolve()},function(c){h.handleResponse(c,f[b],g,a),j.reject(c)},undefined,e.httpClientOfDataSourceType,l)}),b.settle(k).always(function(){j.resolve(d({globalErrors:[]},a))}),j.promise()},handleBatchRequest:function(a,c,e,f){var g=this,h=q();return g.getODataLibrary(c).request({requestUri:g.buildResourceUri(c,"batch"),method:v,data:{__batchRequests:[{__changeRequests:e}]}},function(c,i){var j=g.getStatusCode(i);"4"===j||"5"===j?h.reject(i.statusCode+" - "+i.statusText+" - "+i.body,i):(b.each(i.data.__batchResponses,function(c,d){d.__changeResponses?b.each(d.__changeResponses,function(b,c){g.handleResponse(c,e[b],f,a,!0)}):g.handleResponse(d,e[c],f,a,!0)}),h.resolve(d({globalErrors:[]},a)))},function(a,b){h.reject({message:"There was an error connecting to the proxy.",response:b})},g.getODataLibrary(c).batchHandler,c.httpClientOfDataSourceType),h.promise()},getKeyFieldsFromEntityId:function(a,b,d){var e=this,f=d.metadata,g=e.getServiceVersion(d),h=a.match(/[^()]+(?=\))+/g),i=e.getKeyFieldsInOrderedList(b,f),j={};return h?(h=h.pop().split(","),c(h,function(a,b){var c=b.indexOf("=");if(-1!==c){var d=b.substring(0,c),e=b.substring(c+1);j[d]=e}else j[i[a].id]=b}),c(i,function(a,b){var c=b.id;j[c]=e.getItemForDML(b,j[c],g)}),j):{}},handleResponse:function(b,c,e,f,g){var h,i=this,j=a.$M(e.id),k=j.dataSource,l=k.metadata,m=i.getEntitySet(e.type,l),n=i.getEntityTypeFromEntitySet(m,e.type,l),o=i.getServiceVersion(k),p=[],q=o.major<4,r=i.getUpdateMethod(k),s=b.data,t=q?s:s&&s.d||s,u=t?i.getRowForItem(t,n,j.fields,o,j.fieldsMap):null,x=u&&i.getKey(u,n,o,j.fieldsMap),y=i.getStatusCode(b),z={},A="";if(!x&&o.major>3&&b.headers&&(h=b.headers["OData-EntityId"])){var B=i.getKeyFieldsFromEntityId(h,n,k);if(c.data){var C=d({},c.data,B);u=i.getRowForItem(C,n,j.fields,o,j.fieldsMap),x=i.getRowId(u,j,k)}}b instanceof Error&&(y="2"),"4"!==y&&"5"!==y||(b.stack?"Unexpected end of JSON input"===b.message?A+="Service sent back an invalid JSON payload":A+=b.message:(z=i.getErrorFromErrorBody(b.response&&b.response.body),A="There was a problem with an OData "+(g?"Batch ":"")+"Request: ",z&&(A+=(z.code?z.code+" - ":"")+z.message)),p.push({fields:z.fields||[],message:A,rowId:c.__oldid,severity:"ERROR",status:"OData Error"})),c.method===r?f.updateResults.push({errors:p,id:c.__oldid,messages:[],record:u&&JSON.stringify(u),source:e.id,success:!p.length}):c.method===v?f.insertResults.push({errors:p,id:x,messages:[],oldId:c.__oldid,record:u&&JSON.stringify(u),source:e.id,success:!p.length}):c.method===w&&f.deleteResults.push({errors:p,id:c.__oldid,messages:[],source:e.id,success:!p.length}),p.length&&(f.totalsuccess=!1)},getReferenceHandler:function(){return{getBaseReferenceProps:function(a){return[{id:"targetobjects",type:"sobject",label:"Entity Type",dataSourceName:e.getDataSourceFromXML(a.state).name}]},getOverrideBatchProperties:function(){return[{type:"helptext",html:"Specify fields that will be added as related data. Any fields that are used in search or display templates will need to be added here."}]},getOverrideBatchNoItemsFunction:function(){return function(){return b("<div>").text("(Loading key field only.)")}},getOverrideBatchFieldChildrenFunction:function(a){return function(){return[{id:"batchfield",indent:1,linkedComponent:a,addtooltip:"Add New Batch Load Field",labelFunction:function(a){return a.attr("field")||"[No Field Selected]"},defaultStateFunction:function(){return l("<batchfield/>")},propsFunction:function(b){return[{id:"field",type:"field",label:"Field",sobject:a.state.attr("targetobjects"),dataSourceName:a.state.attr("datasource"),onChange:function(){b.refresh().rebuildProps()}}]}}]}},getMetadataHandler:function(c,d,f,g,h){var i,j=c.children("batchfields").first(),k=j.children("batchfield"),l=c.attr("keyfield")||"ID",m=c.attr("targetobjects"),n=c.attr("ogdisplaytype"),o=c.attr("rel")||g+"__r";if(d.keyField=l,d.originalDisplayType=n,m&&(i=m.split(","),d.isNamePointing=i.length>1,(h||n&&"REFERENCE"!==n)&&(d.relationshipName=d.rel=o),d.referenceTo=b.map(i,function(a){return{accessible:!0,objectName:a}}),d.ref=m),!h&&n&&"REFERENCE"!==n){var p=e.getDataSourceFromXML(c),q=new a.model.Model({dataSource:p});q.id="_ReferenceLabelModel_"+(new Date).getTime()+o,k&&k.length?q.fields=b.map(k,function(a){return{id:b(a).attr("field")}}):q.fields=[{id:l}],q.doQuery=!0,q.doClone=!1,q.objectName=m,q.initialize();var r=new a.model.Condition;r.name="__reference_batch",r.operator="in",r.field=l,r.encloseValueInQuotes=!1,q.addCondition(r),f.batchLabelModels||(f.batchLabelModels={}),f.batchLabelModels[g]=q}},getReferenceValue:function(a,b){return a[b.keyField||"ID"]},getRowFromReferenceValue:function(a,b,c){var d=a.getRows([{field:c.keyField||"ID",value:b}]);return d&&d.length?d[0]:{}},processReferenceLookupModel:function(a,b,c){a.objectName=c}}},onDataSourceChange:function(a){a.attr("deferfieldrendering",!0)}}),d(h,{ODataDataSourceTypeBase:J})}(skuid),function(a){var b=a.$,c=b.extend,d=a.utils,e=d.makeXMLDoc,f=a.dataSource,g=f.utils,h=g.REST,i=f.core||(f.core={}),j=a.model,k=d.contains,l=d.getObjectProperty,m=d.hasObjectProperty,n=function(a){b.each(["name"],function(b,c){if(!a[c])throw"Missing Required Property Error: "+c}),c(this,a),this.properties=c(!0,{},n.prototype.properties),a.extendedProperties&&(c(!0,this.properties,a.extendedProperties),delete this.extendedProperties),f.DataSourceType.prototype.constructor.call(this,this),delete this.getModelProperties};n.prototype=new f.DataSourceType(!1),n.constructor=n,n.prototype=c(!0,n.prototype,{_NEW_ID_PREFIX:"__skuid_new__",_FAKE_ID_PREFIX:"__skuid__",_DEFAULT_ID_FIELD:"id",buildEntityMetadataRequest:function(a){var b=a.model,d=new j.Model(b);return a.ignorePathToContent&&delete d.pathToContent,c(d,{path:a.path||""}),d},buildSaveRequests:function(c){function d(a,c){var d=a.method,e=a.request,f="autoprefix"===d.changeMapping,g=(d.sendDataAs||"").toLowerCase(),h={};b.each(c,function(a,b){h[(f?d.changeMappingPrefix:"")+a]=b}),"application/x-www-form-urlencoded"===d.contentType?e.data=b.map(h,function(a,b){return encodeURIComponent(b)+"="+encodeURIComponent(a)}).join("&"):"headerperfield"===g?e.headers=h:"queryparamperfield"===g?(e.url+=k(e.url,"?")?"&":"?",e.url+=b.map(h,function(a,b){return encodeURIComponent(b)+"="+encodeURIComponent(a)}).join("&")):e.data=h}function e(a,b,c){return{type:a,originalRecordId:c,originalRecord:g.getRecordById(c).get(),method:b,model:g,row:g.getRowById(c),request:{url:b.url,method:b.verb,scopes:b.scopes,contentType:b.contentType}}}var f=this,g=a.$M(c.id),h=[],i={insert:c.inserts,update:c.updates,"delete":c.deletes};return b.each(i,function(a,c){var i=f.getMethod(g,a);c&&i&&b.each(c,function(b,c){var g=e(a,i,b);"delete"!==a&&d(g,c),f.coerceRequest(g),h.push(g)})}),h},coerceRequest:function(){},getEntityMetadata:function(a){a||(a={});var c=this,e=b.Deferred(),f=a.entities,g=a.dataSource,h=[],i=[],j={};return b.each(f,function(b,e){g&&!e.dataSource&&(e.dataSource=g);var f=c.getEntityMetadataCacheKey(e),h=c.queryEntityMetadata(e,a);h?(h.done(function(a){if(a){var e=a.extensions||(a.extensions={}),g=e.rest||(e.rest={}),h=a.accessible=!!d.size(c.getMethod(a,"query")),i=a.createable=!!d.size(c.getMethod(a,"insert")),k=a.updateable=!!d.size(c.getMethod(a,"update")),l=a.deleteable=!!d.size(c.getMethod(a,"delete")),m=a.searchable=!!d.size(c.getMethod(a,"search"));a.readonly=(h||m)&&!i&&!k&&!l,g.entityName=f}j[b]=a}).fail(function(a){j[b]={debug:a}}),i.push(h)):j[b]={}}),b.when.all(i).done(function(){b.each(f,function(a){h.push(j[a])}),e.resolve(h)}).fail(function(a){e.reject(a)}),e.promise()},getEntityMetadataCacheKey:function(a){return"string"==typeof a?a:a.objectName||l(a,"extensions.rest.entityName")},shouldIgnoreCache:function(a){return a=a||{},a.ignoreCache||!1},getEntityMetadataLoadingMessageFromBreadcrumb:function(){return"Loading Data Source metadata..."},getEntityList:function(){return b.Deferred().resolve([]).promise()},searchableEntities:function(a){a=a||{};var c=b.Deferred(),d=this,e=[];return d.getEntityList(a).then(function(f){b.each(f,function(b,c){d.queryEntityMetadata(c.value,a).then(function(a){a.methods.search&&e.push(c)})}),c.resolve(e)}),c.promise()},search:function(c,d,e){var f=this,g=[];return b.each(c.returning,function(a,h){var i=!1,j=d&&d[a],k=e[h.modelName];k.extensions.rest={entityName:h.objectName},b.each(k.conditions,function(a,b){"__global_search"===b.name&&(i=!0,b.value!==c.query&&(b.value=c.query))}),i||k.addCondition({name:"__global_search",sourceType:"param",sourceParam:"search",value:c.query,operator:"=",encloseValueInQuotes:!1,inactive:!1}),f.searchProperties&&j&&b.each(f.searchProperties(j).conditions,function(a,b){k.addCondition(b)}),g.push(k)}),f.load(g,{dataSource:a.dataSource.getDataSource(c.dataSourceName),loadAllMetadata:!0,performingSearch:!0,ignoreCache:!0}).then(function(a){return a})},getExtendedModelProperties:function(){return{basic:[],advanced:[],customTabs:[]}},getMethod:function(a,b){return this.getMethods(a)[b]||{}},getMethods:function(a){return l(a,"extensions.rest.methods")||a.methods||{}},getModelProperties:function(b,c,d){var e=this,f=a.builder.core,g=f.getUnsavedChangesWarningProperty({component:b}),h=b.state,i=h.attr("x-entityname")!==undefined,j=f.getCoreModelBasicProperties({component:b,propViewer:c,isDataSourceLocked:i}),k=[];!1!==this.prop("composer.hasEntityOptions")&&j.push({id:"x-entityname",label:"Model Entity",type:"entity",dataSourceName:d.name,readonly:!!h.attr("x-entityname"),onChange:function(a,c){e.onSelectEntity&&e.onSelectEntity(a,c,b,d),b.save().refresh()}}),j.push(f.getModelQueryOnPageLoadProperty({component:b,propViewer:c}),f.getCreateDefaultRowProperty(),f.getAsyncLoadProperty()),g&&k.push(g),k.push(f.getDeferFieldRenderingProperty(!0));var l=this.getExtendedModelProperties({basic:[],advanced:[],customTabs:[]}),m=[],n=Array.prototype.push;return l.basic.length>0&&n.apply(j,l.basic),m.push({name:"Basic",props:j}),l.advanced.length>0&&n.apply(k,l.advanced),m.push({name:"Advanced",props:k}),l.customTabs.length>0&&n.apply(m,l.customTabs),e.coerceModelPropertyTabs(m),m},coerceModelPropertyTabs:function(){},handleSaveResult:function(a){var b,e=this,f=[],h=[],i=[],j=[],k=[];return a.map(function(a){var j,n,o,p=a.operation,q=a.requestContext,r=q.type,s=q.method,t=s.receiveDataAs||"recordinbody",u=a.response,v=u?g.parseAsJSONIfString(u.body):null,w=u?u.headers:null,x=a.error,y=[],z={errors:k,messages:y,source:p.id},A=a.isSuccess,B=s.successIf,C=s.successField,D=s.successValue;A&&("responsefieldispresent"===B?A=m(v,C):"responsefieldistrue"===B?A=!0===l(v,C,!0):"responsefieldequals"===B?A=l(v,C,!0)===D:"responseheaderispresent"===B?A=m(w,C,!0):"responseheaderequals"===B?A=l(w,C)===D:"responsebodyequals"===B?A=v===D:"responsebodyisempty"===B&&(A=d.isUndefined(v)||null===v)),z.success=A,A||(b=!0,x?k.push({message:x,severity:"ERROR"}):(j=e.generateErrorMessage(u))&&k.push({message:j,severity:"ERROR"})),"insert"===r?(z.oldId=q.originalRecordId,A&&(n=s.createdRecordIdLocation,o={},c(o,q.originalRecord),"recordinbody"===t?c(o,v):"idinbodyfield"===t?z.id=l(v,n):"idinheader"===t&&(z.id=l(w,n)),z.record=o),e.coerceSaveResultObject(z,q),h.push(z)):"update"===r?(z.id=q.originalRecordId,"recordinbody"===t&&(z.record=v),e.coerceSaveResultObject(z,q),i.push(z)):"delete"===r&&(z.id=q.originalRecordId,f.push(z))}),{deleteResults:f,globalErrors:j,insertResults:h,totalsuccess:!b,updateResults:i}},parseSuccessfulLoadResponse:function(a,b,c){g.parseSuccessfulLoadResponseWithSynonyms(a,b,c)},parseSuccessfulSaveResponse:function(){},coerceSaveResultObject:function(){},initialize:function(a){if(a&&a.fields&&a.fields.length){var c,e,f,g,h=this,i=h.getEntityMetadataCacheKey(a),j=a.getDataSource&&a.getDataSource(),k=j&&j.getCachedEntityMetadata(i);if(!k||!d.size(k))return;1===d.size(k)&&k.message&&(k=k.message),c=k&&k.getFieldsList&&k.getFieldsList()||[],e=a.fields,f=a.extensions||(a.extensions={}),g=f.rest||(f.rest={});var l=b.map(e,function(a){return a.id});b.each(c,function(a,b){l.indexOf(b.id)>=0||!1!==b.omittable||e.push({id:b.id})}),b.each(e,function(a,b){h.updateFieldMetadata(b,b.id,k)}),g.methods=k&&k.getExtensions&&k.getExtensions("rest.methods")}return a},load:function(a,d){var e=this,f=d.dataSource,g=b.Deferred(),h=[];return f.authenticate().done(function(){f.getEntityMetadata({entities:a,ignoreCache:e.shouldIgnoreCache(d)}).done(function(f){1===a.length&&(f=[f]),b.each(a,function(a,g){var i=b.Deferred(),j=f[a],k=j.getExtensions("rest.entityName"),l=j.getExtensions("rest.methods"),m=l&&(d.performingSearch?l.search:l.query);if(h.push(i.promise()),!m)return void i.reject('No query method found for "'+k+'"');var n={url:m.url,method:m.verb,contentType:m.contentType,scopes:m.scopes},o={type:d.performingSearch?"search":"query",method:m,model:g,request:n},p=j._unwrap(),q=p.fields.reduce(function(a,b){return a[b.id]=b,a},{}),r=c({},p,{fields:b.map(g.fields,function(a){return q[a.id]})});if(!1===g.doQuery)i.resolve(r);else{b.each(g.fields,function(a,b){c(b,q[b.id])});e.coerceRequest(o),function(a,c){e.makeRequest(a,c).done(function(f){e.parseSuccessfulLoadResponse(f,m,r,a,p.fields),d.performingSearch?i.resolve({request:{dataSource:a.dataSource},results:[{label:a.label,objectName:a.objectName,objectMapKey:a.objectMapKey,modelName:a.id,records:r.data}]}):!a.deferFieldRendering&&c.method.additionalRequests?b.when.all(r.data.map(function(b,c){return e.makeAdditionalQueries(a,b,m,r).then(function(a){r.data[c]=a.row})})).then(function(){i.resolve(r)}):i.resolve(r)}).fail(function(a){i.reject(a)})}(g,o)}}),b.when.all(h).done(function(a){g.resolve(a)}).fail(function(a){g.reject(a)})}).fail(function(a){g.reject(a)})}).fail(function(a){g.reject(a)}),g.promise()},makeAdditionalQueries:function(c,d,e,f){var g=b.Deferred(),h=this,i=e||c.extensions.rest.methods.query;return f&&(c.fields=f.fields),i.additionalRequests&&i.additionalRequests.map(function(b){var e={type:"query",method:b,model:c,request:{url:b.url,method:b.verb,contentType:b.contentType,scopes:b.scopes},row:d};h.coerceRequest(e),h.makeRequest(c,e).then(function(b){d.__additionalRequestMade=!0,h.parseAdditionalQueries(b,c,d,e),a.events.publish("rest.deferred.loaded",[d]),g.resolve({row:d,model:c})})}),g.promise()},parseAdditionalQueries:function(a,c,d,e){var f="string"==typeof a.body?JSON.parse(a.body):a.body;c.fields.map(function(a){a.defer&&b.inArray(a.id,e.method.fields)>-1&&(d[a.id]=l(f,a.path))})},onSelectEntity:function(a,b,c,d){var f=a,g=d.getCachedEntityMetadata(f),h=g.getFieldsList().filter(function(a){return!1===a.omittable}),i=l(g.getExtensions(),"rest.defaultConditions"),j=c.state,k=j.children("fields").empty(),m=j.children("conditions").empty();h&&h.length>0&&k.append(h.map(function(a){return e('<field id="'+a.id+'" />')})),i&&i.length>0&&m.append(i.map(function(a){return e('<condition value="" />').attr(a)}))},processEntityMetadataRequest:function(a){var b=c(!0,{extensions:{rest:{}}},a.result),d=b.extensions.rest,e=b.methods,f=b.defaultConditions;return delete b.methods,d.methods=e,f&&(delete b.defaultConditions,d.defaultConditions=f),b},processModelXMLExtensions:function(a,b){a.extensions.rest={entityName:b.attr("x-entityname")}},properties:{composer:{canFieldsBeSelected:function(a){var b=a.model,c=b.attr("x-entityname")||b.attr("sobject"),d=b.attr("datasource")||b.attr("service"),e=f.get(d);return!(!1===(e&&e.getDataSourceType()).prop("composer.hasEntityOptions")||!c)||"Select an Entity for this Model"}},canAutoGenerateConditionsFromFields:!1,canConditionsBeGrouped:!1,showSearchFields:!1,canFieldsBeIndividuallySearched:!1,canServerSearch:!1},queryEntityMetadata:function(){},save:function(a){var c=this,d=b.Deferred();return b.each(a.operations,function(a,e){var f,g=c.buildSaveRequests(e),h=[],i=[];b.each(g,function(a,d){var f=c.makeRequest(d.model,d);b.when(f).done(function(a){c.parseSuccessfulSaveResponse(a,d),i.push({operation:e,requestContext:d,response:a,isSuccess:!0})}).fail(function(a){i.push({operation:e,requestContext:d,error:a,isSuccess:!1})}),h.push(f)}),b.when.all(h).always(function(){f=c.handleSaveResult(i),d.resolve(f)})}),d.promise()},updateFieldMetadata:function(a,b,d){if(b||(b=a.id),b){var e,f,g=d&&d.getField&&d.getField(b);g&&(e=a.id,f=a.name,c(!0,a,g),e&&(a.id=e),f&&(a.name=f))}},parseResponseBodyAsJSON:g.parseAsJSONIfString,processErrorObject:h.processErrorObject,populateBreadcrumbFromEntityMetadata:h.populateBreadcrumbFromEntityMetadata,makeRequest:h.makeRequest,generateErrorMessage:h.generateErrorMessage,getConditionSourceProperties:h.getConditionSourceProperties,getIdField:h.getIdField,getNameField:h.getNameField,getRowId:h.getRowId,getRowName:h.getRowName,setDefaultConditionState:h.setDefaultConditionState}),c(i,{RESTDataSourceTypeBase:n})}(skuid),function(a){function b(a){var b=a.body;if(b)for(;D(b);)try{b=JSON.parse(b)}catch(c){break}return b}function c(c){for(var d,e={},f=c.getDataSourceType(),g=0,h=["load","save","getModelMetadata","getEntityList"];g<h.length;g++)d=h[g],e[d]=function(d){return function(e){var g=E(),h=e?"POST":"GET",i={method:h,url:C.combineUrls(f.remoteEndpoint,d)};return"POST"===h&&(i.body=e,i.contentType="application/json"),i.headers={"x-skuid-data-source":c.name},f[G]&&(i.headers[G]=f[G]),a.ajax.direct(c.createHTTPRequest(i)).then(function(a){g.resolve(b(a))},function(a){var c,d=b(a);d&&v.isPlainObject(d)&&(c=d.message),c||(c=a.status),g.reject(c)}),g.promise()}}(d);return c._remote=e,e}function d(a){var b=a._remote;return b||(b=new c(a)),b}function e(a){return a.model?a.model.nameField:a.nameField}function f(a){var b=a.idFields;return b&&v.isArray(b)&&1===b.length?b[0]:b}function g(a,b){return b.getFieldValue(a,e(b),!0)}function h(a,b){var c,d=f(b),e={},g=!1;return v.isArray(d)?d.forEach(function(c){var d=b.getFieldValue(a,c,!0);C.isUndefined(d)||null===d?g=!0:e[c]=d}):(c=b.getFieldValue(a,d,!0),C.isUndefined(c)||null===c?g=!0:e[d]=c),g?C.generateUniqueId():JSON.stringify(e)}function i(a){var b=a.dataSource;return b._entityListCache?E().resolve(b._entityListCache):b.authenticate().then(function(){return d(b).getEntityList().done(function(a){b._entityListCache=a})})}function j(a,b,c,d){if(b){var e,f,g,h,i,k,l=b.split("."),m=d.getDataSource&&d.getDataSource();if("childRelationship"===a.type)(h=a.referenceTo&&a.referenceTo.length&&a.referenceTo[0])&&(i=m&&m.getCachedEntityMetadata(h.o),(k=a.subFields)&&v.each(k,function(a,b){j(b,b.id,i,d)}));else if(1===l.length){if(e=c&&c.getField&&c.getField(b)){f=d.getOverrideableFieldMetadata(a);var n=a.id,o=a.name;v.extend(!0,a,e),n&&(a.id=n),o&&(a.name=o),f&&v.each(f,function(b,c){a[b]=c})}if(a&&a.displaytype===A.REFERENCE){var p,q,r,s;a.relationshipName||(a.relationshipName=a.rel),!a.ref&&a.referenceTo&&(p=a.referenceTo)&&p.length&&(q=[],r=[],s={c:"createable",o:"objectName",l:"label",k:"keyPrefix",p:"labelPlural",s:"searchable"},v.each(p,function(a,b){b.o&&(q.push(b.o),r.push(b.k),v.each(s,function(a,c){b[c]=b[a],delete b[a]}),b.accessible=!0)}),q.length&&(a.ref=q.join(",")),r.length&&(a.refprefix=r.join(",")))}}else b=l.shift(),b=C.getReferenceFieldNameFromRelationshipField(b),e=c&&b&&c.getField&&c.getField(b),e&&(g=e.referenceTo,g&&1===g.length?c=m&&m.getCachedEntityMetadata(g[0].objectName||g[0].o):g&&g.length>1&&(c=m&&m.getCachedEntityMetadata("Name")),c&&j(a,l.join("."),c,d)),a.required=a.createable=a.editable=!1}}function k(a){if(a&&a.fields&&a.fields.length){var b=a.getDataSource&&a.getDataSource(),c=b&&b.getCachedEntityMetadata(a.objectName);c&&(a.fields&&a.fields.length&&v.each(a.fields,function(b,d){j(d,d.id,c,a)}),v.each(c.get(["label","labelPlural"]),function(b,c){a.hasOwnProperty(b)||(a[b]=c)}),v.each(c.get(["accessible","createable","updateable","deleteable","idFields"]),function(b,c){a[b]=c}))}return a.data instanceof Array||(a.data=[a.data]),a}function l(b,c){var d=this,e=a.builder.core,f=b.state,g=e.getUnsavedChangesWarningProperty({component:b}),h=e.getCoreModelBasicProperties({component:b,propViewer:c}),i=[];return h.push({id:"sobject",type:"sobject",dataSourceTypeName:d.name,dataSourceName:f.attr("datasource"),label:"Entity Name",onChange:function(a){if(a&&(!f.attr("label")||!f.attr("labelplural"))){var c=C.capitalizeFirst(a.split(".").pop());f.attr("label")||f.attr("label",c),f.attr("labelplural")||f.attr("labelplural",c+(C.endsWith(c,"s")?"":"s")),b.save()}}}),h.push(e.getModelTypeProperty({component:b}),e.getModelQueryOnPageLoadProperty({component:b,propViewer:c}),e.getModelLimitProperty(),e.getModelOrderByProperty(),e.getCreateDefaultRowProperty(),e.getModelNameFieldProperty()),g&&i.push(g),Array.prototype.push.apply(i,e.getModelLabelProperties()),[{name:"Basic",props:h},{name:"Advanced",props:i}]}function m(a,b){var c=b.dataSource;return c.authenticate().then(function(){return d(c).save(a)})}function n(a,b){var c=b.dataSource;return c.authenticate().then(function(){var e=!1,f=["conditionLogic","doQuery","groupByMethod","havingLogic","id","objectName","orderByClause","offsetPageNumber","offsetPageSize","recordsLimit","type"],g=v.map(a,function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&v.inArray(c,f)>-1&&(b[c]=a[c]);return v.each(["fields","groupByFields"],function(c,d){var e,f=a[d];f&&f.length&&(e=b[d]=[],v.each(f,function(a,b){var c;if(b.uiOnly)return!0;"childRelationship"===b.type?(c={id:b.id,type:b.type},v.each(["recordsLimit","orderByClause","subConditionLogic"],function(a,d){b.hasOwnProperty(d)&&null!==b[d]&&"undefined"!=typeof b[d]&&(c[d]=b[d])}),b.subConditions&&(c.subConditions=[],b.subConditions.length&&v.each(b.subConditions,function(a,b){var d={};for(var e in b)b.hasOwnProperty(e)&&null!==b[e]&&"undefined"!=typeof b[e]&&(d[e]=b[e]);c.subConditions.push(d)})),b.subFields&&(c.subFields=[],b.subFields.length&&v.each(b.subFields,function(a,d){var e={id:d.id};"undefined"!=typeof b.query&&null!==b.query&&(e.query=e.query),c.subFields.push(e)}))):(c={id:b.id},v.each(["name","function","query"],function(a,d){b.hasOwnProperty(d)&&null!==b[d]&&(c[d]=b[d])})),e.push(c)}))}),v.each(["conditions","havings"],function(c,d){var e,f=a[d];f&&f.length&&(e=b[d]=[],v.each(f,function(a,b){var c=v.extend({},b);for(var d in c)null===c[d]&&delete c[d];e.push(c)}))}),a.needsMetadataLoad&&(e=!0),b}),h=!b||b.loadAllMetadata||e;return d(c).load({operationModels:g,options:{excludeMetadata:!h}}).then(function(a){var b,d=E();return v.isArray(a)?d.resolve(a):a&&a.models?(b=a.metadata,b&&C.size(b)&&v.each(b,function(a,b){c.cacheEntityMetadata(a,b)}),d.resolve(a.models)):d.reject("Invalid Response Format"),d.promise()})})}function o(a){if(a){if(a.length){var b=!0;return v.each(a,function(){if(!p(this))return b=!1,!1}),b}if(v.isPlainObject(a))return p(a);if(C.isString(a))return!0}return!1}function p(a){return C.isString(a)||a.objectName&&a.dataSource}function q(a){var b=E(),c=a.entities,e=a.dataSource;return o(c)?e.authenticate().then(function(){var a=[];v.each(c,function(c,f){var g=E(),h=D(f)?f:f.objectName,i={entity:h,loadChildRelationships:"true",loadPicklistValues:"false"};if(!h)return void b.reject("No Table Name provided");f&&f.fields&&f.fields.length&&(i.fieldsToLoad=f.fields.join(",")),a.push(g.promise()),d(e).getModelMetadata(i).then(function(a){g.resolve(a)},function(a){g.reject("There was an error retrieving metadata for table: "+h+": "+a)})}),v.when.all(a).then(function(a){b.resolve(a)},function(a){b.reject(a&&a.length?a.join(","):"")})},function(){b.reject("Unable to authenticate to endpoint. Metadata could not be retrieved.")}):b.reject("Invalid Model configuration. Metadata could not be retrieved."),b.promise()}function r(a){var b=a.targetEntity;return!b&&a.model&&a.model.attr&&(b=a.model.attr("sobject")),{objectName:b}}function s(a){return"Loading metadata for table "+a.endsobject+"..."}function t(a){return a.objectName}function u(a){w(F,function(b,c){if(!a[c])throw"Missing Required Property Error: "+c}),x(this,a),a.extendedProperties&&(x(!0,this.properties,a.extendedProperties),delete this.extendedProperties),z.DataSourceType.prototype.constructor.call(this,this),delete this.getModelProperties}var v=a.$,w=v.each,x=v.extend,y=a.constants,z=a.dataSource,A=y.DISPLAY_TYPES,B=z.core||(z.core={}),C=a.utils,D=C.isString,E=v.Deferred,F=["name","remoteEndpoint"],G="x-sql-dialect"
;u.prototype=new z.DataSourceType(!1),u.constructor=u,u.prototype=x(!0,u.prototype,{save:m,load:n,getRowId:h,getRowName:g,getNameField:e,getIdField:f,initialize:k,getEntityList:i,buildEntityMetadataRequest:r,getEntityMetadataLoadingMessageFromBreadcrumb:s,getEntityMetadataCacheKey:t,getEntityMetadata:q,getModelProperties:l,properties:{composer:{supports:{childRelationships:!1},canFieldsBeSelected:function(a){return!!a.breadcrumb.endsobject||"Select an entity to use for this Model"}},canAutoGenerateConditionsFromFields:!0,validConditionTypes:["fieldvalue","multiple","param","userinfo","blank","modelmerge","join"],canConditionsBeGrouped:!0}}),x(B,{RelationalDataSourceTypeBase:u})}(skuid),function(a){!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.jss=b():a.jss=b()}(a,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.create=b.sheets=b.SheetsRegistry=void 0;var e=c(1),f=d(e),g=c(8),h=d(g),i=c(7),j=d(i);b.SheetsRegistry=h["default"],b.sheets=j["default"];var k=b.create=function(a){return new f["default"](a)};b["default"]=k()},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(2),j=d(i),k=c(16),l=d(k),m=c(17),n=d(m),o=c(7),p=d(o),q=c(22),r=d(q),s=c(11),t=d(s),u=c(3),v=d(u),w=function(){function a(b){e(this,a),this.version="6.0.0",this.plugins=new l["default"],this.use.apply(this,n["default"]),this.setup(b)}return h(a,[{key:"setup",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=g({},a,{generateClassName:a.generateClassName||r["default"]});var b=this.options.plugins;return b&&this.use.apply(this,b),this}},{key:"createStyleSheet",value:function(a,b){return new j["default"](a,g({jss:this,generateClassName:this.options.generateClassName},b))}},{key:"removeStyleSheet",value:function(a){return a.detach(),p["default"].remove(a),this}},{key:"createRule",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===(void 0===a?"undefined":f(a))&&(c=b,b=a,a=void 0),c.classes||(c.classes={}),c.jss||(c.jss=this),c.Renderer||(c.Renderer=(0,v["default"])(c)),c.generateClassName||(c.generateClassName=this.options.generateClassName||r["default"]);var d=(0,t["default"])(a,b,c);return this.plugins.onProcessRule(d),d}},{key:"use",value:function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return c.forEach(function(b){return a.plugins.use(b)}),this}}]),a}();b["default"]=w},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(3),i=d(h),j=c(10),k=d(j),l=function(){function a(b,c){e(this,a);var d=(0,i["default"])(c),g="number"==typeof c.index?c.index:0;this.attached=!1,this.deployed=!1,this.linked=!1,this.classes=Object.create(null),this.options=f({sheet:this,parent:this,classes:this.classes,index:g,Renderer:d},c),this.renderer=new d(this),this.renderer.createElement(),this.rules=new k["default"](this.options);for(var h in b)this.rules.createAndRegister(h,b[h]);if(c.jss){var j=c.jss.plugins;this.rules.getIndex().forEach(j.onProcessRule,j)}}return g(a,[{key:"attach",value:function(){return this.attached?this:(this.deployed||this.deploy(),this.renderer.attach(),!this.linked&&this.options.link&&this.link(),this.attached=!0,this)}},{key:"detach",value:function(){return this.attached?(this.renderer.detach(),this.attached=!1,this):this}},{key:"addRule",value:function(a,b,c){var d=this.queue;this.attached&&!d&&(this.queue=[]);var e=this.rules.create(a,b,c);if(this.attached){if(!this.deployed)return e;if(d)d.push(e);else{var f=this.renderer.insertRule(e);this.options.link&&(e.renderable=f),this.queue&&(this.queue.forEach(this.renderer.insertRule,this.renderer),this.queue=void 0)}return e}return this.deployed=!1,e}},{key:"addRules",value:function(a,b){var c=[];for(var d in a)c.push(this.addRule(d,a[d],b));return c}},{key:"getRule",value:function(a){return this.rules.get(a)}},{key:"deleteRule",value:function(a){var b=this.rules.get(a);return!!b&&(this.rules.remove(b),!this.attached||!b.renderable||this.renderer.deleteRule(b.renderable))}},{key:"indexOf",value:function(a){return this.rules.indexOf(a)}},{key:"toString",value:function(a){return this.rules.toString(a)}},{key:"deploy",value:function(){return this.renderer.deploy(this),this.deployed=!0,this}},{key:"link",value:function(){for(var a=this.renderer.getRules(),b=0;b<a.length;b++){var c=a[b],d=this.rules.get(c.selectorText);d&&(d.renderable=c)}return this.linked=!0,this}}]),a}();b["default"]=l},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.Renderer?a.Renderer:a.virtual||!g["default"]?k["default"]:i["default"]}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e;var f=c(4),g=d(f),h=c(5),i=d(h),j=c(9),k=d(j)},function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d=b.isBrowser="object"===("undefined"==typeof window?"undefined":c(window))&&"object"===("undefined"==typeof document?"undefined":c(document))&&9===document.nodeType;b["default"]=d},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){try{return a.style.getPropertyValue(b)}catch(a){return""}}function g(a,b,c){try{a.style.setProperty(b,c)}catch(a){return!1}return!0}function h(a){return a.selectorText}function i(a,b){return a.selectorText=b,a.selectorText===b}function j(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.attached&&d.options.index>b)return d}return null}function k(a){for(var b=a.length-1;b>=0;b--){var c=a[b];if(c.attached)return c}return null}function l(a){for(var b=0;b<a.childNodes.length;b++){var c=a.childNodes[b];if(8===c.nodeType&&"jss"===c.nodeValue.trim())return c}return null}function m(a,b){var c=r["default"].registry;if(c.length>1){var d=j(c,b);if(d)return d.renderer.element;if(d=k(c))return d.renderer.element.nextElementSibling}var e=l(a);return e?e.nextSibling:null}Object.defineProperty(b,"__esModule",{value:!0});var n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=c(6),p=d(o),q=c(7),r=d(q),s=function(){function a(b){e(this,a),this.getStyle=f,this.setStyle=g,this.setSelector=i,this.getSelector=h,this.sheet=b,b&&r["default"].add(b)}return n(a,[{key:"createElement",value:function(){var a=this.sheet?this.sheet.options:{},b=a.media,c=a.meta,d=a.element;this.head=document.head||document.getElementsByTagName("head")[0],this.element=d||document.createElement("style"),this.element.type="text/css",this.element.setAttribute("data-jss",""),b&&this.element.setAttribute("media",b),c&&this.element.setAttribute("data-meta",c)}},{key:"attach",value:function(){if(!this.element.parentNode&&this.sheet){var a=m(this.head,this.sheet.options.index);this.head.insertBefore(this.element,a)}}},{key:"detach",value:function(){this.element.parentNode.removeChild(this.element)}},{key:"deploy",value:function(a){this.element.textContent="\n"+a.toString()+"\n"}},{key:"insertRule",value:function(a){var b=this.element.sheet,c=b.cssRules,d=c.length;try{b.insertRule(a,d)}catch(b){(0,p["default"])(!1,"[JSS] Can not insert an unsupported rule \n\r%s",a)}return c[d]}},{key:"deleteRule",value:function(a){for(var b=this.element.sheet,c=b.cssRules,d=0;d<c.length;d++)if(a===c[d])return b.deleteRule(d),!0;return!1}},{key:"getRules",value:function(){return this.element.sheet.cssRules}}]),a}();b["default"]=s},function(a,b,c){var d=function(){};a.exports=d},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(8),e=function(a){return a&&a.__esModule?a:{"default":a}}(d);b["default"]=new e["default"]},function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(){c(this,a),this.registry=[]}return d(a,[{key:"add",value:function(a){var b=this.registry,c=a.options.index;if(!b.length||c>=b[b.length-1].options.index)return void b.push(a);for(var d=0;d<b.length;d++){if(b[d].options.index>c)return void b.splice(d,0,a)}}},{key:"reset",value:function(){this.registry=[]}},{key:"remove",value:function(a){var b=this.registry.indexOf(a);this.registry.splice(b,1)}},{key:"toString",value:function(a){return this.registry.filter(function(a){return a.attached}).map(function(b){return b.toString(a)}).join("\n")}}]),a}();b["default"]=e},function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(){c(this,a)}return d(a,[{key:"createElement",value:function(){}},{key:"setStyle",value:function(){}},{key:"getStyle",value:function(){}},{key:"setSelector",value:function(){}},{key:"getSelector",value:function(){}},{key:"attach",value:function(){}},{key:"detach",value:function(){}},{key:"deploy",value:function(){}},{key:"insertRule",value:function(){}},{key:"deleteRule",value:function(){}},{key:"getRules",value:function(){}}]),a}();b["default"]=e},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(11),h=function(a){return a&&a.__esModule?a:{"default":a}}(g),i=function(){function a(b){d(this,a),this.map=Object.create(null),this.index=[],this.options=b,this.classes=b.classes}return f(a,[{key:"create",value:function(a,b,c){var d=this.createAndRegister(a,b,c);return this.options.jss.plugins.onProcessRule(d),d}},{key:"get",value:function(a){return this.map[a]}},{key:"remove",value:function(a){this.unregister(a),this.index.splice(this.indexOf(a),1)}},{key:"indexOf",value:function(a){return this.index.indexOf(a)}},{key:"register",value:function(a){a.name&&(this.map[a.name]=a),a.className&&a.name&&(this.classes[a.name]=a.className),a.selector&&(this.map[a.selector]=a)}},{key:"unregister",value:function(a){delete this.map[a.name],delete this.map[a.selector],delete this.classes[a.name]}},{key:"toString",value:function(a){for(var b="",c=0;c<this.index.length;c++){var d=this.index[c],e=d.toString(a);e&&(b&&(b+="\n"),b+=e)}return b}},{key:"getIndex",value:function(){return this.index.slice(0)}},{key:"createAndRegister",value:function(a,b,c){var d=this.options,f=d.parent,g=d.sheet,i=d.jss,j=d.Renderer,k=d.generateClassName;c=e({classes:this.classes,parent:f,sheet:g,jss:i,Renderer:j,generateClassName:k},c),c.className||(c.className=this.classes[a]);var l=(0,h["default"])(a,b,c);this.register(l);var m=void 0===c.index?this.index.length:c.index;return this.index.splice(m,0,l),l}}]),a}();b["default"]=i},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments[2],d=c.jss;if(a&&"@"===a[0]&&d){var e=d.plugins.onCreateRule(a,b,c);if(e)return e;(0,g["default"])(!1,"[JSS] Unknown rule %s",a)}return new i["default"](a,b,c)}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e;var f=c(6),g=d(f),h=c(12),i=d(h)},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(13),i=d(h),j=c(14),k=d(j),l=c(15),m=d(l),n=JSON.parse,o=JSON.stringify,p=function(){function a(b,c,d){e(this,a),this.type="regular";var f=d.generateClassName,g=d.sheet,h=d.Renderer,i=o(c);this.style=n(i),this.name=b,this.options=d,this.originalStyle=c,this.className="",d.className?this.className=d.className:f&&(this.className=f(i,this,d.sheet)),this.selectorText=d.selector||"."+this.className,g?this.renderer=g.renderer:h&&(this.renderer=new h)}return g(a,[{key:"prop",value:function(a,b){return null!=b?(this.style[a]=b,this.renderable&&this.renderer.setStyle(this.renderable,a,b),this):(this.renderable&&null==this.style[a]&&(this.style[a]=this.renderer.getStyle(this.renderable,a)),this.style[a])}},{key:"applyTo",value:function(a){var b=this.toJSON();for(var c in b)this.renderer.setStyle(a,c,b[c]);return this}},{key:"toJSON",value:function(){var a=Object.create(null);for(var b in this.style){var c=this.style[b];"object"!==(void 0===c?"undefined":f(c))?a[b]=c:Array.isArray(c)&&(a[b]=(0,k["default"])(c))}return a}},{key:"toString",value:function(a){return(0,i["default"])(this.selector,this.style,a)}},{key:"selector",set:function(a){var b=this.options.sheet;return b&&b.rules.unregister(this),this.selectorText=a,this.className=(0,m["default"])(a),this.renderable?this.renderer.setSelector(this.renderable,a)&&b?void b.rules.register(this):(delete this.renderable,void(b&&(b.rules.register(this),b.deploy().link()))):void(b&&b.rules.register(this))},get:function(){if(this.renderable){return this.renderer.getSelector(this.renderable)}return this.selectorText}}]),a}();b["default"]=p},function(a,b,c){function d(a,b){for(var c="",d=0;d<b;d++)c+="  ";return c+a}function e(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=c.indent,f=void 0===e?0:e,h=b.fallbacks,i="";if(f++,h)if(Array.isArray(h))for(var j=0;j<h.length;j++){var k=h[j];for(var l in k){var m=k[l];null!=m&&(i+="\n"+d(l+": "+(0,g["default"])(m)+";",f))}}else for(var n in h){var o=h[n];null!=o&&(i+="\n"+d(n+": "+(0,g["default"])(o)+";",f))}for(var p in b){var q=b[p];null!=q&&"fallbacks"!==p&&(i+="\n"+d(p+": "+(0,g["default"])(q)+";",f))}return i?(f--,i=d(a+" {"+i+"\n",f)+d("}",f)):i}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e;var f=c(14),g=function(a){return a&&a.__esModule?a:{"default":a}}(f)},function(a,b){function c(a){return Array.isArray(a)?Array.isArray(a[0])?c(a.map(d)):a.join(", "):a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c;var d=function(a){return a.join(" ")}},function(a,b){function c(a){var b=a.match(e);return b?b.join(" ").replace(d,""):""}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c;var d=/[.]/g,e=/[.][^ ,]+/g},function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(){c(this,a),this.registry=[]}return d(a,[{key:"onCreateRule",value:function(a,b,c){for(var d=0;d<this.registry.length;d++){var e=this.registry[d].onCreateRule;if(e){var f=e(a,b,c);if(f)return f}}return null}},{key:"onProcessRule",value:function(a){for(var b=0;b<this.registry.length;b++){var c=this.registry[b].onProcessRule;c&&c(a)}}},{key:"use",value:function(a){"function"==typeof a&&(a={onProcessRule:a}),this.registry.push(a)}}]),a}();b["default"]=e},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0});var e=c(18),f=d(e),g=c(19),h=d(g),i=c(20),j=d(i),k=c(21),l=d(k),m={"@charset":f["default"],"@import":f["default"],"@namespace":f["default"],"@keyframes":h["default"],"@media":j["default"],"@supports":j["default"],"@font-face":l["default"]};b["default"]=Object.keys(m).map(function(a){var b=new RegExp("^"+a);return{onCreateRule:function(c,d,e){return b.test(c)?new m[a](c,d,e):null}}})},function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(b,d,e){c(this,a),this.type="simple",this.name=b,this.value=d,this.options=e}return d(a,[{key:"toString",value:function(){if(Array.isArray(this.value)){for(var a="",b=0;b<this.value.length;b++)a+=this.name+" "+this.value[b]+";",this.value[b+1]&&(a+="\n");return a}return this.name+" "+this.value+";"}}]),a}();b["default"]=e},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(11),h=function(a){return a&&a.__esModule?a:{"default":a}}(g),i={indent:1},j=function(){function a(b,c,e){d(this,a),this.type="keyframe",this.selector=b,this.options=e,this.frames=this.formatFrames(c)}return f(a,[{key:"formatFrames",value:function(a){var b=Object.create(null);for(var c in a){var d=e({},this.options,{parent:this,className:c,selector:c}),f=(0,h["default"])(c,a[c],d);d.jss.plugins.onProcessRule(f),b[c]=f}return b}},{key:"toString",value:function(){var a=this.selector+" {\n";for(var b in this.frames)a+=this.frames[b].toString(i)+"\n";return a+="}"}}]),a}();b["default"]=j},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(10),h=function(a){return a&&a.__esModule?a:{"default":a}}(g),i=function(){function a(b,c,f){d(this,a),this.type="conditional",this.selector=b,this.options=f,this.rules=new h["default"](e({},f,{parent:this}));for(var g in c)this.createAndRegisterRule(g,c[g]);if(f.jss){var i=f.jss.plugins;this.rules.getIndex().forEach(i.onProcessRule,i)}}return f(a,[{key:"getRule",value:function(a){return this.rules.get(a)}},{key:"indexOf",value:function(a){return this.rules.indexOf(a)}},{key:"addRule",value:function(a,b,c){return this.rules.create(a,b,this.getChildOptions(c))}},{key:"getChildOptions",value:function(a){return e({},this.options,{parent:this},a)}},{key:"createAndRegisterRule",value:function(a,b){return this.rules.createAndRegister(a,b,this.getChildOptions())}},{key:"toString",value:function(){var a=this.rules.toString({indent:1});return a?this.selector+" {\n"+a+"\n}":""}}]),a}();b["default"]=i},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(13),g=function(a){return a&&a.__esModule?a:{"default":a}}(f),h=function(){function a(b,c,e){d(this,a),this.type="font-face",this.selector=b,this.style=c,this.options=e}return e(a,[{key:"toString",value:function(){if(Array.isArray(this.style)){for(var a="",b=0;b<this.style.length;b++)a+=(0,g["default"])(this.selector,this.style[b]),this.style[b+1]&&(a+="\n");return a}return(0,g["default"])(this.selector,this.style)}}]),a}();b["default"]=h},function(a,b,c){function d(a,b,c){c&&c.options.meta&&(a+=c.options.meta);var d=(0,f["default"])(a);return b.name?b.name+"-"+d:d}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d;var e=c(23),f=function(a){return a&&a.__esModule?a:{"default":a}}(e)},function(a,b,c){function d(a,b){var c,d,e,f,g,h,i,j;for(c=3&a.length,d=a.length-c,e=b,g=3432918353,h=461845907,j=0;j<d;)i=255&a.charCodeAt(j)|(255&a.charCodeAt(++j))<<8|(255&a.charCodeAt(++j))<<16|(255&a.charCodeAt(++j))<<24,++j,i=(65535&i)*g+(((i>>>16)*g&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*h+(((i>>>16)*h&65535)<<16)&4294967295,e^=i,e=e<<13|e>>>19,f=5*(65535&e)+((5*(e>>>16)&65535)<<16)&4294967295,e=27492+(65535&f)+((58964+(f>>>16)&65535)<<16);switch(i=0,c){case 3:i^=(255&a.charCodeAt(j+2))<<16;case 2:i^=(255&a.charCodeAt(j+1))<<8;case 1:i^=255&a.charCodeAt(j),i=(65535&i)*g+(((i>>>16)*g&65535)<<16)&4294967295,i=i<<15|i>>>17,i=(65535&i)*h+(((i>>>16)*h&65535)<<16)&4294967295,e^=i}return e^=a.length,e^=e>>>16,e=2246822507*(65535&e)+((2246822507*(e>>>16)&65535)<<16)&4294967295,e^=e>>>13,e=3266489909*(65535&e)+((3266489909*(e>>>16)&65535)<<16)&4294967295,(e^=e>>>16)>>>0}a.exports=d}])}),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.jssVendorPrefixer=b():a.jssVendorPrefixer=b()}(a,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){function d(){return function(a){if("keyframe"===a.type)return void(a.selector="@"+f.prefix.css+a.selector.substr(1));if("regular"===a.type)for(var b in a.style){var c=a.style[b],d=!1,e=f.supportedProperty(b);e&&e!==b&&(d=!0);var g=!1,h=f.supportedValue(e,c);h&&h!==c&&(g=!0),(d||g)&&(d&&delete a.style[b],a.style[e||b]=h||c)}}}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=d;var e=c(1),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}(e)},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.supportedValue=b.supportedProperty=b.prefix=void 0;var e=c(2),f=d(e),g=c(4),h=d(g),i=c(6),j=d(i);b["default"]={prefix:f["default"],supportedProperty:h["default"],supportedValue:j["default"]},b.prefix=f["default"],b.supportedProperty=h["default"],b.supportedValue=j["default"]},function(a,b,c){Object.defineProperty(b,"__esModule",{value:!0});var d=c(3),e=function(a){return a&&a.__esModule?a:{"default":a}}(d),f="",g="";if(e["default"]){var h={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},i=document.createElement("p").style;for(var j in h)if(j+"Transform"in i){f=j,g=h[j];break}}b["default"]={js:f,css:g}},function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},d=b.isBrowser="object"===("undefined"==typeof window?"undefined":c(window))&&"object"===("undefined"==typeof document?"undefined":c(document))&&9===document.nodeType;b["default"]=d},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return l?null!=m[a]?m[a]:((0,k["default"])(a)in l.style?m[a]=a:i["default"].js+(0,k["default"])("-"+a)in l.style?m[a]=i["default"].css+a:m[a]=!1,m[a]):a}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e;var f=c(3),g=d(f),h=c(2),i=d(h),j=c(5),k=d(j),l=void 0,m={};if(g["default"]){l=document.createElement("p");var n=window.getComputedStyle(document.documentElement,"");for(var o in n)isNaN(o)||(m[n[o]]=n[o])}},function(a,b){function c(a){return a.replace(e,d)}function d(a,b){return b?b.toUpperCase():""}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=c;var e=/[-\s]+(.)?/g},function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!k)return b;if("string"!=typeof b||!isNaN(parseInt(b,10)))return b;var c=a+b;if(null!=j[c])return j[c];try{k.style[a]=b}catch(a){return j[c]=!1,!1}return""!==k.style[a]?j[c]=b:(b=i["default"].css+b,"-ms-flex"===b&&(b="-ms-flexbox"),k.style[a]=b,""!==k.style[a]&&(j[c]=b)),j[c]||(j[c]=!1),k.style[a]="",j[c]}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e;var f=c(3),g=d(f),h=c(2),i=d(h),j={},k=void 0;g["default"]&&(k=document.createElement("p"))}])}),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.jssNested=b():a.jssNested=b()}(a,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function e(){function a(a){return function(b,c){var d=a.getRule(c);return d?d.selector:((0,h["default"])(!1,"[JSS] Could not find the referenced rule %s in %s.",c,a.options.meta||a),c)}}function b(a,b){for(var c=b.split(i),d=a.split(i),f="",g=0;g<c.length;g++)for(var h=c[g],k=0;k<d.length;k++){var l=d[k];f&&(f+=", "),f+=e(l)?l.replace(j,h):h+" "+l}return f}function c(a,b,c){if(c)return f({},c,{index:c.index+1});var d=a.options.nestingLevel;return d=void 0===d?1:d+1,f({},a.options,{nestingLevel:d,index:b.indexOf(a)+1})}var e=function(a){return-1!==a.indexOf("&")};return function(g){if("regular"===g.type){var h=g.options.parent,i=void 0,j=void 0;for(var l in g.style){var m=e(l),n="@"===l[0];if(m||n){if(i=c(g,h,i),m){var o=b(l,g.selector);j||(j=a(h)),o=o.replace(k,j),h.addRule(o,g.style[l],f({},i,{selector:o}))}else n&&h.addRule(l,d({},g.name,g.style[l]),i);delete g.style[l]}}}}}Object.defineProperty(b,"__esModule",{value:!0});var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};b["default"]=e;var g=c(1),h=function(a){return a&&a.__esModule?a:{"default":a}}(g),i=/\s*,\s*/g,j=/&/g,k=/\$([\w-]+)/g},function(a,b,c){var d=function(){};a.exports=d}])}),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.jssCamelCase=b():a.jssCamelCase=b()}(a,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b){function c(a){return"-"+a.toLowerCase()}function d(a){var b={};for(var f in a){var g=a[f];f=f.replace(e,c),b[f]=g}return a.fallbacks&&(Array.isArray(a.fallbacks)?b.fallbacks=a.fallbacks.map(d):b.fallbacks=d(a.fallbacks)),b}Object.defineProperty(b,"__esModule",{value:!0});var e=/([A-Z])/g;b["default"]=function(){return function(a){var b=a.style;if(b)if(Array.isArray(b))for(var c=0;c<b.length;c++)b[c]=d(b[c]);else a.style=d(b)}}}])}),jss=jss["default"],jss.use(jssCamelCase["default"]()),jss.use(jssVendorPrefixer["default"]()),jss.use(jssNested["default"]()),skuid.jss=jss}(window),function(a){function b(a){var b={};for(var c in a)b[c]=a[c];return b}function c(){return h||(h=a.$("#"+m),h.length||(h=j('<section id="'+m+'">'),j(document.body).append(h))),h}function d(a,d){var e,f,g,h,i=d?d[a.type]:{},m=b(a.styleSettings),n=a.type;j.each(m,function(a){m[a]=m[a].val||m[a]}),i&&i.tokens&&j.extend(m,i.tokens),e=a.getStyles(m),i&&i.styles&&j.extend(!0,e,i.styles),(h=k[n])||(f=j("<style>").addClass("sk-style sk-style-"+n),g=l.createStyleSheet(e,{element:f[0]}),h=k[n]=g.attach().classes,c().append(f))}function e(b){a.$(".sk-style-"+b).remove(),delete k[b]}function f(a){return k[a.getType()]}function g(a,b){if(!a)return"";if("string"==typeof a){if(!b[a])throw"no such class "+a;return b[a]}if(Array.isArray(a))return a.reduce(function(a,c){if(!b[c])throw"no such class "+c;return a+(a?" ":"")+b[c]},"");var c={};return j.each(a,function(a,d){c[b[a]]=d}),c}var h,i=a.themes={},j=a.$,k={},l=a.jss,m="sk-component-type-styles";j.extend(i,{getClasses:g,getStylesElement:c,getThemedClassMapForComponent:f,unregisterComponentTypeStyles:e,registerComponentTypeStyles:d})}(skuid),function(a){function b(){return"ontouchstart"in window||navigator.maxTouchPoints}function c(){b()&&!x.hammerJSLoaded&&y.loadJS(y.getStaticResourceUrl("HammerJS","skuid",null,y.getCacheTimestamp())).done(function(){x.hammerJSLoaded=!0,a.events.publish("skuid.resources.hammerjsloaded")})}function d(a,b){var c=this,d=[];c.options=w({showHeader:!0,
showFooter:!1,showMessages:!0,showErrorsInline:!0,showErrorsOnHover:!1},b),c._GUID=y.generateGUID(),c.models=[],c.modelsById={},c.lists=[],a&&(c.element=a.addClass("nx-editor"),c.options.showHeader&&(c.header=v("<div>").addClass("nx-editor-header"),c.submitwrapper=v("<div>").addClass("nx-header-"+(c.options.buttonPosition||"right")).appendTo(c.header),c.status=v('<div class="nx-status">').appendTo(c.header).hide(),c.statustext=v('<div class="nx-status-text"></div>').appendTo(c.status),d.push(c.header)),c.options.showMessages&&(c.messages=v('<div class="nx-messages">'),d.push(c.messages)),c.contents=v("<div>").addClass(c.options.customContentClass?c.options.customContentClass:"nx-editor-contents"),d.push(c.contents),c.options.showFooter&&(c.footer=v("<div>").addClass("nx-editor-footer"),c.footerSubmitWrapper=v("<div>").addClass("nx-footer-"+(c.options.buttonPosition||"right")).appendTo(c.footer),c.footerStatus=v('<div class="nx-status">').appendTo(c.footer).hide(),c.footerStatusText=v('<div class="nx-status-text"></div>').appendTo(c.footerStatus),d.push(c.footer)),c.element.append(d))}function e(b,c,d){var e,f,g,h=this;if(h._GUID=y.generateGUID(),h.editor=b,h.model=c,h.options=d||{},h.views=d.views,h.mode=d.mode,h.hideFooter=d.hideFooter||!1,h.filterCssClass=d.filterCssClass,h.personalizationService=d.personalizationService||d.component&&d.component.getPersonalizationService(),h.filtersPosition=d.filtersPosition||"top",h.filtersWidth=d.filtersWidth,h.component=d.component,e=h.personalizationService&&h.personalizationService.getSettings()._List||{},h.conditions=d.conditions,h.context=d.context,h.visibleItems=[],h.currentView=!1,h.views&&(f=Object.keys(h.views)),f&&(h.currentView=f[0]),f&&f.length>1){var i=e.lastViewId;v.each(h.views,function(a){if(a===i)return h.currentView=a,!1}),h.editor.header.append(h.makeViewSwitcher())}if(h.element=!1,h.contents=!1,h.conditionsBar=v("<div>").addClass("left"===h.editor.options.buttonPosition?"nx-conditioncontainer-left":"nx-conditioncontainer"),h.searchBox=!1,h.searchFields=d.searchFields||[],h.searchSubFields=d.searchSubFields||{},h.searchFieldsMap={},h.searchSubFieldsMap={},h.setupConfigPopup=d.setupConfigPopup,h.filters=[],h.searchFields&&h.searchFields.length){var j=h.searchFields;h.searchFields=[],v.each(j,function(a,b){h.addSearchField(b)})}if(h.searchSubFields&&a.utils.size(h.searchSubFields)>=1){var k=h.searchSubFields;h.searchSubFields={},v.each(k,function(a,b){v.each(b,function(b,c){h.addSearchSubField(a,c)})})}h.customFilter=d.customFilter||!1,h.customFilterValue=d.customFilterValue||"",h.searchMethod=d.searchMethod||F,h.searchConditionName=d.searchConditionName,h.searchPlaceholderText=d.searchPlaceholderText||null;var l=d.requiredFields;if(h.requiredFields=l&&y.size(l)?l:{},!h.hideFooter){h.footer=v("<div>").addClass("nx-list-footer"),h.footerleft=v("<div>").addClass("nx-list-footer-left").appendTo(h.footer),h.footercenter=v("<div>").addClass("nx-list-footer-center").appendTo(h.footer),h.footerright=v("<div>").addClass("nx-list-footer-right").appendTo(h.footer),h.currentPage=0;var m=d.pageSize;m&&("all"!=m?(d.pageSize=parseInt(d.pageSize,10),h.currentPageSize=e.pageSize||d.pageSize):h.currentPageSize="all")}h.editor.registerList(h),h.makeConditionsBar(),h.editor&&h.editor.header&&(h.editor.header["left"===h.editor.options.buttonPosition?"prepend":"append"](h.conditionsBar),h.options.showSearchBox&&!1===h.searchBox&&(h.searchBox=h.makeSearchBox(),h.searchBox&&h.editor.submitwrapper.append(h.searchBox)),h.options.showConfigIcon&&(h.listConfigButton=v("<button>"),h.listConfigButton.addClass("nx-button-list-config").skootip(h.options.configIconTip||""),v("<span>").addClass("ui-icon sk-icon-configure sk-icon inline").appendTo(h.listConfigButton),h.listConfigButton&&h.editor.submitwrapper.append(h.listConfigButton),g=h.setupConfigPopup(h),h.listConfigButton.on("click",g)),h.options.delayFilterExecution&&(h.applyFiltersBtn=v("<div>").addClass("sk-button-applyfilter").text(z("apply")).skooButton({icon:"sk-icon-search-go",disabled:!1,hoverText:z("apply")}).hide().on("click",function(){h.applyFiltersAndSearch()}),h.cancelFiltersBtn=v("<div>").addClass("sk-button-cancelfilter").text(z("cancel")).skooButton({icon:"sk-icon-cancel",disabled:!1,hoverText:z("cancel")}).hide().on("click",function(){h.cancelFiltersAndSearch()}),h.editor.submitwrapper.append(h.applyFiltersBtn,h.cancelFiltersBtn))),h.renderedItems={}}function f(a,b){var c=a.footerleft;return c&&c.find(".nx-list-loadmore").toggleClass("unavailable",b),a}function g(a,b,c){var d=this;w(d,{_GUID:y.generateGUID(),list:a,row:b,defaultMode:a.mode||"read",deleted:!1,selected:c.selected||!1,element:!1,fields:[],fieldsByGUID:[]}),d.mode=c.mode||d.defaultMode,a&&a.model&&a.model.registerItem(d)}function h(b,c,d,e){var f,g,h=this;if(h._GUID=y.generateGUID(),h.row=b,h.model=c,h.editor=d,h.options=e||{},h.subComponents=[],h.id=e.fieldId,h.name=e.fieldName,h.context=e.fieldContext,h.messages=[],h.id&&(h.metadata=h.model.getField(h.name?h.name:h.id,h.context)),f=h.metadata,h.options.labelText?h.label=h.options.labelText:h.options.label?h.label=h.options.label:f&&(h.label=f.label),h.options.required||f&&f.required?h.required=!0:h.required=!1,h.mode=e.mode||"read",h.element=v("<div>").addClass("nx-field").attr("data-uid",h._GUID),e.additionalClass&&h.element.addClass(e.additionalClass),h.element.data("object",h),h.editable=(!f||c.isRowNew(b)&&f.createable||f.editable)&&!1!==h.options.editable&&"readonly"!==h.mode,h.loading=e.loading,h.options.register&&h.model.registerField(h),g=e.controllingFields,f&&-1!==v.inArray(f.displaytype,["PICKLIST","MULTIPICKLIST","COMBOBOX"])){var i,j=f.controllingField,k=h.model.getField("RecordTypeId");g||(e.controllingFields=g=[]),k&&g.push(k.id),j&&g.push(j),"rowsinmodel"===f.picklistSource&&a.$M(f.picklistSourceModel)&&(h._eventSubscriptions=[],h.subscribeToEvent(a.events.subscribe(["row.updated","row.created","row.deleted","row.undeleted","models.cancelled","models.loaded","models.saved"],function(a){i!==a&&(i=a,a.modelId===f.picklistSourceModel?h.render():a.models&&v.each(a.models,function(b,c){if(c.id===f.picklistSourceModel)return a.insertResults&&v.each(a.insertResults,function(a,b){if(h.row[h.id]===b.oldId){var c={};c[h.id]=b.id,h.model.updateRow(h.row,c)}}),h.render(),!1}))})))}g&&g.length&&v.each(g,function(){var a=this;-1!==a.indexOf(".")&&(a=a.split(".")[0]),h.model.registerField(h,a)}),f&&f.displaytype===C&&h.subscribeToEvent("ui.timeZoneChanged",function(){h.render()})}function i(a){if(a&&a.length){var b=[];return a.children().each(function(){var a=v(this),c="false"!==a.attr("enclosevalueinquotes"),d={field:a.attr("field"),type:a.attr("type"),operator:a.attr("operator"),value:a.attr("value"),depfield:a.attr("depfield"),sourceParam:a.attr("sourceparam"),model:a.attr("model"),mergeField:a.attr("mergefield"),encloseValueInQuotes:c};if("multiple"==d.type){d.values=[];var e=a.children("values");e.length&&e.first().children("value").each(function(){var a=y.getXML(this);a.length>8?(a=y.decodeXML(a.substring(7,a.length-8)),d.values.push(y.adjustValueBasedOnQuotedness(a,c))):d.values.push("")})}else"userinfo"==d.type?d.mergeField=a.attr("userinfotype"):"param"===d.type?d.mergeField=a.attr("value"):"modelmerge"===d.type&&w(d,{mergeField:a.attr("mergefield"),mergeModel:a.attr("model"),noValueBehavior:a.attr("novaluebehavior")});b.push(d)}),b}}function j(b){b=b||{};var c=this,f=b.grandparent,g=b.parent,h=b.model,i=b.element;c.model=h,f.css({overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"}),g.css({position:"relative","padding-left":"0px","padding-right":"0px",height:"100%"}),c.element=i.addClass("nx-queue").data("object",c).appendTo(g);var j=b.title?y.merge("row",b.title,{noLink:!0},h):"";c.header=v("<div>").addClass("nx-queue-header").attr({"aria-controls":i.prop("id")}),c.headerInner=v("<div>").addClass("nx-queue-header-inner").appendTo(c.header),c.titleBar=v("<div>").addClass("nx-queue-titlebar").appendTo(c.headerInner),(!0===b.showSearchBox||b.filtersXML&&b.filtersXML.children&&b.filtersXML.children().length>0)&&(c.titleIcon=v("<div>").attr({role:"button",tabindex:0}).addClass("ui-icon ui-icon-gear nx-queue-titleicon").on("click "+D,function(a){"click"!==a.type&&a.which!==E.ENTER&&a.which!==E.SPACE||c.settingsBar.toggle()}).appendTo(c.titleBar)),c.titleText=v("<div>").append(j).addClass("nx-queue-titletext").appendTo(c.titleBar);var k=v("<div>").addClass("nx-queue-settings");b.showSearchByDefault?c.settingsBar=k.appendTo(c.headerInner):c.settingsBar=k.hide().appendTo(c.headerInner),g.append(c.header,c.element),c.editor=new d(c.element,{showSaveCancel:!1,buttonPosition:"block"});var l={renderComplete:function(){var d=c.element.find(".nx-queue-item"),e=b.tagInteractions;a.interactions.enableInteractions(d,{customInteractionsEvaluator:function(a){e&&e(v(a.item).data("object"),a.validGestures)}})},render:function(a){a.element.addClass("nx-queue-item");var d=v("<div>").addClass("nx-queue-item-inner").appendTo(a.element),e=b.tagRenderer;e&&e(c.model,c.list,a,d)}};c.views={standard:l},c.list=new e(c.editor,c.model,{views:c.views,listFilters:b.filtersXML,conditions:b.editorConditions,context:b.context,showSearchBox:b.showSearchBox,useSOSLSearch:b.useSOSLSearch,SOSLFields:b.SOSLFields,searchMethod:b.searchMethod||F,searchConditionName:b.searchConditionName,emptySearchBehavior:b.emptySearchBehavior,tokenizeSearch:"undefined"==typeof b.tokenizeSearch||b.tokenizeSearch,searchPlaceholderText:b.searchPlaceholderText,delayFilterExecution:b.delayFilterExecution,personalizationService:b.personalizationService}),c.model.registerList(c.list),c.list.render(),c.list.attach(),this.list.editor.header.detach().appendTo(c.settingsBar)}function k(a,b){b||(b={});var c=b.mode||"edit",d=v("<div>").addClass("nx-editor-contents nx-basicfieldeditor-section-body");return v.each(a,function(a,e){var f=v("<div>").addClass("nx-basicfieldeditor-item"),g=v("<div>").addClass("nx-basicfieldeditor-item-label").text(e.metadata.label).appendTo(f);e.mode=c,e.editable=e.metadata.editable,e.editor=b.editor,e.wrapperElement=f,e.labelElement=g,e.render(),f.append(e.element),d.append(f)}),d}function l(b,c){var d,e,f,g,h=c.model,j=b.attr("id"),k=b.attr("name"),l=b.attr("type"),m=b.attr("valuehalign"),n=b.attr("placeholder"),o={additionalClass:c.layoutClass,allowHTML:"true"===b.attr("allowhtml"),editable:"true"!==b.attr("readonly"),fieldId:j,fieldName:k,maxDisplayCharacters:b.attr("maxdisplaycharacters"),displayRows:b.attr("displayrows"),mode:c.mode||"read",pageSize:b.attr("pagesize")||5,register:!0,renderAs:b.attr("renderAs"),showLengthCounter:"true"===b.attr("showlengthcounter"),type:l,fieldXML:b},p=h.getField(k||j);if(j&&!p)return!1;if(p&&(d=p.displaytype),"CUSTOM"===l?o.snippet=b.attr("snippet"):"IMAGE"===l&&(o.editable=!1,o.url=b.children("url").first().text(),o.alt=b.children("alt").first().text(),o.height=b.attr("height"),o.fill="true"===b.attr("fill")),m&&(o.valueHorizontalAlignment="right"),"MULTIPICKLIST"===d?(o.maxSelected=b.attr("maxselected"),(e=b.attr("selectedlist"))&&(o.selectedList=parseInt(e,10))):-1!==v.inArray(d,["PICKLIST","REFERENCE"])?(o.addNoneOption="true"===b.attr("addnoneoption"),b.attr("nonelabel")&&(o.noneLabel=b.attr("nonelabel"))):-1!==v.inArray(d,["DOUBLE","CURRENCY","PERCENT"])?o.decimalPlaces=b.attr("decimalplaces"):y.startsWith(d,"DATE")&&(f=b.attr("monthpicker"),void 0!==f&&f&&(o.showMonthPicker="true"===f),g=b.attr("yearpicker"),void 0!==g&&g&&(o.showYearPicker="true"===g),o.showYearPicker&&(o.yearPickerRange=(b.attr("yearpickermin")||"c-10")+":"+(b.attr("yearpickermax")||"c+10")),d===C&&(o.minuteIncrement=parseInt(b.attr("minuteincrement")||"5",10))),"REFERENCE"===d){o.optionsource=b.attr("optionsource"),o.optionmodel=b.attr("optionmodel"),o.template=b.attr("displaytemplate"),o.searchTemplate=b.attr("searchtemplate"),o.tokenizeSearch=b.attr("tokenizesearch"),o.delimiter=b.attr("delimiter");var q=[],r=i(b.children("filters")),s=b.children("searchfields").first(),t=s.children(),u=o.defaultOrdering="true"===s.attr("defaultordering"),w=s.attr("orderby");r&&r.length&&(o.filters=r,v.each(r,function(){"dependent"===this.type&&q.push(this.depfield)}),q.length&&(o.controllingFields=q)),o.useSOSLSearch="true"===s.attr("usesosl"),o.SOSLFields=s.attr("soslfields"),!u&&w&&(o.order=w),t.length&&(o.searchFields=[],o.returnFields=[],t.each(function(){var b,c,d=v(this),e=d.attr("return"),f=d.attr("show"),g=d.attr("query"),h=d.attr("field"),i=!1,j=!1;"true"===g&&o.searchFields.push({id:h,searchOperator:d.attr("operator")}),void 0!==e?"true"===e&&(i=!0,"true"===f&&(j=!0)):"true"===f&&(i=!0,j=!0),i&&(b={id:h,showInSearchDialog:j},c=d.children("label").first(),c&&c.length&&(b.label=a.utils.getXML(c[0])),o.returnFields.push(b))}))}return b.children("enableconditions")&&(o.enableConditionsXML=b.children("enableconditions")),"true"===b.attr("required")&&(o.required=!0),n&&(c.row?o.placeholder=y.mergeAsText("row",n,{createFields:!0,registerFields:!1},h,c.row):o.placeholder=n),o}function m(a,b,c){a&&(a.css("opacity",1).show(),b.text(c))}function n(a,b,c,d){a&&(b.text(c),0===d?a.hide():a.animate({opacity:"0"},d||500,function(){a.hide()}))}function o(a){return a.indexOf("sk-webicon")>-1}function p(b,c){c=c||{};var d=c.webIconClass||"",e=d+" "+(c.additionalClass||"");if(c.isWebIcon||o(b)){b=b.split("sk-webicon-").join("");var f=(b.split(":")[1]||b).split(/[_-]/).join(" "),g=b.split(":")[0];return'<i class="sk-webicon '+e+'" aria-label="'+f+'" role="img"><svg viewBox="0 0 24 24"><use xlink:href="'+(a.utils.inPlatform([a.constants.VISUALFORCE,a.constants.LIGHTNING])?"/resource/skuid__IconsSVG/":"/assets/skuid-core/assets/icons-svg/")+g+"/"+g+".min.svg#"+b.split(":")[1]+'"></use></svg></i>'}return'<i class="sk-icon '+b+" "+e+'" aria-label="'+b.split("sk-icon-").join("")+'" role="img"></i>'}function q(a,b,c){function d(){sforce.console.openPrimaryTab(null,a,!0,B(b))}function e(a,b,d){var g={tabsProcessed:0};a&&(g.numTabs=a.length,g.numTabs?v.each(a,function(a,h){sforce.console.getPageInfo(h,function(a){if("resolved"!==d.state())if(a.success){var i=JSON.parse(a.pageInfo);i&&c&&c(i)?(f={id:h},b&&(f.parentTabId=b),d.resolve()):b?sforce.console.getSubtabIds(h,function(a){if(a.success&&a.ids&&a.ids.length){var b=v.Deferred();e(a.ids,!1,b),v.when(b).then(function(){++g.tabsProcessed===g.numTabs&&d.resolve()})}else++g.tabsProcessed===g.numTabs&&d.resolve()}):++g.tabsProcessed===g.numTabs&&d.resolve()}else++g.tabsProcessed===g.numTabs&&d.resolve()})}):d.resolve())}if(a){var f,g=v.Deferred();sforce.console.getPrimaryTabIds(function(a){e(a.ids,null,g)}),v.when(g).then(function(){if(f){var a=f.parentTabId?f.parentTabId:f.id;sforce.console.focusPrimaryTabById(a,function(a){a.success?f.parentTabId&&sforce.console.focusSubtabById(f.id,function(){}):d()})}else d()})}}function r(a,b){q(a,b,function(b){return b&&y.endsWith(b.url,a)})}function s(a,b){q("/"+a,b,function(b){return b&&(b.objectId===a||a&&18===a.length&&b.objectId===a.substring(0,15))})}function t(b,c){var d=a.$M(B(c));s(b,d.getNameFieldValueForRow(d.getRowById(b)))}function u(b,c,d){var e=a.$M(B(c)),f=e?e.registeredFields[B(b)]:null;f&&"REFERENCE"===f.metadata.displaytype&&s(d,d||0===d?A(f.calculateReferenceText()):"")}var v=a.$,w=v.extend,x=a.ui={},y=a.utils,z=a.$L,A=y.encodeHTML,B=y.decodeHTML,C="DATETIME",D="keydown.action.skuid",E=a.$.ui.keyCode,F="server",G={ID:1,STRING:1,TEXT:1,EMAIL:1,PICKLIST:1,MULTIPICKLIST:1,COMBOBOX:1,PHONE:1,URL:1,REFERENCE:1,TEXTAREA:1};d.prototype={id:function(){return this._GUID},registerModel:function(a){if(!a)return this;var b=this,c=b.modelsById,d=!a.hasChanged;return c[a.id]||(b.models.push(a),c[a.id]=a,a.registerEditor(b),b.options.showSaveCancel&&!b.submitbuttons&&(b.savebutton=v("<div>").addClass("sk-button-save").text(z("save")).skooButton({icon:"sk-icon-save",disabled:d}),b.cancelbutton=v("<div>").addClass("nx-button-secondary sk-button-cancel").text(z("cancel")).skooButton({icon:"sk-icon-cancel",disabled:d}),d?(b.savebutton.attr("tabindex",-1),b.cancelbutton.attr("tabindex",-1)):(b.savebutton.attr("tabindex",0),b.cancelbutton.attr("tabindex",0)),b.savebutton.on("click.skuid "+D,function(a){"click"!==a.type&&a.which!==E.ENTER&&a.which!==E.SPACE||(v(this).removeClass("ui-state-hover"),b.submitbuttons&&b.submitbuttons.filter(".ui-button").button("disable").removeAttr("tabindex"),b.save())}),b.cancelbutton.on("click.skuid "+D,function(a){"click"!==a.type&&a.which!==E.ENTER&&a.which!==E.SPACE||(v(this).removeClass("ui-state-hover"),b.submitbuttons&&b.submitbuttons.filter(".ui-button").button("disable").removeAttr("tabindex"),b.cancel())}),b.submitbuttons=b.savebutton.add(b.cancelbutton),b.submitwrapper.append(b.savebutton,b.cancelbutton))),b},registerList:function(a){this.lists.push(a),this.registerModel(a.model)},unregister:function(){var a=this;return a.lists&&a.lists.length&&v.each(a.lists,function(){this.unregister&&this.unregister()}),a.models&&a.models.length&&v.each(a.models,function(){this.unregisterEditor(a)}),a},hasModelWithChanges:function(){var a=this,b=!1;return v.each(a.models,function(){if(this.hasChanged)return b=!0,!0}),b},handleChange:function(){var a=this;a.submitbuttons&&a.submitbuttons.filter(".ui-button").button("enable").attr("tabindex",0),a.lists.length&&v.each(a.lists,function(a,b){b.disableFiltersAndSearch().disableLoadMore()})},clearMessages:function(){this.messages&&this.messages.empty(),this._uniqueMessages={}},clearInlineErrors:function(){var a=this;a.element&&a.element.find(".nx-error-inline").remove().end().find(".nx-field-error").removeClass("nx-field-error nx-field-error-icon")},handleMessages:function(a,b){var c=this,d=c._uniqueMessages;return d||(d=c._uniqueMessages={}),!!c.messages&&((!b||!b.initiatorId||c._GUID===b.initiatorId)&&void v.each(a,function(a,b){var e,f,g,h,i="nx-message",j=b.message;"ERROR"===b.severity||"FATAL"===b.severity?i="nx-error":"WARNING"===b.severity&&(i="nx-warning"),e=d[i],e||(e=d[i]={}),f=e[j],f?f.count++:f=e[j]={count:1},f.element?h=f.element:(h=f.element=v("<div>").addClass(i),"DUPLICATE_VALUE"===b.status?h.append(j):h.append(v("<div>").text(B(j))),h.on("click.skuid",function(){v(this).remove()}),c.messages.append(h)),f.count>1&&(g=h.children(".nx-dupcounter"),g.length?g.text(f.count):h.prepend('<div class="nx-dupcounter" style="">'+f.count+"</div>"))}))},handleCancel:function(){var a=this,b=!1,c={};v.each(a.models,function(a,d){d.hasChanged&&(b=!0,c[d.id]=!0)}),!1===b&&(a.clearMessages(),a.submitbuttons&&a.submitbuttons.filter(".ui-button").button("disable")),a.lists.length&&v.each(a.lists,function(a,b){!b.model||b.model.id in c||b.enableFiltersAndSearch().enableLoadMore()})},handleSave:function(a){var b=!1,c={},d=this;v.each(d.models,function(a,d){d.hasChanged&&(b=!0,c[d.id]=!0)}),a?d.hideStatus(z("saved")):d.hideStatus("",0),d.clearMessages(),a&&!b&&d.submitbuttons&&d.submitbuttons.filter(".ui-button").button("disable"),!a&&b&&d.submitbuttons&&d.submitbuttons.filter(".ui-button").button("enable"),d.lists.length&&v.each(d.lists,function(a,b){!b.model||b.model.id in c||b.enableFiltersAndSearch().enableLoadMore()})},cancel:function(){a.model.cancel(this.models,{initiatorId:this._GUID})},save:function(b){b=b||{};var c="rollbackOnAnyError";!(c in b)&&c in this.options&&(b[c]=this.options[c]),this.setStatus(z("saving")),b.initiatorId=this._GUID,a.model.save(this.models,b)},setStatus:function(b){a.ui.setStatus(this.status,this.statustext,b)},hideStatus:function(b,c){a.ui.hideStatus(this.status,this.statustext,b,c)},createConditionsFromXml:function(b,c){if(b){var d,e=this.conditions,f=0;if(e||(e=this.conditions=[]),(d=c?c.createConditionsFromXml(b):a.component.Component.prototype.call(this,b))&&d.length)for(;f<d.length;f++)e.push(d[f]);else d=[];return d}},addConditions:function(a){var b=this;a&&a.length&&(b.conditions||(b.conditions=[]),v.each(a,function(a,c){b.conditions.push(c)}))},getConditions:function(){return this.conditions}},w(e.prototype,{id:function(){return this._GUID},unregister:function(){var a=this;return a.model&&a.model.unregisterList(a),a.renderedItems&&v.each(a.renderedItems,function(){this.unregister&&this.unregister()}),a},getSelectedItems:function(){var a=[];return v.each(this.renderedItems,function(b,c){c.selected&&a.push(c)}),a},unSelectAll:function(){v.each(this.renderedItems,function(a,b){b.selected&&(b.selected=!1)})},isFieldSearchable:function(a){return!!a&&(a.displaytype in x.searchableDisplayTypes&&(a.filterable||"client"===this.searchMethod))},addSearchField:function(a,b){var c=this;if(a){var d,e=c.model.getField(a.id);c.isFieldSearchable(e)&&(e.id in c.searchFieldsMap||(d=w({},e),b&&(d.searchOperator=b),c.searchFields.push(d),c.searchFieldsMap[e.id]=d))}},addSearchSubField:function(a,b){var c=this;if("object"==typeof b&&(b=b.id),a&&b){var d=c.model.getField(b,a);if(c.isFieldSearchable(d)){var e=c.searchSubFieldsMap[a],f=c.searchSubFields[a];e||(e=c.searchSubFieldsMap[a]={},f=c.searchSubFields[a]=[]),d.id in e||(e[d.id]=1,f.push(d))}}},addRequiredField:function(a){this.requiredFields[a.id]=a},removeRequiredField:function(a){delete this.requiredFields[a.id]},validateRequiredFields:function(){var a=this,b=[],c=a.model,d=a.requiredFields;return v.each(c.changes,function(e){var f=c.getRowById(e);if(!c.isRowMarkedForDeletion(f)){var g={severity:"ERROR",status:"REQUIRED_FIELD_MISSING",fields:[],model:c},h="",i=!1;f&&e in a.renderedItems&&v.each(d,function(a,b){var d=c.getFieldValue(f,a,!0);(""===d||null===d||y.isUndefined(d))&&"BOOLEAN"!==b.displaytype&&(h&&(h+=", "),h+="["+b.label+"]",g.fields.push({id:b.id,label:b.label}),g.rowId=e,i=!0)}),i&&(g.message=z("required_fields_have_no_value")+" "+h,b.push(g))}}),b},getView:function(a){return a||(a=this.currentView),this.views[a]},callViewOperation:function(a,b){b||(b=this.getView()),b&&a&&a in b&&b[a](this)},setUp:function(a){this.callViewOperation("setUp",a)},beforeRender:function(a){this.callViewOperation("beforeRender",a)},renderComplete:function(a){this.callViewOperation("renderComplete",a)},tearDown:function(a){this.callViewOperation("tearDown",a)},getAllRows:function(){var a=this,b=a.model.getRows(a.conditions,a.context),c=a.customFilter,d=a.customFilterValue;return c&&(d||"0"===d)?b.filter(function(a){return c(d,a)}):b},render:function(b){b=b||{};var c,d=this,e=d.model,f=d.options,g=[],h=b.previousView||!1,i=h&&h!==d.currentView,j=d.getView(),k=!d.element||b.doNotCache||j.alwaysFullRender,l=b.changedRows,m=f.hideFooter,n=!1!==this.options.showLoadMore,o=e.getConditionByName(d.searchConditionName||"__default_searchbox");if(d.searchbox&&o&&("group"===o.type||"search"===o.type))if(b.initiatorId&&b.initiatorId===d._GUID);else{var p;if(o.value&&"search"===o.type)if(d.options.tokenizeSearch){p="";var q=o.value.split(" AND ");v.each(q,function(a,b){p+=b.substring(1,b.length-2)+" "}),p.substring(0,p.length-1)}else p=o.value.substring(1,o.value.length-2);else p=o.value;p&&!o.inactive?(d.searchbox.val(p),d.searchbox.data("curval",p)):(d.searchbox.val(""),d.searchbox.data("curval",""))}j.alwaysFullRender&&(b.doNotCache=!0),i&&(h=d.getView(h))&&d.tearDown(h),b.resetPagination&&(d.currentPage=0),c=d.getAllRows();var r=c.length,s=d.currentPageSize,t=0,u=r;d.footer&&!m&&(d.footerleft.empty(),d.footercenter.empty(),d.footerright.empty()),d.element&&!i||(d.element&&d.element.remove(),d.element=v("<"+(j.nodeType||"div")+">").addClass("nx-list"),d.contents=v("<"+(j.contentsNodeType||"div")+">").addClass("nx-list-contents").appendTo(d.element),d.setUp(j));var w=a.utils.makeXMLDoc,x=d.filtersPosition;if("left"!==x&&"right"!==x||!d.component)"bottom"===x&&d.element.append(d.conditionsBar.css({display:"block","float":"none"}).addClass("nx-conditioncontainer-bottom"));else{if(!d.panelSet){var y=w("<panelset/>").attr("type","standard").append(w("<panels/>").append(w("<panel/>"),w("<panel/>").attr({type:x,width:d.filtersWidth})));d.panelSet=a.$("<div>").panelSet(y,d.component)}d.conditionsBar.css({"float":x,"text-align":x})}if(!m&&s&&"all"!=s&&r>s){d.currentPage<0&&(d.currentPage=0);var A=Math.ceil(r/s);d.currentPage>A-1&&(d.currentPage=A-1),t=s*d.currentPage,u=s*(d.currentPage-0+1),d.currentPage==A-1&&(u=r),c=c.slice(t,u);var B=v("<div>").addClass("nx-buttonset"),C=v("<div>").addClass("first").text(z("first")).button(),D=v("<div>").addClass("prev").text(z("previous")).button(),E=v("<div>").addClass("next").text(z("next")).button(),F=v("<div>").addClass("last").text(z("last")).button(),G=d.currentPage<A-3?d.currentPage-2:A-5,H=d.currentPage>2?d.currentPage+2:4;B.append(C,D);for(var I=G;I<=H;I++)if(I>=0&&I<A){var J=v("<div>").text(I-0+1).attr("data-pn",I).button();I===d.currentPage&&J.addClass("nx-button-selected"),B.append(J)}B.append(E,F).buttonset(),B.children().filter('[data-pn="'+d.currentPage+'"]').button("disable"),0===d.currentPage?(C.button("disable"),D.button("disable")):d.currentPage==A-1&&(F.button("disable"),E.button("disable")),this.footerright.append(B),B.on("click",".ui-button",function(){var a=v(this);a.is(".first")?d.goToPage(0):a.is(".prev")?d.prevPage():a.is(".next")?d.nextPage():a.is(".last")?d.goToPage(A-1):d.goToPage(parseInt(a.data("pn"),10))})}if(!m&&s&&"all"!=s&&r){var K=[5,10,25,50];-1==K.indexOf(f.pageSize)&&K.push(f.pageSize),-1==K.indexOf(d.currentPageSize)&&K.push(d.currentPageSize);var L=function(a,b){return a-b};K.sort(L);var M=v("<select>");M.append(v.map(K,function(a){return v('<option value="'+a+'">'+a+"</option>")})),M.children().filter('[value="'+s+'"]').attr("selected","selected"),M.change(function(){var a=parseInt(v(this).val(),10);d.personalizationService&&d.personalizationService.updateSettings({_List:{pageSize:a}}),d.currentPageSize=a,d.render()});var N=v("<span>");N.append("<span>"+z("show")+" </span>",M,"<span> "+a.label.merge(z("objects_per_page"),e.labelPlural)+"</span>"),this.footerleft.append(N)}var O=z("pagination_limit_reached"),P=e.debug===O,Q=!0===e.canRetrieveMoreRows;if(!m){if(r){var R=r+"";Q&&(R+="+"),this.footercenter.append("<span>"+a.label.merge(z("showing_rows"),t+1,u,R)+(P?" ("+O+")":"")+"</span>")}if(Q&&!P&&n){var S=v('<div class="nx-list-loadmore">').text(z("load_more")).on("click.skuid",function(){v(this).is(".unavailable")||(d.blockUI({message:z("loading")}),e.loadNextOffsetPage(function(){d.unblockUI()}))});this.footerleft.append(S)}r||(e.needsMetadataLoad&&e.loadAsync&&!e.doQuery?this.footercenter.append("<span>Loading Metadata for: "+e.label+"</span>").css("line-height","25px"):e.needsMetadataLoad&&e.loadAsync?this.footercenter.append("<span>Loading: "+e.label+"</span>").css("line-height","25px"):this.footercenter.append("<span>"+a.label.merge(z("no_objects_to_display"),e.labelPlural)+"</span>").css("line-height","25px"))}b.doNotCache&&(v.each(d.renderedItems,function(a,b){b&&b.destroy()}),d.renderedItems={},d.makeConditionsBar()),d.beforeRender(j),d.visibleItems=[],!0===b.destroyDeletedRows&&v.each(d.renderedItems,function(a,b){var c=e.record(a);!b||c&&!c.isMoribund()||(b.destroy(),delete d.renderedItems[a])}),v.each(c,function(){var a=this,c=e.getRowId(a),f=e.record(c),h=d.renderedItems[c];h&&!b.doNotCache?!1!==b.refreshFields&&(l&&l[c]?h.refreshFields(l[c]):h.refreshFields()):h=d.newItem(this,b),h&&(h.element[(f.isMoribund()?"add":"remove")+"Class"]("deleted"),g.push(h.element),d.visibleItems.push(h))}),b.doNotCache||!0!==b.resetItemModes||v.each(d.getAllRows(),function(){var a=this,b=e.getRowId(a),c=d.renderedItems[b];c&&(c.resetMode(),c.refreshFields())}),j.noAutoAppend||(d.contents.children().detach(),d.contents.append(g)),k&&d.attach(),d.renderComplete(j)},showRow:function(a){var b=this,c=!0;return b.conditions&&b.conditions.length&&(c=y.doesRowMeetConditions(a,b.conditions)),c},handleNewRow:function(a,b){var c=this,d={},e=c.model.getRowId(a);if(b&&w(d,b),!y.isUndefined(e)&&!(e in c.renderedItems)&&c.showRow(a)){var f=c.newItem(a,d);if(c.contents.prepend(f.element),c.render({resetPagination:!0,refreshFields:!1}),f&&"edit"===f.mode){var g=f.element.find(".nx-field > :input:visible:not(.nx-skootable-rowselect):not(.hasDatepicker):not(select)").first();g&&g.focus()}}},handleRowDeletion:function(a){a&&a in this.renderedItems&&this.renderedItems[a].destroy()},newItem:function(a,b){var c,d=this,e=d.model.getRowId(a);if(e)return c=new g(d,a,{mode:b&&b.editModeForNewItems?"edit":d.mode,selected:b&&b.selected}),c.render(),d.renderedItems[e]=c,c},attach:function(){var a=this;"right"===a.filtersPosition||"left"===a.filtersPosition?(a.panelSet.find(".nx-panel-fluid .nx-panel").append(a.element,a.footer),a.panelSet.find(".nx-panel-left-inner, .nx-panel-right-inner").append(a.conditionsBar),a.editor.contents.append(a.panelSet)):this.editor.contents.append(this.element,this.footer)},makeViewSwitcher:function(){var b=this,c=[];return v.each(b.views,function(a,d){c.push({value:a,label:d.label||a,icon:d.icon,isSelected:b.currentView===a})}),v("<div>").actionSelect({items:c,onItemSelect:function(c){var d=b.currentView;b.currentView=c.value,b.render({doNotCache:!0,previousView:d}),v.cookie("nx-list-view-"+a.page.name+"-"+b.model.id,c.value),b.personalizationService&&b.personalizationService.updateSettings({_List:{lastViewId:c.value}})}}).addClass("nx-viewswitcher")},makeSearchBox:function(){var a=this;if("client"===a.searchMethod&&(a.customFilter=function(b,c){var d=!1,e=b.toLowerCase(),f=function(b,c){var f,g=b.searchOperator,h=a.model.getFieldValue(c,b.id,!0)+"";null!==h&&(f=h.toLowerCase(),d="="===g?f===e:"starts with"===g?y.startsWith(f,e):y.contains(f,e))};return v.each(a.searchFields,function(a,b){return f(b,c),!d}),!d&&a.searchSubFields&&v.each(a.searchSubFields,function(a,b){var e=c[a];e&&e.totalSize&&b.length&&v.each(e.records,function(a,c){return v.each(b,function(a,b){return f(b,c),!d}),!d})}),d}),a.searchFields||"custom"===a.searchMethod){var b="placeholder"in document.createElement("input"),c=v('<input type="text" class="searchbox" />'),d=a.searchPlaceholderText?y.mergeAsText("model",a.searchPlaceholderText,{createFields:!0,registerFields:!1},a.model):z("search")+" "+a.model.labelPlural;return a.customFilterValue&&c.val(a.customFilterValue),a.searchbox=c,b?c.attr("placeholder",d):(c.addClass("unchanged").val(d),c.focus(function(){c.hasClass("unchanged")&&c.val("").removeClass("unchanged")}).blur(function(){""===c.val()&&c.val(d).addClass("unchanged")})),a.options.delayFilterExecution&&c.on("keyup",function(b){13===b.which&&a.applyFiltersAndSearch()}),y.delayInputCallback(c,function(b,d){a.options.delayFilterExecution&&void 0===c.data("originalValue")&&c.data("originalValue",d),"client"===a.searchMethod||"custom"===a.searchMethod?(a.customFilterValue=b,a.render()):a.options.delayFilterExecution?a.showFilterActions():(a.setSearchCondition(b),"remove"!==a.options.emptySearchBehavior||b?a.updateData({message:z("searching"),failmessage:z("error_performing_requested_search"),showerror:!0}):a.model.emptyData())},{dataPropertyName:"curval"}),c}return!1},setSearchCondition:function(a){var b=this;b.model.buildSearchCondition(b.searchConditionName,a,b.searchFields,{tokenize:b.options.tokenizeSearch,useSOSLSearch:b.options.useSOSLSearch,SOSLFields:b.options.SOSLFields})},showFilterActions:function(){var a=function(a){a.show("fast").css({display:"inline-block"})};a(this.applyFiltersBtn),a(this.cancelFiltersBtn),this.editor.options.showSaveCancel&&this.editor.submitbuttons.hide("fast");var b=v(".sk-pagepanel.filters-panel");return b.length&&(a(b.find(".sk-button-applyfilter")),a(b.find(".sk-button-cancelfilter"))),this},hideFilterActions:function(){this.applyFiltersBtn.hide("fast"),this.cancelFiltersBtn.hide("fast"),this.editor.options.showSaveCancel&&this.editor.submitbuttons.show("fast").css("display","inline-block");var a=v(".sk-pagepanel.filters-panel");return a.length&&(a.find(".sk-button-applyfilter").hide("fast"),a.find(".sk-button-cancelfilter").hide("fast"),this.editor.submitbuttons.css("display","inline-block")),this},applyFiltersAndSearch:function(){var a,b=this,c=b.searchBox;return c&&(a=c.is(".unchanged")?"":c.val(),
c.data("originalValue",a),b.setSearchCondition(a)),b.filters&&v.each(b.filters,function(){var a=this.activateFilter;a&&a()}),"remove"!==b.options.emptySearchBehavior||a?b.updateData({message:z("searching"),failmessage:z("error_performing_requested_search"),showerror:!0,successcallback:function(){b.hideFilterActions()}}):(b.model.emptyData(),b.hideFilterActions()),b},cancelFiltersAndSearch:function(){var a=this,b=a.searchBox;return b&&b.val(b.data("originalValue")),a.filters&&v.each(a.filters,function(){this.restoreOriginalValue()}),a.hideFilterActions(),a},updateData:function(a){var b=this;return b.blockUI({message:a.message}),b.model.updateData(!1,{initiatorId:b._GUID}).always(function(){b.unblockUI()}).done(function(){b.editor.clearMessages(),a.successcallback&&a.successcallback()}).fail(function(c){b.editor.clearMessages(),b.editor.handleMessages([{message:a.failmessage+(a.showerror&&c?" "+c:""),severity:"ERROR"}])}),b},makeConditionsBar:function(){this.makeFiltersBar()},enableFiltersAndSearch:function(){var a=this;return a.conditionsBar&&a.conditionsBar.find(".nx-conditiontoken").removeClass("unavailable").children(".ui-multiselect").siblings("select").multiselect("enable").end().children("input").prop("disabled",!1),a.searchMethod===F&&a.searchBox&&a.searchBox.prop("disabled",!1),a},disableFiltersAndSearch:function(){var a=this;return a.conditionsBar&&a.conditionsBar.find(".nx-conditiontoken").addClass("unavailable").children(".ui-multiselect").siblings("select").multiselect("disable").end().children("input").prop("disabled",!0),a.searchMethod===F&&a.searchBox&&a.searchBox.prop("disabled",!0),a},enableLoadMore:function(){return f(this,!1)},disableLoadMore:function(){return f(this,!0)},blockUI:function(a){var b=this;a=a||{};var c={message:a.message};b.options.blockUICSS&&(c.css=b.options.blockUICSS),b.options.blockOverlayCSS&&(c.overlayCSS=b.options.blockOverlayCSS),b.editor.element.block(c)},unblockUI:function(a){var b=this;a=a||{};var c={};a.failmessage?(b.options.blockUICSS&&(c.css=b.options.blockUICSS),b.options.blockOverlayCSS&&(c.overlayCSS=b.options.blockOverlayCSS),c.timeout=a.timeout||4e3,c.message=a.failmessage,b.editor.element.block(c)):b.editor.element.unblock()},makeFiltersBar:function(){var a,b=this,c=b.options.listFilters,d=c&&c.closest("filterset"),e="right"===b.filtersPosition||"left"===b.filtersPosition;return b.filters=[],!!c&&(a=b.conditionsBar,a.empty(),v.each(c.children(),function(c){var f=new x.Filter({xml:v(this),list:b,selectedList:d.length&&"vertical"===d.attr("layout")?2:3,cssClass:b.filterCssClass});b.filters.push(f),f&&f.element&&(e&&0!==c&&a.append("<br>"),a.append(f.element),f.multiSelectMaxWidth&&f.multiSelectMaxWidth())}),e&&a.addClass("nx-conditioncontainer-vertical nx-conditioncontainer-vertical-"+b.filtersPosition),a)},nextPage:function(){this.currentPage++,this.render({refreshFields:!1})},prevPage:function(){this.currentPage--,this.render({refreshFields:!1})},goToPage:function(a){this.currentPage=a,this.render({refreshFields:!1})}}),w(g.prototype,{id:function(){return this._GUID},render:function(){var a,b=this,c=b.list,d=!!c&&c.views,e=c.currentView;return c&&d&&e&&(a=d[e],b.element&&b.element.remove(),b.element=v("<"+(a.itemNodeType||"div")+">").addClass("nx-item").data("object",b),a.render(b)),b},refreshFields:function(a){var b=this;return v.each(b.fields,function(){(b.mode!==this.mode||!a||this.id in a)&&(this.mode=b.mode,this.render())}),b},resetMode:function(){return this.mode!==this.defaultMode&&(this.mode=this.defaultMode),this},toggleEdit:function(){return"readonly"!==this.mode&&(this.mode="read"==this.mode?"edit":"read",this.refreshFields()),this},toggleDelete:function(a){var b=this;return b.deleted?b.unMarkForDelete(a):b.markForDelete(a),b},handleUnmarkRowForDeletion:function(a){var b=this,c=b.list.model,d=b.row,e=!!d&&c.getRowId(d),f=!!a&&c.getRowId(a);return!d||d!==a&&e!=f||b.unMarkForDelete(!1),b},handleMarkRowForDeletion:function(a){var b=this,c=b.list.model,d=b.row,e=!!d&&c.getRowId(d),f=!!a&&c.getRowId(a);return!d||d!==a&&e!=f||b.markForDelete(!1),b},unMarkForDelete:function(a){var b=this;return b.element.removeClass("deleted"),b.deleted=!1,a&&b.list.model.undeleteRow(this.row),b},markForDelete:function(a){var b=this;return b.element.addClass("deleted"),b.deleted=!0,a&&b.list.model.deleteRow(b.row),b},registerField:function(a){this.fields.push(a),this.fieldsByGUID[a._GUID]=a},unregister:function(a){var b=this,c=b.fields,d=b.list;return d&&d.model&&d.model.unregisterItem(b),c&&c.length&&v.each(c,function(){this.destroy(a)}),b},destroy:function(){this.unregister({removeDOM:!1}),this.element&&this.element.remove()}}),w(h.prototype,{uid:function(){return this._GUID},register:function(a){return this.model&&this.model.registerField(this,a),this},subscribeToEvent:function(b,c){var d=this,e=d._eventSubscriptions;e||(e=d._eventSubscriptions=[]),e.push(a.events.subscribe(b,c))},unregister:function(){var b=this,c=b.options,d=b._eventSubscriptions;b.model&&b.model.unregisterField(b,!!c&&c.controllingFields),y.removeEventSubscriptions(b.element),d&&d.length&&v.each(d,function(){a.events.unsubscribe(this)})},calculateReferenceText:function(){return y.calculateReferenceText({model:this.model,row:this.row,template:this.options.template,fieldMetadata:this.metadata})},calculateReferenceMerges:function(a){return a||(a={}),y.calculateReferenceMerges(w(a,{model:this.model,row:this.row,template:this.options.template,fieldMetadata:this.metadata}))},getValidPicklistEntries:function(){var a,b,c,d,e,f=this,g=f.model,h=g.objectName,i=f.item,j=f.metadata,k=j.controllingField,l=j.picklistEntries||[],m=function(a,b){return 0!=(new sforce.Base64Binary("").decode(b).charCodeAt(a>>3)&128>>a%8)},n=i&&i.ValidRecordTypeIds?i.ValidRecordTypeIds:[],o=g.getFieldValue(f.row,"RecordTypeId",!0);return o&&-1===v.inArray(o,n)&&n.push(o),n.length&&(b=y.getPicklistEntriesValidForRecordTypes(h,f.id,n)),f.metadata.deDupLabel&&v.each(f.row,function(a,b){f.metadata.id===a&&v.each(l,function(c,d){d.label===b&&(f.row[a]=d.value)})}),k&&(d=g.getFieldValue(f.row,k,!0),(a=g.getField(k))&&(b&&b.length?(c={},v.each(b,function(){c[this.value]=1}),b.length=0):b=[],"BOOLEAN"===a.displaytype?e=d?1:0:v.each(a.picklistEntries,function(a,b){b.value===d&&(e=a)}),(e||0===e)&&l&&v.each(l,function(a,d){m(e,d.validFor)&&(!c||d.value in c)&&b.push(d)}))),b||l},addOrReplaceConditionsForLookupFiltersToModel:function(b){var c=this,d=[],e=!(!c.options||!c.options.filters)&&c.options.filters;return b||(b=c.model),e&&e.length&&v.each(e,function(e,f){var g,h,i=c.id+"_"+f.field+"_"+e,j=b.getConditionByName(i);if(j||(j=new a.model.Condition,j.name=i,b.addCondition(j)),j.field=f.field,j.operator=f.operator||"=",j.encloseValueInQuotes=f.encloseValueInQuotes,f.sourceParam&&(j.sourceParam=f.sourceParam),g=y.isMultiValueOperator(j.operator),"dependent"===f.type)h=c.model.getFieldValue(c.row,f.depfield,!0),void 0!==h&&(g?j.values=h&&-1!=h.indexOf(";")?h.split(";"):[h]:j.value=h),null===h||y.isUndefined(h)?(j.type="blank",j.value="null",j.encloseValueInQuotes=!1):j.type="fieldvalue";else if("userinfo"===f.type)delete j.type,j.value=y.getUserInfoPropValue(f.mergeField);else if("param"===f.type)h=a.page.params[f.mergeField],void 0!==h&&(g?j.values=h&&-1!=h.indexOf(";")?h.split(";"):[h]:j.value=h),j.type="fieldvalue";else if("modelmerge"===f.type){var k=a.model.getModel(f.mergeModel);k&&(g?(j.values=[],v.each(k.data,function(){j.values.push(k.getFieldValue(this,f.mergeField,!0))})):j.value=k.getFieldValue(k.getFirstRow(),f.mergeField,!0),delete j.type,j.model=f.mergeModel,j.noValueBehavior=f.noValueBehavior)}else j.type=f.type,f.values?j.values=f.values:j.value=f.value,f.mergeField&&(j.mergeField=f.mergeField,j.originalValue=null);d.push(j)}),d},_getUpdateRowOptions:function(){return"edit"===this.mode?{initiatorId:this._GUID}:{}},_toggleModified:function(){var a=this,b=a.element,c=a.model,d=a.row,e=c.getRowId(d),f=a.name?a.name:a.id,g=f?c.getFieldValue(d,f,!0):null,h=c.originals[e];return b.removeClass("nx-modified"),(h&&f&&f in h&&h[f]!==g||c.isRowNew(d)&&!c.isAggregate)&&b.addClass("nx-modified"),a},render:function(){function b(){h.element.removeClass("disabled").find(":input").prop("disabled",!1).end().find("[sk-contenteditabledisabled=true]").attr("contenteditable","true").removeAttr("sk-contenteditabledisabled").end().find(".ui-button").button("enable").end().find(".ui-multiselect").animate({opacity:"1.0"},function(){v(this).css("opacity","")}).siblings("select").multiselect("enable"),h.element.attr("sk-ckeditorname")&&(a.CKEDITOR.instances[h.element.attr("sk-ckeditorname")].setReadOnly(!1),h.element.find(".sk-cke-hide").remove()),h._toggleModified(),h.labelElement&&h.labelElement.animate({color:"rgba(0,0,0,1)"}),r&&(q=h.element.data(s),q&&"function"!=typeof q&&q!==r?(h.element.skootip(q),h.element.removeData(s)):h.element.tooltip("instance")&&h.element.tooltip("destroy")),d(!1),h.disabled=!1}function c(){if(h.element.removeClass("nx-modified").addClass("disabled").find(":input").prop("disabled",!0).end().find(".ui-button").button("disable").end().find("[contenteditable=true]").attr("sk-contenteditabledisabled","true").removeAttr("contenteditable").end().find(".ui-multiselect").animate({opacity:"0.4"}).siblings("select").multiselect("disable"),h.element.attr("sk-ckeditorname")){var b=h.element.attr("sk-ckeditorname");a.CKEDITOR.instances[h.element.attr("sk-ckeditorname")].setReadOnly(!0),0===h.element.find(".sk-cke-hide").length&&h.element.append('<style class="sk-cke-hide">#cke_'+b+"{display:none!important;}</style>")}if(h.labelElement&&h.labelElement.animate({color:"rgba(0,0,0,0.3)"}),r){if(h.element.tooltip("instance")){var c=h.element.tooltip("option","content");c&&"function"!=typeof c&&c!==r&&h.element.data(s,c)}h.element.skootip(r,{position:{my:t+" bottom",at:t+" top-10"},open:function(a,b){var c=v("<div>").addClass("sk-hastooltip").css(t,"0px");b.tooltip.append(c)}})}d(!0),h.disabled=!0}function d(a){h.editor&&h.editor.element._columnSettingsByUID&&v.each(h.editor.element._columnSettingsByUID,function(){this.fieldId==h.id&&(this.disabled=a)})}var e,f,g,h=this,i=h.element,j=h.options,k=h.model,l=k.getDataSource().getFieldRenderers()||{},m=h.row,n=h.name?h.name:h.id,o=n?k.getFieldValue(m,n,!0):null,p=j.enableConditionsXML;if(i.empty(),h._toggleModified(),h.editable||(h.mode="readonly"),"edit"===h.mode&&h.required?i.addClass("required"):i.removeClass("required"),h.loading&&(h.mode="loading"),j&&"right"===j.valueHorizontalAlignment&&i.addClass("halignright"),h.metadata&&(g=h.metadata.displaytype),j.type&&(j.type in x.fieldRenderers||j.type in l)?e=x.getFieldRenderer(j.type,k.dataSource):g&&(g in x.fieldRenderers||g in l)&&(e=x.getFieldRenderer(g,k.dataSource)),f=h.mode,e||(e=x.getFieldRenderer("TEXT",k.dataSource)),!e||f in e||(f="read")in e||(e=x.getFieldRenderer("TEXT",k.dataSource)),e[f](h,o),p&&p.length&&p.children().length){var q,r=p.attr("message"),s="skuid__originalTooltip",t=j.valueHorizontalAlignment||"left";h.editor&&h.editor.element._columnsByGUID&&v.each(h.editor.element._columnsByGUID,function(){this.fieldId==h.id&&(this.disabled=!1)}),"edit"===h.mode?y.conditionallyDo(b,c,p,i,{row:m,model:k}):h.editor&&h.editor.element._columnSettingsByUID&&y.conditionallyDo(function(){d(!1)},function(){d(!0)},p,i,{row:m,model:k})}h.messages.length&&h.editor&&h.editor.options&&h.editor.options.showErrorsInline&&v.each(this.messages,function(a,b){h.renderMessage(b)})},destroy:function(a){var b=this.element,c=this.options,d=c&&c.subscriptionElement,e=!a||!1!==a.removeDOM;b&&!b.jquery&&(b=v(b)),d&&y.removeEventSubscriptions(d),this.unregister(),b&&e&&b.remove()},handleUpdate:function(a,b){this.handleChange(a,b)},handleChange:function(a,b){var c=this,d=c.model,e=c.row,f=c.id,g=c.options,h=g.controllingFields;if(h&&h.length&&b&&-1!==v.inArray(b,h)){var i=!1,j=d.getFieldValue(e,f,!0),k=!(!c.metadata||-1===v.inArray(c.metadata.displaytype,["PICKLIST","MULTIPICKLIST","COMBOBOX"]))&&c.getValidPicklistEntries();k&&v.each(k,function(a,b){if(j===b.value)return i=!0,!1}),i||d.updateRow(e,f,"",{initiatorId:c.uid()})}c.render()},handleMessage:function(a){this.messages.push(a),this.messages.length&&this.editor&&this.editor.options&&this.editor.options.showErrorsInline&&this.renderMessage(a)},renderMessage:function(b){this.errorElement||(this.errorElement=v("<div>"));var c=b.message;"REQUIRED_FIELD_MISSING"===b.status&&(c="This Field is Required"),this.editor.options.showErrorsOnHover?(this.element.children("input").addClass("input-with-error"),this.errorElement.skootip(a.utils.decodeHTML(c)),this.errorElement.addClass("sk-icon sk-icon-error sk-icon-inline-error nx-field-error-icon"),this.element.append(this.errorElement)):(this.errorElement.addClass("nx-error-inline").text(a.utils.decodeHTML(c)),this.element.prepend(this.errorElement),this.element.addClass("nx-field-error"))}}),w(j.prototype,{unregister:function(){this.editor.unregister()},addSearchField:function(a,b){this.list.addSearchField(a,b)}}),w(x,{Editor:d,List:e,Item:g,Field:h,Queue:j,createFieldSet:k,createIcon:p,getFieldOptionsFromXML:l,setStatus:m,hideStatus:n,isWebIcon:o,searchableDisplayTypes:G,openConsoleTabForField:u,openConsoleTabForNameField:t,openConsoleTabForUrl:r,openConsoleTabForRow:s,isTouchDevice:b,_createLookupFiltersFromXML:i,_loadHammer:c})}(skuid),function(a){function b(a,b){var c=a.options&&a.options.addfocusbox;a.element.html('<div class="nx-fieldtext">'+b+(c?'<div class="focusbox" tabindex="0"/>':"")+"</div>")}function c(a){var b,c=a.model,d=a.row,e=c.getFieldValue(d,a.id),f=c.objectName,g=c.getNameFieldValueForRow(d);window.sforce&&sforce.interaction&&window.sendCTIMessage&&(b=window.sendCTIMessage),b&&b("/CLICK_TO_DIAL?DN="+encodeURIComponent(e)+(d.Id?"&ID="+d.Id:"")+"&ENTITY_NAME="+f+"&OBJECT_NAME="+encodeURIComponent(g))}function d(a,b){var c=a.metadata;return c&&c.displaytype&&-1!=n.inArray(c.displaytype,aa)?b:z(b)}function e(a){var b=a.options;return b&&b[B]||a.metadata[B]}function f(a,b){return q.mergeAsTextInContext(a||y("select_option_none"),b||{})}function g(b,c,d){function e(b,c,e){var f=n("<div>").addClass("nx-radiowrapper"),g=a.utils.generateGUID(),h=n('<input type="radio" name="'+d.buttonSetName+'">').addClass("nx-radio").prop("id",g).prop("checked",e).prop("disabled","read"===d.mode||"readonly"===d.mode).val(b),i=n("<label>").prop("for",g).addClass("nx-radiolabel").html(z(c)).appendTo(f);return f.append(h,i),f}var g=!1,h=[];if(d.makeNoneOption&&h.push(e("",f(d.noneLabel),!b)),n.each(c,function(a,c){if(c.value){var d=c.value==b&&""!==c.label;d&&!g&&(g=!0),h.push(e(c.value,c.label,d))}}),!g&&(b||"0"===b||"false"===b)){var i=e(b,b,!0);d.makeNoneOption?h.splice(1,0,i):h.unshift(i)}return h}function h(a){a||(a={});var b,c=a.value,d=q.userLocale,e=a.decimalPlaces||0,f=a.decimalsSeparator||d.decimalsSeparator,g=a.thousandsSeparator||d.thousandsSeparator,h=a.prefix||"",i=a.suffix||"";return c||0===c||(c=""),b=""!==c&&n.isNumeric(c)?isFinite(c)?h+n.number(c,e,f,g)+i:"-":c,a.wrapInElement?n("<div>").text(b):b}function i(a){var b={},c=function(c,d){var e=a[c];void 0!==e&&(b[d]=e)};return c("showYearPicker","changeYear"),c("showMonthPicker","changeMonth"),c("yearPickerRange","yearRange"),b}function j(a,b){var c,d;return c=n('<div class="nx-field-lengthcounter"></div>'),d=function(a){c.text(+a+"/"+b.length),a>b.length?c.addClass("nx-field-lengthcounter-error"):c.removeClass("nx-field-lengthcounter-error")},d(b.value?b.value.length:0),a.append(c),d}function k(a,b){var c=b&&b.getFieldRenderers();return c&&a in c?c[a]:a in m&&m[a]}var l,m,n=a.$,o=a.constants,p=a.ui,q=a.utils,r=a.time,s=o.DISPLAY_TYPES,t=o.FIELD_TYPES,u=r.parseSFDate,v=r.parseSFDateTime,w=r.getSFDate,x=r.getSFDateTime,y=a.$L,z=q.encodeHTML,A=q.startsWith,B="placeholder",C=a.$.ui.keyCode,D=s.ANYTYPE,E=s.ARRAY,F=s.BOOLEAN,G=s.COMBOBOX,H=s.CURRENCY,I=s.CUSTOM,J=s.DATE,K=s.DATETIME,L=s.DOUBLE,M=s.EMAIL,N=s.ID,O=s.INTEGER,P=s.LOCATION,Q=s.MULTIPICKLIST,R=s.PERCENT,S=s.PHONE,T=s.PICKLIST,U=s.REFERENCE,V=s.RICHTEXT,W=s.TEXT,X=s.TEXTAREA,Y=t.CHILDREL,Z=t.COMBO,$=t.FILE,_=t.IMAGE,aa=[F,H,J,K,L,N,O,R,s.TIME];l={AUTOCOMPLETE:{edit:function(a){a=a||{},a.minLength||0===a.minLength||(a.minLength=2);var b,c=n("<input>"),d=function(){b&&(b.removeClass("ui-icon ui-icon-search"),b.addClass("nx-spinner-small"))},e=function(){b&&(b.removeClass("nx-spinner-small"),b.addClass("ui-icon ui-icon-search"))};return c.autocomplete({minLength:a.minLength,source:function(){return"function"==typeof a.source?function(b,c){a.source(b,c,d,e)}:a.source}(),select:a.onChange,focus:a.onFocus,close:a.onClose,appendTo:a.appendTo}).val(a.value),a.menuRenderer&&(c.data("ui-autocomplete")._renderMenu=a.menuRenderer),a.optionRenderer&&(c.data("ui-autocomplete")._renderItem=a.optionRenderer),c.on("keyup",function(b){""===n(this).val()&&9!==b.keyCode&&a.onClear&&a.onClear()}),c.focus(function(){c.autocomplete("widget").css("z-index",parseInt(c.closest(".ui-front").css("z-index"),10)+1)}),c.blur(function(){a.onBlur&&a.onBlur()}),a.parentElem&&(b=n("<div>").addClass("ui-icon ui-icon-search nx-field-reference-search").css({cursor:"pointer"}),a.parentElem.append(b),a.parentElem.is(c)&&c.css("padding-right","22px")),c}},BOOLEAN:{edit:function(a){var b=n('<input type="checkbox">').prop("checked",a.value).change(function(){a.onChange&&a.onChange(n(this).is(":checked")),b.focus()});return b}},COMBOBOX:{edit:function(a){a=a||{};var b=a.parentElem,c=a.value,d=n("<div>").addClass("ui-icon ui-icon-search nx-field-reference-search").css({cursor:"pointer"}),e=n('<select id="combobox"></select>'),f=function(){var a=b.find(".nx-combobox-renderer-button");d&&(a.css({display:"none"}),d.removeClass("ui-icon ui-icon-search"),d.addClass("nx-spinner-small").css({top:"5px"}))},g=function(){var a=b.find(".nx-combobox-renderer-button");d&&(d.removeClass("nx-spinner-small"),d.addClass("ui-icon ui-icon-search"),a.css({display:"block"}))};return e.combobox({value:c,parentElem:a.parentElem,source:function(){return"function"==typeof a.source?function(b,c){a.source(b,c,f,g)}:a.source}(),onBlur:a.onBlur,onChange:a.onChange,onFocus:a.onFocus,searchicon:d,originalValue:a.originalValue,required:a.required,appendDropdown:a.appendDropdown})}},CURRENCY:{read:function(b){b||(b={});var c,d,e=q.userLocale,f=q.userInfo.defaultCurrency,g=b.value,h=b.decimalPlaces||0,i=b.decimalsSeparator,j=b.thousandsSeparator,k=b.valueCurrencyCode;return void 0===i&&(i=e.decimalsSeparator),void 0===j&&(j=e.thousandsSeparator),g||0===g||(g=""),d=""!==g&&n.isNumeric(g)?n.number(g,h,i,j):g,""!==g&&n.isNumeric(g)&&(q.isMultiCurrencyOrganization?(d=k+" "+d,k&&k!=f&&(c=q.convertCurrency(g,k,f))&&c!=g&&(d+=" ("+f+" "+n.number(c,h,i,j)+")")):d=a.currency.getSymbol(f)+d),b.wrapInElement?n("<div>").text(d):d}},DOUBLE:{read:h},DATE:{edit:function(a){a=a||{};var b,c,d=!1,e=a.value&&u(a.value);return b=n("<input>").datepicker(n.extend(i(a),{onSelect:function(e,f){var g,h=f.selectedMonth-0+1+"",i=f.selectedDay+"";1===h.length&&(h="0"+h),1===i.length&&(i="0"+i),g=f.selectedYear+"-"+h+"-"+i,c=b.val(),a.onChange&&a.onChange(g),d=!0,b.focus(),setTimeout(function(){d=!1},200)},beforeShow:function(){if(setTimeout(function(){n(".ui-datepicker").css("z-index",parseInt(b.closest(".ui-front").css("z-index")||0,10)+1)},0),d)return!1}})).on("click",function(){b.datepicker("show")}),b.datepicker("widget").click(function(a){a.stopPropagation()}),e&&b.datepicker("setDate",e),c=b.val(),b.bind("change keyup",function(){var d=n(this).val();if(d!=c){c=d;var e;e=""!==d?w(b.datepicker("getDate")):"",a.onChange&&a.onChange(e)}}),b}},DATETIME:{edit:function(a){var b,c=n("<div>"),d=n("<input>"),e=!1;a.value&&(b=v(a.value),c.data("usedate",b)),d.datepicker(n.extend(i(a),{onSelect:function(b,f){var g,h,i,j=new Date,k=c.data("usedate");k?g=r.getLocalDateTime(k):(g=r.getLocalDateTime(j),g.setHours(0,0,0,0)),g.setFullYear(f.selectedYear,f.selectedMonth,f.selectedDay),h=r.getRealJSDateTimeFromLocal(g),i=x(h),a.onChange&&a.onChange(i),c.data("usedate",h),e=!0,d.focus(),setTimeout(function(){e=!1},200)},beforeShow:function(){if(setTimeout(function(){n(".ui-datepicker").css("z-index",parseInt(d.closest(".ui-front").css("z-index")||0,10)+1)},0),e)return!1}})).click(function(){d.datepicker("show")}),a.value&&b&&d.datepicker("setDate",r.getLocalDateTime(b)),d.datepicker("widget").click(function(a){a.stopPropagation()});var f,g,h,j,k,l=d.val(),m=n("<div>").addClass("nx-dt-timewrapper");d.bind("change keyup",function(){if(n(this).val()!=l){l=n(this).val();var b;if(""!==n(this).val()){var e,f,g=d.datepicker("getDate")||new Date;g.setHours(0,0,0,0),e=r.getLocalDateTime(c.data("usedate")||g),e.setFullYear(g.getFullYear(),g.getMonth(),g.getDate()),f=r.getRealJSDateTimeFromLocal(e),b=x(f),c.data("usedate",f)}else b="",c.data("usedate",null);a.onChange&&a.onChange(b)}}).addClass("nx-dt-dateinput"),f=new Date,b?g=r.getLocalDateTime(b):(g=r.getLocalDateTime(f),g.setHours(0,0,0,0));var o,p,s=q.userLocale,t=s.timeFormat,u=r.amPm,w=function(a){var b=o+1<t.length&&t.charAt(o+1)===a;return b&&o++,b},y=!1,z=function(){var b,d=r.getLocalDateTime(c.data("usedate")||new Date);d.setHours((parseInt(h.val(),10)+(k&&"pm"===k.val()?12:0))%24),d.setMinutes(j.val()),b=r.getRealJSDateTimeFromLocal(d),c.data("usedate",b),a.onChange&&a.onChange(x(b))},A=function(a){m.append(n("<span>"+a+"</span>"))},B=function(a,b,c,d){a.append(n("<option "+(c?"selected ":"")+'value="'+b+'">'+(d&&b<10?"0"+b:b)+"</option>"))};for(o=0;o<t.length;o++)if(p=t.charAt(o),y)"'"!==p||w("'")?A(p):y=!1;else{var C,D;switch(p){case"a":if(!k){var E=g&&g.getHours()>=12;k=n("<select>").html("<option "+(E?"":"selected ")+'value="am">'+u[0]+"</option><option "+(E?"selected ":"")+'value="pm">'+u[1]+"</option>").appendTo(m).on("change",z)}break;case"h":case"K":case"k":case"H":if(!h){h=n("<select>"),D=w(p);for(var F,G="h"===p||"K"===p?12:24,H=0;H<G;H++)F="h"===p&&0===H?12:"k"===p?H-0+1:H,C=!1,g?C=H===(G>12?g.getHours():g.getHours()%12):8===H&&(C=!0),h.append(n("<option "+(C?"selected ":"")+'value="'+H+'">'+(D&&F<10?"0"+F:F)+"</option>"));h.appendTo(m).on("change",z)}break;case"m":if(!j){j=n("<select>"),D=w("m");var I,J=a.minuteIncrement||5,K=g?g.getMinutes():0,L=g&&K%J==0;for(I=0;I<60;I+=J)C=I===K,!L&&I>K&&(B(j,K,!0,D),L=!0),B(j,I,C,D);j.appendTo(m).on("change",z)}break;case"'":w("'")?A("'"):y=!0;break;default:A(t.charAt(o))}}return s&&s.showTimeBeforeDate?c.append(m,d):c.append(d,m),c}},ENTITY:{edit:function(b){b||(b={});var c,d,e,f,g,h=n('<div style="position: relative;">'),i=b.value,j=b.readOnly,k=b.onChange,m=function(){var c=b.dataSource;return"function"==typeof c?c():c||a.dataSource.getDataSource(a.platform.getDefaultDataSourceName())},o=function(){return h.parent().find(".nx-property-error")};return j?(f=m(),d=i,f&&f.dataSourceType&&f.dataSourceType.prop&&q.size(f.dataSourceType.prop("x-metadata"))&&(g=f.dataSourceType.prop("x-metadata")[i])&&g.label&&(d=g.label),h.addClass("nx-fieldtext").text(d||"").css("margin-top","6px")):(c=b.comboBox?l.COMBOBOX:l.AUTOCOMPLETE,e=c.edit({parentElem:h,value:i,appendDropdown:!0,onChange:function(a,b){var c=b.item.value;o().hide(),m().getEntityMetadata({entities:{objectName:c},ignoreMetadataOverrides:!0}).then(function(){k&&k(c,i),i=c})},onBlur:function(){o().hide(),i!==e.val()&&e.val("")},source:function(a,c,d,e){var f=b.filter,g="function"==typeof f&&f()||m().getEntityList();d(),g.then(function(b){e(),c(b.filter(function(b){return-1!==(q.isString(b)?b:b.value).toLowerCase().indexOf(a.term.toLowerCase())})),o().hide()},function(a){e(),c([]);var b=o();b.length?b.show():b=n('<div class="nx-property-error">').insertAfter(h),b.text(a)})}}).appendTo(h)),h}},INTEGER:{read:function(a){return a||(a={}),n.extend(a,{decimalPlaces:0}),h(a)}},MULTIPICKLIST:{edit:function(a){a.valueDelimiter||(a.valueDelimiter=";");var b,c=a.value,d=a.checkboxSetName,e=a.entries,f=a.maxSelected,g=a.valueDelimiter,h=a.hasOwnProperty("selectedList")?a.selectedList:3,i=a.selectedText||y("number_selected"),j=a.noneSelectedText||y("none_selected"),k=!1,l=a.required||!1;c||(c="");var m,o=c.length?c.split(g):[],p=f&&o.length>=f,r=a.element||n("<div>"),s=c;if("CHECKBOXES"===a.renderas)r.addClass("nx-fieldtext").css("padding","0px"),b=function(){if(!k){k=!0;var b,c=r.find('input[type="checkbox"]'),d=c.filter(function(){return n(this).prop("checked")}).map(function(){return this.value}).get();if(f)if(d.length>=f){b=[];var e=0;c.each(function(){var a=n(this);if(a.prop("checked")){if(e++<f)return b.push(a.val()),!0;a.prop("checked",!1)}a.prop("disabled",!0)})}else c.each(function(){n(this).prop("disabled")&&n(this).prop("disabled",!1)});m=(f&&b?b:d).join(g),a.onChange&&a.onChange(m,s),s=m,k=!1}},n.each(e,function(a,b){if(b.value){var c="";-1!==n.inArray(b.value,o)&&""!==b.value&&(c='checked="yes"');var e=n("<div>").addClass("nx-checkboxwrapper"),f=n("<input "+c+' type="checkbox">').val(b.value).prop("id","mscb_"+d+"_"+b.value).addClass("nx-checkbox").appendTo(e),g=n("<div>").addClass("nx-checkboxlabel").appendTo(e);p&&!c&&f.prop("disabled",!0),g.append(n("<label>").html(z(b.label)).prop("for","mscb_"+d+"_"+b.value)),r.append(e)}}),r.off(),r.on("change","input",function(){b()});else{var t=n('<select multiple="multiple">').appendTo(r);n.each(e,function(a,b){var c,d="";-1!==n.inArray(b.value,o)&&""!==b.label&&(d='selected="selected"'),c=n("<option "+d+">").attr("value",b.value).text(b.label),t.append(c)}),b=function(){if(!k){k=!0;var b,c,d,e={},h=t.multiselect("getChecked").map(function(){return e[this.value]=1,this.value}).get();f&&(c=t.multiselect("widget").find('input[type="checkbox"]'),h.length>=f?(b=[],d=0,c.each(function(){var a=n(this),c=a.val();if(a.prop("checked")){if(d++<f)return b.push(c),e[c]=1,!0;delete e[c],this.click()}a.prop("disabled",!0).closest("label").addClass("ui-state-disabled")}),t.children().each(function(){var a=n(this);e[a.val()]?a.attr("aria-selected","true"):a.prop("disabled",!0).removeAttr("aria-selected")})):(t.children().each(function(){var a=n(this);a.prop("disabled",!1).attr("aria-selected",e[a.val()]?"true":"false")}),c.each(function(){n(this).prop("disabled",!1).closest("label").removeClass("ui-state-disabled")}))),m=(f&&b?b:h).join(g),a.onChange&&a.onChange(m,s),s=m,k=!1}},t.multiselect({selectedText:i,noneSelectedText:j,checkAllText:y("check_all"),uncheckAllText:y("uncheck_all"),selectedList:h,position:a.position,autoOpen:!1,classes:l?"required":"",close:function(){n(this).parent().find("button.ui-multiselect").removeAttr("tabindex").focus(),q._ie&&n(this).multiselect("disable")&&n(this).multiselect("enable"),a.onClose&&a.onClose.call(this)},click:function(a,c){b(a,c)},open:function(){n(this).parent().find("button.ui-multiselect").attr("tabindex","-1"),t.multiselect("widget").find("li").on("keydown.action.skuid",function(a){a.which===C.TAB&&a.stopPropagation()})},create:function(){t.val()&&t.val().length>=f&&t.children().each(function(){var a=n(this);a.prop("selected")||a.prop("disabled",!0).removeAttr("aria-selected")}),a.onCreate&&a.onCreate.call(this)}}).on("multiselectcheckall multiselectuncheckall",function(a,c){b(a,c)});var u=t.data("echMultiselect")||t.data("ech-multiselect");u&&u.menu&&u.menu.on("focusin",function(a){a.stopPropagation()}),t.multiselect("getButton").attr({role:"button",tabindex:0}).on("keydown.action.skuid",function(a){if(a.which===C.ENTER||a.which===C.SPACE){var b=t.multiselect("isOpen")?"close":"open";t.multiselect(b)}}),e.length>5&&t.multiselectfilter({label:"",placeholder:y("enter_keywords")})}return r}},PERCENT:{read:function(a){return a||(a={}),n.extend(a,{suffix:"%"}),h(a)}},PICKLIST:{edit:function(a){var b,c,d,e,h=a.onChange;if("RADIO_BUTTONS"===a.renderas)b=n("<div>").addClass("nx-fieldtext").css("padding","0px"),d=function(){return b.find("input:checked").first().val()},c=g(a.value,a.entries,{makeNoneOption:!a.required||a.addNoneOption,mode:a.mode,buttonSetName:a.buttonSetName,noneLabel:a.noneLabel}),n.each(c,function(){b.append(this)}),h&&(e=d(),b.off("change.skuid").on("change.skuid","input",function(){h(d(),e),e=d()}));else{b=n("<select>");var i=!1,j=a.value||""===a.value,k={},l=a.defaultValue,m=!1,o=[],p=a.entries,r=a.value||"",s=q.isString(r)?r.replace(/\"/g,'\\"'):r,t=q.isString(l)?l.replace(/\"/g,'\\"'):l;p&&n.each(p,function(a,b){var c=b.value,d=n("<option>").attr("value",c).text(b.label);!0===b.disabled&&d.prop("disabled",!0),k[c]=d,o.push(d)}),r&&q.isUndefined(k[r])&&(k[r]=n("<option>").attr("value",r).text(a.label?a.label:r),o.unshift(k[r])),a.required&&!a.addNoneOption||o.unshift(n("<option>").attr("value","").text(f(a.noneLabel))),o.length&&b.append(o),j&&r in k&&(i=!0),j&&i?(b.val(r),b.children('[value="'+s+'"]').attr("selected",!0)):void 0!==l&&l in k&&(b.val(l),b.children('[value="'+t+'"]').attr("selected",!0),m=!0),h&&(e=b.val(),b.off("change.skuid").on("change.skuid",function(){h(b.val(),e),e=b.val()})),!a.required||j&&i||(m=!0),m&&h&&b.val()&&h(b.val())}return b}},TEXT:{edit:function(a){var b=a.inputType,c=a.onChange,d={},e=n("<input "+(b?' type="'+b+'"':"")+">").val(a.value),f=n("<div>");if(["inputMode","maxLength",B].forEach(function(b){a[b]&&(d[b.toLowerCase()]=a[b])}),q.size(d)&&e.attr(d),c&&q.delayInputCallback(e,function(a,b){c(a,b)},{dataPropertyName:a.dataPropertyName}),f.append(e),a.length!==undefined){var g=j(f,a);e.on("input",function(){g(e.val().length)})}return f}},TEXTAREA:{edit:function(a){var b=a.onChange,c=a.displayRows,d=a[B],e=n("<div>"),f=n("<textarea>").val(a.value).appendTo(e);if(c?f.attr("rows",c).css({height:"100%"}):f.flexText(),d&&f.attr(B,d),q.delayInputCallback(f,function(a,c){b&&b(a,c)}),a.length!==undefined){var g=j(e,a);f.on("input",function(){g(f.val().length)})}return e}},RICHTEXT:{edit:function(b){function c(){function c(){function c(){var a=n(".cke"),b=n(a[a.length-1]);b.insertAfter(n(g[0])),b&&(b.removeClass("cke-sf1-fix"),b.addClass("cke-sf1-fix"))}if(!e.parent().hasClass("disabled")&&!d){g.off("click.sk-richtext focus.sk-richtext"),f.removePlugins="ckeditor-gwf-plugin",d=a.CKEDITOR.inline(g[0],f),e.parent().attr("sk-ckeditorname",d.name),d.config.customConfig=q.getStaticResourceUrl("CKEditor","skuid","config.js",q.getCacheTimestamp()),d.config.uiColor="#DDDDDD",a.utils._oniOS&&a.utils._inIframe()&&(d.on("contentDom",c),n(g[0]).on("click",c));var h=2,i=function(a){b.onChange&&b.onChange(a,h)};d.on("change",function(){i(d.getData())}),d.on("mode",function(){h=2!==h&&!h}),d.on("key",function(){h&&i(d.getData())}),b.onCreated&&b.onCreated(d),b.afterInit&&b.afterInit({ckInstance:d})}}var f,g,h=b.config||{},i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);h instanceof Array&&(h=n.extend.apply(this,n.map(h,function(a){return"function"==typeof a&&(a=a()),a}))),f={allowedContent:!0,disallowedContent:"style script iframe",toolbar:i?"Mobile":"FieldEditor"},"function"==typeof h?h(f):f=n.extend(f,h),g=n('<div class="nx-richtext-input" id="'+q.generateUniqueId()+'">').on("click.sk-richtext focus.sk-richtext",c),b.value&&g.html(b.value),e.parent().hasClass("disabled")?g.attr("sk-contenteditabledisabled","true"):g.attr("contenteditable","true"),e.empty().append(g),!0===b.initialize._initializeWhenReady?(c(),b.initialize=function(){}):b.initialize=c}b||(b={});var d,e=n("<div>").append(n('<div class="nx-spinner">'));return b.initialize=function(){b.initialize._initializeWhenReady=!0},a.utils.loadRichTextApi(c),e}},COLOR:{read:function(a){a||(a={});var b=a.color||a.value;return n('<div class="sk-colorpicker"><div class="sk-colorpicker-wrapper"><div class="nx-field">'+b+'</div><div><div class="sk-colorpicker-preview-wrapper sk-transparency-background"><div class="sk-colorpicker-preview" style="background-color:'+b+'; cursor:default"></div></div></div></div></div>')},edit:function(a){function b(a){f.trigger("sk-colorselected",[a])}function c(a){void 0===a&&(a=d),f.trigger("sk-colorpreview",[a])}a||(a={});var d=a.color||a.value;d===undefined&&(d="#000000")
;var e=a.onChange,f=n('<div class="sk-colorpicker"><div class="sk-colorpicker-wrapper"><div class="nx-field"><input placeholder="'+(a.placeholder?a.placeholder:"")+'"></div><div><div class="sk-colorpicker-preview-wrapper sk-transparency-background"><div class="sk-colorpicker-preview"></div></div></div></div></div>'),g=f.find("input").val(d),h=f.find(".sk-colorpicker-preview").css({"background-color":d}),i={black:"#000000",white:"#ffffff",red:"#ff0000",orange:"#ffa500",yellow:"#ffff00",green:"#008000",blue:"#0000ff",purple:"#800080",violet:"#ee82ee",rebeccapurple:"#663399"},j=a.colorSwatches||["transparent","rgba(0%,0%,0%,0.5)","\t","red","orange","yellow","green","blue","purple","violet","#663399","\n","\n","white","black","\t","#c0504d","#f79646","#eeece1","#9bbb59","#1f497d","#4f81bd","#4bacc6","#8064a2","\n","#f2f2f2","#7f7f7f","\t","#f2dcdb","#fdeada","#ddd9c3","#ebf1dd","#c6d9f0","#dbe5f1","#dbeef3","#e5e0ec","\n","#d8d8d8","#595959","\t","#e5b9b7","#fbd5b5","#c4bd97","#d7e3bc","#8db3e2","#b8cce4","#b7dde8","#ccc1d9","\n","#bfbfbf","#3f3f3f","\t","#d99694","#fac08f","#938953","#c3d69b","#548dd4","#95b3d7","#92cddc","#b2a2c7","\n","#a5a5a5","#262626","\t","#953734","#e36c09","#494429","#76923c","#17365d","#366092","#31859b","#5f497a","\n","#7f7f7f","#0c0c0c","\t","#632423","#974806","#1d1b10","#4f6128","#0f243e","#244061","#205867","#3f3151"];q.delayInputCallback(g,function(a){b(a)}),f.on("sk-colorpreview",function(a,b){h.css({"background-color":b||d})}).on("sk-colorselected",function(a,b){if(b!==d){var c=d;d=b,g.val()!==d&&g.val(d),h.css({"background-color":d}),e&&e(d,c)}});var k=a.popup=function(){function a(){u||(u=h().appendTo(document.body),k(),n(window).on("resize.sk-colorpicker scroll.sk-colorpicker",k),n(document.body).on("mousedown.sk-colorpicker",function(a){var b=a.clientX,c=a.clientY,d=u.offset(),f=d.left-n(window).scrollLeft(),g=d.top-n(window).scrollTop(),h=f+u.outerWidth(),i=g+u.outerHeight();(b<f||b>h||c<g||c>i)&&e()}).on("keyup.sk-colorpicker",function(a){27===a.keyCode&&e()}))}function e(){u&&(f.trigger("sk-popup-hide"),n(window).off("resize.sk-colorpicker scroll.sk-colorpicker"),n(document.body).off("mousedown.sk-colorpicker keyup.sk-colorpicker"),u.fadeOut(function(){u.remove(),u=null,c()}))}function h(){var a=n('<div class="sk-colorpicker-popup ui-widget ui-widget-content ui-corner-all"><div class="sk-colorpicker-popup-contents"><div class="sk-colorpicker-popup-panel sk-swatch-panel"></div><div class="sk-colorpicker-popup-panel sk-gradient-panel"></div></div></div>').on("click",function(a){a.stopPropagation()}),b=a.find(".sk-swatch-panel"),c=a.find(".sk-gradient-panel");return l({colors:j,panel:b}),m({panel:c}),a}function k(){u&&u.position({my:"left top",at:"left bottom",of:g,collision:"fit flip"})}function l(a){for(var d,f,g,h=a.colors.slice(0),i=a.panel,j=n("<div>").addClass("sk-colorpicker-table").appendTo(i),k=0;h.length>0;){for(f=n("<div>").addClass("sk-colorpicker-row sk-row-"+k).appendTo(j),d=0;h.length>0;d++){var l,m=h.shift();if("\n"===m)break;g=n("<div>").addClass("sk-colorpicker-cell sk-cell-"+d).appendTo(f),"\t"!==m&&(g.addClass("sk-transparency-background"),l=m,n("<div>").css({"background-color":l}).addClass("sk-colorpicker-swatch").on("mouseover",function(a){return function(){c(a)}}(l)).on("mouseout",function(){return function(){c()}}()).on("click",function(a){return function(){b(a)}}(l)).on("dblclick",function(a){return function(){b(a),e()}}(l)).appendTo(g))}k++}}function m(a){function g(a){var b="hsl("+a.hue+",100%,50%)",c={"background-color":b};m.css(c),x.find(".layer1").css(c),y.find(".layer1").css(c),z.find(".layer2").css({"background-image":"linear-gradient(to bottom, "+b+", rgba(204, 154, 129, 0))"})}function h(a){l=!0,w.slider("value")!==k.hue&&w.slider("value",360-k.hue),x.slider("value")!==k.sat&&x.slider("value",k.sat),y.slider("value")!==k.lum&&y.slider("value",k.lum),z.slider("value")!==k.alpha&&z.slider("value",k.alpha),l=!1,i({supressEventNotification:a})}function i(a){if(!l){var c=Math.round(360-w.slider("value")),d=Math.round(x.slider("value")),e=Math.round(y.slider("value")),f=z.slider("value");k.hue!==c&&(k.hue=c),k.sat!==d&&(k.sat=d),k.lum!==e&&(k.lum=e),k.alpha!==f&&(k.alpha=f),g(k),!0!==a.supressEventNotification&&b(s(q(k.hue/360,k.sat/100,k.lum/100),{alpha:k.alpha}))}}var j=a.panel,k=p(r(t(d))),l=!1,m=n('<div class="sk-colorpicker-gradient"><div class="sk-colorpicker-gradient-layer1"><div class="sk-colorpicker-gradient-layer2"></div></div></div>').appendTo(j).on("mousemove",function(a){c(o(k,a.offsetX,a.offsetY))}).on("mouseout",function(){c()}).on("click",function(a){b(o(k,a.offsetX,a.offsetY)),h()}).on("dblclick",function(a){b(o(k,a.offsetX,a.offsetY)),e()}),u=n('<div class="sk-colorpicker-hsl"><div class="sk-hsl-preview"></div><div class="sk-colorpicker-slider sk-hsl-h"></div><div class="sk-colorpicker-slider sk-hsl-s"></div><div class="sk-colorpicker-slider sk-hsl-l"></div><div class="sk-colorpicker-slider sk-alpha"></div></div>').appendTo(j),v=u.find(".sk-hsl-preview").css("background-color",d),w=u.find(".sk-hsl-h").slider({orientation:"vertical",min:0,max:360,step:1,slide:i,change:i}),x=u.find(".sk-hsl-s").slider({orientation:"vertical",min:0,max:100,step:1,slide:i,change:i}).append(n('<div class="layer1"><div class="layer2"></div></div>')),y=u.find(".sk-hsl-l").slider({orientation:"vertical",min:0,max:100,step:1,slide:i,change:i}).append(n('<div class="layer1"><div class="layer2_1"></div><div class="layer2_2"></div></div>')),z=u.find(".sk-alpha").slider({orientation:"vertical",min:0,max:1,step:.01,slide:i,change:i}).append(n('<div class="layer1 sk-transparency-background"><div class="layer2"></div></div>'));n.each(new Array(6),function(a){w.append(n('<div class="layer1_'+(a+1)+'">'))}),h(!0),f.on("sk-colorselected.gradientbox",function(a,b){v.css("background-color",b),k=p(r(t(b),k)),h(!0)}).on("sk-popup-hide",function(){f.off("sk-colorselected.gradientbox")})}function o(a,b,c){var d=a.hue/360,e=b/150,f=(150-c)/150*(1-b/150*.5),g=s(q(d,e,f),{alpha:a.aplha});return a.sat=Math.round(100*e),a.lum=Math.round(100*f),g}function p(a){return{hue:Math.round(360*a[0]),sat:Math.round(100*a[1]),lum:Math.round(100*a[2]),alpha:n.isNumeric(a[3])?a[3]:1}}function q(a,b,c){function d(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+6*(b-a)*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}var e,f,g;if(0===b)e=f=g=c;else{var h=c<.5?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return[Math.min(255,Math.max(0,Math.round(255*e))),Math.min(255,Math.max(0,Math.round(255*f))),Math.min(255,Math.max(0,Math.round(255*g)))]}function r(a,b,c,d){var e=1;a instanceof Array&&(d=b,e=a[3],c=a[2],b=a[1],a=a[0]),d||(d={hue:0,sat:0}),a/=255,b/=255,c/=255;var f,g,h=Math.max(a,b,c),i=Math.min(a,b,c),j=(h+i)/2;if(h==i)f=g=0;else{var k=h-i;switch(g=j>.5?k/(2-h-i):k/(h+i),h){case a:f=(b-c)/k+(b<c?6:0);break;case b:f=(c-a)/k+2;break;case c:f=(a-b)/k+4}f/=6}return 0===g&&(f=d.hue/360),0!==j&&1!==j||(g=d.sat/100),[f,g,j,e]}function s(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];return n.isNumeric(f)||(f=n.isNumeric(b.alpha)?b.alpha:1),f<1||!0===b.ignoreAlpha?"rgba("+c+","+d+","+e+","+f+")":"#"+("0"+c.toString(16)).slice(-2)+("0"+d.toString(16)).slice(-2)+("0"+e.toString(16)).slice(-2)}function t(a){var b,c,d,e;if(a in i&&(a=i[a]),/^\s*#/.test(a))return a=(/[a-f0-9]{6}/.exec(a)||[""])[0],b=parseInt(a.slice(0,2),16)||0,c=parseInt(a.slice(2,4),16)||0,d=parseInt(a.slice(4,6),16)||0,[b,c,d,1];if(/^\s*rgb/i.test(a)){for(var f,g=[],h=/(\d*\.)?\d+%?/g;f=(h.exec(a)||[""])[0];)g.push(-1===f.indexOf("%")?parseFloat(f):parseFloat(2.55*f.replace("%","")));return b=Math.round(g[0]),c=Math.round(g[1]),d=Math.round(g[2]),e=n.isNumeric(g[3])?g[3]:1,[b,c,d,e]}return[0,0,0,1]}var u=null;return{show:a,hide:e}}();return h.on("click",k.show),f}}},m={TEXT:{read:function(a,c){c||0===c||(c=""),a.options&&"PASSWORD"===a.options.type&&(c=Array(c.length+1).join("*")),q.isString(c)||(c=""+c);var d,e,f,g=a.options.maxDisplayCharacters,h=a.metadata,i=h&&"URL"===h.displaytype,j=a.model.getDataSourceType(),k=!1;if(i&&(!c||q.contains(c,"//")||A(c,"/")||(c="http://"+c),g||(g=40)),e=c,g&&(g-=0),!isNaN(g)&&g>0&&g<c.length&&(c=c.substring(0,g)+"..."),j&&j.getNameFieldURLForTextField){var l=j.getNameFieldURLForTextField(a,e,c);l&&(k=!0,c=l)}i&&!l&&(f=z(e),c='<a href="'+f+'">'+z(c)+"</a>"),d=h&&h.htmlFormatted?q.removeScriptTags(c):q.nl2br(k?c:z(c)),b(a,d)},readonly:function(a,b){k(W).read(a,b)},edit:function(a,b,c){var d,f=a.options,g=e(a);b||0===b||(b=""),d={inputType:c,value:b,onChange:function(b){a.model.updateRow(a.row,a.id,b,a._getUpdateRowOptions())}},f&&"PASSWORD"===f.type&&(d.inputType="password"),g&&(d[B]=g),a.options.showLengthCounter&&a.metadata.length&&(d.length=a.metadata.length),a.element.append(l.TEXT.edit(d),n("<div>").addClass("sk-focusbar"))}},TEXTAREA:{read:function(a,b){a._ckInstance&&(a._ckInstance.destroy(),delete a._ckInstance),k(W).read(a,b)},readonly:function(a,b){k(X).read(a,b)},edit:function(a,b){var c=a.options||{},d=e(a);if(b||0===b||(b=""),a.metadata.htmlFormatted)a.disableBlur=!0,a.element.append(l.RICHTEXT.edit({afterInit:function(b){a._ckInstance=b.ckInstance},config:[{uiColor:"#DDDDDD"},c.ckEditorConfig||{}],onChange:function(b){a.model.updateRow(a.row,a.id,b,a._getUpdateRowOptions())},value:b,length:a.options.showLengthCounter?a.metadata.length:undefined}));else{var f=c.displayRows;a.element.append(l.TEXTAREA.edit({displayRows:f,onChange:function(b){a.model.updateRow(a.row,a.id,b,a._getUpdateRowOptions())},placeholder:d,value:b,length:a.options.showLengthCounter?a.metadata.length:undefined}))}}},RICHTEXT:{read:function(a,b){return a.metadata.htmlFormatted=!0,k(X).read(a,b)},readonly:function(a,b){return k(V).read(a,b)},edit:function(a,b){return a.metadata.htmlFormatted=!0,k(X).edit(a,b)}},DOUBLE:{read:function(a,c,d,e){var f,g=a.metadata,h=a.options.decimalPlaces;h||"0"===h?f=parseInt(h,10):g&&g.scale&&(f=g.scale),f&&q.isNumber(f)||(f=0),b(a,l.DOUBLE.read({value:c,decimalPlaces:f,prefix:d,suffix:e}))},readonly:function(a,b){k(L).read(a,b)},edit:function(a,b){b||0===b||(b="");var c=q.userLocale,d=n('<input inputmode="numeric">').val(""!==b&&n.isNumeric(b)?n.number(b,a.metadata&&a.metadata.scale?a.metadata.scale:0,c.decimalsSeparator,c.thousandsSeparator):b);q.delayInputCallback(d,function(b){var e,f,g=a.metadata.displaytype,h=!1,i=c.thousandsSeparator,j=c.decimalsSeparator,k=b.indexOf(j),l=b.split(j),m=l[0],n=parseInt(l[1],10),o=l[1]?l[1].length:0,p=n.toString().length,r=d.val(),s={k:3,m:6,b:9,t:12},t=r.toLowerCase().charAt(r.length-1),u=Math.pow(10,s[t]),v=u/10,w=null===new RegExp("[^\\dbkm"+("."===j?"\\"+j:j)+("."===i?"\\"+i:i)+"-]|[bkm"+j+"]{2,}","ig").exec(r);if("."===i&&(i="\\."),b=b.toString().replace(new RegExp(i,"g"),"").replace(j,"."),e=parseInt(b,10),""===m?m=0:"-"===m&&(m=-0),w&&0==isNaN(u))if(-1!==k){for(p;p>1;p--)v/=10;for(f=0;f<o&&"0"===l[1][f];f++)v/=10;v=m>=0&&1/m>0?n*v:-n*v,b=m*u+v}else b=e*u;b&&(h="INTEGER"===g?parseInt(b,10):parseFloat(b)),!1===h||q.isExactlyNaN(h)||(b=h),a.model.updateRow(a.row,a.id,b,a._getUpdateRowOptions())}),a.element.append(d)}},INTEGER:{read:function(a,c){b(a,l.INTEGER.read({value:c}))},readonly:function(a,b){k(O).read(a,b)},edit:function(a,b){k(L).edit(a,b)}},PERCENT:{read:function(a,b){k(L).read(a,b,"","%")},readonly:function(a,b){k(R).read(a,b)},edit:function(a,b){k(L).edit(a,b)}},CURRENCY:{read:function(a,c){var d,e,f=a.metadata,g=a.options?a.options.decimalPlaces:null,h=a.row;g||"0"===g||0===g?d=parseInt(g,10):f&&f.scale&&(d=f.scale),d&&q.isNumber(d)||(d=0),""!==c&&h&&q.isMultiCurrencyOrganization&&(e=q.getRowCurrency({row:h,model:a.model,field:a.id})),b(a,l.CURRENCY.read({value:c,decimalPlaces:d,valueCurrencyCode:e}))},readonly:function(a,b){k(H).read(a,b)},edit:function(a,b){k(L).edit(a,b)}},BOOLEAN:{read:function(a,b){var c=n("<div>").addClass("nx-fieldtext").css("padding","0px"),d=n('<input type="checkbox">').prop({checked:b,disabled:"true"});c.append(d),a.editable&&"readonly"!==a.mode&&c.append('<div class="focusbox" tabindex="0"/>'),a.element.append(c)},readonly:function(a,b){k(F).read(a,b)},edit:function(a,b){"true"===b&&(b=!0),a.element.append(l.BOOLEAN.edit({value:b,onChange:function(b){a.model.updateRow(a.row,a.id,b,{initiatorId:a._GUID})}}))}},DATE:{read:function(a,c){b(a,r.makeFormattedDate(c))},readonly:function(a,b){k(J).read(a,b)},edit:function(a,b){var c=a.options;a.element.append(l.DATE.edit({value:b,renderas:c.type,showMonthPicker:c.showMonthPicker,showYearPicker:c.showYearPicker,yearPickerRange:c.yearPickerRange,onChange:function(b){a.model.updateRow(a.row,a.id,b,a._getUpdateRowOptions())}}))}},DATETIME:{read:function(a,c){b(a,r.makeFormattedLongDateTime(c))},readonly:function(a,b){k(K).read(a,b)},edit:function(a,b){var c=a.options;a.element.append(l.DATETIME.edit({value:b,showMonthPicker:c.showMonthPicker,showYearPicker:c.showYearPicker,yearPickerRange:c.yearPickerRange,minuteIncrement:c.minuteIncrement,onChange:function(b){a.model.updateRow(a.row,a.id,b,a._getUpdateRowOptions())}}))}},EMAIL:{read:function(a,c){c||0===c||(c=""),""!==c&&(c=z(c),c='<a href="mailto:'+c+'">'+c+"</a>"),b(a,c)},edit:function(a,b){k(W).edit(a,b,"email")},readonly:function(a,b){k(M).read(a,b)}},LOCATION:{read:function(a,c){var d,e,f,g,h="",i=a.options.type||a.metadata.type||"DECIMAL";c&&(e=c.latitude,f=c.longitude,"DECIMAL"===i?(g=function(a){var b=(a+"").split(".");return n.number(a,b.length>1?b[1].length:1,".","")+""},e=g(e),f=g(f),e&&(h+=e),h+=" ",f&&(h+=f)):(d="&#39;",g=function(a,b){var c=a<0,e=Math.abs(a),f=Math.floor(e),g=60*(e-f),h=Math.floor(g),i=Math.round(60*(g-h));return f+"&deg;"+h+d+i+d+d+(b?c?"S":"N":c?"W":"E")},e=g(e,!0),f=g(f),e&&(h+=e),h+=" ",f&&(h+=f))),b(a,h)},edit:function(b){var c=b.row,d=b.model,e=b.id,f=e.substring(0,e.length-1),g=f+"Latitude__s",h=f+"Longitude__s",i=new a.ui.Field(c,d,null,{fieldId:g}),j=new a.ui.Field(c,d,null,{fieldId:h});i.render(),j.render(),b.element.append(i.element,j.element)},readonly:function(a,b){k(P).read(a,b)}},PHONE:{read:function(a,d){if(window.sforce&&d&&p.showClick2Dial){k(W).read(a,d);var e=p.click2Dial;e||(e=c),a.element.css("white-space","nowrap").append(n('<div class="sk-click2dial-wrapper">').append(n('<span class="ui-icon sk-icon sk-icon-phone inline">').attr("title","Click to dial")).on("click.skuid",function(){e(a)}).css("cursor","pointer")),a.element.children().css({display:"inline-block"})}else{var f;d||"0"===d?f=d.replace(/\D+/g,""):(d="",f=!1),""!==d&&(d=z(d),(f||"0"===f)&&(d='<a href="tel:'+f+'">'+d+"</a>")),b(a,d)}},edit:function(a,b){k(W).edit(a,b,"tel")},readonly:function(a,b){k(S).read(a,b)}},PICKLIST:{read:function(a,c){var d,e=a.options||{};if(d=e&&e.entries&&e.entries.length?e.entries:a.getValidPicklistEntries(),"RADIO_BUTTONS"===e.type){var f=n("<div>").addClass("nx-fieldtext").css("padding","0px"),h=g(c,d,{makeNoneOption:!a.required||e.addNoneOption,mode:a.mode,buttonSetName:a.id+"_"+a._GUID});n.each(h,function(){f.append(this)}),a.editable&&"readonly"!==a.mode&&f.append('<div class="focusbox" tabindex="0"/>'),a.element.append(f)}else d&&d.length&&n.each(d,function(){if(this.value==c)return this.label&&(c=this.label),!1}),b(a,c?z(c):"")},readonly:function(a,b){k(T).read(a,b)},edit:function(a,b){a.element.append(l.PICKLIST.edit({addNoneOption:a.options.addNoneOption,buttonSetName:a.id+"_"+a._GUID,entries:a.getValidPicklistEntries(),mode:a.mode,noneLabel:a.options.noneLabel,onChange:function(b){a.model.updateRow(a.row,a.id,b,{initiatorId:a._GUID})},renderas:a.options.type,required:a.required,value:b}))}},MULTIPICKLIST:{read:function(a,b,c){c||(c=";");var d=n("<div>").addClass("nx-fieldtext"),e=a.getValidPicklistEntries(),f=b||"",g=f.split(c);if("CHECKBOXES"===a.options.type)d.css("padding","0px"),n.each(e,function(a,b){if(b.value){var c="";-1!==n.inArray(b.value,g)&&""!==b.value&&(c='checked="yes"');var e=n("<div>").addClass("nx-checkboxwrapper");e.append(n("<input "+c+' type="checkbox" value="'+b.value+'">').addClass("nx-checkbox").prop("disabled",!0)),e.append(n("<div>"+z(b.label)+"</div>").addClass("nx-checkboxlabel")),d.append(e)}});else if(f){var h={},i=[];n.each(e,function(a,b){h[b.value]=b.label}),n.each(g,function(){i.push(h[this]||this)}),d.html(z(i.join(", ")))}else d.html("");a.editable&&"readonly"!==a.mode&&d.append('<div class="focusbox" tabindex="0"/>'),a.element.append(d)},readonly:function(a,b,c){k(Q).read(a,b,c)},edit:function(a,b,c){var d=a.options;"CHECKBOXES"!==d.type&&(a.disableBlur=!0),a.element.append(l.MULTIPICKLIST.edit({value:b,defaultValue:a.metadata.defaultValue,entries:a.getValidPicklistEntries(),renderas:d.type,onChange:function(b){a.model.updateRow(a.row,a.id,b,{initiatorId:a._GUID})},valueDelimiter:c,checkboxSetName:a.id+"_"+a._GUID,maxSelected:d.maxSelected,required:a.required,selectedList:d.selectedList}))}},COMBOBOX:{read:function(a,b){k(W).read(a,b)},readonly:function(a,b){k(G).read(a,b)},edit:function(a,b){var c=function(c){return!c&&a.required&&(c=b),a.model.updateRow(a.row,a.id,c,{initiatorId:a._GUID})},d=function(){return a.element.find(".nx-error-inline")},e=n("<div>");a.element.append(l.COMBOBOX.edit({parentElem:e.appendTo(a.element),value:b,source:function(d,e){e(a.getValidPicklistEntries().filter(function(a){var b=function(a){return a.toString().toLowerCase().indexOf(d.term.toLowerCase())>-1};return q.isObject(a)?n.map(a,function(a){if(b(a))return a}).length>0:b(a)})),b=d.term,a.metadata.limitEntries||c(b)},onChange:function(a,d){b=d.item.value,c(b)},onFocus:function(a){a.target.select()},onBlur:function(e){var f=e.target.value,g=d();if(a.metadata.limitEntries){var h=a.getValidPicklistEntries().filter(function(a){var b=q.isString(a)?a:a.value;if(f===b)return b});0===h.length?(g.length?g.show():g=n('<div class="nx-error-inline">').prependTo(a.element),g.text("Only entries in this list are allowed.")):(g.hide(),c(h[0].value))}else f!==b&&c(b)}}))}},ARRAY:{read:function(a,b,c){c||(c={});var d,e,f=n("<div>").addClass("nx-fieldtext").appendTo(a.element),g=a.model.getFieldValue(a.row,a.id,!0),h=a.options.delimiter,i=c.dataPath||a.metadata.dataPath;h||(h=""),g&&(d=g,i&&(d=q.getObjectProperty(d,i)),e=d.length,n.each(d,function(b){var c=a.model.mergeRow(this,a.options.template,{allowHTML:a.options&&a.options.allowHTML,registerFields:!1});c.css("display","inline"),f.append(c),b+1!==e&&f.append("<span>"+h+"</span>")})),a.element.append(f)},readonly:function(a,b){k(E).read(a,b)}},CHILDREL:{read:function(a,b){k(E).read(a,b,{dataPath:a.metadata.dataPath||"records"})},readonly:function(a,b){k(Y).read(a,b)}},COMBO:{read:function(a){var b=n("<div>").addClass("nx-fieldtext").appendTo(a.element),c=a.options;b.append(a.model.mergeRow(a.row,c.template,{allowHTML:c&&c.allowHTML,registerFields:!1})),a.editable&&"readonly"!==a.mode&&b.append('<div class="focusbox" tabindex="0"/>'),a.element.append(b).off("dblclick.skuid mouseenter.skuid mouseleave.skuid").css("cursor","auto")},readonly:function(a,b){k(Z).read(a,b)},edit:function(a,b){k(Z).read(a,b);var c,d=a.options,e=a.element,f=e.find(".focusbox").prop("tabindex","-1"),g=n('<input type="text">').addClass("nx-visuallyhidden");f.before(g),c=function(){function b(){n(this).click().find(":input").first().focus()}function c(){var a=e.find("input"),b=e.find(".focusbox");a.length&&a[0]===g[0]&&a.attr("preventaction","true"),b.length&&b[0]===f[0]&&b.attr("preventaction","true")}function h(){var a=e.find("input"),b=e.find(".focusbox");a.length?a[0]!==g[0]&&a.attr("preventaction","true").focus():b[0]!==f[0]&&b.attr("preventaction","true").focus(),setTimeout(function(){a.removeAttr("preventaction"),b.removeAttr("preventaction")},100)}var i,j,k,l="custompopup"===d.editModeBehavior,m=[{text:y("done"),icons:{primary:"sk-icon-save sk-icon"},click:function(){n(this).dialog("close")}}];l?k=q.createPopupFromPopupXML(d.editModePopupXML,a,{open:b,close:h,beforeClose:c,buttons:m,modal:!0,resizable:!0}):(i=a.model.getRowMergeResult(a.row,d.template),j=i.fields,k=n('<div title="'+d.label+'" class="nx-editor"/>'),k.append(p.createFieldSet(j,{editor:a.editor})),k.dialog({resizable:!0,modal:!0,width:450,open:b,beforeClose:c,close:function(){h(),k.dialog("destroy").remove()},buttons:m})),a.editor.editModePopup=k},g.on("focus.skuid",function(){var a=n(this);a.attr("preventaction")?a.removeAttr("preventaction"):c()}),e.on("mouseenter.skuid mouseleave.skuid","> .nx-fieldtext",function(a){"mouseenter"===a.type?n(this).append(n("<div>").addClass("nx-edithover sk-icon-edit sk-icon inline").click(function(a){c(),a.stopPropagation()})):n(this).find("div.nx-edithover").remove()}).on("dblclick.skuid",c).css("cursor","pointer")}},CUSTOM:{read:function(b,c){var e=a.snippet.get(b.options.snippet);e&&e(b,d(b,c))},readonly:function(a,b){k(I).read(a,b)},edit:function(a,b){k(I).read(a,b)}},FILE:{read:function(a){var b=n("<div>").addClass("nx-fieldtext").css({padding:"0px","min-height":"26px"}).appendTo(a.element);new q.FileComponent(b,{model:a.model,row:a.row,displayAs:"filename",storeAs:"field",idField:a.id,deleteable:!1,editable:!1,_GUID:a._GUID})},readonly:function(a,b){k($).read(a,b)},edit:function(a){var b=n("<div>").addClass("nx-fieldtext").appendTo(a.element);a.model.isRowNew(a.row)?(b.css({"font-size":"8pt",color:"#aaa"}),b.text("Save record before uploading files.")):(b.attr("id",q.generateGUID()).css("padding","0px"),new q.FileComponent(b,{model:a.model,row:a.row,displayAs:"filename",storeAs:"field",idField:a.id,deleteable:!0,editable:!0,_GUID:a._GUID}))}},REFERENCE:{read:function(a,c){var d,e=c||0===c?z(a.calculateReferenceText()):"",f=a.model.getDataSourceType();if("skuid__Image__c"===a.metadata.ref)return k($).read(a,c),!1;e=q.nl2br(e),f&&f.getNameFieldURLForReferenceField&&(d=f.getNameFieldURLForReferenceField(a,c,e)),b(a,d||e)},readonly:function(a,b){k(U).read(a,b)},edit:function(b,c){if("skuid__Image__c"===b.metadata.ref)return k($).edit(b,c),!1;c||0===c||(c="");var d,e,g,h=b.element,i=b.options,j=n("<input>").val(c),l=b.metadata.ref,m=b.metadata.referenceTo,o=l&&-1!=l.indexOf(","),r=b.metadata.dataSourceName?a.dataSource.getDataSource(b.metadata.dataSourceName):b.model.getDataSource(),s=r.getDataSourceType(),t=s&&s.getReferenceHandler&&s.getReferenceHandler(),u=n('<div class="ui-autocomplete-container"></div>'),v=0,w=0;if(!t)return k(U).read(b,c),!1;var x=function(a){var c=q.extractFieldsFromTemplate(i.searchTemplate||i.template),d=b.calculateReferenceMerges({targetObject:a});e=n("<div>").append(d.merges).text(),g=[],n.each(c,function(a,c){g.push({id:b.metadata.rel&&0===c.indexOf(b.metadata.rel+".")?c.slice(b.metadata.rel.length+1):c})})};if(h.data("recordId",c),o){var B;b.element.addClass("nx-polymorphic"),d=n("<select>").on("change",function(){B=d.val(),h.data("selectedSObject",d.find('option[value="'+B+'"]').attr("data-sobject")),h.data("selectedSObjectPrefix",B),h.data("recordId",""),h.data("recordLabel",""),x(B),b.model.updateRow(b.row,b.id,"",{initiatorId:b._GUID});var a=d.next();a.val(""),h.data("recordId",""),h.data("recordLabel",""),"REFPICK"===i.type&&J("",L),a.focus()});var C={},D=[];if(n.each(m,function(a,b){C[b.label+"_"+b.objectName]=b}),n.each(Object.keys(C).sort(),function(a,b){D.push(C[b])}),n.each(D,function(a,c){d["User"===c.objectName&&q.endsWith(b.id,"OwnerId")?"prepend":"append"](n("<option>").attr({value:c.keyPrefix,"data-sobject":c.objectName}).text(c.label))}),h.data("recordId")&&"undefined"!=h.data("recordId")){var E=h.data("recordId").substring(0,3);E&&3===E.length&&h.data("selectedSObjectPrefix",E)}h.data("selectedSObjectPrefix")&&d.val(h.data("selectedSObjectPrefix"));var F=d.find('option[value="'+d.val()+'"]');0===F.length&&(F=d.find("option").first()),h.data("selectedSObject",F.attr("data-sobject"))}else h.data("selectedSObject",l);x(h.data("selectedSObject")),h.data("recordLabel",""===h.data("recordId")?"":e);var G=function(a){var c,d;for(c=a.length-1;c>=0;c--)d=a[c],b.metadata.uiOnly||d.displaytype in p.searchableDisplayTypes||a.splice(c,1)},H=function(){var a=b.options.returnFields;return a&&a.length||(a=[],n.each(g,function(b,c){c.showInSearchDialog=!0,a.push(c)})),a},I=function(a){var c=b.options.searchFields;return c&&c.length||(g&&g.length?(c=[],n.each(g,function(a,b){c.push(b)})):c=[{id:a,displaytype:"STRING",filterable:!0}]),c},J=function(c,d){var e,f=h.data("selectedSObject"),g=r.getNameField(f),j=I(g),k=H();if(i.optionsource){if("model"===i.optionsource){if(!(e=a.$M(i.optionmodel)))return;n.each(j,function(a,b){var c=b.id,d=e.getField(b.id);d?(n.extend(b,d),b.id=c):b.displaytype="STRING"}),G(j);var l=b.addOrReplaceConditionsForLookupFiltersToModel(e),m=l&&l.length;e.conditions&&e.conditions.length&&e.conditions.forEach(function(a){"modelmerge"===a.type?e.updateConditionValue(a)&&(m=!0):"join"===a.type&&a.subConditions&&n.each(a.subConditions,function(a,b){"modelmerge"===b.type&&e.updateConditionValue(b)&&(m=!0)})}),"REFPICK"===i.type?m?e.updateData(function(){d(e)}):d(e):(e.buildSearchCondition("__default_searchbox",c,j,{tokenize:"true"===i.tokenizeSearch,useSOSLSearch:i.useSOSLSearch,SOSLFields:i.SOSLFields,delimiter:i.delimiter,searchOperator:"contains"}),e.updateData(function(){d(e)}))}}else{if(b.model){var o;o=b.metadata&&b.metadata.rel?b.metadata.rel+".":"",n.each(j,function(a,c){var d=c.id,e=b.model.getField(o+c.id);e?(n.extend(c,e),c.id=d):c.displaytype="STRING"})}G(j),e=new a.model.Model({dataSource:r}),e.id="_TempModel_"+(new Date).getTime(),e.fields=k.slice(),e.doQuery=!0,e.recordsLimit=50,e.orderByClause=g,e.doClone=!1,t&&t.processReferenceLookupModel(e,b,f),e.initialize(),v++;var p=!1;n.each(k,function(a,b){if(b.id==g)return p=!0,!1}),p||e.fields.push({id:g}),i.defaultOrdering?e.orderByClause="":i.order&&(e.orderByClause=i.order),b.addOrReplaceConditionsForLookupFiltersToModel(e),c&&e.buildSearchCondition("__default_searchbox",c,j,{tokenize:"true"===i.tokenizeSearch,useSOSLSearch:i.useSOSLSearch,SOSLFields:i.SOSLFields,delimiter:i.delimiter,searchOperator:"contains"});var q=v;e.load(function(){var a={};q>w?(w=q,a.isStale=!1):a.isStale=!0,a.isFinal=q===v,d(e,a)})}},K=function(a,c,d){if(a||0===a||""===a){h.data("recordId",a);var e=r.getNameField&&r.getNameField(h.data("selectedSObject")),f=d||t&&t.getRowFromReferenceValue(c,a,b.metadata)||c.getRowById(a);if(f){var g=c.getRowMergeResult(f,i.searchTemplate||i.template||"{{"+e+"}}",{registerFields:!1}),j=g.merges.text();h.data("recordLabel",j)}f&&e&&"Name"!==e&&"Id"!==e&&!("Name"in f)&&e in f&&(f.Name=f[e]);var k={},l=a;b.metadata&&f&&-1===n.inArray(b.metadata.displaytype,["REFERENCE","ID"])&&f.__templabel&&(l=f.__templabel),k[b.id]=l,(l||0===l)&&(k[b.metadata.rel]=f),b.model.updateRow(b.row,k,{initiatorId:b._GUID})}},L=function(a){j.empty(),b.element.hasClass("disabled")||j.prop("disabled",!1);var d=!1;b.required&&a.data.length&&!i.addNoneOption||(d=!c,j.append(n("<option>").val("").text(f(i.noneLabel,{model:b.model})).prop("selected",!c)));var e=r.getNameField(h.data("selectedSObject")),g=b.metadata.originalDisplayType,k="NUMBER"===g||"INTEGER"===g||"DOUBLE"===g,l=i.searchTemplate||i.template||"{{"+e+"}}";n.each(a.data,function(e,f){var g=t?t.getReferenceValue(f,b.metadata):f.Id;d||(d=c+""==g+"");var h=a.mergeRow(f,l,{registerFields:!1}).text();j.append(n("<option>").val(g).text(h).prop("selected",c===g))}),d||!c&&0!==c||j.append(n("<option>").val(c).text(h.data("recordLabel")).prop("selected",!0)),b.required&&!c&&0!==c&&K(k?parseInt(j.val(),10):j.val(),a,null),j.off("change.skuid").on("change.skuid",function(){var b=n(this).val();k&&(b=parseInt(b,10)),K(b,a,null)})};if("REFPICK"===i.type)j=n("<select>").prop("disabled",!0).append(n('<option value="">').text(c?e:f(i.noneLabel,{model:b.model}))),J("",L);else{j=a.ui.renderers.AUTOCOMPLETE.edit({minLength:b.metadata.minInputLength||2,source:function(a,b,c,d){c(),J(a.term,function(a,c){if(c&&c.isStale)return void b([]);h.data("tempmodel",a);var e=r.getNameField&&r.getNameField(h.data("selectedSObject")),f=i.searchTemplate||i.template||"{{"+e+"}}",g=-1!==f.indexOf("Name}}");n.each(a.data,function(){g&&!this.Name&&e in this&&(this.Name=this[e]),this.__templabel=h.data("tempmodel").mergeRow(this,f,{registerFields:!1}).text()}),b(a.data),(!c||c&&c.isFinal)&&d()})},onFocus:function(a,b){return j.val(b.item.__templabel),!1},onChange:function(a,c){var d=t?t.getReferenceValue(c.item,b.metadata):c.item.Id;K(d,h.data("tempmodel"),c.item);var e=b.element.find(".nx-error-inline");return b.render(),e&&b.element.prepend(e),j.focus(),!1},onClose:function(){j.focus()},onBlur:function(){setTimeout(function(){j.val(h.data("recordLabel"))},200)},onClear:function(){var a=b.model.getFieldValue(b.row,b.id);""!==a&&null!==a&&(b.model.updateRow(b.row,b.id,"",{initiatorId:b._GUID}),h.data("recordId",""),h.data("recordLabel",""))},optionRenderer:function(a,b){return n("<li></li>").data("ui-autocomplete-item",b).html("<a>"+z(b.__templabel)+"</a>").appendTo(a)},appendTo:a.mobile?u:undefined,value:h.data("recordLabel")||c,parentElem:h}),a.mobile&&u.insertAfter(h.children().last());h.find(".ui-icon-search").on("click.skuid",function(){if(!b.element.hasClass("disabled")){var c,d,e,f,g,k,l,m,o=function(){a.mobile?a.mobile.hidePopupPanel():c.dialog("close").remove(),k.unregister&&k.unregister(),A(l.id,"_TempModel_")&&l.unregister()};a.snippet.registerSnippet("skuid.__referencepopupselect",function(a){var c,d;a.row?c=a.row:a.component&&a.component.row?c=a.component.row:a.item&&(c=a.item.row),a.model?d=a.model:a.component&&a.component.list&&(d=a.component.list.model);var e=t?t.getReferenceValue(c,b.metadata):c.Id;K(e,d,c),b.render(),j.focus(),o()}),f=h.data("selectedSObject"),b.options&&"model"===b.options.optionsource?(m=a.$M(b.options.optionmodel))&&m.objectName===f&&m.label&&(f=m.label):b.metadata&&b.metadata.referenceTo&&b.metadata.referenceTo.length&&n.each(b.metadata.referenceTo,function(){if(this.objectName===f)return this.label?f=this.label:n.each(a.model.list(),function(){if(this.objectName===f&&this.label)return f=this.label,!1}),!1}),!f&&b.metadata&&b.metadata.label&&(f=b.metadata.label),g=y("select")+" "+q.encodeHTML(f+""),c=n("<div>").attr("title",y("select")+" "+f),e=n("<div>").css("min-height","300px"),c.append(e),J(j.data("uiAutocomplete").term,function(c){a.$M(c.id)||c.register(),l=c,n.each(l.fields,function(){this.nameField&&(this.nameField=!1)});var d,h=i.tokenizeSearch?' tokenizesearch="true"':"",j=r.getNameField(c),m=H(),o=[],p=I(j),q="";m&&m.length?n.each(m,function(a,b){b.showInSearchDialog&&o.push(b)}):o.push({id:j}),p&&p.length||i.useSOSLSearch?(q+="<searchfields"+(i.useSOSLSearch?' usesosl="true"':"")+(i.SOSLFields?' soslfields="'+i.SOSLFields+'"':"")+">",p&&p.length&&n.each(p,function(){q+='<searchfield field="'+this.id+'"/>'}),q+="</searchfields>"):q="",a.mobile?(d='<mobiledeck model="'+c.id+'"'+h+' pagesize="'+(b.options.pageSize||5)+'" mode="readonly" searchbox="true" showsavecancel="false" createrecords="false" precision="1" minwidth="300"><components>',n.each(o,function(a,b){d+='<mobilefield id="'+b.id+'"',b.label?d+=">"+b.label+"</mobilefield>":d+="/>"}),d+='</components><cardinteractions><interaction type="tap"><actions><action type="custom" snippet="skuid.__referencepopupselect"/></actions></interaction></cardinteractions>'+q+"</mobiledeck>"):(d='<skootable model="'+c.id+'"'+h+' pagesize="'+(b.options.pageSize||5)+'" mode="readonly" searchbox="true" showsavecancel="false" createrecords="false"><fields>',n.each(o,function(a,b){d+='<field id="'+b.id+'" allowordering="true"',b.label?d+=">"+b.label+"</field>":d+="/>"}),d+='</fields><rowactions><action type="custom" label="'+g+'" icon="sk-icon-add-reference" snippet="skuid.__referencepopupselect"/></rowactions>'+q+"</skootable>"),k=a.component.factory({xmlDefinition:d}),e.append(k.element),a.mobile?a.mobile.setPopupPanel(k.element,{title:y("select")+" "+f}):(e.append(k.element),e.find(".searchbox").focus().select())}),a.mobile||(d=[{icons:{primary:"ui-button-icon-primary ui-icon sk-icon-remove-reference sk-icon inline"},text:"Clear Value",click:function(){b.model.updateRow(b.row,b.id,"",{initiatorId:b._GUID}),
h.data("recordId",""),h.data("recordLabel",""),o(),j.val("")}},{icons:{primary:"ui-button-icon-primary ui-icon sk-icon-cancel sk-icon inline"},text:y("cancel"),click:function(){o()}}],c.dialog({close:function(){o()},modal:!0,resizable:!0,width:"90%",buttons:d}),n(".ui-dialog").addClass("sk-dialog-autocomplete"),n(".ui-widget-overlay").addClass("sk-overlay-autocomplete"))}})}if(h.addClass("editable"),d){var M=n("<label>").addClass("nx-basicfieldeditor-item-select-label");M.append(d),h.append(M,j)}else h.append(j)}},ID:{read:function(a,b){k(W).read(a,b)},readonly:function(a,b){k(N).read(a,b)},edit:function(a,b){a.model.isRowNew(a.row)&&(b=""),a.metadata.ref=a.model.objectName,k(U).edit(a,b)}},STRING:{read:function(a,b){k(W).read(a,b)},readonly:function(a,b){k(W).readonly(a,b)},edit:function(a,b){k(W).edit(a,b)}},IMAGE:{read:function(b){var c,d=b.options,e=a.component.factory(b.element,a.utils.makeXMLDoc("<image/>").attr({alt:b.model.getRowMergeResult(b.row,d.alt||"",{asText:!0}),url:b.row[b.id]||b.model.getRowMergeResult(b.row,d.url||"",{asText:!0}),model:b.model.id,dataSource:b.model.dataSourceName,source:"url"}));d.height&&(e.element.css({height:d.height,overflow:"hidden"}),c=e.element.children().first(),d.fill&&c.addClass("nx-field-image-fill"),c.addClass("nx-field-image-withheight").attr("tabindex",0)),b.subComponents.push(e)},readonly:function(a,b){k(_).read(a,b)},edit:function(a,b){k(_).read(a,b)}},ANYTYPE:{read:function(a,b){k(q.getDisplayTypeOfEntity(b))[a.mode](a,b)},readonly:function(a,b){k(D).read(a,b)},edit:function(a,b){k(D).read(a,b)}}},n.each(m,function(b,c){c.loading=function(b){k(W).read(b,a.label.map.loading)}}),p.renderers=l,p.fieldRenderers=m,p.getFieldRenderer=k,p.click2Dial=c}(skuid),function(a){function b(p){p||(p={});var s,t,u,v,w,x,y,z=p.xml,A=p.list,B=A.model,C=p.element||c("<div>"),D=this,E=z.attr("condition"),F=D.type=z.attr("type"),G=!1,H=[],I=!!A&&A.options.delayFilterExecution,J=z.attr("labelmode"),K=p.cssClass||"";J||"daterange"!==F&&"numericrange"!==F||(J="auto"),D.affectCookies="false"!==z.attr("affectcookies"),D.isReferenceFilter=!1,D.element=C.addClass("nx-conditiontoken"),D.list=A,D.model=A.model,K&&D.element.addClass(K),D.affectedConditions={},E&&(D.filterCondition=B.getConditionByName(E,!0),!s&&D.filterCondition&&(s=B.getField(D.filterCondition.field))),D.filterCondition&&(D.affectedConditions[E]=D.filterCondition),z.find("effect").each(function(){var a=c(this),b=a.attr("condition"),d=B.getConditionByName(b,!0);d&&(D.affectedConditions[b]=d)});var L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da=function(a){var b=D.filterCondition;return!(!b||b.inactive)&&(D.isMultiselect?c.inArray(a,b.values)>-1:a===b.value)},ea=function(a,b){if(!a)return"";var c=a;return b===q&&(c="$"+a),b===r&&(c=a+"%"),c},fa=function(a){var b=a.keyCode?a.keyCode:a.which;-1!==[8,9,13,27,46,110,190].indexOf(b)||65==b&&(a.ctrlKey||a.metaKey)||b>=35&&b<=40||b>=48&&b<=57&&!a.shiftKey&&!a.altKey||b>=96&&b<=105||a.preventDefault()};if("select"===F||"multiselect"===F){D.isMultiselect="multiselect"===F;var ga,ha,ia="auto"===z.attr("conditionsource");if(ia){if(!(ga=z.attr("conditionfield")))return;if(s=B.getField(ga),D.isReferenceFilter=!1,"REFERENCE"!==s.displaytype||e.endsWith(s.id,"RecordTypeId")||(D.isReferenceFilter=!0),E="__autofilter__"+ga,D.filterCondition=ha=B.getConditionByName(E,!0),ha){if(ha&&D.isReferenceFilter&&!0!==ha.inactive){var ja,ka=[],la=D.isMultiselect&&ha.values,ma={};la?c.each(ha.values,function(a,b){ka.push(b)}):ha.value&&ka.push(ha.value),ka.length&&(c.each(ka,function(a,b){var d,f=b.substring(0,3),g=ma[f],h=B.getField(ha.field),i=h.referenceTo;g||(c.each(i,function(a,b){if(b.keyPrefix===f)return d=b.objectName,!1}),g=ma[f]={objectType:d,fields:[e.getNameField(d)],records:[]}),g.records.push(b)}),ja=a.data.get(ma),ja.isComplete?(c.each(ka,function(a,b){var c=b.substring(0,3),d=ja.data[c],e=!!d&&d[b],f=ma[c].fields[0];H.push({label:e?e.record[f]:"Invalid record",value:b,isSelected:!0})}),la||(G=!0)):(c.each(ka,function(a,b){H.push({label:"Loading...",value:b,isSelected:!0})}),la||(G=!0),c.when(ja.promise).done(function(){C.empty(),new b({element:C,xml:z,list:A})})))}}else{D.filterCondition=ha=new m;var na=z.attr("conditionoperator");na||(na=D.isMultiselect?"MULTIPICKLIST"===s.displaytype?"includes":"in":"="),ha.operator=na,ha.field=ga,ha.inactive=!0,ha.name=E,ha.encloseValueInQuotes=!0,ha.originalValue="",ha.value="",ha.originalInactive=!0,B.addCondition(ha)}D.affectedConditions[E]=ha}var oa;("true"===z.attr("createfilteroffoption")||ia)&&(oa=e.mergeAsText("global",z.attr("filteroffoptionlabel")||"",{createFields:!0,registerFields:!1}),D.isMultiselect||D.isReferenceFilter||(this.filterCondition&&this.filterCondition.value===this.filterCondition.originalValue&&(G=!0),this.filterCondition||(G=!0),H.push({label:oa,value:"__reset",affectDefaultCondition:!0,isSelected:G})));var pa=z.children("sources").first();if(!ia||pa.length&&pa.children().length||(pa.length||(pa=l("<sources/>")),pa.append(l('<source type="metadata"/>'))),pa.children().each(function(){var b,d=c(this),f=d.attr("effectsbehavior"),g={};if("defaultandothers"!==f&&"justothers"!==f||(b=d.children("effects").children(),b.length&&(g.effects=b)),"manual"===d.attr("type"))d.children("options").children().each(function(){var a,b,d=c(this);if("simple"===d.attr("type")&&D.filterCondition){var f=d.attr("value");void 0===f&&(f=""),b=da(f),a={label:e.mergeAsText("global",d.attr("label")||f||"",{createFields:!0,registerFields:!1}),value:e.mergeAsText("global",f||"",{createFields:!1,registerFields:!1}),isSelected:b,affectDefaultCondition:!0,source:g},b&&(G=!0)}else if("complex"===d.attr("type")){var h=d.children("effects").children();b=D.isSelectedFromEffects(h),a={label:e.mergeAsText("global",d.attr("label")||"",{createFields:!0,registerFields:!1}),effects:h,value:"",isSelected:b,source:g},b&&(G=!0)}a&&H.push(a)});else{var h="justothers"!==d.attr("effectsbehavior");if("model"===d.attr("type")){var i=a.$M(d.attr("model")),j=d.children("labeltemplate").text(),k=d.children("valuetemplate").text();i&&(g.model=i,c.each(i.data,function(a,b){var c=e.mergeAsText("row",j||"{{{"+e.getNameField(i.objectName)+"}}}",{createFields:!0,registerFields:!1},i,b),d=e.mergeAsText("row",k||"{{{Id}}}",{createFields:!1,registerFields:!1},i,b),f=da(d);H.push({label:c,value:d,isSelected:f,affectDefaultCondition:h,source:g,row:b}),f&&(G=!0)}))}else if("metadata"===d.attr("type")){if(D.filterCondition){var l=s,m=e.mergeAsText("model",d.attr("prefix")||"",{createFields:!0,registerFields:!1},B),n=e.mergeAsText("model",d.attr("suffix")||"",{createFields:!0,registerFields:!1},B),o={};if(c.each(H,function(a,b){o[b.value]=b}),l){var p=B.recordTypeInfos;l.picklistEntries&&l.picklistEntries.length?c.each(l.picklistEntries,function(a,b){var c=b.value,d=da(c),e=b.label?b.label:c;o[c]||H.push({label:m+e+n,value:c,isSelected:d,affectDefaultCondition:h,source:g}),d&&(G=!0)}):p&&p.length&&e.endsWith(l.id,"RecordTypeId")&&c.each(p,function(a,b){var c=b.recordTypeId;if(b.isAvailable&&(1===p.length||!b.isMaster)){var d=da(c);o[c]||H.push({label:m+b.name+n,value:c,isSelected:d,affectDefaultCondition:h,source:g}),d&&(G=!0)}})}}}else if("custom"===d.attr("type")){var q=d.attr("snippet");if(q){var r=a.snippet.get(q);r&&c.each(r({list:D,model:B}),function(a,b){var d=c("<div>").append(b.label?B.mergeModel(b.label):""),e=da(b.value);H.push({label:d.text(),value:b.value,isSelected:e,affectDefaultCondition:h,source:g}),e&&(G=!0)})}}}}),G||D.isMultiselect||D.isReferenceFilter||H.push({label:" - - - - ",value:"",isSelected:!0}),D.activateFilter=function(){D.isMultiselect||D.isReferenceFilter?(D.resetAffectedConditions(),D.isReferenceFilter?(c.each(D.affectedConditions,function(){this.values=[]}),H=c.map(C.actionAutocomplete("getSelectedItems"),function(a){return a.isSelected=!0,a.affectDefaultCondition=!0,a})):D.setOriginalValue(C.val()),H.length&&c.each(H,function(){this.isSelected?D.applyFilterForItem(this):D.unApplyFilterForItem(this)})):D.selectedItem&&(D.resetAffectedConditions(),D.applyFilterForItem(D.selectedItem),D.setOriginalValue(D.selectedItem))},D.isMultiselect&&!D.isReferenceFilter){var qa=!1,ra=c.map(H,function(a){if(a.isSelected)return qa=!0,a.value}).join(";"),sa=function(){var a=C.data("multiselect-newvalues"),b=C.data("multiselect-oldvalues");if(!1===B.hasChanged){var d={};a&&c.each(a.split(";"),function(){d[this]=1}),c.each(H,function(a,b){b.isSelected=b.value in d}),I?(b||(b="__reset"),D.setOriginalValue(b),D.list.showFilterActions()):(D.activateFilter(),D.executeFilter())}},ta=function(){D.restoreOriginalValue()};D.setOriginalValue(qa?ra:"__reset"),a.ui.renderers.MULTIPICKLIST.edit({position:{my:"right top",at:"right bottom"},element:C.addClass("nx-actionselect"),entries:H,value:ra,selectedText:s?s.label+": "+k("number_selected"):null,selectedList:p.selectedList||3,noneSelectedText:oa,onChange:function(a,b){C.data({"multiselect-newvalues":a,"multiselect-oldvalues":b}),I&&sa()},onClose:function(){0!==B.isProcessing||I||ta()},onCreate:function(){var a=c(this),b=a.multiselect("widget");I||b.append(c("<div>").addClass("ui-widget-footer ui-multiselect-footer ui-helper-clearfix").append(c("<div>").attr({role:"button",tabindex:0}).text(k("apply")).addClass("sk-timefilter-button").css("cursor","pointer").on("click "+n,function(b){"click"!==b.type&&b.which!==o.ENTER&&b.which!==o.SPACE||(sa(),a.multiselect("close"))}),c("<div>").attr({role:"button",tabindex:0}).text(k("cancel")).addClass("sk-timefilter-button-grey").css("cursor","pointer").on("click "+n,function(b){"click"!==b.type&&b.which!==o.ENTER&&b.which!==o.SPACE||(ta(),a.multiselect("close"))})))}}),a.events.subscribe("ui.reflow",D.multiSelectMaxWidth=function(){var a=C.find("div[type=button]").find("span").not(".ui-icon"),b=a.closest(".ui-multiselect"),c=C.find("div[type=button]").find(".nx-actionselect-arrow"),d=function(){var a=C.closest(".nx-panel-left");if(a.length||(a=C.closest(".nx-panel-right")),a.length>0)return a.width()}();d&&(b.css({"max-width":d-10+"px"}),a.css({"max-width":d-c.width()-10+"px","text-wrap":"none",overflow:"hidden","box-sizing":"border-box"}),C.css({"max-width":d+"px"}))}),C.find(".ui-multiselect").append('<div class="nx-actionselect-arrow"><div class="ui-icon ui-icon-triangle-1-s"/></div>')}else{var ua=function(a){if(!1===B.hasChanged){var b=D.selectedItem;D.selectedItem=a,I?(D.isReferenceFilter?(c.each(D.affectedConditions,function(){this.values=[]}),D.setOriginalValue(c.map(H,function(a){return a.value}).join(";")),H=c.map(C.list.items,function(a){return a.isSelected=!0,a.affectDefaultCondition=!0,a})):D.setOriginalValue(b),D.list.showFilterActions()):(D.activateFilter(),D.executeFilter())}},va=parseInt(z.attr("autocompthreshold"),10);if(s&&D.isReferenceFilter){var wa=z.children("conditions").children("condition").map(function(a,b){return new m(c(b))}).toArray();C.actionAutocomplete({refField:s,model:B,items:H,onItemSelect:ua,isMultiselect:D.isMultiselect,defaultOptionLabel:oa,additionalConditions:wa})}else if(H.length<(va||25)){var xa=z.attr("maxheight");C.actionSelect({items:H,onItemSelect:ua,maxHeight:xa})}else C.actionAutocomplete({model:B,items:H,onItemSelect:ua})}}else if("toggle"===F){var ya=z.children("effects").children(),za=D.isSelectedFromEffects(ya);za||C.addClass("disabled"),D.activateFilter=function(){if(!1===B.hasChanged&&D.selectedItem){var a=C.is(".disabled");D.resetAffectedConditions(),a?D.unApplyFilterForItem(D.selectedItem):D.applyFilterForItem(D.selectedItem),D.setOriginalValue(a)}},C.actionSelect({items:[{label:e.mergeAsText("model",z.attr("label")||"",{createFields:!0,registerFields:!1},B),effects:ya,value:"",isSelected:za}],onItemSelect:function(a){var b=C.is(".disabled");C.toggleClass("disabled"),D.selectedItem=a,I?(D.setOriginalValue(b),D.list.showFilterActions()):(D.activateFilter(),D.executeFilter())}})}else if("daterange"===F){if(L=z.attr("startcondition"),M=z.attr("endcondition"),L&&M&&"auto"!==z.attr("conditionsource"))N=B.getConditionByName(L,!0),O=B.getConditionByName(M,!0);else if(P=z.attr("conditionfield"),L="__autofilter__start__"+P,M="__autofilter__end__"+P,N=B.getConditionByName(L,!0),O=B.getConditionByName(M,!0),!N||!O){if(!P)return!1;N=new m,N.operator="gte",N.field=P,N.inactive=!0,N.name=L,N.encloseValueInQuotes=!1,O=new m,O.operator="lte",O.field=P,O.inactive=!0,O.name=M,O.encloseValueInQuotes=!1,B.addCondition(N),B.addCondition(O)}if(t=B.getField(N.field),u=B.getField(O.field),!t||!u)return!1;Q=t.displaytype,R=u.displaytype,N.inactive?S="":"DATETIME"===Q?(x=h(N.value),x=a.time.getLocalDateTime(x),S=i(x)):(x=g(N.value),S=N.value),O.inactive?T="":"DATETIME"===R?(y=h(O.value),y.setDate(y.getDate()-1),y=a.time.getLocalDateTime(y),T=i(y)):(y=g(O.value),T=O.value),ca=function(){Aa.datepicker("getDate")||Ba.datepicker("getDate")?_.css("display","block"):_.css("display","none")};var Aa=d.renderers.DATE.edit({value:S,onChange:ca}).addClass("sk-timefilter-input"),Ba=d.renderers.DATE.edit({value:T,onChange:ca}).addClass("sk-timefilter-input");C.addClass("nx-actionselect nx-conditiontoken"),U=c("<div>"),V=c("<div>").addClass("nx-actionselect-text").append(U),W=c("<div>").addClass("nx-actionselect-arrow").append(c("<div>").addClass("ui-icon ui-icon-triangle-1-s")),X=c("<div>").addClass("nx-actionselect-dropdown sk-timefilter-body").hide(),Y=c("<div>").text(k("start_date")).addClass("sk-timefilter-label"),Z=c("<div>").text(k("end_date")).addClass("sk-timefilter-label"),$=c("<div>"),_=c("<div>").addClass("sk-timefilter-clearfilter-button").text("Clear Filter"),_.click(function(){Aa.datepicker("setDate",null),Ba.datepicker("setDate",null),ca()}),I?(ba=c("<div>").text(k("done")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),$.append(ba)):(aa=c("<div>").text(k("cancel")).addClass("sk-timefilter-button-grey").attr({role:"button",tabindex:0}),ba=c("<div>").text(k("apply")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),$.append(ba,aa)),D.updateDisplayValue=function(b,c){var d,e=f.makeFormattedDateFromLocal,g=a.label.merge;return d=b&&c?e(b)+" - "+e(c):b&&!c?g(k("after_this"),e(b)):!b&&c?g(k("before_this"),e(c)):k("all_time"),U.text(d),b instanceof Date&&Aa.datepicker("setDate",b),c instanceof Date&&Ba.datepicker("setDate",c),ca(),D},D.updateDisplayValue(x,y),aa&&aa.click(function(){X.hide("fast")}),D.activateFilter=function(){var b,c,d=Aa.datepicker("getDate"),e=Ba.datepicker("getDate");if(d&&(b=i(d)),e&&(c=i(e)),b?("DATETIME"===Q&&(b=j(a.time.getRealJSDateTimeFromLocal(g(b)))),B.setCondition(N,b,D.affectCookies)):B.deactivateCondition(N,D.affectCookies),c){if("DATETIME"===R){var f=a.time.getRealJSDateTimeFromLocal(g(c));f.setDate(f.getDate()-0+1),c=j(f)}B.setCondition(O,c,D.affectCookies)}else B.deactivateCondition(O,D.affectCookies);D.setOriginalValue({start:d,end:e})},ba.on("click "+n,function(a){if("click"===a.type||a.which===o.ENTER||a.which===o.SPACE){var b=Aa.datepicker("getDate"),c=Ba.datepicker("getDate");I?D.list.showFilterActions():(D.activateFilter(),D.executeFilter()),D.updateDisplayValue(b,c),X.hide("fast")}}),X.append(Y,Aa,Z,Ba,_,$),C.addClass("nx-actionselect-haslabel").append(V,W,X),V.attr("tabindex",0),W.attr("tabindex",0),V.add(W).on("click "+n,function(a){"click"!==a.type&&a.which!==o.ENTER&&a.which!==o.SPACE||C.hasClass("unavailable")||(X.is(":visible")?X.toggle("fast"):(X.css("min-width",Math.max(C.width(),180)+"px"),X.show("fast")))}),X.on(n+" focusout",function(a){a.which===o.ESCAPE&&(X.toggle("fast"),V.trigger("focus"))})}else if("numericrange"===F){var Ca,Da=function(){var a,b,c,d,e;if(a=z.attr("startcondition"),c=z.attr("endcondition"),a&&c&&"auto"!==z.attr("conditionsource"))b=B.getConditionByName(a,!0),d=B.getConditionByName(c,!0);else if(e=z.attr("conditionfield"),a="__autofilter__nstart__"+e,c="__autofilter__nend__"+e,b=B.getConditionByName(a,!0),d=B.getConditionByName(c,!0),!b||!d){if(!e)return!1;b=new m({operator:"gte",field:e,inactive:!0,name:a,encloseValueInQuotes:!1}),d=new m({operator:"lte",field:e,inactive:!0,name:c,encloseValueInQuotes:!1}),B.addCondition(b),B.addCondition(d)}return[b,d]}();if(N=Da[0],O=Da[1],t=B.getField(N.field),u=B.getField(O.field),!t||!u)return!1;Ca=t.displaytype,S=N.inactive?"":N.value,T=O.inactive?"":O.value;var Ea=c("<input>").val(S).addClass("sk-timefilter-input"),Fa=c("<input>").val(T).addClass("sk-timefilter-input");Ea.on(n,fa),Fa.on(n,fa),ca=function(){Ea.val()||Fa.val()?_.css("display","block"):_.css("display","none")},C.addClass("nx-actionselect nx-conditiontoken"),U=c("<div>"),V=c("<div>").addClass("nx-actionselect-text").append(U),W=c("<div>").addClass("nx-actionselect-arrow").append(c("<div>").addClass("ui-icon ui-icon-triangle-1-s")),X=c("<div>").addClass("nx-actionselect-dropdown sk-timefilter-body").hide(),Y=c("<div>").text("Min. Value").addClass("sk-timefilter-label"),Z=c("<div>").text("Max. Value").addClass("sk-timefilter-label"),$=c("<div>"),_=c("<div>").addClass("sk-timefilter-clearfilter-button").text("Clear Filter"),_.click(function(){Ea.val(""),Fa.val(""),ca()}),I?(ba=c("<div>").text(k("done")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),$.append(ba)):(aa=c("<div>").text(k("cancel")).addClass("sk-timefilter-button-grey").attr({role:"button",tabindex:0}),ba=c("<div>").text(k("apply")).addClass("sk-timefilter-button").attr({role:"button",tabindex:0}),$.append(ba,aa)),D.updateDisplayValue=function(b,c){var d,e=a.label.merge;return b=ea(b,Ca),c=ea(c,Ca),d=b&&c?b+" - "+c:b&&!c?e(k("greater_than"),b):!b&&c?e(k("less_than"),c):k("all_values"),U.text(d),ca(),D},D.updateDisplayValue(S,T),aa&&aa.click(function(){X.hide("fast")}),D.activateFilter=function(){var a=Ea.val(),b=Fa.val();a?B.setCondition(N,a,D.affectCookies):B.deactivateCondition(N,D.affectCookies),b?B.setCondition(O,b,D.affectCookies):B.deactivateCondition(O,D.affectCookies),D.setOriginalValue({start:a,end:b})},ba.on("click "+n,function(a){if("click"===a.type||a.which===o.ENTER||a.which===o.SPACE){var b=Ea.val(),c=Fa.val();I?D.list.showFilterActions():(D.activateFilter(),D.executeFilter()),D.updateDisplayValue(b,c),X.hide("fast")}}),X.append(Y,Ea,Z,Fa,_,$),C.addClass("nx-actionselect-haslabel").append(V,W,X),V.attr("tabindex",0),W.attr("tabindex",0),V.add(W).on("click "+n,function(a){if(("click"===a.type||a.which===o.ENTER||a.which===o.SPACE)&&!C.hasClass("unavailable"))if(X.is(":visible"))X.toggle("fast");else{var b=Math.max(C.width(),180);X.css("min-width",b+"px").show("fast")}}),X.on(n+" focusout",function(a){a.which===o.ESCAPE&&(X.toggle("fast"),V.trigger("focus"))})}"toggle"===F||"auto"!==J&&"manual"!==J||(w=c("<div>").addClass("nx-actionselect-label"),"auto"===J?"daterange"===F?v=t.label:"numericrange"===F?v=t.label:s&&(v=s.label):"manual"===J&&(v=z.attr("label"))&&(v=e.mergeAsTextInContext(v,{model:B})),v&&(w.text(v),C.addClass("nx-actionselect-haslabel").prepend(w))),D.selectedItem||D.isMultiselect||(s&&D.isReferenceFilter?D.selectedItem=C.actionAutocomplete("getSelectedItem"):"daterange"===F?D.setOriginalValue({start:x,end:y}):"numericrange"===F?D.setOriginalValue({start:S,end:T}):D.selectedItem=C.actionSelect("getSelectedItem"))}var c=a.$,d=a.ui,e=a.utils,f=a.time,g=f.parseSFDate,h=f.parseSFDateTime,i=f.getSFDate,j=f.getSFDateTime,k=a.label.read,l=e.makeXMLDoc,m=a.model.Condition,n="keydown.action.skuid",o=a.$.ui.keyCode,p=a.constants.DISPLAY_TYPES,q=p.CURRENCY,r=p.PERCENT;c.extend(b.prototype,{setOriginalValue:function(a){void 0===this.element.data("originalValue")&&this.element.data("originalValue",a)},restoreOriginalValue:function(){var a=this,b=a.element,d=b.data("originalValue");if(a.isMultiselect&&!a.isReferenceFilter){if(b=b.find("select"),"__reset"===d)b.val("");else if(d){var e=d.split(";");c.each(b.children("option"),function(a,b){c(b).prop("selected",c.inArray(b.value,e)>-1)})}b.data("echMultiselect")&&b.multiselect("refresh")}else void 0!==d&&("toggle"===a.type?b.toggleClass("disabled",d):"daterange"===a.type?a.updateDisplayValue(d.start,d.end):a.isReferenceFilter?b.actionAutocomplete("resetItem",d):d&&"undefined"!=typeof d.value&&(a.element.is(".nx-actionautocomplete")?b.actionAutocomplete("resetItem",d.value):b.actionSelect("selectItem",d,{triggerHandlers:!1})))},isSelectedFromEffects:function(a){var b=this,d=!1;return a.each(function(){var a=c(this),f=b.affectedConditions[a.attr("condition")];if(f)if("deactivate"===a.attr("action")){if(!f.inactive)return d=!1,!1}else if("set"===a.attr("action")){var g=e.mergeAsText("global",a.attr("value")||"",{createFields:!0,registerFields:!1});if(g!==f.value||f.inactive)return d=!1,!1}else if("activate"===a.attr("action")&&f.inactive)return d=!1,!1;d=!0}),d},resetAffectedConditions:function(){var a=this;c.each(a.affectedConditions,function(){a.model.resetCondition(this,a.affectCookies)})},applyFilterForItem:function(a){var b,d=this,f=d.model,g=[],h=a.effects,i=a.source,j=i&&i.effects,k=a.affectDefaultCondition;if(h&&h.length&&c.each(h,function(){g.push(this)}),j&&j.length&&c.each(j,function(){g.push(this)}),b=g&&g.length,b&&c.each(g,function(){var b=c(this),g=d.affectedConditions[b.attr("condition")];if(g)if("deactivate"===b.attr("action"))f.deactivateCondition(g,d.affectCookies);else if("set"===b.attr("action")){var h,j={};a.row&&(j.row=a.row),i&&i.model&&(j.model=i.model),b.attr("value")?h=b.attr("value"):a.value&&(h=a.value),h=e.mergeAsTextInContext(h,j,{createFields:!1,registerFields:!1}),f.setCondition(g,h,d.affectCookies)}else"activate"===b.attr("action")&&f.activateCondition(g,d.affectCookies)}),k&&"undefined"!=typeof a.value&&d.filterCondition)if("__reset"===a.value)f.resetCondition(d.filterCondition,d.affectCookies);else{var l,m=e.mergeAsText("global",a.value||"",{createFields:!1,registerFields:!1}),n=d.filterCondition.operator;d.isMultiselect?(l=d.filterCondition.values,l?(e.isString(l)&&(l=l.split(";")),-1===c.inArray(m,l)&&l.push(m)):l||(l=[m]),e.isMultiValueOperator(n)||("="===n?n="in":"!="===n&&(n="not in"),d.filterCondition.operator=n)):l=m,f.setCondition(d.filterCondition,l,d.affectCookies)}},unApplyFilterForItem:function(a){var b,d=this,f=d.model,g=[],h=a.effects,i=a.source,j=i&&i.effects,k=a.affectDefaultCondition;if(h&&h.length&&c.each(h,function(){g.push(this)}),j&&j.length&&c.each(j,function(){g.push(this)}),b=g&&g.length,b&&c.each(g,function(){var a=c(this),b=d.affectedConditions[a.attr("condition")];b&&("deactivate"===a.attr("action")?f.activateCondition(b,d.affectCookies):f.deactivateCondition(b,d.affectCookies))}),k&&"undefined"!=typeof a.value&&d.filterCondition)if("__reset"===a.value){var l=e.mergeAsText("global",a.value||"",{createFields:!1,registerFields:!1});f.setCondition(d.filterCondition,l,d.affectCookies)}else if(d.isMultiselect){var m=d.filterCondition.values,n=c.inArray(a.value,m);n>-1&&(m.splice(n,1),f.setCondition(d.filterCondition,m,d.affectCookies))}else f.resetCondition(d.filterCondition,d.affectCookies)},executeFilter:function(){var a,b=this,c=b.list,d=c.searchBox;d&&(a=d.val()),"remove"!==c.options.emptySearchBehavior||a?c.updateData({message:k("applying_filter"),failmessage:k("filter_could_not_be_applied"),showerror:!0}):c.model.abandonAllRows()}}),d.Filter=b}(skuid),function(a){var b=a.$,c=a.utils,d=c.mergeAsDataInContext,e=c.makeXMLDoc,f=a.$M,g=a.actions={},h=a.interactions={},i={},j={},k={swipe:"drag",swipeleft:"dragleft",swiperight:"dragright",swipeup:"dragup",swipedown:"dragdown"},l=g.register=function(a){b.extend(i,a)},m=c.getContextToUse,n=function(a,c,d,e){var g=c.attr("model"),h=g?f(g):null,i="all"===c.attr("affectedrows")?"model":"row",j=m(d,e,{mode:i}),k=j.row,l=j.list,n=!!l&&b.map(l.getSelectedItems(),function(a){return a.row});k&&h&&h.getRowById(h.getRowId(k))?h[a]([k]):n&&n.length&&h&&l&&l.model===h?h[a](n):h&&h.data.length&&h[a](h.data)},o=c.isPromise;h.register=function(a){b.each(a,function(){j[this]=1})},h.processInteractionsNode=function(a,c,d){a.children().each(function(){h.processInteractionNode(b(this),c,d)})},h.processInteractionNode=function(a,c,d){if(!a||!a.children)return!1;var e=a.attr("type"),f=a.children("actions").first();if(e in j==!1)return!1;d&&d.selector?c.element.on(e,d.selector,function(a){var d=b(this),e=d&&d.data?d.data("component"):null;e||(e=c),g.runActionsNode(f,e),a&&a.gesture&&a.gesture.preventDefault()}):(c.element.on(e,function(a){g.runActionsNode(f,c),a&&a.gesture&&a.gesture.preventDefault()}),k[e]&&c.element.on(k[e],function(a){a.gesture.stopPropagation(),a.gesture.preventDefault()}))},h.runInteractionsNode=function(c,d,f,g){var h=e("<actions></actions>");f=f.length?f:[f],c.clone().children("interaction").each(function(a,c){c=b(c);var d=c.attr("type")+("swipe"==c.attr("type")?c.attr("direction"):"");f.indexOf(d)>-1&&h.append(c.children())}),a.actions.runActionsNode(h,d,{model:g.model,item:g.item,row:g.row,list:g.list,initiatorId:g.initiatorId})},h.enableInteractions=function(b,c){function d(d,g){function h(b){e?(c.validGestures=g,c.eventName=d,c.event=b,c.item=this,e(c)):a.interactions.runInteractionsNode(c.interactionsDef,c.component,g,f),b.stopPropagation()}function i(){b.off("click.skuid"),b.hammer({}),b.on(d,h)}("tap"==g||g.indexOf("tap")>-1)&&b.on("click.skuid",h),a.ui.hammerJSLoaded?i():a.events.subscribeOnce("skuid.resources.hammerjsloaded",i)}var e=c.customInteractionsEvaluator,f=c.context||{};d("tap.skuid","tap"),d("swipeleft.skuid",["swipeleft","swipeeither"]),d("swiperight.skuid",["swiperight","swipeeither"]),d("press.skuid","press")},h.disableInteractions=function(a){a.off("tap.skuid click.skuid swipeleft.skuid swiperight.skuid press.skuid")},g.runActionsNode=function(c,d,e){var f,h=b.Deferred(),i="true"===c.attr("continuesequenceonerror"),j=c.children(),k=j.length,l=0,m=function(c){if(l===k)return a.mobile&&a.mobile.processResponsiveElements(),void h.resolve(c);f=j.eq(l++);var e=g.runActionNode(f,d,c),i=f.children("iftrueactions").children(),p=function(a){var b=f.children("onerroractions").children();b.length?(j=b,k=b.length,l=0,f=null,m(a)):n(a)};if(i.length)!0===e?(j=i,k=i.length,l=0,f=null,m(c)):m(e?b.extend(c,e):c);else if(!1===e)p(c);else if(e&&(e.deferred&&o(e.deferred)||o(e))){var q=e.deferred?e.deferred:e;q.then(function(a){m(b.extend(c,a))},function(a){p(b.extend(c,a))})}else m(e?b.extend(c,e):c)},n=function(b){i?m(b):(a.mobile&&a.mobile.processResponsiveElements(),h.reject(b))};return k?m(e):h.resolve(),d&&d.xmlDefinition&&d.xmlDefinition.attr("buttonset")&&(b(".sm-buttonset-"+d.xmlDefinition.attr("buttonset")).removeClass("sm-active"),d.element.addClass("sm-active")),h.promise()},g.runActionNode=function(b,c,d){var e,f,g,h=b.attr("type");if(h&&(h in i?e=i[h]:c&&c.type()&&(f=a.componentType.get(c.type()),(g=f.actions)&&h in g&&(e=g[h])),e))return e(b,c,d)},g.registerEditorWithModelsForActionsNode=function(a,c){var d=a.find('action[type="save"], action[type="requeryModel"], action[type="requeryModels"]');d.length&&d.each(function(){var a=b(this);"requeryModel"===a.attr("type")?c.registerModel(f(a.attr("model"))):a.children("models").children().each(function(){c.registerModel(f(b(this).text()))})})};var p={branch:function(b,d,e){var f,g=b.attr("model"),h=m(d,e);return g&&(f=a.$M(g))&&(h.model=f,h.model===f&&-1===f.data.indexOf(h.row)&&(h.row=f.getFirstRow())),c.mergeInContext(b.children("formula").text(),h,{evaluateFormulas:!0,outputType:"BOOLEAN",asData:!0,createFields:!1})},blockUI:function(a,d,e){var f={},g=a.attr("message"),h=a.attr("timeout");g&&(f.message=c.mergeInContext(g,m(d,e),{createFields:!0,registerFields:!1,nl2br:!0})),h&&(f.timeout=parseInt(h,10)),b.blockUI(f)},unblockUI:function(){b.unblockUI()},deactivateFilterableConditions:function(a){var c=a.children("models").first();b.each(c.children("model"),function(){f(b(this).text()).deactivateFilterableConditions()})},save:function(c,d,e){var g=[],h=c.children("models").first(),i=c.attr("model"),j="true"===c.attr("rollbackonanyerror"),k=b.Deferred(),l=e?e.initiatorId:null,m={rollbackOnAnyError:j};if(l&&(m.initiatorId=l),h.length)b.each(h.children("model"),function(){var a=f(b(this).text());a&&g.push(a)});else if(i&&f(i)){var n=f(i);g.push(n)}return d&&d.button&&d.button.startProcessing(),b.when(a.model.save(g,m)).then(function(a){a.totalsuccess?k.resolve(a):k.reject(a),d&&d.button&&d.button.stopProcessing()},function(a){k.reject(a),d&&d.button&&d.button.stopProcessing()}),k.promise()},cancel:function(c){var d=[],e=c.children("models").first(),g=c.attr("model");e.length?b.each(e.children("model"),function(){var a=f(b(this).text());a&&d.push(a)}):g&&f(g)&&d.push(f(g)),a.model.cancel(d)},markRowsForDeletion:function(a,b,c){n("deleteRows",a,b,c)},unmarkRowsForDeletion:function(a,b,c){n("undeleteRows",a,b,c)},unmarkAllRowsForDeletion:function(a){var c=a.children("models").first();c.length&&b.each(c.children("model"),function(){var a=f(b(this).text());a&&a.undeleteRows()})},createRow:function(a,c,e){var g=a.attr("model"),h=f(g),i="all"===a.attr("affectedrows")?"model":"row",j=m(c,e,{mode:i}),k=j.model,l=j.row,n=j.list,o=j.editor,p=j.rows,q={},r="append"===a.attr("appendorprepend"),s="edit"===a.attr("defaultmodefornewitems"),t=a.children("defaults").first().children();if(h){var u=function(a,c){var e=[],f={createFields:!1,registerFields:!1},g={row:a,model:c},i=n?n.conditions:null,j=o?o.conditions:null;return o&&j&&j.length&&o.models&&b.inArray(c,o.models)>-1?b.each(j,function(){e.push(this)}):n&&i&&i.length&&n.model===h&&b.each(i,function(){e.push(this)}),t&&t.length&&t.each(function(){var a=b(this),c=a.attr("field"),h=a.attr("value"),i=d(h,g,f);e.push({field:c,value:i})}),h.createRow({additionalConditions:e,doAppend:r,editModeForNewItems:s})},v=[];return l?v.push(u(l,k)):p&&p.length?b.each(p,function(a,b){v.push(u(b,k))}):v.push(u(null,k)),v.length&&(1===v.length?q.row=v[0]:q.rows=v),q}},adoptRows:function(a,b,c){var d,e,g=a.attr("sourcemodel"),h=a.attr("targetmodel"),i="all"===a.attr("affectedrows")?"model":"row",j=m(b,c,{mode:i}),k=j.list,l=j.rows,n=j.row;g&&(d=f(g)),h&&(e=f(h)),d&&e&&d.data&&d.data.length&&(n&&d.getRowById(d.getRowId(n))?e.adoptRows([n]):l&&l.length&&k&&k.model===d?e.adoptRows(l):e.adoptRows(d.data))},updateRow:function(a,e,g){var h,i,j,k,l=a.attr("fieldmodel"),n=a.attr("field"),o=a.attr("value"),p="all"===a.attr("affectedrows")?"model":"row",q=m(e,g,{mode:p}),r=q.list,s=q.rows,t=q.model,u=q.row;l&&(h=f(l)),!t&&r&&(t=r.model),h&&(i=h.getField(n))&&(j=i.displaytype);var v=function(a,e){var g,h,i,k={};if("REFERENCE"===j){h=c.getReferenceFieldRelationshipName(n);var l,m,p=c.extractFieldsFromTemplate(o);if(p&&1===p.length)if(l=p[0],c.startsWith(l,"$Model.")&&c.contains(l,".data.")){m=l.split(".");var r,s=m[1],t=parseInt(m[3],10),u=l.indexOf("."+m[3]+".")+2+m[3].length,v=l.substring(u,l.length),w=f(s);w&&(r=w.data[t])&&(i=v===w.getIdField()?r:w.getFieldValue(r,c.getReferenceFieldRelationshipName(v),!0))}else i=l===e.getIdField()?a:e.getFieldValue(a,c.getReferenceFieldRelationshipName(l),!0)}return o?(g=d(o,b.extend(q,{model:e,row:a}),{createFields:!1,registerFields:!1}),"BOOLEAN"===j&&("false"===g?g=!1:"true"===g&&(g=!0))):j&&-1!==b.inArray(j,["BOOLEAN","DATE","DATETIME"])?"BOOLEAN"===j&&(g=!1):g="",k[n]=g,h&&i&&(k[h]=i),k};h&&(u&&h.getRowById(h.getRowId(u))?h.updateRow(u,v(u,t)):s&&s.length&&r&&r.model===h?(k={},b.each(s,function(a,b){k[r.model.getRowId(b)]=v(b,r.model)}),c.size(k)&&h.updateRows(k)):(k={},b.each(h.data,function(a,b){k[h.getRowId(b)]=u?v(u,t):v(b,h)}),c.size(k)&&h.updateRows(k)))},requeryModel:function(a,c,d){var e=a.attr("model"),g=b.Deferred();if(e){var h=f(e);if(h){c&&c.button&&c.button.startProcessing(),h.hasChanged&&h.cancel();var i="loadmore"!==a.attr("behavior")?"updateData":"getMoreData";b.when(h[i](undefined,d)).then(function(a){g.resolve(a),c&&c.button&&c.button.stopProcessing()},function(a){g.reject(a),c&&c.button&&c.button.stopProcessing()})}}return g.promise()},requeryModels:function(c,d,e){var g=[],h=c.children("models").first(),i=b.Deferred();h.length&&b.each(h.children("model"),function(){var a=f(b(this).text());a&&g.push(a)}),d&&d.button&&d.button.startProcessing(),
b.each(g,function(){this.hasChanged&&this.cancel()});var j="loadmore"!==c.attr("behavior")?"updateData":"getMoreData";return b.when(a.model[j](g,undefined,e)).then(function(a){i.resolve(a),d&&d.button&&d.button.stopProcessing()},function(a){i.reject(a),d&&d.button&&d.button.stopProcessing()}),i.promise()},emptyModelData:function(a){var c=a.children("models").first();c.length&&b.each(c.children("model"),function(){var a=f(b(this).text());a&&a.emptyData()})},abandonRows:function(a,b,c){var d,e=a.attr("model"),g="all"===a.attr("affectedrows")?"model":"row",h=m(b,c,{mode:g}),i=h.list,j=h.rows,k=h.row;e&&(d=f(e)),d&&d.data&&d.data.length&&(k&&d.getRowById(d.getRowId(k))?d.abandonRows([k]):j&&j.length&&i&&i.model===d?d.abandonRows(j):d.emptyData())},redirect:function(a,d,e){c.redirect(b.extend(m(d,e),{url:a.attr("url"),window:a.attr("window")}))},pageredirect:function(d,e,f){var g={},h=d.attr("page"),i=d.attr("route");b.each(d.children("params").children(),function(a,d){var e=b(d);g[e.attr("key")]=c.mergeAsTextInContext(e.attr("value"),f,{createFields:!1,registerFields:!1})}),(h||i)&&a.loader.load({isReplace:!0,pageName:h,parameters:g,routeName:i})},custom:function(c,d,e){var f,g,h=a.snippet.get(c.attr("snippet"));if(h){if(f=m(d,e),b.extend(f,{component:d,context:e}),!1===(g=h(f)))return!1;if(g&&"object"==typeof g)return g}},"sfdc-custom-apex":function(a,b,c){return a.attr("actionname","apex"),p["datasource-action"](a,b,c)},"datasource-action":function(c,d,e){var f=c.attr("datasource"),g=a.dataSource.get(f),h=c.attr("actionname");return g?g.runAction(h,c,d,e):b.Deferred().reject("Invalid Data Source Name for action: "+h).promise()},publish:function(b,c){a.events.publish(b.attr("event"),[c])},setCondition:function(a,e,g){var h=f(a.attr("model"));if(!h)return!1;var i=h.getConditionByName(a.attr("condition"),!0);if(!i)return!1;var j,k=m(e,g),l=k.model,n=k.row,o=k.rows,p=a.attr("value");!l&&e&&e.model&&(l=e.model),l||(l=h),!n&&o&&o.length&&(n=o[0]),n||(e&&e.row&&!c.isFunction(n)&&(n=e.row),!n&&l&&(n=l.getFirstRow()));var q=b.extend({},k,{row:n,model:l});j=d(p,q,{createFields:!1,registerFields:!1}),h.setCondition(i,j)},deactivateCondition:function(a){var b=f(a.attr("model"));if(!b)return!1;var c=b.getConditionByName(a.attr("condition"));c&&b.deactivateCondition(c)},activateCondition:function(a){var b=f(a.attr("model"));if(!b)return!1;var c=b.getConditionByName(a.attr("condition"));c&&b.activateCondition(c)},updateIncludePanel:function(c,d,e){var f=a.component.getById(c.attr("panelid")),g=c.attr("pagename"),h=c.attr("querystring"),i=c.attr("module"),j=e.model,k=e.row,l=b.Deferred();return f?(f.pagename=a.utils.mergeAsText("row",g,{createFields:!1,registerFields:!1},j,k),f.includeType="skuid",i&&(f.modulename=i),f.querystring=h?"?"+a.utils.mergeAsText("row",h,{createFields:!1,registerFields:!1},j,k):"?"+c.attr("parameter")+"="+k.Id,f.load(l.resolve)):l.resolve(),l.promise()}};l(p)}(skuid),function(a){function b(){return j||(j=l(document)),j}function c(a){var b=a.bindString;(k[b]||(k[b]={}))[a.componentId]=a}function d(a){l.each(k,function(b,c){c&&a in c&&delete c[a]})}function e(a){return k[a]}function f(a,d,e,f,g){var h;a&&a.children?(h=[],l.each(a.children(),function(){var a=l(this);h.push({key:a.attr("key"),ignoreTextInputs:"true"===a.attr("ignoretextinputs"),modifiers:a.attr("modifiers")})})):h=l.isArray(a)?a:[a],h&&h.length&&(g||(g=b()),h.forEach(function(a){var b,h,i,j,n;m.isString(a)?(h=!1,i=a):(b=a.modifiers,h=!0===a.ignoreTextInputs,i=(b?b.replace(",","+")+"+":"")+a.key),j={componentId:d,bindString:i,visibleElement:f,actionFunction:e},c(j),n="keydown.skuid"+(d?"."+d:""),g.on(n,null,{keys:i,filterTextInputs:h},function(a){if((!h||"true"!==l(a.target).attr("contenteditable"))&&f&&f.is(":visible")&&e){var b,c=k[i],d=j;c&&m.size(c)>1&&(b=function(a){var b,c=a.visibleElement,d=-1;return c&&c.length?(b=c&&c.closest&&c.closest(".ui-dialog-content"),b.length?d=b.zIndex():c.closest("body").length||(d=-2)):d=-2,a.zIndex=d,d},b(j),l.each(c,function(a,c){d.componentId!==a&&c!==d&&c.actionFunction&&b(c)>d.zIndex&&(d=c)})),a.preventDefault(),a.stopImmediatePropagation(),d.actionFunction()}})}))}function g(a,b,c,d,e){f(b,c,d,e,a)}function h(){var a,c;2===arguments.length?(a=arguments[0],c=arguments[1]):(c=arguments[0],a=b()),a.off("keydown.skuid"+(c?"."+c:"")),d(c)}function i(a){h(a)}var j,k={},l=a.$,m=a.utils;a.hotkeys={bind:f,getFromCache:e,off:h,on:g,unbind:i}}(skuid),function(){function a(a,b,c){c=c||{};var d=b.list,f=d.model,g=d.editor,i=c.postSelectFunction;if(a&&a.length){var j=[],k=2,l={numMassDeletes:0,numMassUpdates:0,numMassEdits:0};a.children().each(function(){var a,c,m=e(this),n=m.attr("type"),o=m.attr("label"),p=m.attr("icon"),q=g._GUID+"_ma_"+k++,r=m.children("renderconditions");o||(o=h("massupdate"===n?"mass_update_selected_rows":"massedit"===n?"toggle_edit_mode_on_selected_rows":"massdelete"===n?"toggle_selected_rows_for_deletion":"action")),p||(p="massupdate"===n?"sk-icon-table-edit":"massedit"===n?"sk-icon-pencil":"massdelete"===n?"sk-icon-delete":"sk-icon-magic"),o=m._label=e("<div>").append(f.mergeModel(o)),c={label:o.text(),value:q,icon:p},a=skuid.actions._actionFunctions.getMassFunction(m,b,{label:o,tracker:l}),a&&skuid.hotkeys.bind(m.children("hotkeys").first(),q,function(){d.getSelectedItems().length&&a()},g.element),c.onSelect=function(){a&&a(),i&&i()},r.length&&r.children().length&&(c.renderConditionsXML=r),j.push(c)}),g.header.prepend(e("<div>").actionSelect({items:j,type:"button",uniqueId:a.attr("uniqueid")}).addClass("nx-actionbutton nx-massactions").css("display","none"))}}function b(a,b,c){var d,i=a.attr("type"),j=b.list,k=c.label,l=c.tracker||{},m=j.mode,n=j.model;switch(i){case"massupdate":n.updateable&&"readonly"!==m&&l.numMassUpdates++<1&&(d=function(){var a,c=e("<div>").addClass("nx-basicfieldeditor nx-editor-contents"),d="MassUpdateForTable_"+b._GUID+"_"+(new Date).getTime(),i=new skuid.model.Model({dataSource:n.dataSource,data:[],fields:n.fields,conditions:n.conditions,objectName:n.objectName,createRowIfNoneFound:!1,id:d,doClone:!1}),k=[],l={},m=0,o=0,p=!1,q=!1,r=e.map(j.getSelectedItems(),function(a){return a.row}),s={},t=n.recordTypeInfos;if(e.each(r,function(a,b){!b.RecordTypeId||b.RecordTypeId in s||(s[b.RecordTypeId]=1),n.isRowNew(b)?m++:o++}),!g.size(s)&&t&&t.length){var u=e.map(t,function(a){return{RecordTypeId:a.recordTypeId,RecordType:{Name:a.name}}}),v=[];e.each(n.conditions,function(a,b){!1===b.inactive&&e.inArray(b.field,["RecordTypeId","RecordType.Name"])>-1&&v.push(b)}),v.length&&e.each(g.filterRowsByConditions(u,v),function(){this.RecordTypeId in s||(s[this.RecordTypeId]=1)})}l.ValidRecordTypeIds=e.map(Object.keys(s),function(a){return a}),m>0&&(p=!0),o>0&&(q=!0),i.initialize(),a=i.createRow({ignoreDefaults:!0}),i.updateRow=function(a,b,c,d){return!1===g.isString(b)?skuid.model.Model.prototype.updateRow.call(i,a,b,e.extend(c,{_ignoreMetadata:!0})):skuid.model.Model.prototype.updateRow.call(i,a,b,c,e.extend(d,{_ignoreMetadata:!0}))};for(var w,x,y=j.editor.element,z=0;z<y._fieldsDefs.length;z++)w=e(y._fieldsDefs[z]),x=y._columnSettingsByUID[w.attr("uniqueid")],!1!==x.hidden||x.userHidden||x.disabled||function(b){var d,h,j,m,o,r,s=b.attr("id"),t=n.getField(s),u=!!q&&t.editable,v=!!p&&t.createable,w=s&&t&&(u||v)&&"true"!==b.attr("readonly"),x=b.attr("type");if("COMBO"!==x&&"CHILDREL"!==x||(w=!1),!w)return!0;d=b.children("label").first(),h=d.length?d.text():t&&t.label||"",j=e("<div>").addClass("nx-basicfieldeditor-item nx-pagebuilder-property-item"),m=e("<div>").addClass("nx-basicfieldeditor-item-label").text(g.mergeAsText("model",h,{createFields:!1},n)),j.append(m),o=e.extend(f.getFieldOptionsFromXML(b,{mode:"edit",model:n}),{label:h,register:!1,editable:!0}),r=new f.Field(a,i,!1,o),r.required=!1,r.item=l,r.render(),k.push(r),j.append(r.element),c.append(j)}(w);c.dialog({autoOpen:!0,title:h("mass_update_selected_rows"),resizable:!0,width:550,modal:!0,buttons:[{text:h("apply"),click:function(){var b=j.getSelectedItems(),c={};if(e.each(a,function(a,b){"Id"!==a&&"Id15"!==a&&(c[a]=b)}),g.size(c)>0){var f={},h={};e.each(b,function(){f[this.row.Id]={}}),e.each(c,function(c,d){var g=n.getField(c);if(e.each(b,function(a,b){var e=n.getRowId(b.row);g&&(n.isNewRow(b.row)?g.createable:g.editable)&&(f[e][c]=d)}),h[c]=1,g&&g.displaytype&&"REFERENCE"===g.displaytype){h[g.rel]=1;var j=i.getFieldValue(a,g.rel,!0);e.each(b,function(a,b){var c=b.row,d=n.getRowId(c);(n.isRowNew(c)?g.createable:g.editable)&&(f[d][g.rel]=j)})}}),n.updateRows(f,{initiatorId:d})}e(this).dialog("destroy")}},{text:h("cancel"),click:function(){e(this).dialog("destroy")}}]})});break;case"massedit":n.updateable&&"readonly"!==m&&l.numMassEdits++<1&&(d=function(){e.each(j.getSelectedItems(),function(){this.toggleEdit()})});break;case"massdelete":n.deleteable&&"readonly"!==m&&l.numMassDeletes++<1&&(d=function(){var a=j.getSelectedItems(),b=[],c=0,d="deleteRows";a.length&&(e.each(a,function(a,d){d.deleted&&c++,b.push(d.row)}),c===a.length&&(d="un"+d),n[d](b,{initiatorId:j._GUID}))});break;case"redirect":d=function(){g.redirect({list:j,model:n,url:a.attr("url"),window:a.attr("window"),title:k.text()})};break;case"custom":d=function(){var b=skuid.snippet.getSnippet(a.attr("snippet"));b&&b({model:n,list:j,action:a})};break;case"popup":d=function(){g.createPopupFromAction(a,{model:n,list:j,selectedItems:j.getSelectedItems(),component:b,rows:e.map(j.getSelectedItems(),function(a){return a.row})})};break;case"multi":d=function(){var c={model:n,list:j,initiatorId:j.editor._GUID},d=e.map(j.getSelectedItems(),function(a){return a.row});d.length&&(c.rows=d),skuid.actions.runActionsNode(a.children("actions").first(),b,c)}}return d}function c(a,b,c){c=c||{};var d=b.list,f=d.model,g=d.editor,i=c.itemClass;if(a&&a.length&&a.children().length){var l=[],m=2,n=k(a,f);n&&l.push(n),a.children().each(function(){var a,c=e(this),d=c.attr("type"),k=j(c.attr("label")||("createrow"==d?skuid.label.merge(h("add_new"),f.label):""),{model:f}),n=g._GUID+"_"+m++,o={label:k,value:n,icon:j(c.attr("icon")||("createrow"==d?"sk-icon-add":""),{model:f},{createFields:!1})},p=c.children("renderconditions");a=skuid.actions._actionFunctions.getGlobalFunction(this,b,{component:b,itemClass:i}),o.onSelect=function(){a&&a()},p.length&&p.children().length&&(o.renderConditionsXML=p),a&&skuid.hotkeys.bind(c.children("hotkeys").first(),n,a,g.element),l.push(o)}),g.header.append(e("<div>").actionSelect({items:l,type:"button",uniqueId:a.attr("uniqueid")}).addClass("nx-actionbutton"))}}function d(a,b,c){var d,f=c.itemClass||"",i=b.list,k=i.model,l=i.editor,m=e(a),n=m.attr("type"),o=j(m.attr("label")||("createrow"==n?skuid.label.merge(h("add_new"),k.label):""),{model:k});switch(n){case"redirect":d=function(){g.redirect({model:k,url:m.attr("url"),window:m.attr("window"),title:o})};break;case"createrow":d=function(){var a=i.newItem(k.createRow({initiatorId:i._GUID,doAppend:"append"==m.attr("appendorprepend"),additionalConditions:i.conditions}),{editModeForNewItems:!0});i.render({resetPagination:!0,refreshFields:!1});var b=a.element.find(":input:not(."+f+")").first();b&&b.focus()};break;case"custom":d=function(){var a=skuid.snippet.getSnippet(m.attr("snippet"));a&&a({model:k,list:i,component:b})};break;case"popup":d=function(){g.createPopupFromAction(m,{model:k,list:i,component:b})};break;case"multi":d=function(){skuid.actions.runActionsNode(m.children("actions").first(),b,{model:k,list:i,initiatorId:l._GUID})}}return d}var e=skuid.$,f=skuid.ui,g=skuid.utils,h=skuid.label.read,i=skuid.actions._actionFunctions={},j=g.mergeAsTextInContext,k=function(a,b){if("false"===a.attr("usefirstitemasdefault")){var c=a.attr("defaultlabel"),d=a.attr("defaulticon");return c&&(c=e("<div>").append(b.mergeModel(c))),{label:c?c.text():h("actions"),value:"__default",icon:d||"sk-icon-config",isSelected:!0}}return!1};e.extend(i,{getMassFunction:b,getGlobalFunction:d,initiateMassActions:a,initiateGlobalActions:c})}(skuid),function(a){function b(b){function c(){return t}function g(a){a||(a={});var b=a.itemId,c=h({namespace:a.namespace,type:a.type,id:b});return{getSettings:function(){return d(i({key:c})||{})},updateSettings:function(a,b){return n(e.extend(b,{key:c,settings:a}))},deleteSetting:function(a){if("string"==typeof a){var b={};b[a]=null,n({key:c,settings:b,removeNulls:!0,createNodes:!1})}}}}function h(a){a||(a={});var b=[];return a.id&&(a.namespace&&b.push(a.namespace),a.type&&b.push(a.type),b.push(a.id)),b}function i(a){var b=a&&a.key;if(!e.isArray(b)||0===b.length)return null;var c,d,f=p;for(c=0;c<b.length;c++){if(d=b[c],!f[d]){if(!0!==a.createNodes)return null;f[d]={}}f=f[d]}return f}function j(a,b){var c={};return k(b,c,"personalMerge-"),e.extend(!0,a,b),l(a,c),a}function k(b,c,d){var e=Object.keys(b);if(e.length>0)for(var f=e.length-1;f>=0;f--){var g=e[f],h=Object.prototype.toString.call(b[g]);if("[object Array]"===h){var i=d+a.utils.generateGUID();c[i]=b[g],b[g]=i}else"[object Object]"===h&&k(b[g],c)}}function l(a,b){var c=Object.keys(a);if(c.length>0)for(var d=c.length-1;d>=0;d--){var e=c[d],f=Object.prototype.toString.call(a[e]);"[object Object]"===f?l(a[e],b):b[a[e]]&&(a[e]=b[a[e]])}}function m(a){var b,c;c=[];for(b in a)c.push(b);e.each(c,function(b,c){"undefined"==typeof a[c]||null===a[c]?delete a[c]:"object"==typeof a[c]&&m(a[c])})}function n(a){var b=a.settings,c=e.isEmptyObject(b),f=a&&a.hasOwnProperty("createNodes")?a.createNodes:!c,g=i(e.extend(a,{createNodes:f})),h=a&&a.deferUpdate;return g?"object"!=typeof b?(new e.Deferred).resolve():(b=d(b),!1!==a.deepMerge?g=j(g,b):e.extend(g,b),!0===a.removeNulls&&m(g),!0===h?(new e.Deferred).resolve():o()):(new e.Deferred).resolve()}function o(){if(q&&"pending"===q.state())return r||(r=new e.Deferred),s=!0,r.promise();q=r||new e.Deferred,r=null,p.m===undefined&&(p.m={}),"client"===t&&(p.m.lastModifiedDate=Date.now());var b=JSON.stringify(p);if("server"===t)a.remote().updatePersonalizationSettings(u,b,function(a,b){b.status?q.resolve():q.reject(b),!0===s&&(s=!1,o())});else{var c=JSON.stringify({m:p.m}),d=JSON.stringify({c:p.c,z:p.z});e.cookie(v,c,{secure:!0,path:"/"}),f.sessionStorage(w,d),q.resolve()}return q.promise()}var p,q,r,s,t,u=b.pageId,v="apex__sk-pf-"+u,w="sk-pf-"+u;return function(a){var b,c;t=a.mode||"server","client"===t?(!0===a.isModelCookieObsolete?(e.removeCookie(v),b={}):b=JSON.parse(e.cookie(v)||"{}"),c=JSON.parse(f.sessionStorage(w)||"{}"),p=e.extend({},b,c)):p=e.extend({},a.pageSettings||{})}(b),{_createService:g,_savePageSettings:o,_getMode:c,_getPageSettings:function(){return d(p)}}}function c(c){c||(c={});var d=c.getParentPage&&c.getParentPage(),e=d&&d._pageRecord,f=e&&e.Id||c.getParentPageId&&c.getParentPageId(),g=c.pageId||f||a.page.id;return h[g]?h[g]:(c.mode||window.console&&window.console.warn,h[g]=b(c))}function d(a){return JSON.parse(JSON.stringify(a))}var e=a.$,f=a.utils,g=a.personalization={},h={};e.extend(g,{getPageSettings:function(a){return c(a)._getPageSettings()},createService:function(b){return c({pageId:b.pageId||a.page.id})._createService({namespace:"x",type:b.type,itemId:b.id})},createComponentService:function(a){var b=c(a),d=a&&a.xmlDefinition&&a.xmlDefinition.attr("uniqueid");return d?b._createService({namespace:"c",type:a._componentType,itemId:d}):b._createService({})},createModelService:function(a){var b=c(a),d=b._createService({namespace:"m",type:"sf",itemId:a&&a.id});return d=e.extend(d,{setCondition:function(a){var b,c=a&&a.name,f=a&&a.value;return c?(b={conditions:{}},b.conditions[c]=f,d.updateSettings(b)):(new e.Deferred).reject()},resetCondition:function(a){var b,c=a&&a.name;return c?(b={conditions:{}},b.conditions[c]=null,d.updateSettings(b,{removeNulls:!0})):(new e.Deferred).reject()},setOrderBy:function(a){var b=a.newValue,c={orderBy:b};return d.updateSettings(c)},resetOrderBy:function(){var a={orderBy:null};return d.updateSettings(a,{removeNulls:!0})}})},initializeSettings:function(a){a||(a={}),c(a)}})}(skuid||(window.skuid={})),function(a){function b(b,c,d,e){var g,h,i=f(c,d),j=b.children().first().attr("uniqueid"),k=c||d&&d.component,l=k?k.getParentPage():a.component.getByType("skuidpage")[0],m=l.panel.getById(j);m?(e&&!m.isOpen()||!e)&&(g=m.context.row,h=m.context.model,h&&g&&i.row&&i.model&&h.getRowId(g)!==i.model.getRowId(i.row)&&m.updateContext(i),m.toggle(e)):l.panel.createFromAction(b,c,i)}var c=a.$,d=a.utils,e=a.actions,f=d.getContextToUse,g=["tap","hold","doubletap","pinch","pinchin","pinchout","swipeleft","swiperight","swipedown","swipeup","swipe","drag"];a.interactions.register(g),e.register({closeTopmostPopup:function(){c(".ui-dialog-content").last().dialog("close")},closeAllPopups:function(){c(".ui-dialog-content").dialog("close")},showPopup:function(a,b,c){d.createPopupFromAction(a,f(b,c))},toggleSlidingPanel:function(a,c,d){b(a,c,d)},openSlidingPanel:function(a,c,d){b(a,c,d,!0)},closeSlidingPanel:function(b,d,e){var f=d||e&&e.component;f?f.getParentPage().panel.closeAll():c.each(a.component.getByType("skuidpage"),function(a,b){b.panel.closeAll()})},toggleRenderComponent:function(b){var c=b.attr("componentid"),e=b.attr("behavior"),f=d._getRenderOverride(c);f&&(f.override=!0,f.doRender="toggle"===e?!f.doRender:"hide"!==e,a.events.publish("actions.conditionaloverride",[{componentId:c}]))}})}(skuid),function(a){function b(b,c,d,f){c&&c.off("click.skuid").empty();var j=f.actionSelect,l=f.selectItem,m=f.itemDefinition;c.addClass(f.baseClass+"-dropdown-item").attr("tabindex",-1).on(h,function(a){"button"!==j.type&&j.list.getSelected()===l||(j.hasClass("unavailable")||(j.actionSelect("selectItem",l),j.selectBox&&j.selectBox.hide("fast")),a.stopPropagation())}).data("rendered",!0),c.off(i).on(i,function(a){var b=e(this),c=l===j.actionSelect("getSelectedItem");if(!c||a.which!==k.ENTER&&a.which!==k.SPACE)if(a.which!==k.ESCAPE||c){if(a.which===k.ENTER||a.which===k.SPACE)a.stopPropagation(),j.actionSelect("selectItem",l,{event:a});else if(a.which===k.UP||a.which===k.DOWN){var d,f=b.parent().children(),g=b.index();g=(a.which===k.UP?g-1:g+1)%f.length,d=f.eq(g),d.trigger("focus.skuid")}}else j.selectBox&&j.selectBox.hide("fast"),"button"===j.type?j.actionArrow.attr("aria-expanded",!1).trigger("focus"):j.actionText.children().first().attr("aria-expanded",!1).trigger("focus");else b.trigger(h,!0),a.stopPropagation()}),c.off(g).on(g,function(a){a.stopPropagation(),l.onFocus&&"function"==typeof l.onFocus&&l.onFocus.apply(this,arguments)}),l.content?c.append(l.content):c.text(l.label),m.icon&&c.prepend(a.ui.createIcon(m.icon,{additionalClass:f.baseClass+"-icon inline"})),j.list.getSelected()||j.actionSelect("selectItem",l,{triggerHandlers:!1}),f.isInitialDraw||j.actionSelect("redraw")}function c(a,b,c,d){var e=d.actionSelect,f=d.selectItem;b.empty().removeClass(d.baseClass+"-dropdown-item").data("rendered",!1),e.list.unselectItem(f),d.isInitialDraw||e.actionSelect("redraw")}var d,e=a.$,f=a.utils,g="focus.skuid",h="click.skuid",i="keydown.navigation.skuid",j=h+" "+i,k=a.$.ui.keyCode;d={init:function(b){var c=this;c.data("component",c),c.config=b||{},c.config.baseClass=c.config.baseClass||"nx-actionselect",c._GUID=c.config.uniqueId||f.generateGUID(),c.type=c.config.type?c.config.type:"state-selector",c.addClass(c.config.baseClass).prop("id",c._GUID),c.list=new a.utils.SelectList,c.onItemSelect=b.onItemSelect||!1,c.selectOptionsById={};var d={isInitialDraw:!0};return b.items&&e.each(b.items,function(a,b){c.actionSelect("addItem",b,d)}),c.actionSelect("draw"),c},getSelectedItem:function(){return this.list.getSelected()},addItem:function(d,g){g||(g={});var h=new a.utils.SelectItem(d),i=this,j=g.prependInsteadOfAppend||!1,k=g.redrawAfterAdd||!1,l=d.renderConditionsXML,m=e("<div>"),n={selectItem:h,actionSelect:i,itemDefinition:d,renderConditions:l,isInitialDraw:g.isInitialDraw,baseClass:this.config.baseClass};return i.list.addItem(h,j),h.onSelect=d.onSelect||!1,h.onFocus=d.onFocus||!1,l?(f.conditionallyRender(b,c,null,m,h.id(),n),!0!==m.data("rendered")&&i.list.unselectItem(h)):b(null,m,h.id(),n),delete n.isInitialDraw,d.hotkeysXML&&(a.hotkeys.unbind(h.id()),a.hotkeys.bind(d.hotkeysXML,h.id(),function(){m.trigger("click.skuid")},i)),i.selectOptionsById[h.id()]=m,k?i.actionSelect("draw"):i},prepend:function(a){return this.actionSelect("addItem",a,{prependInsteadOfAppend:!0,redrawAfterAdd:!0})},append:function(a){return this.actionSelect("addItem",a,{prependInsteadOfAppend:!1,redrawAfterAdd:!0})},selectItem:function(a,b){var c,d=this,f=d.list,g=f.size(),h=!1,i=f.selectedIndex,j=f.items[i];if(void 0===a)throw"No Item provided.";if(c="undefined"!=typeof a.value?f.indexOf(a):a,g>1){var k;if(j&&(k=e(d.selectOptionsById[j.id()])),f.selectItem(c),f.selectedIndex!==i&&(h=f.items[f.selectedIndex],"button"!==d.type&&!d.config.preventLabelChangeOnSelect)){if(j){var l=i-1;-1!==l?k.insertAfter(d.selectBox.children().eq(l)):k.prependTo(d.selectBox)}e(d.selectOptionsById[h.id()]).appendTo(d.actionText)}}else 1===g&&f.selectItem(c);h||(h=j),"button"!==d.type&&f.selectedIndex===i&&1!=g||b&&!1===b.triggerHandlers||(h&&h.onSelect&&h.onSelect(h,b),d.onItemSelect&&d.onItemSelect(h))},safeEmpty:function(){var a=this;a.actionText&&a.actionText.children().detach(),a.selectBox&&a.selectBox.children().detach(),a.empty()},redraw:function(){var a=this;return a.needsRedraw||(a.needsRedraw=!0,a.actionSelect("safeEmpty"),setTimeout(function(){a.needsRedraw&&(a.needsRedraw=!1,a.actionSelect("draw"))},1)),a},draw:function(){var b,c=this,d=c.list,h=0,i=c.selectOptionsById;c.actionSelect("safeEmpty"),f.size(i)&&e.each(i,function(a,b){b.data("rendered")&&h++});var l=function(){return e(window).innerHeight()/2+"px"};if(h){if(b=d.getSelected(),b||e.each(d.items,function(a,e){var f=e.id();if(i[f].data("rendered"))return c.actionSelect("selectItem",a,{triggerHandlers:!1}),b=d.getSelected(),!1}),!b)return c;if(c.actionText=e('<div class="'+c.config.baseClass+'-text">'),"button"===c.type?c.actionText.append(i[b.id()].clone(!0,!0)):c.actionText.append(i[b.id()]),c.append(c.actionText),h>1){var m=c.config.baseClass.indexOf("dropnav")>-1?"":"ui-icon ui-icon-triangle-1-s";c.actionArrow=e('<div class="'+c.config.baseClass+'-arrow">').append(e("<div>").addClass(m)),c.append(c.actionArrow);var n=[];"button"===c.type?(n.push(c.actionArrow),c.actionText.on(j,function(a){if("click"===a.type||a.which===k.ENTER||a.which===k.SPACE){c.list.selectItem(c.actionText.index());var b=d.getSelected();b.onSelect&&b.onSelect(b),c.onItemSelect&&c.onItemSelect(b)}}),c.actionText.attr("tabindex",0)):n.push(c);var o="button"===c.type?c.actionArrow:c.actionText.children("."+c.config.baseClass+"-dropdown-item");o.attr({tabindex:0,"aria-haspopup":!0,"aria-expanded":!1}),e.each(n,function(){e(this).on(j,function(a,b){if("click"===a.type||a.which===k.ENTER||a.which===k.SPACE){var f=this,h=e("<div>").addClass("sk-subnavigation-inner");if(b=b||!1,o.attr("aria-expanded",!0),a.which!==k.ENTER&&a.which!==k.SPACE||(b=!0),a.stopPropagation(),!c.hasClass("unavailable")){if(c.selectBox&&c.selectBox.children().length)c.selectBox.parent().length||c.append(c.selectBox),c.selectBox.toggle("fast");else{c.selectBox=e('<div class="'+c.config.baseClass+'-dropdown">').css("min-width","100%"),c.config.maxHeight&&(c.selectBox.find(".sk-subnavigation-inner").length||(c.selectBox.css({"max-height":l}),c.selectBox.wrapInner(h.css({"max-height":l}))),c.selectBox.hasClass("nx-actionselect-dropdown")&&c.selectBox.css({"max-height":c.config.maxHeight,"overflow-y":"auto"})),e.each(d.items,function(a,b){if(!0!==b.isSelected){var d=i[b.id()];d&&d.data("rendered")&&(c.config.maxHeight?(d.children().css({position:"static"}),h.append(d)):c.selectBox.append(d))}}),c.selectBox.appendTo(c),c.trigger("actionselect.populate");var j=e(window).width();c.selectBox.offset().left+c.selectBox.width()+8>j&&c.selectBox.css("right","0px"),c.selectBox.css("display","none").show("fast");var m;c.mouseleave(function(){m=setTimeout(function(){c.selectBox.hide("fast"),e(f).attr("aria-expanded",!1)},1e3)}).mouseenter(function(){clearTimeout(m)})}b&&c.selectBox.children().length>0&&c.selectBox.children().first().trigger(g)}}})})}else c.actionText.attr("tabindex",0),c.actionText.on(j,function(a){"click"!==a.type&&a.which!==k.ENTER&&a.which!==k.SPACE||(b.onSelect&&b.onSelect(b),c.onItemSelect&&c.onItemSelect(b))})}return c.config.maxHeight&&a.events.subscribe("ui.reflow",function(){e(".sk-subnavigation-inner").css({"max-height":l})}),c}},f.registerPlugin("actionSelect",d)}(skuid),function(a){var b=a.$,c=a.utils,d=a.$.ui.keyCode,e=function(a,c,e,f){c&&c.off("click.skuid").empty();var g=f.actionDropdown,h=f.selectItem,i=f.itemDefinition;c.addClass(f.baseClass+"-dropdown-item").attr("tabindex",-1).on("click.skuid",function(a){h.onSelect&&h.onSelect(),g.selectBox&&g.selectBox.hide("fast"),a.stopPropagation()}).data("rendered",!0).on("blur.skuid",function(){g.actionDropdown("hideDropdown")}).on("focus.skuid",function(){g.actionDropdown("cancelHideDropdown")}),c.off("keydown.navigation.skuid").on("keydown.navigation.skuid",function(a){var c=b(this);if(a.which===d.ESCAPE)g.selectBox&&g.selectBox.hide("fast"),g.config.useFirstItemAsDefault?g.actionArrow.trigger("focus.skuid"):g.actionButton.trigger("focus.skuid");else if(a.which===d.ENTER||a.which===d.SPACE)a.stopPropagation(),c.trigger("click.skuid",!0);else if(a.which===d.UP||a.which===d.DOWN){var e,f=c.parent().children(),h=c.index();h=(a.which===d.UP?h-1:h+1)%f.length,e=f.eq(h),e.trigger("focus.skuid")}}),c.off("focus.skuid.custom"),h.onFocus&&"function"==typeof h.onFocus&&c.on("focus.skuid.custom",function(){h.onFocus.apply(this,arguments)}),h.content?c.append(h.content):c.text(h.label),b("<div>").addClass(f.baseClass+"-icon sk-icon inline "+(i.icon||"icon-spacer")).prependTo(c),f.isInitialDraw||g.actionDropdown("redraw")},f=function(a,b,c,d){var e=d.actionDropdown;b.empty().removeClass(d.baseClass+"-dropdown-item").data("rendered",!1),d.isInitialDraw||e.actionDropdown("redraw")},g={init:function(d){var e=this;e.data("component",e),e.config=d||{},e.config.baseClass=e.config.baseClass||"nx-actiondropdown",e._GUID=e.config.uniqueId||c.generateGUID(),e.prop("id",e._GUID),e.addClass(e.config.baseClass),e.list=new a.utils.SelectList,e.selectOptionsById={};var f={isInitialDraw:!0};return d.items&&b.each(d.items,function(a,b){e.actionDropdown("addItem",b,f)}),e.actionDropdown("draw"),e},addItem:function(d,g){g||(g={});var h=new a.utils.SelectItem(d),i=this,j=g.prependInsteadOfAppend||!1,k=g.redrawAfterAdd||!1,l=d.renderConditionsXML,m=d.hotkeysXML,n=b("<div>"),o={selectItem:h,actionDropdown:i,itemDefinition:d,renderConditions:l,isInitialDraw:g.isInitialDraw,baseClass:this.config.baseClass};return i.list.addItem(h,j),h.onSelect=d.onSelect||!1,h.onFocus=d.onFocus||!1,l?c.conditionallyRender(e,f,null,n,h.id(),o):e(0,n,h.id(),o),delete o.isInitialDraw,m&&(a.hotkeys.unbind(h.id()),a.hotkeys.bind(m,h.id(),function(){n.trigger("click.skuid")},i)),i.selectOptionsById[h.id()]=n,k?i.actionDropdown("draw"):i},prepend:function(a){return this.actionDropdown("addItem",a,{prependInsteadOfAppend:!0,redrawAfterAdd:!0})},append:function(a){return this.actionDropdown("addItem",a,{prependInsteadOfAppend:!1,redrawAfterAdd:!0})},safeEmpty:function(){var a=this,d=a.selectOptionsById;a.actionButton&&a.actionButton.hasClass("ui-button")&&a.actionButton.skooButton("destroy"),a.actionArrow&&a.actionArrow.hasClass("ui-button")&&a.actionArrow.skooButton("destroy"),c.size(d)&&b.each(d,function(a,b){b.detach()}),a.empty()},redraw:function(){var a=this;return a.needsRedraw=!1,a.actionDropdown("draw"),a},draw:function(){var a,e=this,f=e.config,g=!0===f.openOnHover,h=e.useFirstItemAsDefault=!0===f.useFirstItemAsDefault,i=e.list,j=0,k=e.selectOptionsById,l=e.actionButton||(e.actionButton=b("<div>")),m=e.actionArrow||(e.actionArrow=b("<div>")),n=e.selectBox||(e.selectBox=b("<div>"));if(e.actionDropdown("safeEmpty"),e.on("mouseout.skuid",function(a){e.is(a.target)||b.contains(e[0],a.relatedTarget)||e.actionDropdown("hideDropdown")}).on("mouseover.skuid",function(){e.actionDropdown("cancelHideDropdown")}),l.skooButton().off("click.skuid").on("click.skuid",function(b,c){h&&a&&"function"==typeof a.onSelect?a.onSelect():e.actionDropdown("toggleDropdown",{isKeyboardInitiated:c})}).off("keydown.navigation.skuid").on("keydown.navigation.skuid",function(a){if(l.is(":focus"))if(a.which===d.ENTER||a.which===d.SPACE)l.trigger("click.skuid",!0),a.stopPropagation();else if(a.which===d.UP||a.which===d.DOWN){var b,c,f=n.children();e.actionDropdown("showDropdown"),b=(a.which===d.UP?f.length-1:0)%f.length,c=f.eq(b),c.trigger("focus.skuid"),a.stopPropagation()}}).off("blur.skuid").on("blur.skuid",function(){e.actionDropdown("hideDropdown")}).off("focus.skuid").on("focus.skuid",function(){e.actionDropdown("cancelHideDropdown")}).appendTo(e),g&&!h&&l.off("mouseover.skuid").on("mouseover.skuid",function(a){e.actionDropdown("isDropdownOpen")||(e.actionDropdown("showDropdown",{isHoverInitiated:!0}),a.stopPropagation())}),c.size(k)&&b.each(k,function(a,b){b.data("rendered")&&j++}),j&&(h||1===j?(a=i&&i.items&&i.items[0],l.skooButton("option","label",a.label),a.icon&&l.skooButton("option","icon",a.icon)):(l.skooButton("option",{label:f.label,secondaryIcon:"fa-caret-down"}),f.icon&&l.skooButton("option","icon",f.icon)),!h||j>1)){h?(e.addClass("ui-buttonset"),m.skooButton({notext:!0,icon:"fa-angle-down"}).addClass(e.config.baseClass+"-expand-button").off("click.skuid").on("click.skuid",function(a,b){e.actionDropdown("toggleDropdown",{isKeyboardInitiated:b})}).off("keydown.navigation.skuid").on("keydown.navigation.skuid",function(a){a.which!==d.ENTER&&a.which!==d.SPACE||(m.trigger("click.skuid",!0),a.stopPropagation())}).off("blur.skuid").on("blur.skuid",function(){e.actionDropdown("hideDropdown")}).off("focus.skuid").on("focus.skuid",function(){e.actionDropdown("cancelHideDropdown")}).attr("aria-haspopup",!0).attr("aria-expanded",!1).appendTo(e),g&&m.off("mouseover.skuid").on("mouseover.skuid",function(a){e.actionDropdown("showDropdown",{isHoverInitiated:!0}),a.stopPropagation()})):l.attr("aria-haspopup",!0).attr("aria-expanded",!1),n.addClass(e.config.baseClass+"-dropdown").css("min-width","100%").hide().appendTo(e),e.config.maxHeight&&n.css({"max-height":e.config.maxHeight,"overflow-y":"auto"});var o=h;b.each(i.getItems(),function(b,c){if(o&&c===a)return!0;var d=k[c.id()];d&&n.append(d)})}return e},isDropdownOpen:function(){var a=this,b=a.selectBox;return b&&b.is(":visible")},toggleDropdown:function(a){var b=this,c=a.isKeyboardInitiated,d=b.actionDropdown("isDropdownOpen")?"hideDropdown":"showDropdown";b.actionDropdown(d,{focusFirstItem:c,focusActionArrow:c,immediate:!0}),b.actionDropdown("cancelHideDropdown")},showDropdown:function(a){a||(a={});var b=this,c=b.selectBox,d=b.useFirstItemAsDefault,e=b.actionArrow,f=b.actionButton,g=d?e:f;return!0===a.isHoverInitiated&&c.data("skuid.isHoverInitiated",!0),c.show("fast").position({my:"left top",at:"left bottom",of:f}),g.attr("aria-expanded",!0),a.focusFirstItem&&c.children().first().trigger("focus.skuid"),b},hideDropdown:function(a){a||(a={});var b=this,c=b.selectBox,d=b.useFirstItemAsDefault,e=b.actionArrow,f=b.actionButton,g=d?e:f,h=a.focusActionArrow,i=a.immediate||!0===c.data("skuid.isHoverInitiated"),j=function(){b.hideDropdownTimeout=null,c.data("skuid.isHoverInitiated",!1),c.hide("fast"),g.attr("aria-expanded",!1),h&&g.trigger("focus.skuid")};return i?j():b.actionDropdown("isDropdownOpen")&&!b.hideDropdownTimeout&&(b.hideDropdownTimeout=setTimeout(j,1e3)),b},cancelHideDropdown:function(){var a=this;return a.hideDropdownTimeout&&(clearTimeout(a.hideDropdownTimeout),a.hideDropdownTimeout=null),a}};c.registerPlugin("actionDropdown",g)}(skuid),function(a){var b=a.$,c=a.utils,d={init:function(d){d||(d={});var e,f=this.addClass("nx-actionselect nx-actionautocomplete"),g=d.refField,h=d.model.dataSource;if(f.config=d,f.onItemSelect=d.onItemSelect||!1,f.list=new c.SelectList,g&&g.accessible){var i=g.referenceTo;e=b.map(g.referenceTo,function(a){var b=h.getNameField(a.objectName)
;return a.searchable?{objectName:a.objectName,fields:["Id",b],recordsLimit:50,model:{objectMapKey:h.name+"__"+f.config.model.objectName},orderBy:b,conditions:d.additionalConditions}:null}),f.sourceFunction=function(c,f){if(c.term.length<2)return!1;if(e.length)h.search({query:c.term,includeMetadata:!0,searching:"NAME FIELDS",returning:e}).done(function(c){var d=[];b.each(c.results,function(c,e){var f=e.objectName;b.each(e.records,function(b,c){a.data.add(c),c.__templabel=c[h.getNameField(f)],d.push(c)})}),f(d)});else if(i.length){var g="_AutocompleteTempModel_"+(new Date).getTime(),j=i[0],k=d.model,l=j.objectName,m=h.getNameField(l),n=new a.model.Model({dataSource:k&&k.getDataSource(),id:g,objectName:l,fields:[{id:"Id"},{id:m}],doQuery:!0,doClone:!1,recordsLimit:50,orderByClause:m});n.initialize(),n.buildSearchCondition("_autocomplete_search",c.term,[{id:m}],{useSOSLSearch:!1,searchOperator:"contains"}),b.each(d.additionalConditions,function(a,b){n.addCondition(b)}),n.load(function(){var c=[];b.each(n.getRows(),function(b,d){a.data.add(d),d.__templabel=d[m],c.push(d)}),f(c)})}},f.optionRenderer=function(a,d){return b("<li>").data("ui-autocomplete-item",d).html("<a>"+c.encodeHTML(d.__templabel)+"</a>").appendTo(a)}}return d.items&&b.each(d.items,function(){f.actionAutocomplete("addItem",this)}),f.actionAutocomplete("draw"),f},addItem:function(a,b){b||(b={});var d=new c.SelectItem(a),e=b.prependInsteadOfAppend||!1;return this.list.addItem(d,e),d.onSelect=a.onSelect||!1,this},getSelectedItem:function(){return this.list.getSelected()},resetItem:function(a){var c=this;c.config.refField?(b.each(c.actionAutocomplete("getSelectedItems"),function(){this.inactive=!0}),a&&b.map(a.split(";"),function(a){c.actionAutocomplete("selectItem",a,{triggerHandlers:!1})}),c.actionAutocomplete("buildResetMenu"),c.input.val(c.actionAutocomplete("getLabel"))):c.actionAutocomplete("selectItem",a)},selectItem:function(a,b){var c=this,d=c.list.selectedIndex,e=c.list.getSelected(),f=c.list.itemsMap[a],g=!1;c.list.selectItem(f),f.inactive=!1,c.input.val(c.actionAutocomplete("getLabel")),g=!c.isMultiselect||c.list.selectedIndex!==d,c.config.refField&&!c.config.isMultiselect&&e!==f&&c.actionAutocomplete("unselectItem",e,{triggerHandlers:!1}),g&&(b&&!1===b.triggerHandlers||(f&&f.onSelect&&f.onSelect(f),c.onItemSelect&&c.onItemSelect(f),c.actionAutocomplete("buildResetMenu")))},unselectItem:function(a,b){var c=this;a.inactive=!0,c.input.val(c.actionAutocomplete("getLabel")),b&&!1===b.triggerHandlers||(a&&a.onSelect&&a.onSelect(a),c.onItemSelect&&c.onItemSelect(a),c.actionAutocomplete("buildResetMenu"))},getLabel:function(){var a=this,c=a.actionAutocomplete("getSelectedItems");return(c.length>2?c.length+" Items":b.map(c,function(a){return a.label}).join(", "))||a.config.defaultOptionLabel},getSelectedItems:function(){var a=this;if(a.config.refField)return b.map(a.list.items,function(a){return!0===a.inactive?null:a});var c=a.list.getSelected();return c?[c]:[]},draw:function(){var c,d=this;d.sourceFunction?c=d.sourceFunction:(c=[],b.each(d.list.items,function(a,b){c.push({value:b.value,label:b.label})}));var e=a.ui.renderers.AUTOCOMPLETE.edit({minLength:1,value:d.actionAutocomplete("getLabel"),source:c,onChange:function(a,b){return d.config.refField?(d.list.contains(b.item.Id)||d.actionAutocomplete("addItem",{value:b.item.Id,label:b.item.__templabel,affectDefaultCondition:!0}),d.actionAutocomplete("selectItem",b.item.Id)):d.actionAutocomplete("selectItem",b.item.value),!1},onFocus:function(a,b){return d.config.refField?e.val(b.item.__templabel):e.val(b.item.label),!1},optionRenderer:d.optionRenderer}).on("click",function(){e.select()}).appendTo(d);return d.input=e,d.resetMenu=b("<div>"),d.resetMenu.insertAfter(e),d.resetMenuItemsWrapper=null,d.actionAutocomplete("buildResetMenu"),d},buildResetMenu:function(){var a=this;if(a.resetMenu.empty().removeClass("clearfilter-btn nx-actionselect-arrow"),a.config.refField){a.resetMenuItemsWrapper||(a.resetMenuItemsWrapper=b("<div>").addClass("nx-actionselect-dropdown nx-actionautocomplete-resetitemswrapper").hide(),a.append(a.resetMenuItemsWrapper));var c=a.actionAutocomplete("getSelectedItems");0===c.length?(a.resetMenuItemsWrapper.empty().hide(),a.removeClass("nx-actionautocomplete-has-menu-action"),a.resetMenu.css("display","none")):1===c.length?(a.resetMenuItemsWrapper.empty().hide(),a.addClass("nx-actionautocomplete-has-menu-action"),a.resetMenu.addClass("clearfilter-btn").text("x").off().on("click",function(){a.hasClass("unavailable")||a.actionAutocomplete("unselectItem",c[0])}),a.resetMenu.css("display","inline-block")):c.length>1&&(a.addClass("nx-actionautocomplete-has-menu-action"),a.resetMenuItemsWrapper.empty(),b.each(c,function(c,d){var e=b("<div>").addClass("nx-actionselect-dropdown-item"),f=b("<div>").addClass("nx-actionautocomplete-resetitembutton").text("x"),g=b("<div>").addClass("nx-actionautocomplete-resetitemlabel").text(d.label);e.append(f,g),a.resetMenuItemsWrapper.append(e),e.off().on("click",function(){a.actionAutocomplete("unselectItem",d)})}),a.resetMenu.addClass("nx-actionselect-arrow").append(b("<div>").addClass("ui-icon ui-icon-triangle-1-s")).off().on("click",function(){a.resetMenuItemsWrapper.is(":visible")?a.resetMenuItemsWrapper.hide():a.resetMenuItemsWrapper.show()}),a.resetMenu.css("display","inline-block"))}else a.list&&0===a.list.selectedIndex?(a.resetMenu.css("display","none"),a.removeClass("nx-actionautocomplete-has-menu-action")):(a.addClass("nx-actionautocomplete-has-menu-action"),a.resetMenu.css("display","inline-block").addClass("clearfilter-btn").text("x").off().on("click",function(){a.hasClass("unavailable")||a.actionAutocomplete("selectItem",a.list.items[0].value)}))}};c.registerPlugin("actionAutocomplete",d)}(skuid),function(a){function b(b,c,r){function s(){if(Z&&"function"==typeof Z.render)return void Z.render(c,r,$);if(W="function"==typeof L.row?L.row():L.row||M.row,X=W&&V&&V.isRowNew(W),b&&b.off(l).empty(),b.css("display","inline-block"),void 0===E&&(E=x(c,L,M)),void 0===F&&(F=y(c,L,M)),P===k)return void b.actionDropdown({uniqueId:T,items:D,type:"button",onSelect:aa,openOnHover:S,useFirstItemAsDefault:R,label:E,icon:F});b.skooButton({icon:F,label:E,disabled:Y}),Y&&b.attr("tabindex",-1),b.off(l).on(l,aa),b.off(m).on(m,function(a){a.which!==n.ENTER&&a.which!==n.SPACE||(aa(),a.preventDefault())}),Q&&b.addClass(Q),U&&b.addClass("nx-button-secondary"),T&&b.attr("id")!==T&&b.attr("id",T);var d=function(){a.page.disableHotkeys||(e(),q.bind(c.children("hotkeys").first(),T,aa,b))},e=function(){q.unbind(T)};if(_.length&&_.children().length){var f=_.attr("message");p.conditionallyDo(function(){b.hasClass("ui-button")&&(b.button("enable"),b.attr("tabindex",0),f&&(z(b),b.css("cursor",""),b.attr("title")===f&&b.removeAttr("title")),d())},function(){b.hasClass("ui-button")&&(b.button("disable"),b.attr("tabindex",-1),f&&(z(b,f),b.css("cursor","not-allowed"))),e()},_,b,{row:W,model:V})}else d()}function t(){T&&(V&&V.unregisterField(T),a.hotkeys.unbind(T)),P===k||(b.off("click.skuid"),b.hasClass("ui-button")&&b.skooButton("destroy")),b.css("display","none"),Z&&"function"==typeof Z.unrender&&Z.unrender(c,r,$)}var v,C,D,E,F,G,H,I,J,K,L=r.options||{},M=r.context||{},N=L.editor,O=L.buttonEditors||[],P=c.attr("type")||L.type,Q=c.attr("cssclass")||L.cssClass,R=c.attr("usefirstitemasdefault")?"true"===c.attr("usefirstitemasdefault"):L.useFirstItemAsDefault,S=c.attr("openonhover")?"true"===c.attr("openonhover"):L.openOnHover,T=r.id(),U="true"===c.attr("secondary")||L.isSecondary,V=L.model||M.model,W="function"==typeof L.row?L.row():L.row||M.row,X=W&&V&&!V.isRowNew(W),Y=!1,Z=(L.customTypes||{})[P],$={doMerge:w},_=c.children("enableconditions"),aa=B(P,function(){return{actionDef:c,component:r,element:b,label:E,isOnClickJS:K,weblink:J,context:M,model:V,row:W,editor:N,buttonEditor:C}}),ba=c.attr("weblinkname"),ca=c.attr("weblinkobject"),da=function(){return L.component.addProblem("Invalid Salesforce Custom Button/Link requested"+(ca&&ba?" on "+ca+": "+ba:" on Page Title on Model "+V.id)),r.unrender(),!1},ea=function(){return a.sfdc?a.sfdc.weblink:null},fa=!1,ga=!1;switch(r.afterUnrender=t,P){case e:v=c.children("models").first(),C=A(b),O.push(C),V&&C.registerModel(V),v&&o.each(v.children("model"),function(){var b=a.$M(o(this).text());b&&C.registerModel(b)}),Y=!C.hasModelWithChanges();break;case f:v=c.children("models").first(),C=A(b),O.push(C),V&&C.registerModel(V),v&&o.each(v.children("model"),function(){var b=a.$M(o(this).text());C.registerModel(b)}),Y=!C.hasModelWithChanges();break;case d:N&&u.registerEditorWithModelsForActionsNode(c.children("actions").first(),N);break;case g:case i:V&&V.deleteable?W&&X||(fa=!0,ga=!0):fa=!0;break;case h:V&&V.createable?W&&X||(fa=!0,ga=!0):fa=!0;break;case j:if(!ba||!ca)return void da();if(V?W&&X||(fa=!0,ga=!0):fa=!0,fa)break;G=ba.split("__"),2===G.length?(I=G[0],H=G[1]):H=G[0],ea().get({weblinkName:H,objectName:ca,namespacePrefix:I,callback:function(a){if(!(J=a))return void da();K="javascript"===J.LinkType,E=ea().getLabel(J),s()}});break;case k:D=[],o.each(c.children("actions").first().children("action"),function(){var a=o(this),c=a.attr("type"),d=x(a,L,M),e=y(a,L,M),f=B(c,function(){return{actionDef:a,component:r,element:b,label:d,isOnClickJS:K,weblink:J,context:M,model:V,row:W,editor:N,buttonEditor:C}});D.push({label:d,value:a,icon:e,renderConditionsXML:a.children("renderconditions").first(),hotkeysXML:a.children("hotkeys").first(),onSelect:f})})}fa||s();var ha;if(ga&&V&&W){var ia=V.getRowId(W);ha=a.events.subscribe("models.saved",function(b){var c,d=b.insertResults;b.totalsuccess&&b.models.hasOwnProperty(V.id)&&d&&d.length&&o.each(d,function(b,d){d.oldId===ia&&d.success&&d.hasOwnProperty("id")&&(a.events.unsubscribe(ha),c=o.extend({},r.context,{row:V.getRowById(d.id)}),r.unrender().conditionallyRender({context:c}))})})}r.unregisterChildComponents=function(){o.each(O,function(){this.unregister()}),a.component.Component.prototype.unregisterChildComponents.call(r)},r.unregister=function(){ha&&a.events.unsubscribe(ha),a.component.Component.prototype.unregister.call(r)}}var c={init:function(b){b||(b={});var c,d={text:!0!==b.notext,label:b.label,disabled:b.disabled};return b.icon&&((c=b.icon.indexOf("sk-webicon")>-1)||(d.icons||(d.icons={}),d.icons.primary=b.icon)),b.secondaryIcon&&(d.icons||(d.icons={}),d.icons.secondary=b.secondaryIcon),this.button(d),c&&this.prepend(a.ui.createIcon(b.icon,{isWebIcon:!0})),this.attr({role:"button",tabindex:0}),this.find(".ui-icon").addClass("sk-icon inline"),b.hoverText&&this.skootip(b.hoverText),this.data("object",this),this},option:function(){var a,b,c,d;if(0===arguments.length)return a=this.button("option"),{icon:a.icons&&a.icons.primary,secondaryIcon:a.icons&&a.icons.secondary,disabled:a.disabled,notext:!a.text};a=this.button("option"),1===arguments.length?(b=arguments[0],o.extend(a,{text:!0!==b.notext,label:b.label,disabled:b.disabled}),b.icon&&(a.icons.primary=b.icon),b.secondaryIcon&&(a.icons.secondary=b.secondaryIcon)):(c=arguments[0],d=arguments[1],"icon"===c?a.icons.primary=d:"secondaryIcon"===c?a.icons.secondary=d:a[c]=d),a.icons.primary||delete a.icons.primary,a.icons.secondary||delete a.icons.secondary,a.icons.primary||a.icons.secondary||delete a.icons,this.button("option",a),this.find(".ui-icon").addClass("sk-icon inline");var e=b&&b.hoverText||"hoverText"===c&&d;e&&this.skootip(e)},destroy:function(){return this.button("destroy"),this.removeData("object"),this.removeAttr("tabindex"),this}};a.utils.registerPlugin("skooButton",c);var d="multi",e="save",f="cancel",g="delete",h="clone",i="share",j="sfdcweblink",k="group",l="click.skuid",m="keydown.action.skuid",n=a.$.ui.keyCode,o=a.$,p=a.utils,q=a.hotkeys,r=a.componentType,s=p.mergeAsText,t=a.label.read,u=a.actions,v={createFields:!0,registerFields:!1},w=function(a,b){var c=b.model,d=b.row,e=c?d?"row":"model":"global";return void 0!==a?"row"==e?s("row",a,v,c,d):"model"==e?s("model",a,v,c):s("global",a,v):""},x=function(a,b,c){var d=a.attr("type"),e=a.attr("label")||b.label||t(d);return w(e,c)},y=function(a,b,c){var d=a.attr("type"),j=a.attr("icon")||b.icon;return j||-1===o.inArray(d,[e,f,g,h,i])||(j="sk-icon-"+d),w(j,c)},z=function(a,b){var c=a.children(".ui-button-text");return c.length&&(b?c.skootip(b):c.tooltip("instance")&&c.tooltip("destroy").removeAttr("title")),a},A=function(b){var c=new a.ui.Editor(b,{showSaveCancel:!1});return c.handleCancel=function(){a.ui.Editor.prototype.handleCancel.call(this),b.button("disable"),b.attr("tabindex",-1)},c.handleSave=function(c){a.ui.Editor.prototype.handleSave.call(this,c),c&&(!0===this.hasModelWithChanges()?(b.button("enable"),b.attr("tabindex",0)):(b.button("disable"),b.attr("tabindex",-1)))},c.handleChange=function(c){a.ui.Editor.prototype.handleChange.call(this,c),!0===this.hasModelWithChanges()?(b.button("enable"),b.attr("tabindex",0)):(b.button("disable"),b.attr("tabindex",-1))},c},B=function(b,c){switch(b){case d:return function(){var a=c(),b=a.actionDef,d=a.element,e=a.component,f=a.model,g=a.row,h=a.editor;u.runActionsNode(b.children("actions").first(),e,{button:d,model:f,row:g,editor:h,initiatorId:h&&h.id(),component:a.context.component}).always(function(){e.publish("actionComplete")})};case"custom":return function(){var b=c(),d=b.actionDef,e=b.element,f=b.component,g=b.context,h=b.model,i=b.row,j=b.editor,k=a.snippet.getSnippet(w(d.attr("snippet"),g));k&&k({button:e,model:g.model||h,row:g.row||i,editor:j,initiatorId:j&&j.id(),component:g.component||f})};case e:return function(){var b=c(),d=b.actionDef,e=b.model,f=b.row,g=b.editor,h=b.buttonEditor,i=b.component,j="true"===d.attr("rollbackonanyerror");h.models&&h.models.length&&(g&&g.setStatus(t("saving")),a.model.save(h.models,{callback:function(a){a.totalsuccess&&d.attr("afterSave")&&p.redirect({row:f,model:e,url:d.attr("afterSave"),window:d.attr("window")}),i.publish("actionComplete")},initiatorId:g&&g.id(),rollbackOnAnyError:j}))};case f:return function(){var b=c(),d=b.actionDef,e=b.model,f=b.row,g=b.editor,h=b.buttonEditor,i=d.attr("afterCancel");h.models&&h.models.length&&(a.model.cancel(h.models,{initiatorId:g&&g.id()}),i&&p.redirect({row:f,model:e,url:i,window:d.attr("window")}))};case g:return function(){var b,d,e,f=c(),g=f.component,h=f.model,i=f.row,j=f.editor,k=(h.getNameFieldValueForRow(i)+"").trim(),l=f.actionDef.attr("afterDelete");!l&&p.inPlatform([a.constants.VISUALFORCE,a.constants.LIGHTNING])&&(l="/{{Model.keyPrefix}}/o"),b=t("delete")+" "+(k||h.label)+"?",d=o("<div>").attr("title",b).html(a.label.merge(t("confirm_delete"),h.label,k?"<b>'"+k+"'</b>":"")),e=[{icons:{primary:"ui-button-icon-primary ui-icon sk-icon-cancel sk-icon inline"},text:t("no_dont_delete_anything"),click:function(){d.dialog("close")}}];var m=a.model.list();o.each(m,function(b,c){if(c.hasChanged&&c.deleteable){var f=!0;if(o.each(c.changes,function(a,b){if(p.size(b))return f=!1,!1}),f){var h=a.utils.size(c.changes),i=1===h?c.label:c.labelPlural;e.push({text:a.label.merge(t("no_but_i_would_like_to_delete"),h,i),icons:{primary:"ui-button-icon-primary ui-icon sk-icon-save sk-icon inline"},click:function(){d.dialog("close");var a=o("body");a.block({message:t("deleting")+" "+h+" "+i+"..."}),c.save({callback:function(){g.publish("actionComplete"),a.unblock()},initiatorId:j&&j.id()})}})}}}),e.push({text:t("yes")+", "+t("delete")+" "+h.label+(k?" '"+k+"'":""),icons:{primary:"ui-button-icon-primary ui-icon sk-icon-save sk-icon inline"},click:function(){h.deleteRow(i);var b=o("body");b.block({message:t("deleting")+" "+h.label+(k?" '"+k+"'":"")+"..."}),a.model.save([h],{callback:function(a){a.totalsuccess?window.sforce&&sforce.console?(b.unblock(),sforce.console.getEnclosingTabId(function(a){sforce.console.closeTab(a.id)})):p.redirect({url:l,model:h,row:i}):b.unblock(),g.publish("actionComplete")}}),d.dialog("close")}}),d.dialog({close:function(){o(this).remove()},modal:!0,resizable:!1,width:"500px",buttons:e})};case h:return function(){var a=c();p.redirect({url:"/"+a.model.getRowId(a.row)+"/e?clone=1"})};case i:return function(){var a=c(),b=a.model,d={"001":"Acc","003":"Con","006":"Opp","00Q":"Lead",500:"Case",701:"Campaign"},e=b.keyPrefix in d?d[b.keyPrefix]:"CustomObject";p.redirect({url:"/p/share/"+e+"SharingDetail?parentId="+b.getRowId(a.row)})};case"redirect":return function(){var a=c(),b=a.actionDef,d=a.model,e=a.row,f=a.label;p.redirect({row:e,model:d,url:b.attr("url"),window:b.attr("window"),title:f})};case"popup":return function(){var a=c(),b=a.actionDef,d=a.element,e=a.component,f=a.model,g=a.row;p.createPopupFromAction(b,{button:d,model:f,row:g,component:e})};case j:return function(){var a=c(),b=a.model,d=a.row,e=a.label,f=a.weblink,g=a.isOnClickJS;g||p.redirect({row:d,model:b,url:"/servlet/servlet.Integration?lid="+f.Id+"&eid="+b.getRowId(d)+"&ic=1&retURL="+window.location,title:e,window:"newWindow"===f.OpenType||!g&&p.startsWith(f.Url,"http://",!0)?"blank":"parent"})}}};r.register("button",{render:b})}(skuid),function(a){var b=a.$,c=a.$L,d=b.extend,e=a.utils,f=e.makeXMLDoc,g={},h=function(b,c,d){d||(d=["datasource"]),d.forEach(function(d){var e=b.attr(d)||b.attr("service")||a.platform.getDefaultDataSourceName();c.hasOwnProperty(e)||(c[e]={})})},i=function(a,c,d){var e,f=c.pathsToDataSourceAttributes;f&&(e=d.dataSourceDependencies,f.forEach(function(c){var d=c.split(":"),f=d[0],g=d[1];(f?a.find(f):a).each(function(a,c){h(b(c),e,[g])})}))},j=function(a,c,d,e){var f=a.attr("type");"popup"===f||"showPopup"===f?b.each(a.children("popup").first().children("components").first().children(),function(){m(b(this),c,d,e)}):"drawer"===f?b.each(a.children("drawer").first().children("components").first().children(),function(){m(b(this),c,d,e)}):"multi"===f?b.each(a.children("actions").first().children(),function(){j(b(this),c,d,e)}):"datasource-action"===f&&a.attr("datasource")&&h(a,d.dataSourceDependencies)},k=function(b,c,d,e){var f="skuid"===b.namespace?"getResourceUrl":"getSiteResourceUrl";b.url?c.push(b.url):b.resource?c.push(a.platform[f]({name:b.resource,namespace:b.namespace,path:b.path})):b.path&&c.push(a.platform[f]({name:d,namespace:e,path:b.path}))},l=function(a,c){var d=c.jsLoads,e=c.cssLoads;a.js&&b.each(a.js,function(){k(this,d,a.defaultResourceName,a.defaultResourceNamespace)}),a.css&&b.each(a.css,function(){k(this,e,a.defaultResourceName,a.defaultResourceNamespace)}),a.labels&&a.labels.length&&(a.customLabelDependencies||(a.customLabelDependencies=[]),Array.prototype.push.apply(a.customLabelDependencies,a.labels)),a.customLabelDependencies&&b.each(a.customLabelDependencies,function(a,b){c.labelDependencies[b]=!0})},m=function(a,c,d,e){var f=a.prop("tagName"),g=q(f,d,e);c.hasOwnProperty(f)||(c[f]={}),g&&(i(a,g,d),l(g,d),g.pathsToChildComponents&&b.each(g.pathsToChildComponents,function(){var f=this.split(">"),g=a;b.each(f,function(a,b){g=g.children(b)}),b.each(g.children(),function(){m(b(this),c,d,e)})}),g.pathsToActions&&b.each(g.pathsToActions,function(){var f=this.split(">"),g=a;b.each(f,function(a,b){g=g.children(b)}),b.each(g.children(),function(){j(b(this),c,d,e)})}))},n=function(c){var d="",e="",f=[],g=[],h={},i=c.prop("tagName");return"labels"===i?b.each(c.children(),function(){var a=b(this).attr("id");a&&(h[a]=!0)}):"javascript"===i?b.each(c.children("jsitem"),function(){var c=b(this),e=c.attr("location"),g=c.text().trim();switch(e){case"inline":g&&(d+=g+";\n");break;case"external":f.push(c.attr("url"));break;case"inlinesnippet":g&&(d+="skuid.snippet.register('"+c.attr("name")+"',function(args){"+g+"\n});\n");break;case"inlinecomponent":g&&(d+="skuid.componentType.register('"+c.attr("name")+"',function(args) {"+g+"\n});\n");break;case"staticresource":f.push(a.platform.getSiteResourceUrl({name:c.attr("name"),path:c.attr("filepath"),namespace:c.attr("namespace")}))}}):"css"===i&&b.each(c.children("cssitem"),function(){var c=b(this),d=c.attr("location"),f=c.text().trim();switch(d){case"inline":f&&(e+=f+"\n");break;case"external":g.push(c.attr("url"));break;case"staticresource":g.push(a.platform.getSiteResourceUrl({name:c.attr("name"),path:c.attr("filepath"),namespace:c.attr("namespace")}))}}),{inlineJS:d,inlineCSS:e,jsLoads:f,cssLoads:g,labels:h}},o=function(c){a.componentPacks={},c&&b.each(c,function(b,c){a.componentPacks[c.id]=c})},p=function(a,c){l(a,c),a.components&&a.components.length&&b.each(a.components,function(a,b){b.alwaysLoad&&l(b,c)})},q=function(c,d,e){var f,g,h=c.split("__");1===h.length?(f=c,g="Mobile"===e?"skuidmobilecore":"skuidcore"):(f=h[1],g=h[0]);var i=null,j=a.componentPacks[g];return j&&b.each(j.components,function(){if(this.id===f)return p(j,d),i=this,i.defaultResourceName=j.defaultResourceName,i.defaultResourceNamespace=j.defaultResourceNamespace,!1}),i};window.onpopstate=function(b){a.utils.inPlatform([a.constants.NATIVE])&&b.state&&a.loader.load({isPopState:!0,isReplace:!0,pageName:b.state.pageName,parameters:b.state.parameters,routeName:b.state.routeName})};var r=function(i){function j(a){a&&b.inArray(a,["server","default","client"])>-1&&(S=a)}function l(){if(!x.hasOwnProperty(E))return b.Deferred().reject("Load terminated").promise()}i=i||{},a.NProgress.start(),i.pageName||(i.pageName=a.page.params.page),i.pageModule||(i.pageModule=a.page.params.module);var p,q,r,s,t,u,v,w,x,y=i.pageId,z=i.pageName,A=i.pageType,B=i.routeName,C=i.pageModule||i.namespace,D=i.parameters||{},E=e.generateUniqueId(),F=i.previousPageComponent,G=i.wrapper,H=i.wrapper?i.wrapper.prop("id"):null,I=i.element,J={"Ui-Only":{}},K={},L={},M=[],N=[],O={jsLoads:M,cssLoads:N,labelDependencies:L,dataSourceDependencies:J},P="",Q="",R=[],S="default",T=!!i.isInclude,U=!!i.isReplace;G||(G=b(document.body),H="body"),x=g[H],x&&e.size(x)&&b.each(x,function(a,b){b&&b.publish&&b.publish("stop.loading"),delete x[a]}),x||(x=g[H]={}),x[E]=0,a.ui._loadHammer();var V,W=a.loader.service.componentPack(A);return a.loader.service.page(z,C,B).then(function(c){var g=l();if(g)return g;var h=c.xml,i=c.metadata;q=e.makeXMLDoc(h),z=i.pageName,y=i.pageId,w=new Date(i.pageLastModifiedDate).getTime();var k=i.masterPageName;t=q.attr("theme"),j(q.attr("personalizationmode")),d(a.page,{id:y,name:z});var m=b.Deferred();return k?(r=q,a.loader.service.page(k).then(function(a){var b=l();if(b)return b;var c=a.xml;q=e.makeXMLDoc(c),u=q.attr("theme");var d,g,h,i,k,n,o,p,s,t=r.children("models").first(),v=r.children("pageregioncontents").first(),w=r.children("resources").first(),x=q.attr("personalizationmode");r.attr("hideeditbutton")&&q.attr("hideeditbutton",r.attr("hideeditbutton")),!x||""!==S&&"default"!==S||j(x),t.length&&(d=q.children("models").first(),d.length||(d=f("<models/>").appendTo(q)),d.append(t.children())),v.length&&(g=q.children("pageregioncontents").first(),g.length||(g=f("<pageregioncontents/>").appendTo(q)),g.append(v.children())),w.length&&(h=q.children("resources").first(),h.length||(h=f("<resources/>").appendTo(q)),k=w.children("labels").first(),k.length&&(i=h.children("labels").first(),i.length||(i=f("<labels>").appendTo(h)),i.append(k.children())),o=w.children("javascript").first(),o.length&&(n=h.children("javascript").first(),n.length||(n=f("<javascript>").appendTo(h)),n.append(o.children())),s=w.children("css").first(),s.length&&(p=h.children("css").first(),p.length||(p=f("<css>").appendTo(h)),p.append(s.children()))),m.resolve()})):m.resolve(),m.promise()}).then(function(){return W}).then(function(c){var d=l();if(d)return d;o(c);var e="PageList"===z||"PageBuilder"===z;a.page.params.usetheme?v=a.page.params.usetheme:t?v=t:u&&(v=u),v||(v=e&&!v?"BuilderLight":"Mobile"===A?"MobileClassic":"Modern"),a.platform.get("themeServiceDFD")||a.platform.set("themeServiceDFD",a.loader.service.theme(v)),V=a.platform.get("themeServiceDFD"),b.each(q.children("models").children(),function(){h(b(this),J)}),b.each(q.children("components").children(),function(){m(b(this),K,O,A)}),b.each(q.children("pageregioncontents").first().children("pageregioncontent"),function(){b.each(b(this).children("components").first().children(),function(){m(b(this),K,O,A)})}),b.each(q.children("resources").children(),function(){var a=n(b(this));M=M.concat(a.jsLoads),N=N.concat(a.cssLoads),P+=a.inlineJS,Q+=a.inlineCSS,a.labels&&b.extend(L,a.labels)});var f={dataSources:J,components:K,labels:L};return U||(f.apps={},f.defaultLabels={},f.personalization="server"===S&&y,f.runningUserInfo={},f.version={},f.features={},f.path=window.location.pathname),a.loader.service.meta(f)}).then(function(b){var c=l();return c||V.then(function(c){return N.push(c.themeurl),a.webfonts.load(c.themeinfo),b})}).then(function(f){var g=l();if(g)return g;b.isPlainObject(f)||(f=JSON.parse(f)),s=f;var h,i,j;return f.runningUserInfo&&(h=f.runningUserInfo.userLocale||{},h.monthNames?(i={},["monthNames","monthNamesShort","dayNames","dayNamesShort","dayNamesMin","amPm"].forEach(function(a){i[a]=h[a]})):(i={monthNames:c("month_names_long").split(","),monthNamesShort:c("month_names_short").split(","),dayNames:c("day_names_long").split(","),dayNamesShort:c("day_names_short").split(","),dayNamesMin:c("day_names_min").split(","),amPm:c("am_pm_markers").split(",")},d(h,i)),a.version=f.version,a.time.setUserTimeZone(f.runningUserInfo.timeZone),e.userInfo=f.runningUserInfo,e.isMultiCurrencyOrganization=!1,e.userLocale=h,f.runningUserInfo.isAuthenticated||(S="client"),d(a.time,i),b.datepicker.setDefaults(d({},{closeText:"Done",currentText:"Today",prevText:"Prev",nextText:"Next",weekHeader:"Wk"},h)),d(a.page,{useComponentPacks:!0,currentSiteUrl:location.protocol+"//"+location.host,sitePrefix:"",editable:f.runningUserInfo&&f.runningUserInfo.canEditPages||!1})),j=f.personalizationSettings&&"server"===S?f.personalizationSettings:b.cookie("sk-pf-"+(y||z)),a.personalization.initializeSettings(d(j||{},{mode:S,pageId:y||z})),f.apps&&(e.apps=f.apps),f.labels&&a.label&&a.label.add(f.labels),f.dataSourceTypes&&b.each(f.dataSourceTypes,function(){this.js&&(b.isArray(this.js)?b.each(this.js,function(a,b){M.push(b)}):M.push(this.js))}),f.components&&(b.each(f.components,function(){this.js&&b.isArray(this.js)&&b.each(this.js,function(){k(this,M)}),this.css&&b.isArray(this.css)&&b.each(this.css,function(){k(this,N)})}),a.components={config:a.loader.cache.get.meta().components}),f.features&&(a.features=a.loader.cache.get.meta().features),s.cssLoads&&(N=s.cssLoads.concat(N)),a.page._parametersByPage[E]=d({page:z},D),e.inPlatform(a.constants.LIGHTNING)?(b.each(N,function(a,b){R.push(function(){return e.loadCSS(b,{})})}),b.each(M,function(a,b){R.push(function(){return e.loadJS(b)})}),R.reduce(function(a,b){return a.then(function(){return b()})},b.Deferred().resolve())):(b.each(N,function(a,b){R.push(e.loadCSS(b,{}))}),b.each(M,function(a,b){R.push(e.loadJS(b))}),b.when.all(R))}).then(function(){var c;if(Q&&b('<style type="text/css">'+Q+"</style>").appendTo(document.body),P){if(e.inPlatform(a.constants.LIGHTNING))return c=a.platform.getResourceUrl({name:"core/pageSupportFileService.js",namespace:"skuid"}),e.loadJS(c).then(function(){var b=a.platform.getResourceUrl({name:a.pageSupport.getFileNameForPage(y,z),path:"inlineresources.js",modstamp:w});return e.loadJS({src:b,timeout:1e4}).then(null,function(){throw new Error(["Cannot add Inline Javascript in the Lightning Runtime, ","and no Page Support File was found or there was a timeout."].join(""))})});b("<script>"+P+"<\/script>").appendTo(document.body)}}).then(function(){s.dataSourceTypes&&b.each(s.dataSourceTypes,function(){this.dataSources&&b.each(this.dataSources,function(){new a.dataSource.DataSource(this)})}),U&&a.region.unregisterAll(),b.each(q.children("pageregioncontents").first().children("pageregioncontent"),function(){var c=b(this),d=c.attr("uniqueid");"__header"===d||"__footer"===d?a.region.register(c,z):a.region.register(c)}),T||F||(F=I?I.data?I.data("component"):null:a.component.getByType("skuidpage")[0]);var c=l();return c||(I||(I=b('<div class="nx-page">')),p=a.component.factory({element:I,xmlDefinition:q,options:{uniqueId:E},state:{_pageRecord:{Id:y||z,Name:z,LastModifiedDate:w},isInclude:T,isReplace:U,previousPageComponent:F}}),I.appendTo(G),x[E]=p,p.subscribe("stop.loading",function(){delete x[E],p.unregister()}),p.once("rendered"))}).then(function(){if(delete x[E],a.utils.inPlatform([a.constants.NATIVE])&&!T&&p.get("rendered")){var b=U&&!i.isPopState;window.history[b?"pushState":"replaceState"]({isReplace:!0,pageName:z,parameters:D,routeName:B},"",U?B||a.platform.getPageNavigateUrl(z):window.location.href),document.title=z}}).always(function(){a.NProgress.done()})["catch"](function(a){})},s={componentPack:{},page:{},theme:{},meta:{}},t={add:{componentPack:function(a,b){e.isString(b)&&(b=JSON.parse(b)),s.componentPack[a]=b},page:function(a,b,c){e.isString(b)&&(b=JSON.parse(b)),s.page[a]={xml:c,metadata:b}},theme:function(a,b){e.isString(b)&&(b=JSON.parse(b)),s.theme[a]=b},meta:function(a){e.isString(a)&&(a=JSON.parse(a)),a.apps&&(s.meta.apps=a.apps),a.runningUserInfo&&(s.meta.runningUserInfo=a.runningUserInfo),a.version&&(s.meta.version=a.version),a.components&&(s.meta.components||(s.meta.components={}),b.extend(s.meta.components,a.components)),a.dataSourceTypes&&b.each(a.dataSourceTypes,function(a,c){c.dataSources&&(s.meta.dataSources||(s.meta.dataSources={}),b.extend(s.meta.dataSources,c.dataSources))}),a.labels&&(s.meta.labels||(s.meta.labels={}),b.extend(s.meta.labels,a.labels)),a.features&&(s.meta.features||(s.meta.features={}),b.extend(s.meta.features,a.features))}},get:{componentPack:function(a){return s.componentPack[a]},page:function(a){return s.page[a]},theme:function(a){return s.theme[a]},meta:function(){return s.meta}}},u={componentPack:function(c){var d=t.get.componentPack(c);return d?b.Deferred().resolve(d):a.platform.services.componentPack(c).then(function(a){return t.add.componentPack(c,a),a})},page:function(c,d,e){var f=t.get.page(c||e);return f?b.Deferred().resolve(f):a.platform.services.page(c,d,e).then(function(a){var b=a.data,d=a.metadata;return t.add.page(c||e,d,b),{xml:b,metadata:d}})},theme:function(c){var d=t.get.theme(c);return d?b.Deferred().resolve(d):a.platform.services.theme(c).then(function(a){return t.add.theme(c,a),a})},meta:function(c){var d=t.get.meta(),f={},g={},h={},i={};return c.apps&&d.apps&&(delete c.apps,f.apps=d.apps),c.runningUserInfo&&d.runningUserInfo&&(delete c.runningUserInfo,f.runningUserInfo=d.runningUserInfo),c.version&&d.version&&(delete c.version,f.version=d.version),c.components&&d.components&&(b.each(c.components,function(a,b){d.components[a]||(g[a]=b)}),c.components=g),c.components&&!b.isEmptyObject(c.components)||delete c.components,c.dataSources&&d.dataSources&&(b.each(c.dataSources,function(a,b){d.dataSources[a]||(h[a]=b)}),c.dataSources=h),c.dataSources&&!b.isEmptyObject(c.dataSources)||delete c.dataSources,c.labels&&d.labels&&(b.each(c.labels,function(a,b){d.labels[a]||(i[a]=b)}),c.labels=i),c.labels&&!b.isEmptyObject(c.labels)||delete c.labels,c&&e.size(c)?a.platform.services.meta(c).then(function(a){return t.add.meta(a),b.extend(f,a)}):b.Deferred().resolve(f)},loadDataSourceAndDependencies:function(c){var d,f={},g=[],h=a.dataSource.get(c);return h?b.Deferred().resolve(h).promise():(f[c]={},a.loader.service.meta({dataSources:f}).then(function(a){return d=a,a.dataSourceTypes&&b.each(a.dataSourceTypes,function(){this.js&&(b.isArray(this.js)?b.each(this.js,function(a,b){g.push(e.loadJS(b))}):g.push(e.loadJS(this.js)))}),b.when.all(g)}).then(function(){var e;return b.each(d.dataSourceTypes,function(){this.dataSources&&this.dataSources[c]&&(e=new a.dataSource.DataSource(this.dataSources[c]))}),e}))}};a.loader={load:r,cache:t,service:u}}(window.skuid);